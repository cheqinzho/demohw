/**
 * @sunl-fe/sunlands-live1
 * @version 1.11.0
 * @date 2019-9-20 14:50:18
 */
 var autoFlag = 1;
!function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).SLIVE = t()
}(this, function() {
    "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self && self;
    function e(e) {
        return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e
    }
    function t(e, t) {
        return e(t = {
            exports: {}
        }, t.exports),
        t.exports
    }
    var s = function(e) {
        if (null == e)
            throw TypeError("Can't call method on  " + e);
        return e
    }
      , f = function(e) {
        return Object(s(e))
    }
      , r = {}.hasOwnProperty
      , g = function(e, t) {
        return r.call(e, t)
    }
      , v = t(function(e) {
        var t = e.exports = {
            version: "2.5.6"
        };
        "number" == typeof __e && (__e = t)
    })
      , y = t(function(e) {
        var t = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
        "number" == typeof __g && (__g = t)
    })
      , n = t(function(e) {
        var t = "__core-js_shared__"
          , r = y[t] || (y[t] = {});
        (e.exports = function(e, t) {
            return r[e] || (r[e] = void 0 !== t ? t : {})
        }
        )("versions", []).push({
            version: v.version,
            mode: "pure",
            copyright: "Â© 2018 Denis Pushkarev (zloirock.ru)"
        })
    })
      , i = 0
      , a = Math.random()
      , l = function(e) {
        return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++i + a).toString(36))
    }
      , o = n("keys")
      , u = function(e) {
        return o[e] || (o[e] = l(e))
    }
      , c = u("IE_PROTO")
      , d = Object.prototype
      , b = Object.getPrototypeOf || function(e) {
        return e = f(e),
        g(e, c) ? e[c] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? d : null
    }
      , h = function(e) {
        if ("function" != typeof e)
            throw TypeError(e + " is not a function!");
        return e
    }
      , m = function(i, n, e) {
        if (h(i),
        void 0 === n)
            return i;
        switch (e) {
        case 1:
            return function(e) {
                return i.call(n, e)
            }
            ;
        case 2:
            return function(e, t) {
                return i.call(n, e, t)
            }
            ;
        case 3:
            return function(e, t, r) {
                return i.call(n, e, t, r)
            }
        }
        return function() {
            return i.apply(n, arguments)
        }
    }
      , p = function(e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
    }
      , _ = function(e) {
        if (!p(e))
            throw TypeError(e + " is not an object!");
        return e
    }
      , T = function(e) {
        try {
            return !!e()
        } catch (e) {
            return !0
        }
    }
      , E = !T(function() {
        return 7 != Object.defineProperty({}, "a", {
            get: function() {
                return 7
            }
        }).a
    })
      , S = y.document
      , A = p(S) && p(S.createElement)
      , k = function(e) {
        return A ? S.createElement(e) : {}
    }
      , w = !E && !T(function() {
        return 7 != Object.defineProperty(k("div"), "a", {
            get: function() {
                return 7
            }
        }).a
    })
      , R = function(e, t) {
        if (!p(e))
            return e;
        var r, i;
        if (t && "function" == typeof (r = e.toString) && !p(i = r.call(e)))
            return i;
        if ("function" == typeof (r = e.valueOf) && !p(i = r.call(e)))
            return i;
        if (!t && "function" == typeof (r = e.toString) && !p(i = r.call(e)))
            return i;
        throw TypeError("Can't convert object to primitive value")
    }
      , L = Object.defineProperty
      , I = {
        f: E ? Object.defineProperty : function(e, t, r) {
            if (_(e),
            t = R(t, !0),
            _(r),
            w)
                try {
                    return L(e, t, r)
                } catch (e) {}
            if ("get"in r || "set"in r)
                throw TypeError("Accessors not supported!");
            return "value"in r && (e[t] = r.value),
            e
        }
    }
      , D = function(e, t) {
        return {
            enumerable: !(1 & e),
            configurable: !(2 & e),
            writable: !(4 & e),
            value: t
        }
    }
      , C = E ? function(e, t, r) {
        return I.f(e, t, D(1, r))
    }
    : function(e, t, r) {
        return e[t] = r,
        e
    }
      , P = "prototype"
      , O = function(e, t, r) {
        var i, n, a, o = e & O.F, s = e & O.G, l = e & O.S, u = e & O.P, c = e & O.B, d = e & O.W, f = s ? v : v[t] || (v[t] = {}), h = f[P], p = s ? y : l ? y[t] : (y[t] || {})[P];
        for (i in s && (r = t),
        r)
            (n = !o && p && void 0 !== p[i]) && g(f, i) || (a = n ? p[i] : r[i],
            f[i] = s && "function" != typeof p[i] ? r[i] : c && n ? m(a, y) : d && p[i] == a ? function(i) {
                var e = function(e, t, r) {
                    if (this instanceof i) {
                        switch (arguments.length) {
                        case 0:
                            return new i;
                        case 1:
                            return new i(e);
                        case 2:
                            return new i(e,t)
                        }
                        return new i(e,t,r)
                    }
                    return i.apply(this, arguments)
                };
                return e[P] = i[P],
                e
            }(a) : u && "function" == typeof a ? m(Function.call, a) : a,
            u && ((f.virtual || (f.virtual = {}))[i] = a,
            e & O.R && h && !h[i] && C(h, i, a)))
    };
    O.F = 1,
    O.G = 2,
    O.S = 4,
    O.P = 8,
    O.B = 16,
    O.W = 32,
    O.U = 64,
    O.R = 128;
    var M = O
      , x = function(e, t) {
        var r = (v.Object || {})[e] || Object[e]
          , i = {};
        i[e] = t(r),
        M(M.S + M.F * T(function() {
            r(1)
        }), "Object", i)
    };
    x("getPrototypeOf", function() {
        return function(e) {
            return b(f(e))
        }
    });
    var F, N = v.Object.getPrototypeOf, B = e(t(function(e) {
        e.exports = {
            default: N,
            __esModule: !0
        }
    })), j = Math.ceil, U = Math.floor, G = function(e) {
        return isNaN(e = +e) ? 0 : (0 < e ? U : j)(e)
    }, H = C, q = {}, K = {}.toString, V = function(e) {
        return K.call(e).slice(8, -1)
    }, Y = Object("z").propertyIsEnumerable(0) ? Object : function(e) {
        return "String" == V(e) ? e.split("") : Object(e)
    }
    , W = function(e) {
        return Y(s(e))
    }, z = Math.min, X = function(e) {
        return 0 < e ? z(G(e), 9007199254740991) : 0
    }, Q = Math.max, Z = Math.min, J = (F = !1,
    function(e, t, r) {
        var i, n, a, o = W(e), s = X(o.length), l = (n = s,
        (i = G(i = r)) < 0 ? Q(i + n, 0) : Z(i, n));
        if (F && t != t) {
            for (; l < s; )
                if ((a = o[l++]) != a)
                    return !0
        } else
            for (; l < s; l++)
                if ((F || l in o) && o[l] === t)
                    return F || l || 0;
        return !F && -1
    }
    ), $ = u("IE_PROTO"), ee = function(e, t) {
        var r, i = W(e), n = 0, a = [];
        for (r in i)
            r != $ && g(i, r) && a.push(r);
        for (; n < t.length; )
            g(i, r = t[n++]) && (~J(a, r) || a.push(r));
        return a
    }, te = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","), re = Object.keys || function(e) {
        return ee(e, te)
    }
    , ie = E ? Object.defineProperties : function(e, t) {
        _(e);
        for (var r, i = re(t), n = i.length, a = 0; a < n; )
            I.f(e, r = i[a++], t[r]);
        return e
    }
    , ne = y.document, ae = ne && ne.documentElement, oe = u("IE_PROTO"), se = function() {}, le = "prototype", ue = function() {
        var e, t = k("iframe"), r = te.length;
        for (t.style.display = "none",
        ae.appendChild(t),
        t.src = "javascript:",
        (e = t.contentWindow.document).open(),
        e.write("<script>document.F=Object<\/script>"),
        e.close(),
        ue = e.F; r--; )
            delete ue[le][te[r]];
        return ue()
    }, ce = Object.create || function(e, t) {
        var r;
        return null !== e ? (se[le] = _(e),
        r = new se,
        se[le] = null,
        r[oe] = e) : r = ue(),
        void 0 === t ? r : ie(r, t)
    }
    , de = t(function(e) {
        var t = n("wks")
          , r = y.Symbol
          , i = "function" == typeof r;
        (e.exports = function(e) {
            return t[e] || (t[e] = i && r[e] || (i ? r : l)("Symbol." + e))
        }
        ).store = t
    }), fe = I.f, he = de("toStringTag"), pe = function(e, t, r) {
        e && !g(e = r ? e : e.prototype, he) && fe(e, he, {
            configurable: !0,
            value: t
        })
    }, ge = {};
    C(ge, de("iterator"), function() {
        return this
    });
    var ve, ye = de("iterator"), me = !([].keys && "next"in [].keys()), _e = "values", Te = function() {
        return this
    }, be = function(e, t, r, i, n, a, o) {
        var s, l;
        l = t,
        (s = r).prototype = ce(ge, {
            next: D(1, i)
        }),
        pe(s, l + " Iterator");
        var u, c, d, f = function(e) {
            if (!me && e in v)
                return v[e];
            switch (e) {
            case "keys":
            case _e:
                return function() {
                    return new r(this,e)
                }
            }
            return function() {
                return new r(this,e)
            }
        }, h = t + " Iterator", p = n == _e, g = !1, v = e.prototype, y = v[ye] || v["@@iterator"] || n && v[n], m = y || f(n), _ = n ? p ? f("entries") : m : void 0, T = "Array" == t && v.entries || y;
        if (T && (d = b(T.call(new e))) !== Object.prototype && d.next && pe(d, h, !0),
        p && y && y.name !== _e && (g = !0,
        m = function() {
            return y.call(this)
        }
        ),
        o && (me || g || !v[ye]) && C(v, ye, m),
        q[t] = m,
        q[h] = Te,
        n)
            if (u = {
                values: p ? m : f(_e),
                keys: a ? m : f("keys"),
                entries: _
            },
            o)
                for (c in u)
                    c in v || H(v, c, u[c]);
            else
                M(M.P + M.F * (me || g), t, u);
        return u
    }, Ee = (ve = !0,
    function(e, t) {
        var r, i, n = s(e) + "", a = G(t), o = n.length;
        return a < 0 || o <= a ? ve ? "" : void 0 : (r = n.charCodeAt(a)) < 55296 || 56319 < r || a + 1 === o || (i = n.charCodeAt(a + 1)) < 56320 || 57343 < i ? ve ? n.charAt(a) : r : ve ? n.slice(a, a + 2) : i - 56320 + (r - 55296 << 10) + 65536
    }
    );
    be(String, "String", function(e) {
        this._t = e + "",
        this._i = 0
    }, function() {
        var e, t = this._t, r = this._i;
        return t.length <= r ? {
            value: void 0,
            done: !0
        } : (e = Ee(t, r),
        this._i += e.length,
        {
            value: e,
            done: !1
        })
    });
    var Se = function(e, t) {
        return {
            value: t,
            done: !!e
        }
    };
    be(Array, "Array", function(e, t) {
        this._t = W(e),
        this._i = 0,
        this._k = t
    }, function() {
        var e = this._t
          , t = this._k
          , r = this._i++;
        return !e || e.length <= r ? (this._t = void 0,
        Se(1)) : Se(0, "keys" == t ? r : "values" == t ? e[r] : [r, e[r]])
    }, "values");
    q.Arguments = q.Array;
    for (var Ae = de("toStringTag"), ke = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), we = 0; we < ke.length; we++) {
        var Re = ke[we]
          , Le = y[Re]
          , Ie = Le && Le.prototype;
        Ie && !Ie[Ae] && C(Ie, Ae, Re),
        q[Re] = q.Array
    }
    var De = {
        f: de
    }
      , Ce = De.f("iterator")
      , Pe = t(function(e) {
        e.exports = {
            default: Ce,
            __esModule: !0
        }
    });
    e(Pe);
    var Oe = t(function(e) {
        var r = l("meta")
          , t = I.f
          , i = 0
          , n = Object.isExtensible || function() {
            return !0
        }
          , a = !T(function() {
            return n(Object.preventExtensions({}))
        })
          , o = function(e) {
            t(e, r, {
                value: {
                    i: "O" + ++i,
                    w: {}
                }
            })
        }
          , s = e.exports = {
            KEY: r,
            NEED: !1,
            fastKey: function(e, t) {
                if (!p(e))
                    return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
                if (!g(e, r)) {
                    if (!n(e))
                        return "F";
                    if (!t)
                        return "E";
                    o(e)
                }
                return e[r].i
            },
            getWeak: function(e, t) {
                if (!g(e, r)) {
                    if (!n(e))
                        return !0;
                    if (!t)
                        return !1;
                    o(e)
                }
                return e[r].w
            },
            onFreeze: function(e) {
                return a && s.NEED && n(e) && !g(e, r) && o(e),
                e
            }
        }
    })
      , Me = I.f
      , xe = function(e) {
        var t = v.Symbol || (v.Symbol = {});
        "_" == e.charAt(0) || e in t || Me(t, e, {
            value: De.f(e)
        })
    }
      , Fe = {
        f: Object.getOwnPropertySymbols
    }
      , Ne = {
        f: {}.propertyIsEnumerable
    }
      , Be = Array.isArray || function(e) {
        return "Array" == V(e)
    }
      , je = te.concat("length", "prototype")
      , Ue = {
        f: Object.getOwnPropertyNames || function(e) {
            return ee(e, je)
        }
    }
      , Ge = Ue.f
      , He = {}.toString
      , qe = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : []
      , Ke = {
        f: function(e) {
            return qe && "[object Window]" == He.call(e) ? function(e) {
                try {
                    return Ge(e)
                } catch (e) {
                    return qe.slice()
                }
            }(e) : Ge(W(e))
        }
    }
      , Ve = Object.getOwnPropertyDescriptor
      , Ye = {
        f: E ? Ve : function(e, t) {
            if (e = W(e),
            t = R(t, !0),
            w)
                try {
                    return Ve(e, t)
                } catch (e) {}
            if (g(e, t))
                return D(!Ne.f.call(e, t), e[t])
        }
    }
      , We = Oe.KEY
      , ze = Ye.f
      , Xe = I.f
      , Qe = Ke.f
      , Ze = y.Symbol
      , Je = y.JSON
      , $e = Je && Je.stringify
      , et = "prototype"
      , tt = de("_hidden")
      , rt = de("toPrimitive")
      , it = {}.propertyIsEnumerable
      , nt = n("symbol-registry")
      , at = n("symbols")
      , ot = n("op-symbols")
      , st = Object[et]
      , lt = "function" == typeof Ze
      , ut = y.QObject
      , ct = !ut || !ut[et] || !ut[et].findChild
      , dt = E && T(function() {
        return 7 != ce(Xe({}, "a", {
            get: function() {
                return Xe(this, "a", {
                    value: 7
                }).a
            }
        })).a
    }) ? function(e, t, r) {
        var i = ze(st, t);
        i && delete st[t],
        Xe(e, t, r),
        i && e !== st && Xe(st, t, i)
    }
    : Xe
      , ft = function(e) {
        var t = at[e] = ce(Ze[et]);
        return t._k = e,
        t
    }
      , ht = lt && "symbol" == typeof Ze.iterator ? function(e) {
        return "symbol" == typeof e
    }
    : function(e) {
        return e instanceof Ze
    }
      , pt = function(e, t, r) {
        return e === st && pt(ot, t, r),
        _(e),
        t = R(t, !0),
        _(r),
        g(at, t) ? (r.enumerable ? (g(e, tt) && e[tt][t] && (e[tt][t] = !1),
        r = ce(r, {
            enumerable: D(0, !1)
        })) : (g(e, tt) || Xe(e, tt, D(1, {})),
        e[tt][t] = !0),
        dt(e, t, r)) : Xe(e, t, r)
    }
      , gt = function(e, t) {
        _(e);
        for (var r, i = function(e) {
            var t = re(e)
              , r = Fe.f;
            if (r)
                for (var i, n = r(e), a = Ne.f, o = 0; o < n.length; )
                    a.call(e, i = n[o++]) && t.push(i);
            return t
        }(t = W(t)), n = 0, a = i.length; n < a; )
            pt(e, r = i[n++], t[r]);
        return e
    }
      , vt = function(e) {
        var t = it.call(this, e = R(e, !0));
        return !(this === st && g(at, e) && !g(ot, e)) && (!(t || !g(this, e) || !g(at, e) || g(this, tt) && this[tt][e]) || t)
    }
      , yt = function(e, t) {
        if (e = W(e),
        t = R(t, !0),
        e !== st || !g(at, t) || g(ot, t)) {
            var r = ze(e, t);
            return !r || !g(at, t) || g(e, tt) && e[tt][t] || (r.enumerable = !0),
            r
        }
    }
      , mt = function(e) {
        for (var t, r = Qe(W(e)), i = [], n = 0; n < r.length; )
            g(at, t = r[n++]) || t == tt || t == We || i.push(t);
        return i
    }
      , _t = function(e) {
        for (var t, r = e === st, i = Qe(r ? ot : W(e)), n = [], a = 0; a < i.length; )
            !g(at, t = i[a++]) || r && !g(st, t) || n.push(at[t]);
        return n
    };
    lt || (H((Ze = function() {
        if (this instanceof Ze)
            throw TypeError("Symbol is not a constructor!");
        var t = l(0 < arguments.length ? arguments[0] : void 0)
          , r = function(e) {
            this === st && r.call(ot, e),
            g(this, tt) && g(this[tt], t) && (this[tt][t] = !1),
            dt(this, t, D(1, e))
        };
        return E && ct && dt(st, t, {
            configurable: !0,
            set: r
        }),
        ft(t)
    }
    )[et], "toString", function() {
        return this._k
    }),
    Ye.f = yt,
    I.f = pt,
    Ue.f = Ke.f = mt,
    Ne.f = vt,
    Fe.f = _t,
    De.f = function(e) {
        return ft(de(e))
    }
    ),
    M(M.G + M.W + M.F * !lt, {
        Symbol: Ze
    });
    for (var Tt = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), bt = 0; bt < Tt.length; )
        de(Tt[bt++]);
    for (var Et = re(de.store), St = 0; St < Et.length; )
        xe(Et[St++]);
    M(M.S + M.F * !lt, "Symbol", {
        for: function(e) {
            return g(nt, e += "") ? nt[e] : nt[e] = Ze(e)
        },
        keyFor: function(e) {
            if (!ht(e))
                throw TypeError(e + " is not a symbol!");
            for (var t in nt)
                if (nt[t] === e)
                    return t
        },
        useSetter: function() {
            ct = !0
        },
        useSimple: function() {
            ct = !1
        }
    }),
    M(M.S + M.F * !lt, "Object", {
        create: function(e, t) {
            return void 0 === t ? ce(e) : gt(ce(e), t)
        },
        defineProperty: pt,
        defineProperties: gt,
        getOwnPropertyDescriptor: yt,
        getOwnPropertyNames: mt,
        getOwnPropertySymbols: _t
    }),
    Je && M(M.S + M.F * (!lt || T(function() {
        var e = Ze();
        return "[null]" != $e([e]) || "{}" != $e({
            a: e
        }) || "{}" != $e(Object(e))
    })), "JSON", {
        stringify: function(e) {
            for (var t, r, i = [e], n = 1; n < arguments.length; )
                i.push(arguments[n++]);
            if (r = t = i[1],
            (p(t) || void 0 !== e) && !ht(e))
                return Be(t) || (t = function(e, t) {
                    if ("function" == typeof r && (t = r.call(this, e, t)),
                    !ht(t))
                        return t
                }
                ),
                i[1] = t,
                $e.apply(Je, i)
        }
    }),
    Ze[et][rt] || C(Ze[et], rt, Ze[et].valueOf),
    pe(Ze, "Symbol"),
    pe(Math, "Math", !0),
    pe(y.JSON, "JSON", !0),
    xe("asyncIterator"),
    xe("observable");
    var At = v.Symbol
      , kt = t(function(e) {
        e.exports = {
            default: At,
            __esModule: !0
        }
    });
    e(kt);
    var wt = t(function(e, t) {
        t.__esModule = !0;
        var r = a(Pe)
          , i = a(kt)
          , n = "function" == typeof i.default && "symbol" == typeof r.default ? function(e) {
            return typeof e
        }
        : function(e) {
            return e && "function" == typeof i.default && e.constructor === i.default && e !== i.default.prototype ? "symbol" : typeof e
        }
        ;
        function a(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.default = "function" == typeof i.default && "symbol" === n(r.default) ? function(e) {
            return void 0 === e ? "undefined" : n(e)
        }
        : function(e) {
            return e && "function" == typeof i.default && e.constructor === i.default && e !== i.default.prototype ? "symbol" : void 0 === e ? "undefined" : n(e)
        }
    })
      , Rt = e(wt)
      , Lt = e(t(function(e, t) {
        t.__esModule = !0;
        var r, i = (r = wt) && r.__esModule ? r : {
            default: r
        };
        t.default = function(e, t) {
            if (!e)
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" !== (void 0 === t ? "undefined" : (0,
            i.default)(t)) && "function" != typeof t ? e : t
        }
    }))
      , It = function(e, t) {
        if (_(e),
        !p(t) && null !== t)
            throw TypeError(t + ": can't set as prototype!")
    }
      , Dt = {
        set: Object.setPrototypeOf || ("__proto__"in {} ? function(e, r, i) {
            try {
                (i = m(Function.call, Ye.f(Object.prototype, "__proto__").set, 2))(e, []),
                r = !(e instanceof Array)
            } catch (e) {
                r = !0
            }
            return function(e, t) {
                return It(e, t),
                r ? e.__proto__ = t : i(e, t),
                e
            }
        }({}, !1) : void 0),
        check: It
    };
    M(M.S, "Object", {
        setPrototypeOf: Dt.set
    });
    var Ct = v.Object.setPrototypeOf
      , Pt = t(function(e) {
        e.exports = {
            default: Ct,
            __esModule: !0
        }
    });
    e(Pt),
    M(M.S, "Object", {
        create: ce
    });
    var Ot = v.Object
      , Mt = function(e, t) {
        return Ot.create(e, t)
    }
      , xt = t(function(e) {
        e.exports = {
            default: Mt,
            __esModule: !0
        }
    });
    e(xt);
    var Ft = e(t(function(e, t) {
        t.__esModule = !0;
        var r = a(Pt)
          , i = a(xt)
          , n = a(wt);
        function a(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.default = function(e, t) {
            if ("function" != typeof t && null !== t)
                throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : (0,
                n.default)(t)));
            e.prototype = (0,
            i.default)(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }),
            t && (r.default ? (0,
            r.default)(e, t) : e.__proto__ = t)
        }
    }))
      , Nt = t(function(C) {
        !function(e) {
            var l, t = Object.prototype, u = t.hasOwnProperty, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", i = r.asyncIterator || "@@asyncIterator", a = r.toStringTag || "@@toStringTag", o = e.regeneratorRuntime;
            if (o)
                C.exports = o;
            else {
                (o = e.regeneratorRuntime = C.exports).wrap = m;
                var c = "suspendedStart"
                  , d = "suspendedYield"
                  , f = "executing"
                  , h = "completed"
                  , p = {}
                  , s = {};
                s[n] = function() {
                    return this
                }
                ;
                var g = Object.getPrototypeOf
                  , v = g && g(g(I([])));
                v && v !== t && u.call(v, n) && (s = v);
                var y = E.prototype = T.prototype = Object.create(s);
                b.prototype = y.constructor = E,
                E.constructor = b,
                E[a] = b.displayName = "GeneratorFunction",
                o.isGeneratorFunction = function(e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === b || "GeneratorFunction" === (t.displayName || t.name))
                }
                ,
                o.mark = function(e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, E) : (e.__proto__ = E,
                    a in e || (e[a] = "GeneratorFunction")),
                    e.prototype = Object.create(y),
                    e
                }
                ,
                o.awrap = function(e) {
                    return {
                        __await: e
                    }
                }
                ,
                S(A.prototype),
                A.prototype[i] = function() {
                    return this
                }
                ,
                o.AsyncIterator = A,
                o.async = function(e, t, r, i) {
                    var n = new A(m(e, t, r, i));
                    return o.isGeneratorFunction(t) ? n : n.next().then(function(e) {
                        return e.done ? e.value : n.next()
                    })
                }
                ,
                S(y),
                y[a] = "Generator",
                y[n] = function() {
                    return this
                }
                ,
                y.toString = function() {
                    return "[object Generator]"
                }
                ,
                o.keys = function(r) {
                    var i = [];
                    for (var e in r)
                        i.push(e);
                    return i.reverse(),
                    function e() {
                        for (; i.length; ) {
                            var t = i.pop();
                            if (t in r)
                                return e.value = t,
                                e.done = !1,
                                e
                        }
                        return e.done = !0,
                        e
                    }
                }
                ,
                o.values = I,
                L.prototype = {
                    constructor: L,
                    reset: function(e) {
                        if (this.prev = 0,
                        this.next = 0,
                        this.sent = this._sent = l,
                        this.done = !1,
                        this.delegate = null,
                        this.method = "next",
                        this.arg = l,
                        this.tryEntries.forEach(R),
                        !e)
                            for (var t in this)
                                "t" === t.charAt(0) && u.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = l)
                    },
                    stop: function() {
                        this.done = !0;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type)
                            throw e.arg;
                        return this.rval
                    },
                    dispatchException: function(r) {
                        if (this.done)
                            throw r;
                        var i = this;
                        function e(e, t) {
                            return a.type = "throw",
                            a.arg = r,
                            i.next = e,
                            t && (i.method = "next",
                            i.arg = l),
                            !!t
                        }
                        for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                            var n = this.tryEntries[t]
                              , a = n.completion;
                            if ("root" === n.tryLoc)
                                return e("end");
                            if (n.tryLoc <= this.prev) {
                                var o = u.call(n, "catchLoc")
                                  , s = u.call(n, "finallyLoc");
                                if (o && s) {
                                    if (this.prev < n.catchLoc)
                                        return e(n.catchLoc, !0);
                                    if (this.prev < n.finallyLoc)
                                        return e(n.finallyLoc)
                                } else if (o) {
                                    if (this.prev < n.catchLoc)
                                        return e(n.catchLoc, !0)
                                } else {
                                    if (!s)
                                        throw Error("try statement without catch or finally");
                                    if (this.prev < n.finallyLoc)
                                        return e(n.finallyLoc)
                                }
                            }
                        }
                    },
                    abrupt: function(e, t) {
                        for (var r = this.tryEntries.length - 1; 0 <= r; --r) {
                            var i = this.tryEntries[r];
                            if (i.tryLoc <= this.prev && u.call(i, "finallyLoc") && this.prev < i.finallyLoc) {
                                var n = i;
                                break
                            }
                        }
                        n && ("break" === e || "continue" === e) && n.tryLoc <= t && t <= n.finallyLoc && (n = null);
                        var a = n ? n.completion : {};
                        return a.type = e,
                        a.arg = t,
                        n ? (this.method = "next",
                        this.next = n.finallyLoc,
                        p) : this.complete(a)
                    },
                    complete: function(e, t) {
                        if ("throw" === e.type)
                            throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                        this.method = "return",
                        this.next = "end") : "normal" === e.type && t && (this.next = t),
                        p
                    },
                    finish: function(e) {
                        for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                            var r = this.tryEntries[t];
                            if (r.finallyLoc === e)
                                return this.complete(r.completion, r.afterLoc),
                                R(r),
                                p
                        }
                    },
                    catch: function(e) {
                        for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                            var r = this.tryEntries[t];
                            if (r.tryLoc === e) {
                                var i = r.completion;
                                if ("throw" === i.type) {
                                    var n = i.arg;
                                    R(r)
                                }
                                return n
                            }
                        }
                        throw Error("illegal catch attempt")
                    },
                    delegateYield: function(e, t, r) {
                        return this.delegate = {
                            iterator: I(e),
                            resultName: t,
                            nextLoc: r
                        },
                        "next" === this.method && (this.arg = l),
                        p
                    }
                }
            }
            function m(e, t, r, i) {
                var a, o, s, l, n = Object.create((t && t.prototype instanceof T ? t : T).prototype), u = new L(i || []);
                return n._invoke = (a = e,
                o = r,
                s = u,
                l = c,
                function(e, t) {
                    if (l === f)
                        throw Error("Generator is already running");
                    if (l === h) {
                        if ("throw" === e)
                            throw t;
                        return D()
                    }
                    for (s.method = e,
                    s.arg = t; ; ) {
                        var r = s.delegate;
                        if (r) {
                            var i = k(r, s);
                            if (i) {
                                if (i === p)
                                    continue;
                                return i
                            }
                        }
                        if ("next" === s.method)
                            s.sent = s._sent = s.arg;
                        else if ("throw" === s.method) {
                            if (l === c)
                                throw l = h,
                                s.arg;
                            s.dispatchException(s.arg)
                        } else
                            "return" === s.method && s.abrupt("return", s.arg);
                        l = f;
                        var n = _(a, o, s);
                        if ("normal" === n.type) {
                            if (l = s.done ? h : d,
                            n.arg === p)
                                continue;
                            return {
                                value: n.arg,
                                done: s.done
                            }
                        }
                        "throw" === n.type && (l = h,
                        s.method = "throw",
                        s.arg = n.arg)
                    }
                }
                ),
                n
            }
            function _(e, t, r) {
                try {
                    return {
                        type: "normal",
                        arg: e.call(t, r)
                    }
                } catch (e) {
                    return {
                        type: "throw",
                        arg: e
                    }
                }
            }
            function T() {}
            function b() {}
            function E() {}
            function S(e) {
                ["next", "throw", "return"].forEach(function(t) {
                    e[t] = function(e) {
                        return this._invoke(t, e)
                    }
                })
            }
            function A(l) {
                var t;
                this._invoke = function(r, i) {
                    function e() {
                        return new Promise(function(e, t) {
                            !function t(e, r, i, n) {
                                var a = _(l[e], l, r);
                                if ("throw" !== a.type) {
                                    var o = a.arg
                                      , s = o.value;
                                    return s && "object" == typeof s && u.call(s, "__await") ? Promise.resolve(s.__await).then(function(e) {
                                        t("next", e, i, n)
                                    }, function(e) {
                                        t("throw", e, i, n)
                                    }) : Promise.resolve(s).then(function(e) {
                                        o.value = e,
                                        i(o)
                                    }, n)
                                }
                                n(a.arg)
                            }(r, i, e, t)
                        }
                        )
                    }
                    return t = t ? t.then(e, e) : e()
                }
            }
            function k(e, t) {
                var r = e.iterator[t.method];
                if (r === l) {
                    if (t.delegate = null,
                    "throw" === t.method) {
                        if (e.iterator.return && (t.method = "return",
                        t.arg = l,
                        k(e, t),
                        "throw" === t.method))
                            return p;
                        t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a 'throw' method")
                    }
                    return p
                }
                var i = _(r, e.iterator, t.arg);
                if ("throw" === i.type)
                    return t.method = "throw",
                    t.arg = i.arg,
                    t.delegate = null,
                    p;
                var n = i.arg;
                return n ? n.done ? (t[e.resultName] = n.value,
                t.next = e.nextLoc,
                "return" !== t.method && (t.method = "next",
                t.arg = l),
                t.delegate = null,
                p) : n : (t.method = "throw",
                t.arg = new TypeError("iterator result is not an object"),
                t.delegate = null,
                p)
            }
            function w(e) {
                var t = {
                    tryLoc: e[0]
                };
                1 in e && (t.catchLoc = e[1]),
                2 in e && (t.finallyLoc = e[2],
                t.afterLoc = e[3]),
                this.tryEntries.push(t)
            }
            function R(e) {
                var t = e.completion || {};
                t.type = "normal",
                delete t.arg,
                e.completion = t
            }
            function L(e) {
                this.tryEntries = [{
                    tryLoc: "root"
                }],
                e.forEach(w, this),
                this.reset(!0)
            }
            function I(t) {
                if (t) {
                    var e = t[n];
                    if (e)
                        return e.call(t);
                    if ("function" == typeof t.next)
                        return t;
                    if (!isNaN(t.length)) {
                        var r = -1
                          , i = function e() {
                            for (; ++r < t.length; )
                                if (u.call(t, r))
                                    return e.value = t[r],
                                    e.done = !1,
                                    e;
                            return e.value = l,
                            e.done = !0,
                            e
                        };
                        return i.next = i
                    }
                }
                return {
                    next: D
                }
            }
            function D() {
                return {
                    value: l,
                    done: !0
                }
            }
        }(function() {
            return this
        }() || Function("return this")())
    })
      , Bt = function() {
        return this
    }() || Function("return this")()
      , jt = Bt.regeneratorRuntime && 0 <= Object.getOwnPropertyNames(Bt).indexOf("regeneratorRuntime")
      , Ut = jt && Bt.regeneratorRuntime;
    Bt.regeneratorRuntime = void 0;
    var Gt = Nt;
    if (jt)
        Bt.regeneratorRuntime = Ut;
    else
        try {
            delete Bt.regeneratorRuntime
        } catch (e) {
            Bt.regeneratorRuntime = void 0
        }
    var Ht, qt, Kt, Vt = Gt, Yt = de("toStringTag"), Wt = "Arguments" == V(function() {
        return arguments
    }()), zt = function(e) {
        var t, r, i;
        return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (r = function(e, t) {
            try {
                return e[t]
            } catch (e) {}
        }(t = Object(e), Yt)) ? r : Wt ? V(t) : "Object" == (i = V(t)) && "function" == typeof t.callee ? "Arguments" : i
    }, Xt = function(t, e, r, i) {
        try {
            return i ? e(_(r)[0], r[1]) : e(r)
        } catch (e) {
            var n = t.return;
            throw void 0 !== n && _(n.call(t)),
            e
        }
    }, Qt = de("iterator"), Zt = Array.prototype, Jt = function(e) {
        return void 0 !== e && (q.Array === e || Zt[Qt] === e)
    }, $t = de("iterator"), er = v.getIteratorMethod = function(e) {
        if (null != e)
            return e[$t] || e["@@iterator"] || q[zt(e)]
    }
    , tr = t(function(e) {
        var f = {}
          , h = {}
          , t = e.exports = function(e, t, r, i, n) {
            var a, o, s, l, u = n ? function() {
                return e
            }
            : er(e), c = m(r, i, t ? 2 : 1), d = 0;
            if ("function" != typeof u)
                throw TypeError(e + " is not iterable!");
            if (Jt(u)) {
                for (a = X(e.length); d < a; d++)
                    if ((l = t ? c(_(o = e[d])[0], o[1]) : c(e[d])) === f || l === h)
                        return l
            } else
                for (s = u.call(e); !(o = s.next()).done; )
                    if ((l = Xt(s, c, o.value, t)) === f || l === h)
                        return l
        }
        ;
        t.BREAK = f,
        t.RETURN = h
    }), rr = de("species"), ir = function(e, t) {
        var r, i = _(e).constructor;
        return void 0 === i || null == (r = _(i)[rr]) ? t : h(r)
    }, nr = y.process, ar = y.setImmediate, or = y.clearImmediate, sr = y.MessageChannel, lr = y.Dispatch, ur = 0, cr = {}, dr = "onreadystatechange", fr = function() {
        var e = +this;
        if (cr.hasOwnProperty(e)) {
            var t = cr[e];
            delete cr[e],
            t()
        }
    }, hr = function(e) {
        fr.call(e.data)
    };
    ar && or || (ar = function(e) {
        for (var t = [], r = 1; r < arguments.length; )
            t.push(arguments[r++]);
        return cr[++ur] = function() {
            !function(e, t, r) {
                var i = void 0 === r;
                switch (t.length) {
                case 0:
                    return i ? e() : e.call(r);
                case 1:
                    return i ? e(t[0]) : e.call(r, t[0]);
                case 2:
                    return i ? e(t[0], t[1]) : e.call(r, t[0], t[1]);
                case 3:
                    return i ? e(t[0], t[1], t[2]) : e.call(r, t[0], t[1], t[2]);
                case 4:
                    return i ? e(t[0], t[1], t[2], t[3]) : e.call(r, t[0], t[1], t[2], t[3])
                }
                e.apply(r, t)
            }("function" == typeof e ? e : Function(e), t)
        }
        ,
        Ht(ur),
        ur
    }
    ,
    or = function(e) {
        delete cr[e]
    }
    ,
    "process" == V(nr) ? Ht = function(e) {
        nr.nextTick(m(fr, e, 1))
    }
    : lr && lr.now ? Ht = function(e) {
        lr.now(m(fr, e, 1))
    }
    : sr ? (Kt = (qt = new sr).port2,
    qt.port1.onmessage = hr,
    Ht = m(Kt.postMessage, Kt, 1)) : y.addEventListener && "function" == typeof postMessage && !y.importScripts ? (Ht = function(e) {
        y.postMessage(e + "", "*")
    }
    ,
    y.addEventListener("message", hr, !1)) : Ht = dr in k("script") ? function(e) {
        ae.appendChild(k("script"))[dr] = function() {
            ae.removeChild(this),
            fr.call(e)
        }
    }
    : function(e) {
        setTimeout(m(fr, e, 1), 0)
    }
    );
    var pr = {
        set: ar,
        clear: or
    }
      , gr = pr.set
      , vr = y.MutationObserver || y.WebKitMutationObserver
      , yr = y.process
      , mr = y.Promise
      , _r = "process" == V(yr);
    function Tr(e) {
        var r, i;
        this.promise = new e(function(e, t) {
            if (void 0 !== r || void 0 !== i)
                throw TypeError("Bad Promise constructor");
            r = e,
            i = t
        }
        ),
        this.resolve = h(r),
        this.reject = h(i)
    }
    var br = {
        f: function(e) {
            return new Tr(e)
        }
    }
      , Er = function(e) {
        try {
            return {
                e: !1,
                v: e()
            }
        } catch (e) {
            return {
                e: !0,
                v: e
            }
        }
    }
      , Sr = y.navigator
      , Ar = Sr && Sr.userAgent || ""
      , kr = function(e, t) {
        if (_(e),
        p(t) && t.constructor === e)
            return t;
        var r = br.f(e);
        return (0,
        r.resolve)(t),
        r.promise
    }
      , wr = de("species")
      , Rr = de("iterator")
      , Lr = !1;
    try {
        [7][Rr]().return = function() {
            Lr = !0
        }
    } catch (e) {}
    var Ir, Dr, Cr, Pr, Or, Mr, xr = function(e, t) {
        if (!t && !Lr)
            return !1;
        var r = !1;
        try {
            var i = [7]
              , n = i[Rr]();
            n.next = function() {
                return {
                    done: r = !0
                }
            }
            ,
            i[Rr] = function() {
                return n
            }
            ,
            e(i)
        } catch (e) {}
        return r
    }, Fr = pr.set, Nr = function() {
        var r, i, n, e = function() {
            var e, t;
            for (_r && (e = yr.domain) && e.exit(); r; ) {
                t = r.fn,
                r = r.next;
                try {
                    t()
                } catch (e) {
                    throw r ? n() : i = void 0,
                    e
                }
            }
            i = void 0,
            e && e.enter()
        };
        if (_r)
            n = function() {
                yr.nextTick(e)
            }
            ;
        else if (!vr || y.navigator && y.navigator.standalone)
            if (mr && mr.resolve) {
                var t = mr.resolve(void 0);
                n = function() {
                    t.then(e)
                }
            } else
                n = function() {
                    gr.call(y, e)
                }
                ;
        else {
            var a = !0
              , o = document.createTextNode("");
            new vr(e).observe(o, {
                characterData: !0
            }),
            n = function() {
                o.data = a = !a
            }
        }
        return function(e) {
            var t = {
                fn: e,
                next: void 0
            };
            i && (i.next = t),
            r || (r = t,
            n()),
            i = t
        }
    }(), Br = "Promise", jr = y.TypeError, Ur = y.process, Gr = Ur && Ur.versions, Hr = Gr && Gr.v8 || "", qr = y[Br], Kr = "process" == zt(Ur), Vr = function() {}, Yr = Dr = br.f, Wr = !!function() {
        try {
            var e = qr.resolve(1)
              , t = (e.constructor = {})[de("species")] = function(e) {
                e(Vr, Vr)
            }
            ;
            return (Kr || "function" == typeof PromiseRejectionEvent) && e.then(Vr)instanceof t && 0 != Hr.indexOf("6.6") && -1 == Ar.indexOf("Chrome/66")
        } catch (e) {}
    }(), zr = function(e) {
        var t;
        return !(!p(e) || "function" != typeof (t = e.then)) && t
    }, Xr = function(c, r) {
        if (!c._n) {
            c._n = !0;
            var i = c._c;
            Nr(function() {
                for (var l = c._v, u = 1 == c._s, e = 0, t = function(e) {
                    var t, r, i, n = u ? e.ok : e.fail, a = e.resolve, o = e.reject, s = e.domain;
                    try {
                        n ? (u || (2 == c._h && Jr(c),
                        c._h = 1),
                        !0 === n ? t = l : (s && s.enter(),
                        t = n(l),
                        s && (s.exit(),
                        i = !0)),
                        t === e.promise ? o(jr("Promise-chain cycle")) : (r = zr(t)) ? r.call(t, a, o) : a(t)) : o(l)
                    } catch (e) {
                        s && !i && s.exit(),
                        o(e)
                    }
                }; e < i.length; )
                    t(i[e++]);
                c._c = [],
                c._n = !1,
                r && !c._h && Qr(c)
            })
        }
    }, Qr = function(a) {
        Fr.call(y, function() {
            var e, t, r, i = a._v, n = Zr(a);
            if (n && (e = Er(function() {
                Kr ? Ur.emit("unhandledRejection", i, a) : (t = y.onunhandledrejection) ? t({
                    promise: a,
                    reason: i
                }) : (r = y.console) && r.error && r.error("Unhandled promise rejection", i)
            }),
            a._h = Kr || Zr(a) ? 2 : 1),
            a._a = void 0,
            n && e.e)
                throw e.v
        })
    }, Zr = function(e) {
        return 1 !== e._h && 0 === (e._a || e._c).length
    }, Jr = function(t) {
        Fr.call(y, function() {
            var e;
            Kr ? Ur.emit("rejectionHandled", t) : (e = y.onrejectionhandled) && e({
                promise: t,
                reason: t._v
            })
        })
    }, $r = function(e) {
        var t = this;
        t._d || (t._d = !0,
        (t = t._w || t)._v = e,
        t._s = 2,
        t._a || (t._a = t._c.slice()),
        Xr(t, !0))
    }, ei = function(e) {
        var r, i = this;
        if (!i._d) {
            i._d = !0,
            i = i._w || i;
            try {
                if (i === e)
                    throw jr("Promise can't be resolved itself");
                (r = zr(e)) ? Nr(function() {
                    var t = {
                        _w: i,
                        _d: !1
                    };
                    try {
                        r.call(e, m(ei, t, 1), m($r, t, 1))
                    } catch (e) {
                        $r.call(t, e)
                    }
                }) : (i._v = e,
                i._s = 1,
                Xr(i, !1))
            } catch (e) {
                $r.call({
                    _w: i,
                    _d: !1
                }, e)
            }
        }
    };
    Wr || (qr = function(e) {
        !function(e, t, r, i) {
            if (!(e instanceof t) || void 0 !== i && i in e)
                throw TypeError(r + ": incorrect invocation!")
        }(this, qr, Br, "_h"),
        h(e),
        Ir.call(this);
        try {
            e(m(ei, this, 1), m($r, this, 1))
        } catch (e) {
            $r.call(this, e)
        }
    }
    ,
    (Ir = function(e) {
        this._c = [],
        this._a = void 0,
        this._s = 0,
        this._d = !1,
        this._v = void 0,
        this._h = 0,
        this._n = !1
    }
    ).prototype = function(e, t, r) {
        for (var i in t)
            r && e[i] ? e[i] = t[i] : C(e, i, t[i]);
        return e
    }(qr.prototype, {
        then: function(e, t) {
            var r = Yr(ir(this, qr));
            return r.ok = "function" != typeof e || e,
            r.fail = "function" == typeof t && t,
            r.domain = Kr ? Ur.domain : void 0,
            this._c.push(r),
            this._a && this._a.push(r),
            this._s && Xr(this, !1),
            r.promise
        },
        catch: function(e) {
            return this.then(void 0, e)
        }
    }),
    Cr = function() {
        var e = new Ir;
        this.promise = e,
        this.resolve = m(ei, e, 1),
        this.reject = m($r, e, 1)
    }
    ,
    br.f = Yr = function(e) {
        return e === qr || e === Pr ? new Cr(e) : Dr(e)
    }
    ),
    M(M.G + M.W + M.F * !Wr, {
        Promise: qr
    }),
    pe(qr, Br),
    Mr = "function" == typeof v[Or = Br] ? v[Or] : y[Or],
    E && Mr && !Mr[wr] && I.f(Mr, wr, {
        configurable: !0,
        get: function() {
            return this
        }
    }),
    Pr = v[Br],
    M(M.S + M.F * !Wr, Br, {
        reject: function(e) {
            var t = Yr(this);
            return (0,
            t.reject)(e),
            t.promise
        }
    }),
    M(M.S + !0 * M.F, Br, {
        resolve: function(e) {
            return kr(this === Pr ? qr : this, e)
        }
    }),
    M(M.S + M.F * !(Wr && xr(function(e) {
        qr.all(e).catch(Vr)
    })), Br, {
        all: function(e) {
            var o = this
              , t = Yr(o)
              , s = t.resolve
              , l = t.reject
              , r = Er(function() {
                var i = []
                  , n = 0
                  , a = 1;
                tr(e, !1, function(e) {
                    var t = n++
                      , r = !1;
                    i.push(void 0),
                    a++,
                    o.resolve(e).then(function(e) {
                        r || (r = !0,
                        i[t] = e,
                        --a || s(i))
                    }, l)
                }),
                --a || s(i)
            });
            return r.e && l(r.v),
            t.promise
        },
        race: function(e) {
            var t = this
              , r = Yr(t)
              , i = r.reject
              , n = Er(function() {
                tr(e, !1, function(e) {
                    t.resolve(e).then(r.resolve, i)
                })
            });
            return n.e && i(n.v),
            r.promise
        }
    }),
    M(M.P + M.R, "Promise", {
        finally: function(t) {
            var r = ir(this, v.Promise || y.Promise)
              , e = "function" == typeof t;
            return this.then(e ? function(e) {
                return kr(r, t()).then(function() {
                    return e
                })
            }
            : t, e ? function(e) {
                return kr(r, t()).then(function() {
                    throw e
                })
            }
            : t)
        }
    }),
    M(M.S, "Promise", {
        try: function(e) {
            var t = br.f(this)
              , r = Er(e);
            return (r.e ? t.reject : t.resolve)(r.v),
            t.promise
        }
    });
    var ti = v.Promise
      , ri = t(function(e) {
        e.exports = {
            default: ti,
            __esModule: !0
        }
    })
      , ii = e(ri)
      , ni = e(t(function(e, t) {
        t.__esModule = !0;
        var r, l = (r = ri) && r.__esModule ? r : {
            default: r
        };
        t.default = function(e) {
            return function() {
                var s = e.apply(this, arguments);
                return new l.default(function(a, o) {
                    return function t(e, r) {
                        try {
                            var i = s[e](r)
                              , n = i.value
                        } catch (e) {
                            return void o(e)
                        }
                        if (!i.done)
                            return l.default.resolve(n).then(function(e) {
                                t("next", e)
                            }, function(e) {
                                t("throw", e)
                            });
                        a(n)
                    }("next")
                }
                )
            }
        }
    }));
    x("keys", function() {
        return function(e) {
            return re(f(e))
        }
    });
    var ai = v.Object.keys
      , oi = e(t(function(e) {
        e.exports = {
            default: ai,
            __esModule: !0
        }
    }))
      , si = Object.assign
      , li = !si || T(function() {
        var e = {}
          , t = {}
          , r = Symbol()
          , i = "abcdefghijklmnopqrst";
        return e[r] = 7,
        i.split("").forEach(function(e) {
            t[e] = e
        }),
        7 != si({}, e)[r] || Object.keys(si({}, t)).join("") != i
    }) ? function(e, t) {
        for (var r = f(e), i = arguments.length, n = 1, a = Fe.f, o = Ne.f; n < i; )
            for (var s, l = Y(arguments[n++]), u = a ? re(l).concat(a(l)) : re(l), c = u.length, d = 0; d < c; )
                o.call(l, s = u[d++]) && (r[s] = l[s]);
        return r
    }
    : si;
    M(M.S + M.F, "Object", {
        assign: li
    });
    var ui = v.Object.assign
      , ci = t(function(e) {
        e.exports = {
            default: ui,
            __esModule: !0
        }
    })
      , di = e(ci)
      , fi = function(e, t, r) {
        t in e ? I.f(e, t, D(0, r)) : e[t] = r
    };
    M(M.S + M.F * !xr(function(e) {}), "Array", {
        from: function(e) {
            var t, r, i, n, a = f(e), o = "function" == typeof this ? this : Array, s = arguments.length, l = 1 < s ? arguments[1] : void 0, u = void 0 !== l, c = 0, d = er(a);
            if (u && (l = m(l, 2 < s ? arguments[2] : void 0, 2)),
            null == d || o == Array && Jt(d))
                for (r = new o(t = X(a.length)); c < t; c++)
                    fi(r, c, u ? l(a[c], c) : a[c]);
            else
                for (n = d.call(a),
                r = new o; !(i = n.next()).done; c++)
                    fi(r, c, u ? Xt(n, l, [i.value, c], !0) : i.value);
            return r.length = c,
            r
        }
    });
    var hi = v.Array.from
      , pi = t(function(e) {
        e.exports = {
            default: hi,
            __esModule: !0
        }
    })
      , gi = e(pi)
      , vi = e(t(function(e, t) {
        t.__esModule = !0;
        var r, i = (r = pi) && r.__esModule ? r : {
            default: r
        };
        t.default = function(e) {
            if (Array.isArray(e)) {
                for (var t = 0, r = Array(e.length); t < e.length; t++)
                    r[t] = e[t];
                return r
            }
            return (0,
            i.default)(e)
        }
    }))
      , yi = e(t(function(e, t) {
        t.__esModule = !0;
        var r, i = (r = ci) && r.__esModule ? r : {
            default: r
        };
        t.default = i.default || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var r = arguments[t];
                for (var i in r)
                    Object.prototype.hasOwnProperty.call(r, i) && (e[i] = r[i])
            }
            return e
        }
    }))
      , mi = e(t(function(e, t) {
        t.__esModule = !0,
        t.default = function(e, t) {
            var r = {};
            for (var i in e)
                0 <= t.indexOf(i) || Object.prototype.hasOwnProperty.call(e, i) && (r[i] = e[i]);
            return r
        }
    }))
      , _i = de("iterator")
      , Ti = v.isIterable = function(e) {
        var t = Object(e);
        return void 0 !== t[_i] || "@@iterator"in t || q.hasOwnProperty(zt(t))
    }
      , bi = t(function(e) {
        e.exports = {
            default: Ti,
            __esModule: !0
        }
    });
    e(bi);
    var Ei = v.getIterator = function(e) {
        var t = er(e);
        if ("function" != typeof t)
            throw TypeError(e + " is not iterable!");
        return _(t.call(e))
    }
      , Si = t(function(e) {
        e.exports = {
            default: Ei,
            __esModule: !0
        }
    });
    e(Si);
    var Ai = e(t(function(e, t) {
        t.__esModule = !0;
        var r = i(bi)
          , l = i(Si);
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.default = function(e, t) {
            if (Array.isArray(e))
                return e;
            if ((0,
            r.default)(Object(e)))
                return function(e, t) {
                    var r = []
                      , i = !0
                      , n = !1
                      , a = void 0;
                    try {
                        for (var o, s = (0,
                        l.default)(e); !(i = (o = s.next()).done) && (r.push(o.value),
                        !t || r.length !== t); i = !0)
                            ;
                    } catch (e) {
                        n = !0,
                        a = e
                    } finally {
                        try {
                            !i && s.return && s.return()
                        } finally {
                            if (n)
                                throw a
                        }
                    }
                    return r
                }(e, t);
            throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }
    }))
      , ki = e(t(function(e, t) {
        t.__esModule = !0,
        t.default = function(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
    }));
    M(M.S + M.F * !E, "Object", {
        defineProperty: I.f
    });
    var wi = v.Object
      , Ri = function(e, t, r) {
        return wi.defineProperty(e, t, r)
    }
      , Li = t(function(e) {
        e.exports = {
            default: Ri,
            __esModule: !0
        }
    });
    e(Li);
    var Ii = e(t(function(e, t) {
        t.__esModule = !0;
        var r, n = (r = Li) && r.__esModule ? r : {
            default: r
        };
        t.default = function() {
            function i(e, t) {
                for (var r = 0; r < t.length; r++) {
                    var i = t[r];
                    i.enumerable = i.enumerable || !1,
                    i.configurable = !0,
                    "value"in i && (i.writable = !0),
                    (0,
                    n.default)(e, i.key, i)
                }
            }
            return function(e, t, r) {
                return t && i(e.prototype, t),
                r && i(e, r),
                e
            }
        }()
    }))
      , Di = e(t(function(e, t) {
        t.__esModule = !0;
        var r, i = (r = Li) && r.__esModule ? r : {
            default: r
        };
        t.default = function(e, t, r) {
            return t in e ? (0,
            i.default)(e, t, {
                value: r,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = r,
            e
        }
    }))
      , Ci = Object.prototype.hasOwnProperty
      , Pi = Object.prototype.toString
      , Oi = function(e) {
        return "function" == typeof Array.isArray ? Array.isArray(e) : "[object Array]" === Pi.call(e)
    }
      , Mi = function(e) {
        if (!e || "[object Object]" !== Pi.call(e))
            return !1;
        var t, r = Ci.call(e, "constructor"), i = e.constructor && e.constructor.prototype && Ci.call(e.constructor.prototype, "isPrototypeOf");
        if (e.constructor && !r && !i)
            return !1;
        for (t in e)
            ;
        return void 0 === t || Ci.call(e, t)
    }
      , xi = function e() {
        var t, r, i, n, a, o, s = arguments[0], l = 1, u = arguments.length, c = !1;
        for ("boolean" == typeof s && (c = s,
        s = arguments[1] || {},
        l = 2),
        (null == s || "object" != typeof s && "function" != typeof s) && (s = {}); l < u; ++l)
            if (null != (t = arguments[l]))
                for (r in t)
                    i = s[r],
                    s !== (n = t[r]) && (c && n && (Mi(n) || (a = Oi(n))) ? (o = a ? (a = !1,
                    i && Oi(i) ? i : []) : i && Mi(i) ? i : {},
                    s[r] = e(c, o, n)) : void 0 !== n && (s[r] = n));
        return s
    }
      , Fi = {
        RoleType: {
            RT_BEGIN: 0,
            RT_TEACHER: 1,
            RT_STUDENT: 2,
            RT_ADMIN: 3,
            RT_END: 4
        },
        TraceType: {
            TT_PATH: 1,
            TT_SOLID_LINE: 2,
            TT_DASH_LINE: 3,
            TT_ARROW_LINE: 4,
            TT_RECT: 5,
            TT_ELLIPSE: 6,
            TT_TEXT: 7
        },
        ClientMsgType: {
            CMT_BEGIN_LIVE: 1,
            CMT_END_LIVE: 2,
            CMT_HEARTBEAT: 3,
            CMT_PAGE_CHANGE: 4,
            CMT_ADD_TRACE: 5,
            CMT_ERASE_TRACE: 6,
            CMT_DOWNLOAD_DOCUMENT: 7,
            CMT_CREATE_TABULA: 8,
            CMT_LOGIN_REQUEST: 9,
            CMT_DESTROY_TABULA: 10,
            CMT_LOGIN_REQUEST_THIRD: 23,
            CMT_VIDEO_BEGIN: 5e3,
            CMT_GET_PAGE: 5001,
            CMT_GET_INCREAMENT_MSG: 5002,
            SMT_BEGIN: 1e4,
            SMT_LOGIN_REPLY: 10001,
            SMT_LOGIN_NOTIFY: 10002,
            SMT_BEGIN_LIVE: 10003,
            SMT_END_LIVE: 10004,
            SMT_HEARTBEAT: 10005,
            SMT_ADD_TRACE: 10006,
            SMT_ERASE_TRACE: 10007,
            SMT_PAGE_CHANGE_NOTIFY: 10008,
            SMT_DOCUMENT_INFO: 10009,
            SMT_ERROR: 10010,
            SMT_VIDEO_LOGIN_RES: 10011,
            SMT_VIDEO_BATCH_RES: 10012,
            SMT_CHANGE_CDN_NOTIFY: 10015,
            SMT_PAUSE_LIVE_NOTIFY: 10016,
            SMT_CONTINUE_LIVE_NOTIFY: 10017,
            SMT_BEGIN_PAPER_NOTIFY: 10018,
            SMT_SCROLL_POSITION: 10021,
            CMT_GET_KICK_LIST: 100,
            SMT_KICK_LIST_REPLY: 10050,
            CMT_SET_KICK_STATUS: 101,
            SMT_SET_KICK_STATUS_REPLY: 10051,
            EC_AUTH_TOKEN_FAILED: 40002,
            EC_AUTH_EXPIRED: 40004
        },
        AppType: {
            WEB: 1,
            WX_MINI_PROGRAM: 2,
            APP: 3
        },
        StreamProtocol: {
            RTMP_PROTOCOL: 1,
            FLV_PROTOCOL: 2,
            HLS_PROTOCOL: 3,
            MP4_PROTOCOL: -1
        },
        RoomStatus: {
            READY: 1,
            LIVE: 2,
            PAUSE: 3,
            END: 4
        },
        eUrlType: {
            COMMON: 1,
            SHARE_DESKTOP: 2,
            SHARE_VIDEO: 3
        },
        iErrorCode: {
            EC_KICK_BY_ADMIN: 10034
        }
    }
      , Ni = {
        searchParams: "URLSearchParams"in self,
        iterable: "Symbol"in self && "iterator"in Symbol,
        blob: "FileReader"in self && "Blob"in self && function() {
            try {
                return new Blob,
                !0
            } catch (e) {
                return !1
            }
        }(),
        formData: "FormData"in self,
        arrayBuffer: "ArrayBuffer"in self
    };
    if (Ni.arrayBuffer)
        var Bi = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"]
          , ji = ArrayBuffer.isView || function(e) {
            return e && -1 < Bi.indexOf(Object.prototype.toString.call(e))
        }
        ;
    function Ui(e) {
        if ("string" != typeof e && (e += ""),
        /[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))
            throw new TypeError("Invalid character in header field name");
        return e.toLowerCase()
    }
    function Gi(e) {
        return "string" != typeof e && (e += ""),
        e
    }
    function Hi(t) {
        var e = {
            next: function() {
                var e = t.shift();
                return {
                    done: void 0 === e,
                    value: e
                }
            }
        };
        return Ni.iterable && (e[Symbol.iterator] = function() {
            return e
        }
        ),
        e
    }
    function qi(t) {
        this.map = {},
        t instanceof qi ? t.forEach(function(e, t) {
            this.append(t, e)
        }, this) : Array.isArray(t) ? t.forEach(function(e) {
            this.append(e[0], e[1])
        }, this) : t && Object.getOwnPropertyNames(t).forEach(function(e) {
            this.append(e, t[e])
        }, this)
    }
    function Ki(e) {
        if (e.bodyUsed)
            return Promise.reject(new TypeError("Already read"));
        e.bodyUsed = !0
    }
    function Vi(r) {
        return new Promise(function(e, t) {
            r.onload = function() {
                e(r.result)
            }
            ,
            r.onerror = function() {
                t(r.error)
            }
        }
        )
    }
    function Yi(e) {
        var t = new FileReader
          , r = Vi(t);
        return t.readAsArrayBuffer(e),
        r
    }
    function Wi(e) {
        if (e.slice)
            return e.slice(0);
        var t = new Uint8Array(e.byteLength);
        return t.set(new Uint8Array(e)),
        t.buffer
    }
    function zi() {
        return this.bodyUsed = !1,
        this._initBody = function(e) {
            var t;
            (this._bodyInit = e) ? "string" == typeof e ? this._bodyText = e : Ni.blob && Blob.prototype.isPrototypeOf(e) ? this._bodyBlob = e : Ni.formData && FormData.prototype.isPrototypeOf(e) ? this._bodyFormData = e : Ni.searchParams && URLSearchParams.prototype.isPrototypeOf(e) ? this._bodyText = "" + e : Ni.arrayBuffer && Ni.blob && ((t = e) && DataView.prototype.isPrototypeOf(t)) ? (this._bodyArrayBuffer = Wi(e.buffer),
            this._bodyInit = new Blob([this._bodyArrayBuffer])) : Ni.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(e) || ji(e)) ? this._bodyArrayBuffer = Wi(e) : this._bodyText = e = Object.prototype.toString.call(e) : this._bodyText = "",
            this.headers.get("content-type") || ("string" == typeof e ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : Ni.searchParams && URLSearchParams.prototype.isPrototypeOf(e) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"))
        }
        ,
        Ni.blob && (this.blob = function() {
            var e = Ki(this);
            if (e)
                return e;
            if (this._bodyBlob)
                return Promise.resolve(this._bodyBlob);
            if (this._bodyArrayBuffer)
                return Promise.resolve(new Blob([this._bodyArrayBuffer]));
            if (this._bodyFormData)
                throw Error("could not read FormData body as blob");
            return Promise.resolve(new Blob([this._bodyText]))
        }
        ,
        this.arrayBuffer = function() {
            return this._bodyArrayBuffer ? Ki(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(Yi)
        }
        ),
        this.text = function() {
            var e, t, r, i = Ki(this);
            if (i)
                return i;
            if (this._bodyBlob)
                return e = this._bodyBlob,
                t = new FileReader,
                r = Vi(t),
                t.readAsText(e),
                r;
            if (this._bodyArrayBuffer)
                return Promise.resolve(function(e) {
                    for (var t = new Uint8Array(e), r = Array(t.length), i = 0; i < t.length; i++)
                        r[i] = String.fromCharCode(t[i]);
                    return r.join("")
                }(this._bodyArrayBuffer));
            if (this._bodyFormData)
                throw Error("could not read FormData body as text");
            return Promise.resolve(this._bodyText)
        }
        ,
        Ni.formData && (this.formData = function() {
            return this.text().then(Zi)
        }
        ),
        this.json = function() {
            return this.text().then(JSON.parse)
        }
        ,
        this
    }
    qi.prototype.append = function(e, t) {
        e = Ui(e),
        t = Gi(t);
        var r = this.map[e];
        this.map[e] = r ? r + ", " + t : t
    }
    ,
    qi.prototype.delete = function(e) {
        delete this.map[Ui(e)]
    }
    ,
    qi.prototype.get = function(e) {
        return e = Ui(e),
        this.has(e) ? this.map[e] : null
    }
    ,
    qi.prototype.has = function(e) {
        return this.map.hasOwnProperty(Ui(e))
    }
    ,
    qi.prototype.set = function(e, t) {
        this.map[Ui(e)] = Gi(t)
    }
    ,
    qi.prototype.forEach = function(e, t) {
        for (var r in this.map)
            this.map.hasOwnProperty(r) && e.call(t, this.map[r], r, this)
    }
    ,
    qi.prototype.keys = function() {
        var r = [];
        return this.forEach(function(e, t) {
            r.push(t)
        }),
        Hi(r)
    }
    ,
    qi.prototype.values = function() {
        var t = [];
        return this.forEach(function(e) {
            t.push(e)
        }),
        Hi(t)
    }
    ,
    qi.prototype.entries = function() {
        var r = [];
        return this.forEach(function(e, t) {
            r.push([t, e])
        }),
        Hi(r)
    }
    ,
    Ni.iterable && (qi.prototype[Symbol.iterator] = qi.prototype.entries);
    var Xi = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
    function Qi(e, t) {
        var r, i, n = (t = t || {}).body;
        if (e instanceof Qi) {
            if (e.bodyUsed)
                throw new TypeError("Already read");
            this.url = e.url,
            this.credentials = e.credentials,
            t.headers || (this.headers = new qi(e.headers)),
            this.method = e.method,
            this.mode = e.mode,
            this.signal = e.signal,
            n || null == e._bodyInit || (n = e._bodyInit,
            e.bodyUsed = !0)
        } else
            this.url = e + "";
        if (this.credentials = t.credentials || this.credentials || "same-origin",
        !t.headers && this.headers || (this.headers = new qi(t.headers)),
        this.method = (i = (r = t.method || this.method || "GET").toUpperCase(),
        -1 < Xi.indexOf(i) ? i : r),
        this.mode = t.mode || this.mode || null,
        this.signal = t.signal || this.signal,
        this.referrer = null,
        ("GET" === this.method || "HEAD" === this.method) && n)
            throw new TypeError("Body not allowed for GET or HEAD requests");
        this._initBody(n)
    }
    function Zi(e) {
        var n = new FormData;
        return e.trim().split("&").forEach(function(e) {
            if (e) {
                var t = e.split("=")
                  , r = t.shift().replace(/\+/g, " ")
                  , i = t.join("=").replace(/\+/g, " ");
                n.append(decodeURIComponent(r), decodeURIComponent(i))
            }
        }),
        n
    }
    function Ji(e, t) {
        t || (t = {}),
        this.type = "default",
        this.status = void 0 === t.status ? 200 : t.status,
        this.ok = 200 <= this.status && this.status < 300,
        this.statusText = "statusText"in t ? t.statusText : "OK",
        this.headers = new qi(t.headers),
        this.url = t.url || "",
        this._initBody(e)
    }
    Qi.prototype.clone = function() {
        return new Qi(this,{
            body: this._bodyInit
        })
    }
    ,
    zi.call(Qi.prototype),
    zi.call(Ji.prototype),
    Ji.prototype.clone = function() {
        return new Ji(this._bodyInit,{
            status: this.status,
            statusText: this.statusText,
            headers: new qi(this.headers),
            url: this.url
        })
    }
    ,
    Ji.error = function() {
        var e = new Ji(null,{
            status: 0,
            statusText: ""
        });
        return e.type = "error",
        e
    }
    ;
    var $i = [301, 302, 303, 307, 308];
    Ji.redirect = function(e, t) {
        if (-1 == $i.indexOf(t))
            throw new RangeError("Invalid status code");
        return new Ji(null,{
            status: t,
            headers: {
                location: e
            }
        })
    }
    ;
    var en = self.DOMException;
    try {
        new en
    } catch (e) {
        (en = function(e, t) {
            this.message = e,
            this.name = t,
            this.stack = Error(e).stack
        }
        ).prototype = Object.create(Error.prototype),
        en.prototype.constructor = en
    }
    function tn(a, o) {
        return new Promise(function(r, e) {
            var t = new Qi(a,o);
            if (t.signal && t.signal.aborted)
                return e(new en("Aborted","AbortError"));
            var i = new XMLHttpRequest;
            function n() {
                i.abort()
            }
            i.onload = function() {
                var e, n, t = {
                    status: i.status,
                    statusText: i.statusText,
                    headers: (e = i.getAllResponseHeaders() || "",
                    n = new qi,
                    e.replace(/\r?\n[\t ]+/g, " ").split(/\r?\n/).forEach(function(e) {
                        var t = e.split(":")
                          , r = t.shift().trim();
                        if (r) {
                            var i = t.join(":").trim();
                            n.append(r, i)
                        }
                    }),
                    n)
                };
                t.url = "responseURL"in i ? i.responseURL : t.headers.get("X-Request-URL"),
                r(new Ji("response"in i ? i.response : i.responseText,t))
            }
            ,
            i.onerror = function() {
                e(new TypeError("Network request failed"))
            }
            ,
            i.ontimeout = function() {
                e(new TypeError("Network request failed"))
            }
            ,
            i.onabort = function() {
                e(new en("Aborted","AbortError"))
            }
            ,
            i.open(t.method, t.url, !0),
            "include" === t.credentials ? i.withCredentials = !0 : "omit" === t.credentials && (i.withCredentials = !1),
            "responseType"in i && Ni.blob && (i.responseType = "blob"),
            t.headers.forEach(function(e, t) {
                i.setRequestHeader(t, e)
            }),
            t.signal && (t.signal.addEventListener("abort", n),
            i.onreadystatechange = function() {
                4 === i.readyState && t.signal.removeEventListener("abort", n)
            }
            ),
            i.send(void 0 === t._bodyInit ? null : t._bodyInit)
        }
        )
    }
    tn.polyfill = !0,
    self.fetch || (self.fetch = tn,
    self.Headers = qi,
    self.Request = Qi,
    self.Response = Ji);
    var rn = window.navigator && window.navigator.userAgent || "";
    function nn() {
        var t = !1
          , r = ""
          , i = function(e) {
            var t = e.match(/[\d]+/g);
            return t.length = 3,
            t.join(".")
        };
        if (navigator.plugins && navigator.plugins.length) {
            var e = navigator.plugins["Shockwave Flash"];
            e && (t = !0,
            e.description && (r = i(e.description))),
            navigator.plugins["Shockwave Flash 2.0"] && (t = !0,
            r = "2.0.0.11")
        } else if (navigator.mimeTypes && navigator.mimeTypes.length) {
            var n = navigator.mimeTypes["application/x-shockwave-flash"];
            (t = n && n.enabledPlugin) && (r = i(n.enabledPlugin.description))
        } else
            try {
                var a = new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
                t = !0,
                r = i(a.GetVariable("$version"))
            } catch (e) {
                try {
                    new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");
                    t = !0,
                    r = "6.0.21"
                } catch (e) {
                    try {
                        var o = new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                        t = !0,
                        r = i(o.GetVariable("$version"))
                    } catch (e) {}
                }
            }
        return {
            hasFlash: t,
            flashVersion: r
        }
    }
    function an(e) {
        var t = Math.floor(e / 3600)
          , r = Math.floor((e - 3600 * t) / 60)
          , i = Math.floor(e - 3600 * t - 60 * r);
        return (0 < t ? [t, r, i] : [r, i]).map(function(e) {
            return e < 10 ? "0" + e : "" + e
        }).join(":")
    }
    function on(e) {
        if (!e)
            return "";
        var t = e.toString(16)
          , r = (("" + (t.length < 8 ? gi({
            length: 8 - t.length + 1
        }).join(0) : "") + t).match(/[A-Za-z0-9]{2}/g) || []).map(function(e) {
            return parseInt(e, 16)
        })
          , i = Ai(r, 4);
        return "rgba(" + [i[1], i[2], i[3], Math.round(100 * i[0] / 255, 10) / 100].join(",") + ")"
    }
    function sn(r, i) {
        var n = Date.now();
        return function() {
            var e = arguments
              , t = Date.now();
            i <= t - n && (r.apply(this, e),
            n = Date.now())
        }
    }
    function ln(e, t, r) {
        var i;
        r && (i = console)[e].apply(i, vi(t))
    }
    function un(e) {
        return "object" === ("undefined" == typeof HTMLElement ? "undefined" : Rt(HTMLElement)) ? e instanceof HTMLElement : e && "object" === (void 0 === e ? "undefined" : Rt(e)) && 1 === e.nodeType && "string" == typeof e.nodeName
    }
    function cn(e) {
        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}
          , r = t.hasErr
          , i = void 0 !== r && r
          , n = mi(t, ["hasErr"]);
        return new ii(function(t, r) {
            tn(e, yi({
                method: "POST",
                headers: {
                    "Content-Type": "application/json;charset=utf-8"
                }
            }, n)).then(function(e) {
                return 200 <= e.status && e.status < 300 ? e.json() : r(e.statusText)
            }).then(function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
                e.err && i ? r(e) : t(e)
            }).catch(function(e) {
                return r(e)
            })
        }
        )
    }
    function dn() {
        var e = new Date
          , t = "" + e.getSeconds() + e.getMilliseconds() + Math.floor(100 * Math.random());
        return parseInt(t, 10)
    }
    function fn(e, t) {
        if (!t || !e)
            return !1;
        if (e.isEqualNode(t))
            return !0;
        if (e.contains)
            return e.contains(t);
        for (var r = t; !r.isEqualNode(document.body); r = r.parentNode)
            if (r.isEqualNode(e))
                return !0;
        return !1
    }
    function hn(e, t) {
        return (Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function(e) {
            for (var t = (document || window.ownerDocument).querySelectorAll(e), r = t.length; 0 <= --r && t.item(r) !== this; )
                ;
            return -1 < r
        }
        ).call(e, t)
    }
    function pn(a, o, s) {
        return new ii(function(e, r) {
            var t = void 0
              , i = void 0
              , n = new Image;
            n.onload = function() {
                i = Date.now(),
                e(Math.round(o / (1024 * ((i - t) / 1e3)) || 0))
            }
            ,
            n.onerror = function(e, t) {
                r(t)
            }
            ,
            t = Date.now(),
            n.src = a + "?ts=" + s
        }
        )
    }
    var gn = /Edge/i.test(rn)
      , vn = !gn && (/Chrome/i.test(rn) || /CriOS/i.test(rn))
      , yn = /Safari/i.test(rn) && !vn && !gn
      , mn = v.JSON || (v.JSON = {
        stringify: JSON.stringify
    })
      , _n = function(e) {
        return mn.stringify.apply(mn, arguments)
    }
      , Tn = e(t(function(e) {
        e.exports = {
            default: _n,
            __esModule: !0
        }
    }))
      , bn = "1.11.0"
      , En = bn
      , Sn = {
        heartbeats: null
    };
    function An(e) {
        var t = e.websocket
          , r = void 0 === t ? {} : t
          , i = e.time
          , n = void 0 === i ? 6e4 : i
          , a = arguments[2];
        if (1 < arguments.length && void 0 !== arguments[1] && arguments[1])
            window.clearTimeout(Sn.heartbeats);
        else {
            var o = Fi.ClientMsgType.CMT_HEARTBEAT;
            !function e() {
                var t = Tn({
                    eType: o,
                    bytes: Tn({
                        lTimestamp: Date.now()
                    })
                });
                a && console.count("[å¿è·³æ¬¡æ°(" + n / 1e3 + "s)]"),
                r.send(t),
                Sn.heartbeats = setTimeout(e, n)
            }()
        }
    }
    function kn(e) {
        return {
            LIVE_AUTH_ENTRY: "https://live.sunlands.com/auth",
            VOD_AUTH_ENTRY: "https://video.sunlands.com/auth",
            LIVE_ENTRY: "wss://live.sunlands.com/gate",
            VOD_ENTRY: "https://video.sunlands.com/video",
            LIVE_CHAT_ENTRY: "wss://liveim.sunlands.com",
            VOD_CHAT_ENTRY: "https://liveim.sunlands.com",
            STREAM_URL: "https://live.sunlands.com/stream"
        }[e]
    }
    function wn(e, t) {
        xi(t, {
            msgType: e,
            appType: 3,
            appVersion: En
        }),
        void 0 !== t.uid && (t.uid = "" + t.uid),
        cn(kn("STREAM_URL") + "/report", {
            method: "POST",
            body: Tn(t),
            headers: {
                "Content-Type": "application/json"
            }
        })
    }
    var Rn = function() {
        var l, u, c, d, s, f, y = "undefined", m = "object", h = "Shockwave Flash", p = "application/x-shockwave-flash", g = "SWFObjectExprInst", e = "onreadystatechange", v = window, _ = document, T = navigator, b = !1, i = [function() {
            b ? function() {
                var t = _.getElementsByTagName("body")[0]
                  , r = N(m);
                r.setAttribute("type", p);
                var i = t.appendChild(r);
                if (i) {
                    var n = 0;
                    !function() {
                        if (typeof i.GetVariable != y) {
                            var e = i.GetVariable("$version");
                            e && (e = e.split(" ")[1].split(","),
                            k.pv = [parseInt(e[0], 10), parseInt(e[1], 10), parseInt(e[2], 10)])
                        } else if (n < 10)
                            return n++,
                            setTimeout(arguments.callee, 10);
                        t.removeChild(r),
                        i = null,
                        R()
                    }()
                } else
                    R()
            }() : R()
        }
        ], E = [], S = [], o = [], n = !1, A = !1, a = !0, k = function() {
            var e = typeof _.getElementById != y && typeof _.getElementsByTagName != y && typeof _.createElement != y
              , t = T.userAgent.toLowerCase()
              , r = T.platform.toLowerCase()
              , i = /win/.test(r || t)
              , n = /mac/.test(r || t)
              , a = /webkit/.test(t) && parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1"))
              , o = !1
              , s = [0, 0, 0]
              , l = null;
            if (typeof T.plugins != y && typeof T.plugins[h] == m)
                !(l = T.plugins[h].description) || typeof T.mimeTypes != y && T.mimeTypes[p] && !T.mimeTypes[p].enabledPlugin || (o = !(b = !0),
                l = l.replace(/^.*\s+(\S+\s+\S+$)/, "$1"),
                s[0] = parseInt(l.replace(/^(.*)\..*$/, "$1"), 10),
                s[1] = parseInt(l.replace(/^.*\.(.*)\s.*$/, "$1"), 10),
                s[2] = /[a-zA-Z]/.test(l) ? parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
            else if (typeof v.ActiveXObject != y)
                try {
                    var u = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                    u && (l = u.GetVariable("$version")) && (o = !0,
                    l = l.split(" ")[1].split(","),
                    s = [parseInt(l[0], 10), parseInt(l[1], 10), parseInt(l[2], 10)])
                } catch (e) {}
            return {
                w3: e,
                pv: s,
                wk: a,
                ie: o,
                win: i,
                mac: n
            }
        }();
        k.w3 && ((typeof _.readyState != y && "complete" == _.readyState || typeof _.readyState == y && (_.getElementsByTagName("body")[0] || _.body)) && t(),
        n || (typeof _.addEventListener != y && _.addEventListener("DOMContentLoaded", t, !1),
        k.ie && k.win && (_.attachEvent(e, function() {
            "complete" == _.readyState && (_.detachEvent(e, arguments.callee),
            t())
        }),
        v == top && function() {
            if (!n) {
                try {
                    _.documentElement.doScroll("left")
                } catch (e) {
                    return setTimeout(arguments.callee, 0)
                }
                t()
            }
        }()),
        k.wk && function() {
            n || (/loaded|complete/.test(_.readyState) ? t() : setTimeout(arguments.callee, 0))
        }(),
        w(t)));
        function t() {
            if (!n) {
                try {
                    var e = _.getElementsByTagName("body")[0].appendChild(N("span"));
                    e.parentNode.removeChild(e)
                } catch (e) {
                    return
                }
                n = !0;
                for (var t = i.length, r = 0; r < t; r++)
                    i[r]()
            }
        }
        function r(e) {
            n ? e() : i[i.length] = e
        }
        function w(e) {
            if (typeof v.addEventListener != y)
                v.addEventListener("load", e, !1);
            else if (typeof _.addEventListener != y)
                _.addEventListener("load", e, !1);
            else if (typeof v.attachEvent != y)
                (r = v).attachEvent(i = "onload", n = e),
                o[o.length] = [r, i, n];
            else if ("function" == typeof v.onload) {
                var t = v.onload;
                v.onload = function() {
                    t(),
                    e()
                }
            } else
                v.onload = e;
            var r, i, n
        }
        function R() {
            var e = E.length;
            if (0 < e)
                for (var t = 0; t < e; t++) {
                    var r = E[t].id
                      , i = E[t].callbackFn
                      , n = {
                        success: !1,
                        id: r
                    };
                    if (0 < k.pv[0]) {
                        var a = F(r);
                        if (a)
                            if (!B(E[t].swfVersion) || k.wk && k.wk < 312)
                                if (E[t].expressInstall && I()) {
                                    var o = {};
                                    o.data = E[t].expressInstall,
                                    o.width = a.getAttribute("width") || "0",
                                    o.height = a.getAttribute("height") || "0",
                                    a.getAttribute("class") && (o.styleclass = a.getAttribute("class")),
                                    a.getAttribute("align") && (o.align = a.getAttribute("align"));
                                    for (var s = {}, l = a.getElementsByTagName("param"), u = l.length, c = 0; c < u; c++)
                                        "movie" != l[c].getAttribute("name").toLowerCase() && (s[l[c].getAttribute("name")] = l[c].getAttribute("value"));
                                    D(o, s, r, i)
                                } else
                                    C(a),
                                    i && i(n);
                            else
                                U(r, !0),
                                i && (n.success = !0,
                                n.ref = L(r),
                                i(n))
                    } else if (U(r, !0),
                    i) {
                        var d = L(r);
                        d && typeof d.SetVariable != y && (n.success = !0,
                        n.ref = d),
                        i(n)
                    }
                }
        }
        function L(e) {
            var t = null
              , r = F(e);
            if (r && "OBJECT" == r.nodeName)
                if (typeof r.SetVariable != y)
                    t = r;
                else {
                    var i = r.getElementsByTagName(m)[0];
                    i && (t = i)
                }
            return t
        }
        function I() {
            return !A && B("6.0.65") && (k.win || k.mac) && !(k.wk && k.wk < 312)
        }
        function D(e, t, r, i) {
            c = i || null,
            d = {
                success: !(A = !0),
                id: r
            };
            var n = F(r);
            if (n) {
                u = "OBJECT" == n.nodeName ? (l = P(n),
                null) : (l = n,
                r),
                e.id = g,
                (typeof e.width == y || !/%$/.test(e.width) && parseInt(e.width, 10) < 310) && (e.width = "310"),
                (typeof e.height == y || !/%$/.test(e.height) && parseInt(e.height, 10) < 137) && (e.height = "137"),
                _.title = _.title.slice(0, 47) + " - Flash Player Installation";
                var a = k.ie && k.win ? "ActiveX" : "PlugIn"
                  , o = "MMredirectURL=" + ("" + v.location).replace(/&/g, "%26") + "&MMplayerType=" + a + "&MMdoctitle=" + _.title;
                if (typeof t.flashvars != y ? t.flashvars += "&" + o : t.flashvars = o,
                k.ie && k.win && 4 != n.readyState) {
                    var s = N("div");
                    s.setAttribute("id", r += "SWFObjectNew"),
                    n.parentNode.insertBefore(s, n),
                    n.style.display = "none",
                    function() {
                        4 == n.readyState ? n.parentNode.removeChild(n) : setTimeout(arguments.callee, 10)
                    }()
                }
                O(e, t, r)
            }
        }
        function C(e) {
            if (k.ie && k.win && 4 != e.readyState) {
                var t = N("div");
                e.parentNode.insertBefore(t, e),
                t.parentNode.replaceChild(P(e), t),
                e.style.display = "none",
                function() {
                    4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10)
                }()
            } else
                e.parentNode.replaceChild(P(e), e)
        }
        function P(e) {
            var t = N("div");
            if (k.win && k.ie)
                t.innerHTML = e.innerHTML;
            else {
                var r = e.getElementsByTagName(m)[0];
                if (r) {
                    var i = r.childNodes;
                    if (i)
                        for (var n = i.length, a = 0; a < n; a++)
                            1 == i[a].nodeType && "PARAM" == i[a].nodeName || 8 == i[a].nodeType || t.appendChild(i[a].cloneNode(!0))
                }
            }
            return t
        }
        function O(e, t, r) {
            var i, n = F(r);
            if (k.wk && k.wk < 312)
                return i;
            if (n)
                if (typeof e.id == y && (e.id = r),
                k.ie && k.win) {
                    var a = "";
                    for (var o in e)
                        e[o] != Object.prototype[o] && ("data" == o.toLowerCase() ? t.movie = e[o] : "styleclass" == o.toLowerCase() ? a += ' class="' + e[o] + '"' : "classid" != o.toLowerCase() && (a += " " + o + '="' + e[o] + '"'));
                    var s = "";
                    for (var l in t)
                        t[l] != Object.prototype[l] && (s += '<param name="' + l + '" value="' + t[l] + '" />');
                    n.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + a + ">" + s + "</object>",
                    S[S.length] = e.id,
                    i = F(e.id)
                } else {
                    var u = N(m);
                    for (var c in u.setAttribute("type", p),
                    e)
                        e[c] != Object.prototype[c] && ("styleclass" == c.toLowerCase() ? u.setAttribute("class", e[c]) : "classid" != c.toLowerCase() && u.setAttribute(c, e[c]));
                    for (var d in t)
                        t[d] != Object.prototype[d] && "movie" != d.toLowerCase() && M(u, d, t[d]);
                    n.parentNode.replaceChild(u, n),
                    i = u
                }
            return i
        }
        function M(e, t, r) {
            var i = N("param");
            i.setAttribute("name", t),
            i.setAttribute("value", r),
            e.appendChild(i)
        }
        function x(e) {
            var t = F(e);
            t && "OBJECT" == t.nodeName && (k.ie && k.win ? (t.style.display = "none",
            function() {
                4 == t.readyState ? function(e) {
                    var t = F(e);
                    if (t) {
                        for (var r in t)
                            "function" == typeof t[r] && (t[r] = null);
                        t.parentNode.removeChild(t)
                    }
                }(e) : setTimeout(arguments.callee, 10)
            }()) : t.parentNode.removeChild(t))
        }
        function F(e) {
            var t = null;
            try {
                t = _.getElementById(e)
            } catch (e) {}
            return t
        }
        function N(e) {
            return _.createElement(e)
        }
        function B(e) {
            var t = k.pv
              , r = e.split(".");
            return r[0] = parseInt(r[0], 10),
            r[1] = parseInt(r[1], 10) || 0,
            r[2] = parseInt(r[2], 10) || 0,
            r[0] < t[0] || t[0] == r[0] && r[1] < t[1] || t[0] == r[0] && t[1] == r[1] && r[2] <= t[2]
        }
        function j(e, t, r, i) {
            if (!k.ie || !k.mac) {
                var n = _.getElementsByTagName("head")[0];
                if (n) {
                    var a = r && "string" == typeof r ? r : "screen";
                    if (i && (f = s = null),
                    !s || f != a) {
                        var o = N("style");
                        o.setAttribute("type", "text/css"),
                        o.setAttribute("media", a),
                        s = n.appendChild(o),
                        k.ie && k.win && typeof _.styleSheets != y && 0 < _.styleSheets.length && (s = _.styleSheets[_.styleSheets.length - 1]),
                        f = a
                    }
                    k.ie && k.win ? s && typeof s.addRule == m && s.addRule(e, t) : s && typeof _.createTextNode != y && s.appendChild(_.createTextNode(e + " {" + t + "}"))
                }
            }
        }
        function U(e, t) {
            if (a) {
                var r = t ? "visible" : "hidden";
                n && F(e) ? F(e).style.visibility = r : j("#" + e, "visibility:" + r)
            }
        }
        function G(e) {
            return null != /[\\\"<>\.;]/.exec(e) && typeof encodeURIComponent != y ? encodeURIComponent(e) : e
        }
        k.ie && k.win && window.attachEvent("onunload", function() {
            for (var e = o.length, t = 0; t < e; t++)
                o[t][0].detachEvent(o[t][1], o[t][2]);
            for (var r = S.length, i = 0; i < r; i++)
                x(S[i]);
            for (var n in k)
                k[n] = null;
            for (var a in k = null,
            Rn)
                Rn[a] = null;
            Rn = null
        });
        return {
            registerObject: function(e, t, r, i) {
                if (k.w3 && e && t) {
                    var n = {};
                    n.id = e,
                    n.swfVersion = t,
                    n.expressInstall = r,
                    n.callbackFn = i,
                    E[E.length] = n,
                    U(e, !1)
                } else
                    i && i({
                        success: !1,
                        id: e
                    })
            },
            getObjectById: function(e) {
                if (k.w3)
                    return L(e)
            },
            embedSWF: function(o, s, l, u, c, d, f, h, p, g) {
                var v = {
                    success: !1,
                    id: s
                };
                k.w3 && !(k.wk && k.wk < 312) && o && s && l && u && c ? (U(s, !1),
                r(function() {
                    l += "",
                    u += "";
                    var e = {};
                    if (p && typeof p === m)
                        for (var t in p)
                            e[t] = p[t];
                    e.data = o,
                    e.width = l,
                    e.height = u;
                    var r = {};
                    if (h && typeof h === m)
                        for (var i in h)
                            r[i] = h[i];
                    if (f && typeof f === m)
                        for (var n in f)
                            typeof r.flashvars != y ? r.flashvars += "&" + n + "=" + f[n] : r.flashvars = n + "=" + f[n];
                    if (B(c)) {
                        var a = O(e, r, s);
                        e.id == s && U(s, !0),
                        v.success = !0,
                        v.ref = a
                    } else {
                        if (d && I())
                            return e.data = d,
                            void D(e, r, s, g);
                        U(s, !0)
                    }
                    g && g(v)
                })) : g && g(v)
            },
            switchOffAutoHideShow: function() {
                a = !1
            },
            ua: k,
            getFlashPlayerVersion: function() {
                return {
                    major: k.pv[0],
                    minor: k.pv[1],
                    release: k.pv[2]
                }
            },
            hasFlashPlayerVersion: B,
            createSWF: function(e, t, r) {
                return k.w3 ? O(e, t, r) : void 0
            },
            showExpressInstall: function(e, t, r, i) {
                k.w3 && I() && D(e, t, r, i)
            },
            removeSWF: function(e) {
                k.w3 && x(e)
            },
            createCSS: function(e, t, r, i) {
                k.w3 && j(e, t, r, i)
            },
            addDomLoadEvent: r,
            addLoadEvent: w,
            getQueryParamValue: function(e) {
                var t = _.location.search || _.location.hash;
                if (t) {
                    if (/\?/.test(t) && (t = t.split("?")[1]),
                    null == e)
                        return G(t);
                    for (var r = t.split("&"), i = 0; i < r.length; i++)
                        if (r[i].substring(0, r[i].indexOf("=")) == e)
                            return G(r[i].substring(1 + r[i].indexOf("=")))
                }
                return ""
            },
            expressInstallCallback: function() {
                if (A) {
                    var e = F(g);
                    e && l && (e.parentNode.replaceChild(l, e),
                    u && (U(u, !0),
                    k.ie && k.win && (l.style.display = "block")),
                    c && c(d)),
                    A = !1
                }
            }
        }
    }()
      , Ln = Rn
      , In = function() {
        function e() {
            ki(this, e),
            this.events = {},
            this.videoEvents = ["ready", "metadata_update", "abort", "canplay", "canplay_through", "duration_change", "emptied", "ended", "error", "loaded_data", "loaded_metadata", "load_start", "moz_audio_available", "pause", "play", "playing", "progress", "rate_change", "seeked", "seeking", "stalled", "suspend", "time_update", "volume_change", "waiting", "autoplay_success", "autoplay_fail", "status_change", "progress_click", "progress_move", "switch_button_click", "screen_status_change", "update_controlbar", "playback_rate_button_click", "tech_list_click", "tech_change"],
            this.playerEvents = ["ready", "metadata_update", "time_update", "empty", "full", "status_change", "volume_change", "switch_button_click", "screen_status_change", "update_controlbar", "flash_closed"],
            this.chatEvents = ["login_reply", "message_reply", "heartbeat_reply", "message_recv", "user_notification", "speaking_changed", "room_dismiss", "user_kicked", "bulk_exit_notification", "user_forbidden_status", "websocket_error", "websocket_close", "get_message_history", "send_private_message_reply", "receive_private_message", "private_list", "private_history"],
            this.boardEvents = ["user_enter", "login", "begin", "end", "heartbeat", "add_trace", "erase_trace", "page_change_notify", "change_cdn_notify", "document_info", "error", "pause", "continue", "room_info_change", "get_increase_reply", "begin_paper", "video_type_change", "scroll_change"]
        }
        return Ii(e, [{
            key: "on",
            value: function(e, t) {
                var r = this;
                ("" + e).split(",").forEach(function(e) {
                    r.type(e) && "function" == typeof t && (r.events[e] || (r.events[e] = []),
                    r.events[e].push(t))
                })
            }
        }, {
            key: "trigger",
            value: function(e) {
                for (var t = this, r = arguments.length, i = Array(1 < r ? r - 1 : 0), n = 1; n < r; n++)
                    i[n - 1] = arguments[n];
                ("" + e).split(",").forEach(function(e) {
                    t.events[e] && t.events[e].length && t.events[e].forEach(function(e) {
                        return e.apply(void 0, i)
                    })
                })
            }
        }, {
            key: "type",
            value: function(e) {
                return -1 != this.playerEvents.indexOf(e) ? "flash" : -1 != this.videoEvents.indexOf(e) ? "html5" : -1 != this.chatEvents.indexOf(e) ? "chat" : -1 != this.boardEvents.indexOf(e) ? "board" : "unknown"
            }
        }, {
            key: "removeListener",
            value: function(e, t) {
                this.events[e] && this.events[e].length && (t ? this.events[e] = this.events[e].filter(function(e) {
                    return e !== t
                }) : delete this.events[e])
            }
        }, {
            key: "removeAllListeners",
            value: function() {
                this.events = {}
            }
        }]),
        e
    }()
      , Dn = function() {
        function a(e) {
            ki(this, a),
            this.id = a._id++,
            this.debug = 0,
            this.url = null,
            this.bufferTime = 1.8,
            this.vol = 1,
            this.flashplayer = null,
            this.use_sei = 1,
            xi(!0, this, e),
            this.VERSION = bn,
            this.events = new In,
            this._currentTime = 0,
            this._lastVolume = 1,
            a._players.push(this),
            window._SunlandsPlayer = a
        }
        return Ii(a, [{
            key: "start",
            value: function(e) {
                var r = this;
                this.url = e || this.url;
                var t = {
                    id: this.id,
                    debug: +(this.debug || 0),
                    use_sei: this.use_sei,
                    flashCallback: a.callback
                }
                  , i = "sunlplayer" + this.id
                  , n = document.createElement("div");
                n.id = i,
                this.el.appendChild(n),
                Ln.embedSWF(this.swfPath + "?version=" + bn, i, this.width, this.height, this.VERSION, "js/AdobeFlashPlayerInstall.swf", t, {
                    IsAutoPlay: 1,
                    wmode: "transparent",
                    allowFullScreen: "true",
                    allowScriptAccess: "always"
                }, {}, function() {
                    var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                      , t = e.ref;
                    e.success ? ((r.flashplayer = t).setAttribute("width", "100%"),
                    t.setAttribute("height", "100%")) : nn().hasFlash || r.trigger("flash_closed")
                })
            }
        }, {
            key: "setSrc",
            value: function(e) {
                var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                this.stop(),
                a._players.push(this),
                this.url = e || this.url,
                this.bufferTime = t.bufferTime || this.bufferTime;
                var r = this.url;
                this.use_sei && (r = e.replace("https", "http")),
                this.flashplayer && this.flashplayer.__play({
                    url: r,
                    width: this.width,
                    height: this.height,
                    buffer_time: this.bufferTime,
                    volume: this.vol
                })
            }
        }, {
            key: "stop",
            value: function() {
                for (var e = 0; e < a._players.length; e += 1) {
                    a._players[e].id === this.id && (a._players.splice(e, 1),
                    e -= 1)
                }
                this.flashplayer && this.flashplayer.__stop()
            }
        }, {
            key: "volume",
            value: function(e) {
                return void 0 !== e && (this.vol = e,
                this.flashplayer && this.flashplayer.__set_volume(e),
                0 < e && (this._lastVolume = e),
                this.events.trigger("volume_change", e)),
                this.vol
            }
        }, {
            key: "muted",
            value: function(e) {
                return void 0 === e ? !this.vol : (this.volume(e ? 0 : this._lastVolume),
                !1)
            }
        }, {
            key: "seek",
            value: function(e) {
                return void 0 !== e ? (this._currentTime = e < 0 ? 0 : e || 0,
                this.flashplayer && this.flashplayer.__seek_video(this._currentTime),
                !1) : this._currentTime
            }
        }, {
            key: "pause",
            value: function() {
                this.flashplayer && this.flashplayer.__pause()
            }
        }, {
            key: "play",
            value: function() {
                this.flashplayer && this.flashplayer.__resume()
            }
        }, {
            key: "on",
            value: function(e, t) {
                this.events.on(e, t)
            }
        }, {
            key: "trigger",
            value: function(e) {
                for (var t, r = arguments.length, i = Array(1 < r ? r - 1 : 0), n = 1; n < r; n++)
                    i[n - 1] = arguments[n];
                (t = this.events).trigger.apply(t, [e].concat(i))
            }
        }, {
            key: "callback",
            value: function(e, t) {
                this.trigger({
                    ready: "ready",
                    status: "status_change",
                    sequence: "metadata_update",
                    error: "error",
                    empty: "emptied",
                    full: "full",
                    lags: "lags"
                }[e] || e, t)
            }
        }, {
            key: "getPlayer",
            value: function() {
                return this.flashplayer
            }
        }, {
            key: "getPlayerId",
            value: function() {
                return "_sunlplayer" + this.id
            }
        }, {
            key: "getPlayerType",
            value: function() {
                return "flash"
            }
        }, {
            key: "supportsNativeHls",
            value: function() {
                return !0
            }
        }, {
            key: "dispose",
            value: function() {
                delete window._SunlPlayer,
                a._id = 100,
                a._players = [],
                this.events.removeAllListeners()
            }
        }, {
            key: "currentTime",
            get: function() {
                return this._currentTime
            }
        }, {
            key: "duration",
            get: function() {
                return this._currentTime
            }
        }], [{
            key: "_getPlayer",
            value: function(e) {
                for (var t = this._players, r = 0, i = t.length; r < i; r += 1) {
                    var n = t[r];
                    if (n.id === +e)
                        return n
                }
                throw Error("player not found. id=" + e)
            }
        }, {
            key: "callback",
            value: function(e, t) {
                window._SunlandsPlayer._getPlayer((t || {}).id).callback(e, t)
            }
        }]),
        a
    }();
    Dn._id = 100,
    Dn._players = [];
    var Cn, Pn, On = 1, Mn = 2, xn = 3, Fn = 4, Nn = 7, Bn = 8, jn = 9, Un = 200, Gn = 700, Hn = "https://", qn = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAABV1JREFUWAm1V2tsFUUUntleQRssj/BKICREI4GIYjRBELUtCYIJwaL1/QNixIgoNlJN2z83/tDURyQgDYSiVRNDaoRAAwUkpcG0paXyDhoBjf7RmIJSoLR398zxOzN3b+8tt5Te9m663dndme98853vzM7VapBHlNk7sfHydOr2ZxoKZij2NRm/S1FwjZlO582aefK7ZzUNBlbfaueiz7vmUSxYadh/jonymHzFJsBJCmRsGw2Fd1eYYk1KmW2P5s7dEY1qM1CMAUkUbfIXIEiVIX+2BMFVIZILLEQIgRkkQCSZjAFBzcEFQ1TZuL6wWmvN/ZHpl0TxFh7tE30E4FcV+TolgFUBiiNQ+FwUESKiTvgsfK+NOcAj9Iof1y/+Kx2RtCSKvuaJ+qr5gci/LwRODpIcqO/7UCnX37eE8A+EqYPYX9aytbi5L5EbSCzfylNNwAcx+xkyIwFwM4tLb2dK/2lFx+CLs3h3BTPONYamGeMvUEQTTIC+kjJcJXWJVDFdxovCI18+fyyZSAqJ4loeEXSoVjb+nF7TiQExEys1NQFxA985bVf9W7onGShsF7x9+BGYdx28sAwktcNxnnFt06G8YH5rzcpz4ZhI2JCrf1F9oDiYw2xsYCupgbnZdDLzO3vKpmy7mcEE49D6x1AZqil/TX1+wOYbYExlYIRYSNd47dM24D0eYiWUgBEXBIYPmyCmXZ4hI6TH2ZFDetHusonHJchgjidK9o270nm1AWm6vzetzrxw+qqjtW9sFTwvBA2IK5BDjagyc/wJCerO0WphJgQEd/9niy+p27xFqI7z8AzwnMekrMlQ5bzi2juknyVRVM33IuBiCY5cWgJiKEhSurt00inpmOnRvHn5P6x4BVKCi/wBHycCje3x/3hacC0JjtEq62Zhig6ONf1c9+7kTZkGTx535KuXYWhTI0rIJBHAxiA2K6SfS4cx+SI/OsZPtJX6NDSO3Az1wOJdJYaXSVo1bMWZwrkvbcjzXqzisXgo6XAMpRQZ0pnbdww1cPL4tu2vtMMLJ22liBo2JT6pS5eUd10FWBUJ9SxpkHTAlESn95SN+TcZZDjanuJyWTicEmJ+U9VaH+30KIiNsq6V4CAST8tvwxG0L0b792v3epofQAmWQO4lp/ZF10qfCKaf6xanuAo2LdTVF2C47tt3lp4BlpyJI4JvgCd1K7kS18bNY+s30SvLjQgseM461qYCppSPFtPMLMdNgfdU7uhfbDVI+UgqcMU6cfdT0d/HpPTM4o1X95rughkviDklFbZCDEWuxTqfyWLcFGi7WKFsdiZVhiihDFMJPu05Kb2zdONWTGW+lTQkE8FeYNbFtpY3sxQ3BdaS2Fsx/QRS0ZAgYU1q14xPCksal6aMyMJNXAksGFq/B1OAi/OF+AMrW04QBNsL1u6fm4XYCcjEpkaeLCz/aRMHwWpRxG5Y7VcPJWtMN/acH44aEams3/hk2m1dAjGDRgqJJRvOjez+s6MJfnjQpcbtL8ONKrZ+56FO+UiaVNdYU9CdQby0Q1JISI/CiuYpdC3WACL3OCKyB8Cu2aqDMpaPnDFXQayNlX9GBVR3tHb1wbTot/jwBhIyLr/00GS+7h/A747Zdv1wO21LoJeQ287bnwVEa47tLMl4A5QwZjLpxo8L/s4bP+5hmHSzqOHKN66CW1HdyhpuBRWVJI8fbDstCQGpiz7U1bRl6esRVgvxW7PFVot84IQUTkfOXUF2SGbtl0Q4m8PVyxtavnhhPj5qhYheDWN2OGXiRGAQTfR+2D+Ta1pP3AwoGmWv/tctd1GsZxZ+qU2AKM3Hd607e7MxA737H/kueeJiYwVuAAAAAElFTkSuQmCC", Kn = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAkCAYAAADl9UilAAAAAXNSR0IArs4c6QAAB29JREFUWAm9l3twVNUdx8/j3t1NlpAAEkHTDlTQjoqUiQQfU611xAlDNqRM+gcqKhEoioCvMnUa3Errq8hIfFDQxBGjfzRqyIaRYmdqZUYroFV8tb4GRhGQZ8lrc/fec47fc3bv5m5IMNDFO9nce16/8znf3+/87rmUnMJ1xcL2iZLTayjlFYzZP2PcHk0sayTllkeZvRflfdSy9nAW+kekILqp9Z4xB052GjrUAQsWvGPvdD69mXE+jzJrGmEW/myCZ0K5TRjHnaGMO8BMHWUczyFJLXsb6p+Ojh+zoeXXVAxlziGBTZ2z/jrG+EpFrfF9kwbADFywHATsAyWcf8Kt8L3td45o+z64E4JVzH1ilOiRjVCk2ihklNDK+JP5avnK5dan1czUZZTViqI+wUpKrk/U0c7BAAcFm1K96nzCyBa4pyxngjSchHKvI742cx7eHuLsS/cM+wghpRZ3us5ixB4rKb2MMSvGrFAF/Mn6FpNWk1v2JyHLrm65LfLFQHADgk2O3T+FKvs1BMoZOo4CajmA+UtBZNiqfz4ze89ABvvXVcY/LxNE1QMQscmt9CJ1TALQso5yu/CK1kX0o/7jjgO7qDJeRhR5l3CrNCegLetj2w7P+lfzLQOusL/h/uUZD3x5rlKh5yjnlxj1MhsHC99tF4YrWubRg8ExLFiorGwISylewa+UKEmUUvhJQonaFI5GLj1VKD3Hq/ee89mwiWVXwmYTjBIptX38pBznJr2Nt7+qwkGWHLA98uByNE4lkCw9CDtbyceqJi2tfrOpbtBADRo80TNSRWrz786uA9wavXANCDACysu+/orcGRybdWV5VfzHKcf7ryKkQHcwOciyNr7f/vtfUUpRnb+r9q+KJ3cfSiDQZmTzHrM77EI+wXdpVjHHkYsVpQZKI0Cx/ZHi4hvzDaVt6yRbUMznYA7ElVYN24OI4cIlK3S7vrJgEEX7D1JlG5Zve2FJR7qU//8tC0cegx/+YFwJLONWT9bdsEFF9WxZMBWOrAbTVnTuhh/XfLBl5Yb84+RavHjqqHXYWLuNIGaziYJkD7lW98rGWO6Q01ea/bjzU1e6MwilryeWRN+buerQwzgM/BbpSb9X8bOaW2/lN/ygYDVrO0uFQ76A44oApv3XSARtUTK1xd8ESLwHWm+zzsyCxZ7qPY97XqR1ybCdp0uv6id6pklPvB20Tyk5rIQYjjrbP6WUREMFBizW0NkGF8fMAErfCBFr/stLI58HDeTjGfmLxhq6mxFTc46zh42HDGBef+GCyE9ozVrnQs9JfZjTkVIHQflIeOywB7G1kzlteShUPdY9E55sAOj4/uYoZYRHQj9nlLBiXci5lApjAfXOvu6PtZGctjwU2pdFN4XHRi+APn+ETE7QpH7j4E3wP2wCa6/O8sanOo8FrvSKZHtsTVezdkOg6f9+1J5ILCuqR9hMAtwbvkFolGhdFP6I3vSsihztSiWV9IgSHtqVixNABxhH+Z31nVn8krbFhduCdfl8rmnomiwsqzdxa+RTbdeoUPOU963wUqUEYBqQ0NC1hKtaPNQhUHVIdvIwmdC6qOikPypOFT4TXPQ1Rjk4dBFhL3uvbl9aNB+7pBy/u2weqvghobKKzV6rZgvhviTxFjWKCbGrvHzEufGrqPbtab0mTV+xGuFzM/TYEQrxOe+2xw/pCY1ihVHyN3wFJc0mgGoI8/Hv7Di88LQSwfhFlfVzcWS8A6eHEmy7a5yUuMOf04A9P5fqF3ejdqN2pwYE3H21644U+x3zfZ92XcNwqejDWbs6wRJi+eVMjBGC4L4fQB3pnIbsxtjo5DHvRX2o8zvn665TT++xY8/htDPG2MT2AlQSrnzSnyMLZk6OlD9kFPM3AaUzkru/fdTvnI97PK7YlOpHVivFZlGWmV7nT04fQnx95c+RBdMVPxpHVlPO3tID/HiTiiytfPCbRigX8ged6v3yeY1FiQ/XtMEdy/R7UXvHeIjSHWVkdJ9bMQEUzL1qm9Rot8vZLqU7zuzSTG5D8n2bUvdG/bWTO2JopUuvf2aC6zgbpfQu0HYJjtMZ+wfAWP7B5njOd+pxYHqamrXqQuH2bAXMCAUjUsPpVCL0g9dEpVq5OT4xx9BgeL+45eWyZG/X3Vjob2AjrNOR9DJpSYpDirrTdyZWvNd//IBgulPtk70THNdtg5HzjTEDlgYEoRQitQ3g7Uy5bxFP7i2JFu07SA54do87MtUpzxEiWYFOlVKmrkI/5sOYBWq1pLuHETH9363L/9MfSpcHBdONsUZVRDo6mqWXihnVpFatb8UaOK0k6nxwv48uZ9r7FEf/dF0bL2R12zcsPqznGeg6IZg/oGrV0VlSpf5k1DNuwOcWJjYwAbg+ZX33Z8B1n3S/XUqJ+h0vLnjBtz3YfUhgerD5SN21fy5cOJ8IOQ13pgAJlxAi/EBOw4I4Bxp94HbZNDl83rPr11+MAd9/DRksaKrmz/tLe5PdM/ER8UvhuWVw71hMfhYUtJQnjhDhHkT5faiznQn1963rqk76mP4diKml8K3O0v8AAAAASUVORK5CYII=", Vn = Fi.RoomStatus, Yn = Vn.READY, Wn = Vn.LIVE, zn = Vn.END, Xn = {
        live: (Cn = {},
        Di(Cn, -1, "ç´æ­ææªå¼å§"),
        Di(Cn, Yn, "è§é¢æ­£å¨å¨åå è½½, åç­ä¸ä¼å¿å°±å¥½äº~"),
        Di(Cn, zn, "ç´æ­å·²ç»æ~"),
        Cn),
        vod: Di({}, Yn, "å½åç¹æ­è§é¢è¿æªåå¤å°±ç»ª!")
    }, Qn = Mn, Zn = Nn, Jn = function() {
        function a() {
            ki(this, a),
            this._options = {
                sequence: null,
                courseSizeMap: {},
                defaultSize: [768, 1024],
                dataItem: {
                    dataMap: {},
                    info: {},
                    pageInfo: {}
                },
                roomInfo: {},
                userInfo: {},
                reconnectCount: 0,
                reconnectTimer: null,
                operation: null,
                status: Yn
            },
            this.events = new In
        }
        return Ii(a, [{
            key: "init",
            value: function() {
                this._initDom(),
                this._initData(),
                this._bindEvents()
            }
        }, {
            key: "_initDom",
            value: function() {
                var e = this._options
                  , t = e.el
                  , r = Ai(e.defaultSize, 2)
                  , i = r[0]
                  , n = r[1]
                  , a = un(t) ? t : document.getElementById(t)
                  , o = function() {
                    var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 6;
                    return Math.random().toString(35).substr(2, e)
                }()
                  , s = ["defs-rect", "clip-path", "bg-rect", "group"].map(function(e) {
                    return e + "-" + o
                })
                  , l = Ai(s, 4)
                  , u = l[0]
                  , c = l[1]
                  , d = l[2]
                  , f = l[3]
                  , h = '\n            <div class="sl-board-container">\n                \x3c!-- poster --\x3e\n                <div class="sl-board-poster poster-active">\n                    <div class="sl-board-poster__container">\n                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABPCAYAAAAdiWChAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAIONJREFUeAHtfAuYVdV971r7ec6ZBwwwCAiKFDEFvSbBqk1qHVIfoTYmqR2aGzXBRwZjizdJH7lfW+shSaNp0mg0N4nT+gh6k9SJ/RKxYIzKSa4FuQXpRxxtBdEIIjLAzDAz55z97u+39tnDmTNnmDMzJ8+PBWf22muv9V//9X+vx95C1DVFUgj+TqZfAgqUM6I8/0uA2q8QCkadcIVWyEh0bM8IzWwU35CHYk1B2ck0IQpoE6pdrXL7IzqKY8Kb1meFpt2tqmUFyk9qSjWSnahs6gxZ1h77jJt/sgAM+FMoym+LT25Ji6z0xdpN1ok6P/lsNAWmxpBsVlOEJ1wZXCoaWi0RhXOF2/B+1ZUzm9pzMk2AAlNjiLi41J6mKXqvCFwhdNMUIvyfCofO8/Iiu7lefmoCw/rVrTpFhpQGvnbXqSKKzhfeEHjhgTfhpeKmHe9RTw80nTRbE5CPKTKkLVR9hcEicOF04Tu4BI6wm9NCipvVs5NaMgF2CDF5hkQwU1kZMyTwFwmrEczwfRGGUnh5IBF+UNz071cpbPptmLGTqRYKTJ4h66ADSZLhaUJX0a+HKMsSftEVdqMmZHir+PiuFnHnuwpi9eZUUv3X/spgZ5Jp0g1Fd9dxhggxW/UfRZiP4L+MDFHsD6E154po6Avq2YMripg4/vppSjnxb9pyvrhp60KRzYaTDWYmzxDRXiYDYRN8B+5hwXiNQsANQuEOMur6mFiz5X+pyp3L/ckiWtbZL1m2PY4i1260gdhdoMGfKgQPNDHyLBfamvCefEjakzveWRQx1CUjoB3EA/+kMBBxubi3oDF3iY8/2ye+Lr8pssIXbQiFc23g3IilFYlITYhyUzhqCOvikttui1cGeHcci1G11frBunWlGreVPQecLGGM6L/s+QSyR34aw/dgDczUbyPSBFwwolN6ov0RS3QJzAVqT5NnSGvbcaJEUAsygxQgUYmQeqpZIig6QrdsPH9QrPlxs7j3d+8RuRU+6kmxLjquoVkQRyoCHYc71jiy2bGejCyPSVWCV9mG98AhC4Z1L5ViWXsEYUHdCTCJc6zsCoSWTPJqkZ4hYBXmiY6tZ4tO8RNMlI+PL6407t/JMwSsT5IufIRVHDeZwsQ8qeHjp9mKKVK3hZW5W1vzo6Wep/8liD9QqojLGInrZHMaDWFM14TfZwonbWV80wqlYwor0iOpa2CsHgVQy1CLya8jH4DbJkxmEPmaJoqFMBwUtlcU9/x+iXhJfyC+YgLuk+HQJwwzaBwBOVJgJOOLm555tx6Fq0XhCIYezRNRcQnU/yeiqVAShqS/8a9TYMhx4NOj8LCEhkQRQt7hlOAS0nzZUeh7whmQMt1yk4h6L9HWbP6bnqjpX0Tned60j/+/FjvylopQnh1G0RIAmRVJ2QxQ06Ji1CBl0Y5EBhPMKC0MLy0iMDmUihlgPIkiIy1AMwgkcdBkJAOG5FhPC2U+I2SfdIx+0bH5oJRyH3D9aRSGeyOhvaob9r635vzwsHLExJ0OmSlmkGyHUHQtexGMK5Wrh0Ishs/YQwYjUJkZDv6ttBubI6ffEWbGFl5hLlgjxMw0HSrwql3rJs8QIlmSqgYpfipDV4RRqGJfMKCMMciHQEgK+pkQUlSQZnqx0O3vLCj2/Vj72FMvRIH7nki33yZTmE9CpGOrB7rQDKqb0lXdk/FkNn5Qhvh5iUpKM5nnc9KBP61RavZsXMEvA0WxFYmwohA5CDrC4v7T3rjoJeCxE6Lz74YUu/b2zX1NdC2j7Y+6ulYFHKdizCPtQESIZau6zO6Stp0m+v5O2tMuC50+ap+hUVlFOE0xpLuH3lShwna1pHLC1VJ/ZB21uJgNz7rxB+9BNPU0NATPI/gHOPRRiVKipAVPQiAP0tiNFi1Z6BVE5OXZ2AVCatAkd4ngCY64qvZl93EnpHt5AsOgCDLmGxrhmUIMVwIgO9kCwiMtadhC/cAsCAYwG8D6j3gezXMylM/olrG9+2srwLnRaUnHD7LSaLgtAv5IYKA0MSYZOoO3vfyPl3xGZOEjb0P/sW8cDaBKSRXCVak1RlEbFhdzGKwZiN1Seq9rZua00MvDcUjAJR1GpDKySTr5SDjHivD+tGkgDiM1icljWTWlCSNg4Ebxa2ThqK7weETbMpiqJRpEMGsyDCJvKJB+HqZFKZ4hdaMB47hI6uZFgTNwa+Q5z5/b8cQDhrC/s6NzxWE2f8d1G1t9XfsC9uKuCxnaCwF1kyrS1CGPgRI4aBXmal0SwcIE0pQYInJxTy88cPm+827YtMU0rNNcdxDGnEEWrdQJEyqRAUwJkSeEe9x08n+JJE2snsgOcIbv8TwR9FKoGAKmDLvpnVK33unlD998/o2bPotIIYORfSaTap4XFI9xJRXD1cCMwMfVkFjPM6JAMe7FWAvJ7JrTlBiSU3OJuC9LBv9q+MUPwYJyggRDTw/7K5coS9RUJe0gdiicvoKiuJn5TSjyt9SIEOUHxaMIsaDpdE7QCow31AxThH4R9ku+ynqtP9+wl13KaHnHveaOzjWe5cunZHTsZctuXOIVBwrwEGli+SuXRqIMoZIYB6yqO0inzdiaxpDRSzI+3KroIjShKF5Y2KNrYTfHnf5FhL3vm/dmsAOd5x684uAlNzz2j7amfRE+TMNcETaaVisZYWLAeJ/kiXZlKj1PqiW+YLTnLjWE8y4DQV9edquyysfHOWBUpW82UcX8gzwhJPXUM3UDv1caDMd1vA175FipH6gQ5J76pw+8xe4aDw5yIjahVAW7CbVXlRMteV/Hhlmh7z9jpZrPcYrHhgC8oQZfMk6HJSLBSINOJWdDApX4TRuOxFDmeFk5SOUZUDlZ+UxgsIFiHyJVFb0pKOUtx8srvpE3mAkaZjoVeIWBMIwu2/TgVc+1YXU7xwXVCaYp+ZCkrx2dHX4226Fls/Lwldc/+jeaN/T9lKY1hIGPtSyBfXaiPrkESioDrWESoeuWznlKuYYpNijwlX0k94pf+MOaTJjZU6RDxEIhInSJuVGklhT4kE6eZor1eD9OYr0Q6wRaytZNUXQHO7/3YPtzKJStQz1w+BNPdWEI+o9yuSwHEz52/1WP/dH1XZ81dftWTJM1mN9ElGvCjmRQ5ADNQEJfk4ZpGClFPM/Pc+frELShFwQbQg0HXfu4L6IRJjPCBbGxJyMCCH2I/RiAgmGXogkK0gzYzZgNzQbcFlxbLNMGf20NXWkhGET5AVwP/OL8juNRbCE+1VKJZZGJuYxfOPoMUPoc661cu9HqGrVMUw3C6LKx+hpds4aStVhOuAeIXHfdI62OCLeYZsNihMGYa8gUBg0IitSla1WAinkgiAoVLTOtB5isBUGwHQ8eB79/FITeXtGYOip6REHNoquCqV7YgQDkmN/cqgX63FALFgOvpWDmOXB4uIqFppmyNQRNnl+EAASQcImJO1g+Cne0wj+0cdHG8rziUbD+0n9+4EPPX3vt+oaHHvoIJ5eTSnXSkLjvgyUnFgTe2aYm5mt+QZhRaGDWjAoleRoDTehRzIxQLRVKy8xojjv4KgT1jjl57aE7u1ap6fAYzQE+ku2rurSenlYp2oRYcuBlyWBjUW9L2NXFJQ8ZdSIaRNGB0o+PVQIRZ0e68c7Iza8AGithfs7RTNt03aIP/0ITBp5B4UaLr9SxBAOFzAD70wDs+enTZ03YkZfQUJfRXZQ/nUBerfVw3QfphtUP3ZFJt3x6KN97DB1w8ocLF5EivbzDchaxHHKH9pGwrYzuuPmnYTuuX7/+I68TJtPq1Q+kLMvVentb/JaW3ujleUuiVq4XIS3j2hpSlnslZZ1kubyO9Ytcbp22ZMlcuc9eoCH60YotaenberCpwrSgj+laaFwPIfoz20rPc52CDyYx3IVpq5JgJjOZ6VY+37fxvvXXXsEa1MQS86s0OHFRGeonrjje0wSJtWvvtv3+5k3Tp81dMTB0ROhYI/Kh/QEcKGgNe68WvEAzSF3MIGSBBuwUCp2U1WgXncFNYcp5PwcFRqdhmgpYbdUqV1zHw6mW5xSkOVjid5xA37fv1WDTplvUEv2a6x5eClt5f9rOXFB0hjxgp8zXKJjA2TLStusVDmIgl399/Ud3fbL9y+k7uz51Yo0eBSguqJvJmof5CEHOPDgnOpIaWD/Qvx8IigWwFb8B1TglZSDu0g2s4MFB0IFC1WGnaUqwDqSQKdpmutlx+l+Y7jtX39F5s9fRfu+0zq5V/bd85L4VYq/4VHTtfbmDxaa76DvATLCRC5ajE9bKNbF8gy4WLQplV5fCa3StuKTkh4brUAv55N4HrnnxE6vvfK/v+I83WQ3vLrhD8IVK20eCCoUuYZrhfOb4oXc+Hu7yBw2Ma3KpbhrC7rOQYvyGkYHWZBoceUYYakthAs5BhHk2tGAJ1GEBNKfZ4korLBk1iH7GgwNHnd/70kMfe+bP4Ry/BOeYbcsa/QtO/a+Z009d5LhDIl/sv/gfvnnjjwEDuCv0RzAlWrbMkt3dw9umuxcvthdfc40ny/Aaj1Rk9pqOzjQ0NP+Ja+6dK6W+xTbtha5XxLwiCVCGobD/MGU36EU3/5U719/4CT6ppMVw7XEyddOQEhIhERHdrRnRkPGzndcxTOUyAn9q9+TPr/367EhqS6LQPdt13HNAUuyfyrnpVONZges9/MWHb3qGsBoRX/Eq2kRo7Ale9oYOgyH5fkOY/ao8/jOSGW1thszlFDMeAWNWgTFn7tnjgDoiWrnSlps2KXNU1r5qVmleZ1To6BDmXZ1r3vz0td+4RY+MxwwRYE5FP8eQeLhrCgYf6H7kL0wAHjgwV00Dkvtar0rEaq08Xr1qZgQ22lrW0mv097bgWLxwV5UcfwKL9jaVthZgb+u3ZKDtuP3ba/4Tz4hXlPilv/7wV08PNH21FslnP/9/b3qabSv72gxmrMjl/IGLLmo1PO9mmMbfglHbi3nJNxu2bVMRFbVHtLaGYFpNkRC1M5vLqrp/dc3Xvt+Yar5yqHgMQiax4hszRCEqhJOxG+28M/RvvmWt/Pv7bxjIYtzZrlXDmkqca0l1ZQg7/DIIfES3Z3mZwb6/v//T3DefUKpU9cr7ErASHeK7CFpJk/TK8uXT5hnGJoRi4H2cXM/rxdz0TlfT/s+0rVuPsjRqa0sh7HIAZFjMS9UrLjSLTDJad/VXP4g5x78UvSK2F5S5hGtkc95FTgOCkSFnaIeWSl2Wve/Go2tX3m3fUwoQFIga/9TNZD2CaIXSn0+Zy9KBf1/aSfV97uqv7IGE9mBUjP3f1DTtIObQPa5RPDpjut1/yz1xRJPgSo3IZtVcISmCtcmG2fasdWRwhiLO3ZvWYlexwplv24blcuHMMc21ZIbvuojm1PEbLLboLXBQn9E878qBCy64o2nbtkehIUUwxdi9f7+uTNpwb5UZGcVaInw9cLbjzMS+RjO9wPEdbqyluASjdBleE+YMcy4EK8eOKSBnVoKq8b5uDHmqpRcSIwLd95tnNM74Hxm7Qbi+87sIrZTTdj1HFLDV6UtvIBUYB/NHgzfuuPrL+yFkr6MhDkloT/9F55pdxLvSHGW7ssOqf4+4ZcyhYZHqXIHjxSUyZVjRCwJGR4ZlWecZvv/dwoUXPuhJ+QUwhabRV9rS2uqNF4293tx4cNFAfldG1xcEXqBOc9BsYUKoFAUTYDAlFA1jYlfbg7oxJAl7rSjcPTDU87mBwZ45QKEZ0tkKez4TktQKQrWkdbPJNlNNlm6daYBZDIGnZaaJV3te/SrqryXaXe1dGkKA2KmzYLy0e7eqAZ+BNS2lSBQOdKfusGyDbXvPK5g485IyzdXS8y7NX3DBl45o2r1gjJovkDHUnMqulrZyVUUIzom++OF/eN3CEhkJr3pRGsJcpLTDVCiz68mnujGEpkVJ9nfkPqBzK1FCmdbwSkPa9N1GLTAbPRlgcS9sLvjFlkIkZ2BZYiZoNqN/oOdsnAfZmgzjxbITLUnZCa9nwkDs2cMqo6ihqIlykC2Nmb8nfT+0DYPvs9w5KwjeP3jBBbc3btv2pDJjCJHF/PkB8lWdPkxS3sTisAUhKsGN2Y6ODWoIfuFoFE6IeuXDujGEgGnbyYTzt80w04WjwYqsilC40Maf2rRhvcqEweEEYVbGB4AVI4fnMpV1x7kfplNlPT4AU0zafc/31SQP2tIGp/9uaEuno+tflFu2/JSMpX+pxhSYpQj75QKH4pSCkBsYs2IO/Qd/NvRnKmlqrSt6VhqS5QE1UVO8nzTH6HgQLTEAYxI1qT/W1QnDYkq9FlG9RgIY/dGM4TiD51malsKrFH+ie97lBWhLetu2+8mMqL1dr/QrOpZ/SHQyhZZxGGEAUxoC7ZlqqidDgKOMHlidTYmimINdCQ1TqDDQjMjClClB1HcNlecmPDalEb7g3vNN1D0qv5ftS+pN5Lqn5EMO+b4/zRh/SCVkOHHTvZAn/ELNMozFoPB9xQsvXJZ67rk/w2plhFNysis5DYjK9B1KE+grkhHhSsaYOOhAHxKKOMqaCP7ldUfZ3PKHE8kj7FWwjIJYqgXiCWzs5TQz2mTq/g8RiPwQsvMUr7rl4+c9mRLRD3D/hB74GwxNPIttpGuS/mj2kvxErkN4ews/tbOU0Gu89hB0C3U0mDGuKghbyk/BhF3Iec1rbQvtF8GYBIYB38Hw1gDxqSXDP7CB5TBliGKSFAcayV2t1/HFqUZIrT0vYmwYWSQa04Z+VsqwRBE7cIykTpR8DHImoqw3jh0+Lam3tLtbwUrua72akILDWHGZiWsG+srNj/E4W6I2q6VdtGXH2MA5C5fnFg7M1LLIJImHGEo+BCYLvgONabqYUSaLmhNvNCZNJnytG0OSns3I8QJPG8x7BRxwgMDiRCIHrfAuVTqeZxQfeYP5sAkqP+FZfdJnciVczMrFAcxFFsB0QdpFEi7x2ViphI8DrqSwcS+cIFAzemFZw9rBtrHJgtkCY9RknXYLI8AfZa7IlPjstxCLx+psnPLxBGic5qMf6wGPNAc2FttxnjSwsd6ufjgeODofBSlsuqfSkGhM6qYsHKQe30YowmztB1MGKbksw4/P+APJhn+qTE23RR5zFCi1JYZ8f/ObqdQPUU2I+VvdR8q0lSYpMU1kTnwfh7vHNUS1nPSf+jNEC3Gsg8jSpp74h0EhjIxDSWxjTXoQ5Q1JZJgcgXdCxBs4FXoIZggnHxRTyByusYD4yc9B3jdMM8M6/cXiNw4WCh86AxPE7cuXm/DoIyanxDEmfGy6yJTEhCXXZlG+GF2OWW35KUtlZTcGLDdjc0OpcqzaJFK1xAiekXwyyGp1JlOWMIUsJkOOgTl4yURQE8kMbJDzkYtDfRkDZWDCNhR8ZsH27RvZX2keQhc0IkHbFQNI/GT+ERssaiK1h/o3tVR3hlACeSDAQBwbv54AlCF91VI8GDIEEQuIVs/EHmmqCJUmzCEjcIVJ4FJJerZpGq9je9KPotu39vd/Y83evUq0I2pGLjeKGWgjdLQn0WkB6NTVuErX4TFM0ebUnSFUa9Jfx4+vHtKdx3oQk58DK09KQ2AZzCpHQMvr1ZLHWtYIrvKGvVIrkHeBUtig61xCEW+47rdxAPmOC3fujBc0MTtnH2Mxg89MHBMrzUM4B47HVboqhmDs/i9blGVAtkKNtpUIQ5LIGI6mSiKxSDQORov8KQsHtn8NnNthT+oPhZVMQB9cWGxoQeTV43kv6pp227k7d36XFZm6ue1b2mmMS6r/RWDSQL9IE8seKHjsiONLnH1migyZooJVQxwyQqQh9SS0ThVnXl2ZL6l9fI9z/2EA7YA5CLDQGKfWHm6h1J72z58f15fyKKI7NhxEQRGEypMhs3BiD047eMt1b8dkfsXbtm9XzKDjxnNtWdkefGWvrT3LFOzdK9faGNcZEJx4TAxcMK54fBTA+L6y/UTv684QFcUgelKRVokJClkgrNSaTEryZA5OySsGynDRlvZPcjVFNC3he58TSipEg8nq7PP9gTmW1QjGpKARmem6bhz2vE2Q6d85Z+fOvzp3165DWc5fYaLO27HDQ0dU0nFTX8Y/Fbie6+GFHOCvKyeuxgFG8Mqx4IgT7GFN8MbqcMpmohKwhe0orsObMOdw6hBA0haX4StblMoYiUE5fMzoMQ95u+EPLMTDl/b29rJCzWnF8cXAV156xzsuP+i6fwsA5xSC4A30fO/hadPWsw4BUiuW79jhw0Sp+xN1QkchczzsjZXIwH/3DCt1yjHX8YwI33NJxoAriUihw2pwb3BKnivbYvYCZ1KMqRtDmgYOKCKaWjDkBzJv4f10zJpBD7p0MqR6QrRiOp7jz7Ts2cdc92LUeqm9qwsH00AM5YGqt6ssLa3Myt/cuXMriH4lDq2c2mjbR8/ctk2t9nH1lm1Qr2oEVQmP97m2dbrICX97R4epHQxvwMkSagO1Csv4w/TG4KROLcck943lnf+k4C/v7R2uUA32WGV1Y4hYji5wtsMOoqMgZg+m4C1YG8LGAZ37WAkxFs4EoT6+BBAasMk3br+k49vyqc7+7vZVE/4sBftZB3NEU4Tsa0mval7R1TWuRiT1ec0KLnDmVJH+pn/1dMu+uN/JeyAYl+7LE8YYGTz4p4fRf/FBhNMqois7YlJZ3uBE+foxpHR0ObAHDuvF9J60tJYMwWRRbSoGUAWfKHXMzXuzzNTyo5kiP3x2+9Jly/zNPT3qaE+VBlWL0BdVUlxcCmFZ6Ue5XM3HfhKgPMWyv7vbXtCVK3S/76PL8KLn3R6+ywYt4HiGz/hybEhBSjf0gufkNS1SVNja2m2+i194mESqm1PfuyhW0WVdXS6c23YtjkDw7QtGIif+ob6kY8SCJG3x5//zymvey+Xv+em0jsNZjBNqTmQK/UXyy9botEsdyH3t7ek9OMWyoKur8JOVH8Ux2GDDNENvwol+B47bGjkeFTUiFua8K3wBy8X/n3BaBwcnZa7YtsRkZqeeNkMySYiXr7zmUgRaT/KtlwDf1EA342oiEYF0u2ndsAqBfwzzxKuW/Ou3niJWBy+7tuEld59D2FPH8jgEaoI4cEB/7WVXt5uOaL2plE+BYo2Xr/jwJZiO399gmAsGsbMISlUTDBJea8TbhYO+v+6sxx/OKnOVy/I7H+MbhuOoDOfGJdRwzRoybQxXczkcn4624cWJLTNM+129Lr4uB4bUgh0GYbm+6zUaRjOYsuGVP/jj//0bj//zV+Y8+ZCKXF5tW50i4YJUbMb9HqzwIy1MvxXtwXVxY2P0YgWe1uCgNAqnKMEzWoekXixKtoenD6CFJD6JOuzo91zZvhjfX/skjN+NabxDl8dpaxx7V3RKxlAiNmZPkddkWPaA7+zH0s+32PVUzBXbK0SZqUeiI7xNZFUw++oVf/zxZtP6Wr/ncvKMd7nxqzEBKd/EUXlWdwP/R2h712uFQ4/XW0MIf/fK9lap6WfCbL4d1HgPnNCKjGHM8DG/x/YuXzQl3qPohAL1DNohhwL/cwsf/86tDB4gkJPWDuIzqiMWTiV1t7dbVPt9l7fPCA3x5AzLXt7rukNgSgOi4GS1YcwuiBAlkQPG62U6Dy3k1eG3qBvF/wZ3063L8E1EZ32+LgrwsC6mPC7q4g2P0NN9E+GOF+U1nW8H6XbgpbxQw/dxIrzlpM2GS56LcHw+wu2F6OV0aMJ89Dfb1nSLO45YbIQQ8JgPPHi8PoluR6ZS5FicblqpPs99vqAX29722GMDu3Gg+8waD3SPhHj8ru4MwSBkrq1NpzTv+/2rrkpp+ne5mIdpogtRs5AdlynD6GFNEHZBYokcX3XBNzXxAJ/CouQSHjcHGVryTA6v9C88TcF7XPBTK+3K9uOLC+pLPQbhcBOLYs9KBBID4nsrxF7BYqw+HE2h2nDiAS9UK0KLUjCrBcy5Ljv9ia5naU7PyD046qDdcMMaM3X1IeyTxNhc6nzBxkcffXPlH95zSspeewivKKGYxAItqCmgyjgJzFB1gxCJtMI9AwUiDQknh0if4VSeV+DRi0IINZBDr2Qj1Al3fMQSBbWUgV0FI9T3t1T9EfBQm0wEHgXsq6QZq6Byx+lPfPdZFQl2dk7o6BN7r5bqzhB2Qu0gkrKz0xsUhb/QiuFZc3Aq/JBTwKvMPH9AZlAux2cKwKEuZu2xtWMjRaz4z8ghVRKQTxXdR1aLtaP0eQfgQDqXpdEtCLfEwnwzvhbkg7FuGFw/b+P3H1aRGjSUSJYBmXS22hgmDayyYcKU3g98AG+phRtmpVK/c7jo4GMu2L/C8gPktbLJ8D0Rq3xaC7Jsk9Qrzw8DLstUwk8eJe1jSEoSKP1ylm3bhx0HhzHk1a2bvr8B7dWJS86ZkrZTvR7ve6qQxmjPxTwuZRxqa2/U0s76mbb9wT6nSEOdR+dp/GCJfvEpIYRiIje64FLw3gc/9WDg8J2pwzgedd2NWHy/5ZRN33tFvceYBfJ1ZAapkODxM6WIWksqTeqOrvyDv0SnX5iOEx59rku/ApPOj5dhQh/bshG41ItZlQNVcCH86BLE5xoPPvuAe1z5jUETrx1InGaEow/FgO9tR/Ed0zdueJTIKTOVzarwfgSydbipxLMOIKuDeASrratKb8QOrFy5FN9azpqabE9hlusirHVCxJpxpKSEFH/gYBjsgEQxSHWJy+OCxAdVDkIBAN3QlhLHWzbDjx5I/SFM/qfg6zjsgBAMroTuBP5h0MNHQUT0Cpj1NJx417TmzObknC8BsfcSXGbrmhTwukI8AbDKwfRddsVyzClWA4n3gSinG5BIlUg20pBXRVaGzSpLQimKqkeqQlyNLdQtgHFQDMFIdaidCnPVTYkNcV2Ez5ABNwz55eP9+O1GBPcCdOU/sP78UoNp7pEbNqjjpap+DJ4Q2PXPLBH3n2vCaFSf5QM71NbW2JhKnYNT/m8Hud8Gas6GPDdh9I3gRxPK4GvwhWx1DpebQyry5VchsCSjxJriXRoLtQBHXmgK1Sn8CB+lkYMoPIqe3wKcQ8i/BuP0BqzSa9IzDhz0Bw6dUeVlHbQn9UtwVQa3P9s03NnPtpvR0JOBAoFxB6l2+RZZhnBajWOOg7mdpkuXk3NcbUScgY0fI08kbBWl8VLOIA7ANZqYtWuaI5YvL9bqfBO8yjGuBcfy+lPJ/8IYkiBdSYCfx+Ar+0xwSa4/DxySviqvv3CGlCM0HqHK6041Xxo4ujyZTlLgJAVOUuAkBU5S4NeDAv8NegAF3ZOxnVMAAAAASUVORK5CYII=" alt="" class="poster-img">\n                        <p class="poster-text">' + this._getBoardTips() + '</p>\n                    </div>\n                </div>\n                <div class="sl-loading">\n                    <div class="info__waiting">\n                        <img src="' + qn + '" class="sl-icon-spin" />\n                        <div>è¯¾ä»¶å è½½ä¸­...</div>\n                    </div>\n                    <div class="info__error">\n                        <img src=' + Kn + ' alt="" class="info__retry">\n                        <a class="sl-btn btn-retry" >éè¯</a> \n                    </div>\n                </div>\n\n                \x3c!-- board --\x3e\n                <svg class="sl-board-svg" xmlns="http://www.w3.org/2000/xmlns/" xlink="http://www.w3.org/1999/xlink" viewBox="0,0,' + i + "," + n + '">\n                    <defs>\n                        <rect x="0" y="0" width="' + i + '" height="' + n + '" id="' + u + '"></rect>\n                        \x3c!-- clip area --\x3e\n                        <clipPath stroke-linejoin="round" stroke-linecap="round" id="' + c + '">\n                            <use xlink:href="#' + u + '"></use>\n                        </clipPath>\n                    </defs>\n                    \x3c!-- background color --\x3e\n                    <use xlink:href="#' + u + '" fill="none" id="' + d + '"></use>\n                    <g clip-path="url(#' + c + ')">\n                      <g id="' + f + '" class="sl-board-svg-group group-animation"></g>  \n                    </g>\n                </svg>\n            </div>\n        ';
                a.innerHTML = h,
                this.boardContainer = a.querySelector(".sl-board-container"),
                this.poster = this.boardContainer.querySelector(".sl-board-poster"),
                this.loading = this.poster.nextElementSibling,
                this.svgElement = this.loading.nextElementSibling;
                var p = this.svgElement.querySelector("defs");
                this.defsRect = p.querySelector("#" + u),
                this.bgRect = this.svgElement.querySelector("#" + d),
                this.groups = this.svgElement.querySelector("#" + f),
                this.elements = {
                    defs: p,
                    groups: this.groups
                }
            }
        }, {
            key: "_bindEvents",
            value: function() {
                var n = this;
                this.loading.addEventListener("click", function(e) {
                    var t = e.target;
                    if (hn(t, ".btn-retry")) {
                        var r = n.groups.querySelector("image");
                        if (!r || !n._imgUrl)
                            return;
                        var i = t.previousElementSibling;
                        i.classList.add("sl-icon-spin"),
                        n.spinTimer && clearTimeout(n.spinTimer),
                        n.spinTimer = setTimeout(function() {
                            r.setAttributeNS("http://www.w3.org/1999/xlink", "href", n._imgUrl),
                            n._reportImageInfo(n._imgUrl, null, function() {
                                i.classList.remove("sl-icon-spin")
                            })
                        }, 500)
                    }
                })
            }
        }, {
            key: "_cacheCourseSize",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
                this._options.courseSizeMap["" + e.iCoursewareId + e.iPageId] = [e.iWidth, e.iHeight]
            }
        }, {
            key: "_toggleGroupsClass",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] && arguments[0]
                  , t = this.groups.getAttributeNS(null, "class");
                if (t) {
                    var r = t.trim().split(/\s+/).filter(Boolean);
                    e ? -1 == r.indexOf("group-animation") && r.push("group-animation") : r = r.filter(function(e) {
                        return "group-animation" !== e
                    }),
                    this.groups.setAttributeNS(null, "class", r.join(" "))
                }
            }
        }, {
            key: "_getBoardStatus",
            value: function() {
                return this._options.status
            }
        }, {
            key: "_getBoardTips",
            value: function() {
                var e = this._options
                  , t = e.status
                  , r = Xn[e.isLive ? "live" : "vod"]
                  , i = (r = void 0 === r ? {} : r)[void 0 === t ? -1 : t];
                return void 0 === i ? "" : i
            }
        }, {
            key: "_setBoardTips",
            value: function() {
                var e = !(0 < arguments.length && void 0 !== arguments[0]) || arguments[0];
                this.poster.querySelector(".poster-text").textContent = this._getBoardTips(),
                this.poster.classList[e ? "add" : "remove"]("poster-active")
            }
        }, {
            key: "_setLoadingTips",
            value: function() {
                var e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1]
                  , t = this.loading.classList;
                if (!(!(0 < arguments.length && void 0 !== arguments[0]) || arguments[0]))
                    return t.remove("error"),
                    void t.remove("waiting");
                t.add(e ? "error" : "waiting"),
                t.remove(e ? "waiting" : "error")
            }
        }, {
            key: "_reportMessage",
            value: function(e) {
                var t = this._options
                  , r = t.roomInfo
                  , i = (r = void 0 === r ? {} : r).iRoomId;
                2 < arguments.length && void 0 !== arguments[2] && arguments[2] && t.status !== Wn || !i || wn(e, yi({
                    rid: i,
                    uid: r.iUserId,
                    biz: t.isLive ? 0 : 1
                }, 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}))
            }
        }, {
            key: "_reportImageInfo",
            value: function(t, e, r) {
                var i = this;
                this._cacheImageParams = e || this._cacheImageParams;
                var n = Date.now();
                a._cacheImage(t, !1).then(function(e) {
                    i._setLoadingTips(!1),
                    i._reportImageMessage(Qn, yi({}, i._cacheImageParams, {
                        uri: t,
                        loadTime: Date.now() - n
                    }))
                }).catch(function(e) {
                    i._setLoadingTips(!0, !0),
                    i._reportImageMessage(Zn, yi({}, i._cacheImageParams, {
                        uri: t,
                        loadTime: Date.now() - n
                    }), !1)
                }).then(function(e) {
                    r && r()
                })
            }
        }, {
            key: "_reportImageMessage",
            value: function(e) {
                var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}
                  , r = !(2 < arguments.length && void 0 !== arguments[2]) || arguments[2];
                if (this._options.debug) {
                    var i = Ai(r ? ["", "blue"] : ["å¤±è´¥", "red"], 2);
                    ln("info", ["%c[å¾çå è½½" + i[0] + t.loadTime + "ms]:" + t.uri, "color:" + i[1]], !0)
                }
                r && t.loadTime < Un || this._reportMessage(e, yi({
                    loadTime: 0
                }, t), !0)
            }
        }, {
            key: "on",
            value: function(e, t) {
                this.events.on(e, t)
            }
        }, {
            key: "trigger",
            value: function(e) {
                for (var t, r = arguments.length, i = Array(1 < r ? r - 1 : 0), n = 1; n < r; n++)
                    i[n - 1] = arguments[n];
                (t = this.events).trigger.apply(t, [e].concat(i))
            }
        }, {
            key: "getSvgComponent",
            value: function() {
                return this.svgElement
            }
        }, {
            key: "dispose",
            value: function() {}
        }], [{
            key: "_cacheImage",
            value: function(e) {
                if (!e)
                    return null;
                var i, t = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1] ? e.replace(/^(http|https)?:?\/\//, Hn) : e;
                return i = t,
                new ii(function(e, t) {
                    var r = new Image;
                    r.onload = function() {
                        return e(i)
                    }
                    ,
                    r.onerror = function() {
                        return t(i)
                    }
                    ,
                    r.src = i
                }
                )
            }
        }, {
            key: "_filterTrace",
            value: function(e) {
                var t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1]
                  , r = e.iId
                  , i = e.lSequence
                  , n = e.iType
                  , a = e.points
                  , o = void 0 === a ? [] : a
                  , s = e.iDuration
                  , l = e.sText
                  , u = e.fontSize
                  , c = e.iCoursewareId
                  , d = e.iPageId
                  , f = {};
                if (i && null != r && "" !== r) {
                    var h = {
                        penWidth: e.penWidth,
                        lineColor: on(e.iColor),
                        duration: t ? 0 : s
                    };
                    xi(f, {
                        iId: r,
                        iType: n,
                        points: o,
                        lSequence: i,
                        isInit: t,
                        sText: l,
                        fontSize: u,
                        config: h,
                        key: "" + c + d
                    })
                }
                return f
            }
        }, {
            key: "_getScaledPoints",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : []
                  , t = Ai(1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : [], 2)
                  , r = t[0]
                  , i = t[1];
                return e.map(function(e) {
                    return [e.x * r / 1e4, e.y * i / 1e4]
                })
            }
        }]),
        a
    }(), $n = Fi.TraceType, ea = $n.TT_PATH, ta = $n.TT_SOLID_LINE, ra = $n.TT_DASH_LINE, ia = $n.TT_ARROW_LINE, na = $n.TT_RECT, aa = $n.TT_ELLIPSE, oa = $n.TT_TEXT;
    function sa(t, e) {
        var r, i, n = e.duration, a = void 0 === n ? 1e3 : n, o = e.penWidth, s = void 0 === o ? 1 : o, l = e.lineColor, u = void 0 === l ? "#990033" : l, c = e.fillColor, d = void 0 !== c && c, f = e.strokeDasharray, h = void 0 === f ? "" : f, p = e.fontSize, g = void 0 === p ? null : p, v = e.totalLength, y = void 0 === v ? 0 : v;
        if (g ? t.style.cssText += "font-size:" + g + "px;fill:" + u + ";" : t.style.cssText = "stroke:" + u + ";fill:" + (d || "none") + ";stroke-width:" + s + ";stroke-dasharray:" + h + ";",
        a)
            if (t.style.strokeDasharray = h || y + " " + y,
            r = !!document.documentMode,
            i = !r && !!window.StyleMedia,
            r || i) {
                var m = y
                  , _ = 1e3 * y / (60 * a);
                !function e() {
                    0 <= m ? (t.style.strokeDashoffset = m,
                    m -= _,
                    requestAnimationFrame(e)) : t.style.strokeDashoffset = 0
                }()
            } else
                t.style.cssText += "stroke-dashoffset:" + y + ";animation: painting " + a + "ms ease-in both;"
    }
    function la(e) {
        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}
          , r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : ""
          , i = document.createElementNS("http://www.w3.org/2000/svg", e);
        i.textContent = r;
        var n = {};
        switch (e) {
        case "image":
            xi(n, {
                height: 0,
                width: 0,
                x: 0,
                y: 0,
                preserveAspectRatio: "none meet"
            });
            break;
        case "marker":
            xi(n, {
                orient: "auto",
                markerUnits: "strokeWidth"
            })
        }
        return xi(n, t),
        oi(n).forEach(function(e) {
            i.setAttributeNS(null, e, n[e])
        }),
        i
    }
    function ua(e) {
        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : ""
          , r = 2 < arguments.length && void 0 !== arguments[2] && arguments[2]
          , i = e.defs
          , n = e.groups
          , a = r ? i.childNodes : i.querySelectorAll('[data-id="' + t + '"]')
          , o = r ? n.childNodes : n.querySelectorAll('[data-id="' + t + '"]');
        gi(a).filter(function(e) {
            return 1 === e.nodeType
        }).forEach(function(e) {
            -1 == ["CLIPPATH", "RECT"].indexOf(e.tagName.toUpperCase()) && i.removeChild(e)
        }),
        gi(o).filter(function(e) {
            return "IMAGE" !== e.tagName.toUpperCase()
        }).forEach(function(e) {
            return n.removeChild(e)
        })
    }
    function ca(e, t) {
        var r = t.iId
          , i = t.iType
          , n = t.point
          , a = t.sText
          , o = t.fontSize
          , s = t.config
          , l = t.timeSec
          , u = t.size
          , c = void 0 === u ? [] : u
          , d = e.defs
          , f = e.groups
          , h = [0]
          , p = h[0]
          , g = h[1]
          , v = {
            "data-id": r,
            "data-type": i,
            "data-index": t.index
        };
        switch (i) {
        case ea:
            var y = n.concat([]);
            y = "M  " + y.map(function(e) {
                return e.join(" ")
            }).join(" L ");
            var m = la("path", yi({
                d: y,
                fill: "none",
                "stroke-linejoin": "round",
                "stroke-linecap": "round"
            }, v));
            (g = f.appendChild(m)).getTotalLength || xi(s, {
                duration: 0
            });
            break;
        case ta:
            var _ = Ai(n, 2)
              , T = Ai(_[0], 2)
              , b = T[0]
              , E = T[1]
              , S = Ai(_[1], 2)
              , A = S[0]
              , k = S[1]
              , w = la("line", yi({
                x1: b,
                x2: A,
                y1: E,
                y2: k
            }, v));
            (g = f.appendChild(w)).getTotalLength || (p = Math.sqrt((A - b) * (A - b) + (k - E) * (k - E)));
            break;
        case ra:
            var R = Ai(n, 2)
              , L = Ai(R[0], 2)
              , I = L[0]
              , D = L[1]
              , C = Ai(R[1], 2)
              , P = C[0]
              , O = C[1]
              , M = la("line", yi({
                x1: I,
                x2: P,
                y1: D,
                y2: O
            }, v));
            (g = f.appendChild(M)).getTotalLength || (p = Math.sqrt((P - I) * (P - I) + (O - D) * (O - D))),
            xi(s, {
                strokeDasharray: 10
            });
            break;
        case ia:
            var x = Ai(n, 2)
              , F = Ai(x[0], 2)
              , N = F[0]
              , B = F[1]
              , j = x[1]
              , U = Ai(j = void 0 === j ? [0, 0] : j, 2)
              , G = U[0]
              , H = U[1]
              , q = Ai(c, 2)
              , K = q[0]
              , V = q[1]
              , Y = s.lineColor
              , W = s.penWidth
              , z = (void 0 === W ? 0 : W) + 3
              , X = z + 5
              , Q = Math.sqrt(Math.pow(G - N, 2) + Math.pow(H - B, 2)) - .75 * X
              , Z = .5 * z
              , J = la("line", yi({
                x1: N,
                x2: G,
                y1: B,
                y2: H,
                "marker-start": "url(#marker-start-" + r + ")",
                "marker-end": "url(#marker-end-" + r + ")"
            }, v));
            (g = f.appendChild(J)).getTotalLength || (p = Math.sqrt((G - N) * (G - N) + (H - B) * (H - B)));
            var $ = {
                id: "marker-start-" + r,
                "data-id": r,
                refX: 0,
                refY: Z / 2,
                markerWidth: K,
                markerHeight: V,
                fill: "none"
            }
              , ee = la("marker", $)
              , te = la("path", {
                d: "M0 " + Z / 2 + " L" + Q + " 0 L" + Q + " " + Z + " Z"
            });
            ee.appendChild(te);
            var re = la("marker", yi({}, $, {
                id: "marker-end-" + r,
                refX: X,
                refY: z / 2
            }))
              , ie = la("path", {
                d: "M" + X + " " + z / 2 + " L0 0 L" + X / 4 + " " + z / 2 + " L0 " + z + " Z"
            });
            re.appendChild(ie),
            d.appendChild(ee),
            d.appendChild(re),
            s.penWidth = 1,
            setTimeout(function() {
                te.style.cssText = "fill: " + Y,
                ie.style.cssText = "fill: " + Y
            }, l);
            break;
        case na:
            var ne = Ai(n, 2)
              , ae = Ai(ne[0], 2)
              , oe = ae[0]
              , se = ae[1]
              , le = Ai(ne[1], 2)
              , ue = le[0]
              , ce = le[1]
              , de = Math.round(100 * Math.abs(oe - ue)) / 100
              , fe = Math.round(100 * Math.abs(se - ce)) / 100
              , he = la("rect", yi({
                x: Math.min(oe, ue),
                y: Math.min(se, ce),
                width: de,
                height: fe,
                fill: "none",
                "stroke-linejoin": "round",
                "stroke-linecap": "round"
            }, v));
            (g = f.appendChild(he)).getTotalLength || (p = 2 * (de + fe));
            break;
        case aa:
            var pe = Ai(n, 2)
              , ge = Ai(pe[0], 2)
              , ve = ge[0]
              , ye = ge[1]
              , me = Ai(pe[1], 2)
              , _e = me[0]
              , Te = me[1]
              , be = Math.round(Math.abs(ve - _e) / 2 * 100) / 100
              , Ee = Math.round(Math.abs(ye - Te) / 2 * 100) / 100
              , Se = la("ellipse", yi({
                cx: Math.min(ve, _e) + be,
                cy: Math.min(ye, Te) + Ee,
                rx: be,
                ry: Ee,
                fill: "none"
            }, v));
            if (!(g = f.appendChild(Se)).getTotalLength) {
                var Ae = 2 * Math.min(be, Ee);
                p = 2 * Math.PI * Ae + 4 * (2 * Math.max(be, Ee) - Ae)
            }
            break;
        case oa:
            var ke = Ai(n, 2)
              , we = Ai(ke[0], 2)
              , Re = we[0]
              , Le = we[1]
              , Ie = Ai(ke[1], 2)
              , De = Ie[1]
              , Ce = Math.min(Re, Ie[0])
              , Pe = Math.min(Le, De)
              , Oe = Math.round(100 * Math.abs(Le - De)) / 100
              , Me = a.split("\n")
              , xe = Me.length ? Math.round(100 * Oe / Me.length) / 100 : Oe
              , Fe = ""
              , Ne = Math.round(50 * (xe - o)) / 100;
            Me.forEach(function(e, t) {
                var r = {
                    x: Ce,
                    y: Math.round(100 * (Pe + xe * (t + 1))) / 100 - Ne,
                    style: "white-space: pre;"
                };
                t ? Fe.appendChild(la("tspan", r, e)) : Fe = la("text", yi({}, r, v), e)
            }),
            g = f.appendChild(Fe),
            xi(s, {
                fontSize: o,
                duration: 0,
                penWidth: 1
            })
        }
        return setTimeout(function() {
            g && sa(g, yi({}, s, {
                totalLength: p
            }))
        }, l),
        !1
    }
    var da, fa, ha, pa = Fi.ClientMsgType, ga = pa.SMT_LOGIN_NOTIFY, va = pa.SMT_BEGIN_LIVE, ya = pa.SMT_END_LIVE, ma = pa.SMT_HEARTBEAT, _a = pa.SMT_ADD_TRACE, Ta = pa.SMT_ERASE_TRACE, ba = pa.SMT_PAGE_CHANGE_NOTIFY, Ea = pa.SMT_DOCUMENT_INFO, Sa = pa.SMT_ERROR, Aa = pa.SMT_CHANGE_CDN_NOTIFY, ka = pa.SMT_PAUSE_LIVE_NOTIFY, wa = pa.SMT_CONTINUE_LIVE_NOTIFY, Ra = pa.SMT_BEGIN_PAPER_NOTIFY, La = pa.SMT_SCROLL_POSITION, Ia = pa.SMT_VIDEO_LOGIN_RES, Da = pa.SMT_VIDEO_BATCH_RES, Ca = pa.CMT_GET_PAGE, Pa = (Di(Pn = {}, pa.SMT_LOGIN_REPLY, "login"),
    Di(Pn, ga, "user_enter"),
    Di(Pn, va, "begin"),
    Di(Pn, ya, "end"),
    Di(Pn, ma, "heartbeat"),
    Di(Pn, _a, "add_trace"),
    Di(Pn, Ta, "erase_trace"),
    Di(Pn, ba, "page_change_notify"),
    Di(Pn, Ea, "dcument_info"),
    Di(Pn, Sa, "error"),
    Di(Pn, Aa, "change_cdn_notify"),
    Di(Pn, ka, "pause"),
    Di(Pn, wa, "continue"),
    Di(Pn, Ra, "begin_paper"),
    Di(Pn, La, "scroll_change"),
    Di(Pn, Ia, "login"),
    Di(Pn, Da, "get_increase_replay"),
    Di(Pn, Ca, "get_page"),
    Pn), Oa = Fi.RoomStatus, Ma = Oa.READY, xa = Oa.LIVE, Fa = Oa.PAUSE, Na = Oa.END, Ba = Fi.ClientMsgType, ja = Ba.SMT_LOGIN_REPLY, Ua = Ba.SMT_LOGIN_NOTIFY, Ga = Ba.SMT_BEGIN_LIVE, Ha = Ba.SMT_END_LIVE, qa = Ba.SMT_HEARTBEAT, Ka = Ba.SMT_ADD_TRACE, Va = Ba.SMT_ERASE_TRACE, Ya = Ba.SMT_PAGE_CHANGE_NOTIFY, Wa = Ba.SMT_DOCUMENT_INFO, za = Ba.SMT_ERROR, Xa = Ba.SMT_CHANGE_CDN_NOTIFY, Qa = Ba.SMT_PAUSE_LIVE_NOTIFY, Za = Ba.SMT_CONTINUE_LIVE_NOTIFY, Ja = Ba.SMT_BEGIN_PAPER_NOTIFY, $a = Ba.SMT_SCROLL_POSITION, eo = Ba.CMT_GET_KICK_LIST, to = Ba.SMT_KICK_LIST_REPLY, ro = Ba.CMT_SET_KICK_STATUS, io = Ba.SMT_SET_KICK_STATUS_REPLY, no = Fi.iErrorCode, ao = Bn, oo = function(e) {
        function r(e) {
            ki(this, r);
            var t = Lt(this, (r.__proto__ || B(r)).call(this));
            return xi(!0, t._options, {
                dataItem: {
                    deleteCfg: {},
                    changePage: {},
                    scrollPage: {},
                    scrollInfo: {},
                    info: {}
                },
                status: Ma,
                showBoardTips: !0
            }, e),
            t
        }
        return Ft(r, Jn),
        Ii(r, [{
            key: "onPlayerMetadata",
            value: function(e) {
                xi(this._options, {
                    sequence: e.sequence
                }),
                this._options.showBoardTips && (this._options.showBoardTips = !1,
                this._setBoardTips(!1)),
                this._render()
            }
        }, {
            key: "dispose",
            value: function() {
                var e = this._options
                  , t = e.websocket
                  , r = e.reconnectTimer;
                An({}, !0),
                t && t.close(),
                clearInterval(r),
                this.events.removeAllListeners()
            }
        }, {
            key: "_resetParams",
            value: function() {
                xi(this._options, {
                    operation: null,
                    dataItem: {
                        dataMap: {},
                        deleteCfg: {},
                        changePage: {},
                        scrollPage: {},
                        info: {},
                        scrollInfo: {},
                        imageInfo: {}
                    },
                    courseSizeMap: {}
                }),
                ua(this.elements, null, !0)
            }
        }, {
            key: "_getDataListCfg",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                  , t = this._options.dataItem.dataMap
                  , r = e.iId
                  , i = Jn._filterTrace(e, 1 < arguments.length && void 0 !== arguments[1] && arguments[1]);
                oi(i).length && (t[r] = t[r] || [],
                t[r].push(i))
            }
        }, {
            key: "_filterPoints",
            value: function() {
                var r = this
                  , e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                  , i = 1 < arguments.length && void 0 !== arguments[1] && arguments[1]
                  , t = this._options.dataItem
                  , n = t.info
                  , a = t.scrollInfo
                  , o = e.iHeight
                  , s = void 0 === o ? 0 : o
                  , l = e.iWidth
                  , u = void 0 === l ? 0 : l
                  , c = e.iColor
                  , d = void 0 === c ? 0 : c
                  , f = e.sUrl
                  , h = void 0 === f ? "" : f
                  , p = e.iTabulaHeight
                  , g = e.iTabulaWidth
                  , v = e.iCoursewareId
                  , y = e.iPageId
                  , m = e.iScrollPosition
                  , _ = void 0 === m ? 0 : m;
                this._cacheCourseSize(e);
                var T = Ai(h ? [u, g ? u * p / g : s] : [u, s], 2)
                  , b = T[0]
                  , E = T[1];
                xi(n, {
                    url: h.replace(/^(http|https)?:?\/\//, Hn),
                    bgColor: h ? "" : on(d),
                    width: u,
                    height: s,
                    boardHeight: E,
                    boardWidth: b,
                    isInit: i,
                    scrollY: Math.round((s - E) * _) / 100,
                    pageId: y,
                    courseId: v
                }),
                xi(a, {
                    width: u,
                    height: s,
                    boardHeight: E,
                    boardWidth: b,
                    pageId: y,
                    courseId: v
                });
                var S = e.traces
                  , A = void 0 === S ? {} : S;
                oi(A).forEach(function(e) {
                    var t = A[e];
                    r._getDataListCfg(void 0 === t ? {} : t, i)
                })
            }
        }, {
            key: "_filterData",
            value: function(e) {
                var t = JSON.parse(e || "{}")
                  , r = JSON.parse(t.bytes || "{}")
                  , i = this._options
                  , n = i.sequence
                  , a = i.debug
                  , o = t.eType;
                switch (o) {
                case ja:
                    this._resetParams();
                    var s = r.iUserId
                      , l = r.roomInfo
                      , u = (l = void 0 === l ? {} : l).streamPullUrls
                      , c = void 0 === u ? [] : u
                      , d = l.sName
                      , f = l.page
                      , h = void 0 === f ? {} : f
                      , p = l.iStatus
                      , g = l.iImId
                      , v = l.sTeacher
                      , y = l.iRoomId;
                    this._needReconnect = 0 === r.iCode,
                    xi(this._options, {
                        status: p,
                        roomInfo: {
                            iRoomId: y,
                            iUserId: s
                        }
                    }),
                    this._setBoardTips(),
                    h.sUrl && Jn._cacheImage(h.sUrl),
                    p !== xa && p !== Fa || (this._filterPoints(h, !0),
                    this._render(!0),
                    this._setBoardTips(!1)),
                    ln("info", ["%c[ç»å½åå¤]:", "color:green", r], a),
                    this.trigger("room_info_change", {
                        sName: d,
                        streams: c,
                        iImId: g,
                        sTeacher: v,
                        iUserId: s,
                        iRoomId: y
                    }),
                    this._reportMessage(ao, {
                        loadTime: Date.now() - this._options.loginTime
                    });
                    break;
                case Ua:
                    ln("info", ["%c[ç»å½éç¥]:" + r.sUserName + "å å¥, å½åäººæ°" + r.iUserCount, "color:green"], a);
                    break;
                case Ga:
                    var m = r.lStartTime
                      , _ = r.sMsg;
                    this._options.status = xa,
                    ln("info", ["%c[ä¸è¯¾éç¥]:" + m + " " + _, "color:green"], a);
                    break;
                case Ha:
                    var T = r.lEndTime
                      , b = r.sMsg;
                    this._options.status = Na,
                    ln("info", ["%c[ä¸è¯¾éç¥]:" + T + " " + b, "color:green"], a);
                    break;
                case qa:
                    ln("info", ["%c[å¿è·³åå¤]:userCount " + r.iUserCount + " äºº", "color:green"], a);
                    break;
                case Ka:
                    this._getDataListCfg(r),
                    ln("info", ["%c[å¢å è½¨è¿¹]:ID " + r.iId + " æ¶é´: " + r.lSequence + " å·®å¼:" + (r.lSequence - n), "color:green"], a);
                    break;
                case Va:
                    var E = this._options.dataItem.deleteCfg
                      , S = r.lSequence
                      , A = r.traceIds
                      , k = void 0 === A ? [] : A;
                    E[S] = E[S] || [],
                    E[S].push({
                        lSequence: S,
                        traceIds: k
                    }),
                    ln("info", ["%c[å é¤è½¨è¿¹]:IDs:" + k + " æ¶é´: " + S + " å·®å¼:" + (S - n), "color:green"], a);
                    break;
                case Ya:
                    var w = r.lSequence;
                    Jn._cacheImage(r.sUrl),
                    this._cacheCourseSize(r),
                    w && xi(this._options.dataItem.changePage, Di({}, w, r)),
                    ln("info", ["%c[è¯¾ä»¶ç¿»é¡µ]: " + r.lSequence + " å·®å¼:" + (r.lSequence - n), "color:green"], a);
                    break;
                case Wa:
                    ln("info", ["%c[è¯¾ä»¶ä¿¡æ¯]: " + r, "color:green"], a);
                    break;
                case za:
                    var R = r.operation
                      , L = r.iCode;
                    if (ln("error", ["[éè¯¯ä¿¡æ¯]: " + r.sError + ",operation: " + (this._options.operation = R)], a),
                    L === no.EC_KICK_BY_ADMIN)
                        return void this.trigger("kicked");
                    break;
                case Xa:
                    var I = r.streamPullUrls
                      , D = void 0 === I ? [] : I;
                    ln("info", ["%c[CDNå°ååæ¢]:" + n, "color:green", r], a),
                    this.trigger("room_info_change", {
                        streams: D
                    }, !0);
                    break;
                case Qa:
                    var C = r.lPauseTime
                      , P = r.sMsg;
                    this._options.status = Fa,
                    ln("info", ["%c[æåä¸è¯¾]:" + C + " " + P, "color:green"], a);
                    break;
                case Za:
                    var O = r.lContinueTime
                      , M = r.sMsg;
                    this._options.status = xa,
                    ln("info", ["%c[ç»§ç»­ä¸è¯¾]:" + O + " " + M, "color:green"], a);
                    break;
                case Ja:
                    ln("info", ["%c[éå è]:" + r.lSequence + " " + r.iPaperId, "color:green"], a);
                    break;
                case $a:
                    var x = r.lSequence
                      , F = r.iScrollPosition;
                    x && xi(this._options.dataItem.scrollPage, Di({}, x, r)),
                    ln("info", ["%c[æ»å¨æ¡ä½ç½®]:" + x + " " + F + "%", "color:green"], a)
                }
                this.trigger(Pa[o] || o, r, t)
            }
        }, {
            key: "_initData",
            value: function() {
                var h = this
                  , e = this._options
                  , t = e.liveToken
                  , r = e.liveData;
                this._options.loginTime = Date.now(),
                function(e, t) {
                    var r = this
                      , i = e.liveData
                      , n = "CMT_LOGIN_REQUEST"
                      , a = {
                        sToken: e.liveToken
                    };
                    i && (n = "CMT_LOGIN_REQUEST_THIRD",
                    a = i);
                    var o = Tn({
                        eType: Fi.ClientMsgType[n],
                        bytes: Tn(a)
                    })
                      , s = new WebSocket(kn("LIVE_ENTRY"));
                    s.onmessage = function(e) {
                        t && t.call(r, {
                            e: e,
                            websocket: s
                        })
                    }
                    ,
                    s.onerror = function(e) {
                        t && t.call(r, {
                            e: e,
                            websocket: s,
                            type: "error"
                        })
                    }
                    ,
                    s.onclose = function(e) {
                        t && t.call(r, {
                            e: e,
                            websocket: s,
                            type: "close"
                        })
                    }
                    ,
                    s.onopen = function() {
                        return s.send(o)
                    }
                }({
                    liveToken: t,
                    liveData: r
                }, function(e) {
                    var t = e.e
                      , r = e.websocket
                      , i = e.type;
                    if (h._options.websocket = r,
                    t.data) {
                        var n = h._options
                          , a = n.isHeartBeatOn
                          , o = n.debug
                          , s = n.reconnectTimer;
                        s && (ln("info", ["%c[éè¿æå]: æ¢å¤æå¡", "color:green"], !0),
                        clearTimeout(s),
                        h._options.reconnectTimer = null,
                        h._options.reconnectCount = 0),
                        a || An({
                            websocket: r,
                            time: 28e3
                        }, !(h._options.isHeartBeatOn = !0), o),
                        h._filterData(t.data)
                    } else {
                        if ("close" !== i)
                            return;
                        var l = h._options
                          , u = l.operation
                          , c = l.debug
                          , d = l.reconnectCount;
                        if (An({}, !(h._options.isHeartBeatOn = !1), c),
                        (2 === u || !u) && h._needReconnect) {
                            var f = d + 1;
                            if (h._options.reconnectCount = f,
                            h._options.reconnectTimer && clearTimeout(h._options.reconnectTimer),
                            10 < f)
                                return h._options.reconnectTimer = null,
                                void ln("error", ["[è¿æ¥å¤±è´¥]: è¯·æ£æ¥ç½ç»ç¶åµï¼"], !(h._options.reconnectCount = 0));
                            ln("warn", ["[è¿æ¥å¤±è´¥]: " + 2 * f + "såè¿è¡ç¬¬" + f + "æ¬¡éè¿..."], !0),
                            h._options.reconnectTimer = setTimeout(function() {
                                h._initData()
                            }, 2e3 * f)
                        }
                    }
                })
            }
        }, {
            key: "_render",
            value: function() {
                var l = this
                  , e = 0 < arguments.length && void 0 !== arguments[0] && arguments[0]
                  , t = this._options
                  , u = t.courseSizeMap
                  , c = t.defaultSize
                  , r = t.dataItem
                  , i = r.changePage
                  , n = r.dataMap
                  , a = r.deleteCfg
                  , s = r.scrollPage
                  , d = t.sequence;
                oi(i).sort(function(e, t) {
                    return +e - +t
                }).filter(function(e) {
                    return +e <= d
                }).forEach(function(r) {
                    var e = i[r]
                      , t = void 0 === e ? {} : e;
                    oi(n).forEach(function(e) {
                        var t = n[e];
                        (void 0 === t ? [] : t).some(function(e) {
                            return e.lSequence <= +r
                        }) && delete n[e]
                    }),
                    oi(a).filter(function(e) {
                        return +e <= r
                    }).forEach(function(e) {
                        return delete a[e]
                    }),
                    oi(s).filter(function(e) {
                        return +e <= r
                    }).forEach(function(e) {
                        return delete s[e]
                    }),
                    ua(l.elements, null, !0),
                    l._filterPoints(t, !0),
                    delete i[r]
                });
                var o = this._options.dataItem
                  , f = o.info
                  , h = o.scrollInfo;
                if (oi(f).length) {
                    var p = f.bgColor
                      , g = void 0 === p ? "" : p
                      , v = f.url
                      , y = void 0 === v ? "" : v
                      , m = f.width
                      , _ = f.height
                      , T = f.boardWidth
                      , b = f.boardHeight
                      , E = f.scrollY
                      , S = void 0 === E ? 0 : E
                      , A = f.isInit
                      , k = f.pageId
                      , w = f.courseId;
                    this._cacheKey = "" + w + k,
                    this.bgRect.style.fill = g,
                    this.svgElement.setAttributeNS(null, "viewBox", "0,0," + T + "," + b),
                    this.defsRect.setAttributeNS(null, "width", m);
                    var R = Ai(b <= _ ? [0, b] : [S, _], 2)
                      , L = R[0];
                    this.defsRect.setAttributeNS(null, "height", R[1]),
                    this.defsRect.setAttributeNS(null, "y", -L),
                    this._toggleGroupsClass(!A),
                    this.groups.setAttributeNS(null, "transform", "translate(0, " + -S + ")");
                    var I = this.groups.querySelector("image");
                    y && this._imgUrl !== y && (I = I || this.groups.appendChild(la("image")),
                    this._setLoadingTips(),
                    I.setAttributeNS(null, "height", _),
                    I.setAttributeNS(null, "width", m),
                    I.setAttributeNS("http://www.w3.org/1999/xlink", "href", y),
                    this._reportImageInfo(y, {
                        pageId: k,
                        courseId: w
                    }, function() {
                        e && l._render()
                    })),
                    !y && I && (I.setAttributeNS("http://www.w3.org/1999/xlink", "href", ""),
                    this._setLoadingTips(!1)),
                    this._imgUrl = y,
                    this._options.dataItem.info = {}
                }
                oi(s).sort(function(e, t) {
                    return +e - +t
                }).filter(function(e) {
                    return +e <= d
                }).forEach(function(e) {
                    var t = s[e]
                      , r = void 0 === t ? {} : t
                      , i = r.iScrollPosition
                      , n = void 0 === i ? 0 : i
                      , a = h.height
                      , o = h.boardHeight;
                    r.iPageId === h.pageId && r.iCoursewareId === h.courseId && (l._toggleGroupsClass(!0),
                    l.groups.setAttributeNS(null, "transform", "translate(0, " + -(Math.round((a - o) * n) / 100) + ")"));
                    delete s[e]
                });
                var D = 0;
                oi(n).sort(function(e, t) {
                    return +e - +t
                }).forEach(function(e) {
                    var t = n[e]
                      , r = (void 0 === t ? [] : t).sort(function(e, t) {
                        return e.lSequence - t.lSequence
                    }).filter(function(e, t) {
                        var r = e.isInit
                          , i = e.lSequence
                          , n = e.config
                          , a = e.key;
                        if (l._cacheKey && l._cacheKey !== a)
                            return !0;
                        var o = u[a] || c
                          , s = Jn._getScaledPoints(e.points, o);
                        return !(r || i <= d) || (ca(l.elements, yi({}, e, {
                            point: s,
                            size: o,
                            timeSec: D
                        })),
                        D += n.duration,
                        !1)
                    });
                    r.length ? n[e] = r : delete n[e]
                }),
                oi(a).sort(function(e, t) {
                    return +e - +t
                }).filter(function(e) {
                    return +e <= d
                }).forEach(function(e) {
                    var t = a[e];
                    (void 0 === t ? [] : t).forEach(function(e) {
                        return e.traceIds.forEach(function(e) {
                            return ua(l.elements, e)
                        })
                    }),
                    delete a[e]
                })
            }
        }, {
            key: "requestKickedList",
            value: function(e, t) {
                return this._sendDataAndWaitResponse(to, eo).then(e).catch(t)
            }
        }, {
            key: "kickMember",
            value: function(e, t, r, i) {
                return this._sendDataAndWaitResponse(io, ro, {
                    userId: e,
                    status: t
                }).then(r).catch(i)
            }
        }, {
            key: "_sendDataAndWaitResponse",
            value: function(o, r) {
                var s = this
                  , l = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {};
                return new ii(function(i, e) {
                    var n = dn()
                      , a = null
                      , t = function e(t, r) {
                        r.ack === n && (clearTimeout(a),
                        s.events.removeListener(o, e),
                        i(t))
                    };
                    s.events.on(o, t),
                    a = setTimeout(function() {
                        s.events.removeListener(o, t),
                        e()
                    }, 5e3),
                    function(e, t, r, i) {
                        if (e) {
                            var n = {
                                eType: t,
                                bytes: Tn(r),
                                ack: i
                            };
                            e.send(Tn(n))
                        } else
                            console.error("websocketå®ä¾æ²¡æåå¤å¥½ï¼æ æ³åéæ¶æ¯")
                    }(s._options.websocket, r, l, n)
                }
                )
            }
        }]),
        r
    }(), so = {
        40002: "Tokenæ æ",
        40004: "éæ°è·åToken",
        2: "æ¾ä¸å°æ¿é´",
        1: "æ¥å£åæ°éè¯¯",
        10013: "è·åæµåæ¾å°åå¤±è´¥",
        10027: "ç¹æ­è§é¢æªåå¤å¥½"
    }, lo = Fi.RoomStatus.LIVE, uo = Fi.ClientMsgType, co = uo.SMT_LOGIN_NOTIFY, fo = uo.SMT_BEGIN_LIVE, ho = uo.SMT_END_LIVE, po = uo.SMT_HEARTBEAT, go = uo.SMT_ADD_TRACE, vo = uo.SMT_ERASE_TRACE, yo = uo.SMT_PAGE_CHANGE_NOTIFY, mo = uo.SMT_DOCUMENT_INFO, _o = uo.SMT_ERROR, To = uo.SMT_VIDEO_LOGIN_RES, bo = uo.SMT_VIDEO_BATCH_RES, Eo = uo.SMT_BEGIN_PAPER_NOTIFY, So = uo.SMT_SCROLL_POSITION, Ao = Bn, ko = "/heartbeat", wo = "/getincrmsg", Ro = "/getpage", Lo = "/login", Io = "/thirdLogin", Do = function(e) {
        function l(e) {
            ki(this, l);
            var t = Lt(this, (l.__proto__ || B(l)).call(this));
            return xi(!0, t._options, {
                dataItem: {
                    dataList: {},
                    scrollPage: {},
                    scrollInfo: {},
                    imageInfo: {}
                },
                requestSeq: 0,
                isInitPageData: !1
            }, e),
            t
        }
        return Ft(l, Jn),
        Ii(l, [{
            key: "_heartBeat",
            value: function() {
                var o = this
                  , e = this._options
                  , t = e.roomInfo
                  , r = (t = void 0 === t ? {} : t).iRoomId
                  , i = e.token
                  , n = e._heatBeatTimer
                  , s = e.debug;
                if (n && clearTimeout(n),
                r) {
                    !function a() {
                        if (ln("count", ["[å¿è·³æ¬¡æ°(30s)]"], s),
                        o._options.isHeartBeatOn) {
                            var e = o.getPlayerStatus() ? 1 : 0;
                            l._fetchData(ko, {
                                body: Tn({
                                    token: {
                                        roomId: r,
                                        token: i,
                                        pausePlay: e
                                    }
                                }),
                                hasErr: !0
                            }).then(function(e) {
                                var t = e.heartbeat;
                                o._filterData(void 0 === t ? {} : t, po),
                                o._options._heatBeatTimer = setTimeout(a, 3e4)
                            }).catch(function(e) {
                                var t = e.err;
                                if (t) {
                                    var r = t.iCode
                                      , i = void 0 === r ? -1 : r
                                      , n = t.operation;
                                    o._reconnectServer(t, "heartbeat"),
                                    so[i] || 2 === n || (o._options._heatBeatTimer = setTimeout(a, 3e4)),
                                    o.trigger("error", t)
                                }
                            })
                        }
                    }()
                } else
                    console.error("æ roomId")
            }
        }, {
            key: "_fetchIncreaseData",
            value: function() {
                var r = this
                  , e = this._options
                  , t = e.roomInfo
                  , i = (t = void 0 === t ? {} : t).iRoomId
                  , n = e.token
                  , a = e.requestSeq;
                return ln("info", ["%c[è¯·æ±GetIncrease]: " + this._options.requestSeq, "color:green"], e.debug),
                l._fetchData(wo, {
                    body: Tn({
                        lSequence: a,
                        iInterval: 20,
                        token: {
                            roomId: i,
                            token: n
                        }
                    }),
                    hasErr: !0
                }).then(function(e) {
                    r._filterData(e, bo)
                }).catch(function(e) {
                    var t = e.err;
                    t && (r._reconnectServer(t, "increatedata"),
                    r.trigger("error", t))
                })
            }
        }, {
            key: "_fetchPageData",
            value: function() {
                var r = this
                  , e = this._options
                  , t = e.roomInfo
                  , i = (t = void 0 === t ? {} : t).iRoomId
                  , n = e.token
                  , a = e.sequence;
                return ln("info", ["%c[è¯·æ±GetPage]: " + a, "color:green"], e.debug),
                l._fetchData(Ro, {
                    body: Tn({
                        lSequence: a,
                        token: {
                            roomId: i,
                            token: n
                        }
                    }),
                    hasErr: !0
                }).then(function(e) {
                    r._filterData(e, yo, !0)
                }).catch(function(e) {
                    var t = e.err;
                    t && (r._reconnectServer(t, "pagedata"),
                    r.trigger("error", t))
                })
            }
        }, {
            key: "_reconnectServer",
            value: function() {
                var e = this
                  , t = arguments[1];
                2 === (0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}).operation && (this._options.reconnectTimer && clearTimeout(this._options.reconnectTimer),
                this._options.reconnectTimer = setTimeout(function() {
                    e._options.isHeartBeatOn = !1,
                    e._options.reconnectCount += 1,
                    e._options.reconnectCount <= 3 ? (ln("info", ["%c[ç¹æ­HTTPéè¿" + t + "]: ç¬¬" + e._options.reconnectCount + "æ¬¡", "color:green"], !0),
                    e._initData()) : (ln("log", ["%c" + t + "ç¹æ­HTTPéè¿å¤±è´¥!", "color:red"], !0),
                    e._options.reconnectCount = 0)
                }, 3e3))
            }
        }, {
            key: "onPlayerMetadata",
            value: function() {
                var t = this
                  , e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                  , r = arguments[1]
                  , i = e.sequence
                  , n = e.seeked;
                if (i) {
                    xi(this._options, {
                        sequence: i
                    });
                    var a = !1;
                    this._options.isInitPageData && !n || (this._options.isInitPageData = !0,
                    this._options.requestSeq = i,
                    a = !0,
                    this._fetchPageData().then(function(e) {
                        t._fetchIncreaseData(),
                        r && r()
                    })),
                    1e4 < i - this._options.requestSeq && !a && (this._options.requestSeq += 2e4,
                    this._fetchIncreaseData()),
                    r || this._render()
                }
            }
        }, {
            key: "onPlayerSeeked",
            value: function() {
                var e = this;
                this.onPlayerMetadata(0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, function() {
                    e._render()
                })
            }
        }, {
            key: "dispose",
            value: function() {
                var e = this._options
                  , t = e._heatBeatInterval
                  , r = e._seekTimer;
                clearTimeout(e.reconnectTimer),
                clearTimeout(t),
                clearTimeout(r),
                this.events.removeAllListeners()
            }
        }, {
            key: "_resetParams",
            value: function() {
                var e = yi({}, 0 < arguments.length && void 0 !== arguments[0] && arguments[0] ? {
                    operation: null,
                    isInitPageData: !1,
                    requestSeq: 0
                } : {}, {
                    dataItem: {
                        dataList: {},
                        dataMap: {},
                        scrollPage: {},
                        scrollInfo: {},
                        info: {},
                        imageInfo: {}
                    },
                    courseSizeMap: {}
                });
                xi(this._options, e),
                ua(this.elements, null, !0)
            }
        }, {
            key: "_getDataListCfg",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                  , t = this._options.dataItem.dataList
                  , r = e.iId
                  , i = Jn._filterTrace(e, 1 < arguments.length && void 0 !== arguments[1] && arguments[1]);
                oi(i).length && (t[r] = t[r] || [],
                t[r].push(i))
            }
        }, {
            key: "_filterPoints",
            value: function() {
                var r = this
                  , e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                  , i = 1 < arguments.length && void 0 !== arguments[1] && arguments[1]
                  , t = this._options.dataItem
                  , n = t.info
                  , a = t.scrollInfo
                  , o = e.iHeight
                  , s = void 0 === o ? 0 : o
                  , l = e.iWidth
                  , u = void 0 === l ? 0 : l
                  , c = e.iColor
                  , d = void 0 === c ? 0 : c
                  , f = e.sUrl
                  , h = void 0 === f ? "" : f
                  , p = e.iTabulaHeight
                  , g = e.iTabulaWidth
                  , v = e.iCoursewareId
                  , y = e.iPageId
                  , m = e.iScrollPosition
                  , _ = void 0 === m ? 0 : m;
                i && (ua(this.elements, null, !0),
                this._options.dataItem.dataList = {}),
                this._cacheCourseSize(e);
                var T = Ai(h ? [u, g ? u * p / g : s] : [u, s], 2)
                  , b = T[0]
                  , E = T[1];
                xi(n, {
                    url: h.replace(/^(http|https)?:?\/\//, Hn),
                    bgColor: h ? "" : on(d),
                    width: u,
                    height: s,
                    boardHeight: E,
                    boardWidth: b,
                    isInit: i,
                    pageId: y,
                    courseId: v,
                    scrollY: Math.round((s - E) * _) / 100
                }),
                xi(a, {
                    width: u,
                    height: s,
                    boardHeight: E,
                    boardWidth: b,
                    pageId: y,
                    courseId: v
                });
                var S = e.traces
                  , A = void 0 === S ? {} : S;
                oi(A).forEach(function(e) {
                    var t = A[e];
                    r._getDataListCfg(void 0 === t ? {} : t, i)
                })
            }
        }, {
            key: "_filterData",
            value: function(e, t) {
                var i = this
                  , r = 2 < arguments.length && void 0 !== arguments[2] && arguments[2]
                  , n = this._options
                  , a = n.sequence
                  , o = n.debug;
                switch (t) {
                case co:
                    ln("info", ["%c[ç»å½éç¥]:" + e.sUserName + "å å¥, å½åäººæ°" + e.iUserCount, "color:green"], o);
                    break;
                case fo:
                    ln("info", ["%c[ä¸è¯¾éç¥]:" + e.lStartTime + " " + e.sMsg, "color:green"], o);
                    break;
                case ho:
                    ln("info", ["%c[ä¸è¯¾éç¥]:" + e.lEndTime + " " + e.sMsg, "color:green"], o);
                    break;
                case po:
                    ln("info", ["%c[å¿è·³åå¤]:å½åäººæ° " + e.iUserCount + " äºº", "color:green"], o);
                    break;
                case go:
                    var s = this._options.dataItem.dataMap
                      , l = e.lSequence
                      , u = Jn._filterTrace(e);
                    l && oi(u).length && (s[l] = s[l] || [],
                    s[l].push(yi({}, u, {
                        type: t
                    })));
                    break;
                case vo:
                    var c = this._options.dataItem.dataMap
                      , d = e.lSequence
                      , f = e.traceIds
                      , h = void 0 === f ? [] : f;
                    d && (c[d] = c[d] || [],
                    c[d].push({
                        lSequence: d,
                        traceIds: h,
                        type: t
                    }));
                    break;
                case yo:
                    var p = e.page
                      , g = void 0 === p ? e : p;
                    if (Jn._cacheImage(g.sUrl),
                    r)
                        this._resetParams(),
                        this._filterPoints(g, !0),
                        ln("info", ["%c[GetPageè¿å]]:", "color:green", e], o);
                    else {
                        var v = e.lSequence;
                        this._cacheCourseSize(e);
                        var y = this._options.dataItem.dataMap;
                        v && (y[v] = y[v] || [],
                        y[v].push(xi(e, {
                            type: t
                        })))
                    }
                    break;
                case mo:
                    ln("info", ["%c[è¯¾ä»¶ä¿¡æ¯]: " + e, "color:green"], o);
                    break;
                case _o:
                    var m = e.operation;
                    ln("error", ["[éè¯¯ä¿¡æ¯]: " + e.sError + ",operation: " + (this._options.operation = m)], o);
                    break;
                case To:
                    this._resetParams(!0),
                    this._options.status = lo;
                    var _ = e.iUserId
                      , T = e.roomInfo
                      , b = (T = void 0 === T ? {} : T).sName
                      , E = T.iRoomId
                      , S = T.page
                      , A = T.iImId
                      , k = T.sTeacher
                      , w = e.videoPlayUrls
                      , R = void 0 === w ? [] : w
                      , L = e.token;
                    xi(this._options, {
                        roomInfo: {
                            iUserId: _,
                            iRoomId: E
                        }
                    }),
                    this._options.token = L || this._options.liveToken,
                    this._filterPoints(S, !0),
                    a || this._render(),
                    ln("info", ["%c[ç»å½åå¤]:", "color:green", e], o),
                    this.trigger("room_info_change", {
                        sName: b,
                        streams: R,
                        iImId: A,
                        sTeacher: k,
                        iRoomId: E,
                        iUserId: _
                    }),
                    this._reportMessage(Ao, {
                        loadTime: Date.now() - this._options.loginTime
                    });
                    break;
                case bo:
                    var I = e.sequenceMap
                      , D = void 0 === I ? {} : I;
                    oi(D).forEach(function(e) {
                        var t = D[e];
                        (void 0 === t ? [] : t).forEach(function(e) {
                            var t = e.eType
                              , r = JSON.parse(e.bytes);
                            i._filterData(r, t)
                        })
                    }),
                    ln("info", ["%c[GetIncreaseè¿å]:", "color:green", e], o);
                    break;
                case Eo:
                    ln("info", ["%c[éå è]:" + e.lSequence + " " + e.iPaperId, "color:green"], o);
                    break;
                case So:
                    var C = e.lSequence
                      , P = e.iScrollPosition;
                    C && xi(this._options.dataItem.scrollPage, Di({}, C, e)),
                    ln("info", ["%c[æ»å¨æ¡ä½ç½®]:" + C + " " + P + "%", "color:green"], o)
                }
                this.trigger(Pa[t] || t, e)
            }
        }, {
            key: "_filterDataMap",
            value: function(e) {
                var t = this
                  , r = this._options
                  , i = r.dataItem.dataList
                  , n = r.debug
                  , a = e.traceIds
                  , o = void 0 === a ? [] : a
                  , s = e.lSequence
                  , l = e.iId;
                switch (e.type) {
                case go:
                    i[l] = i[l] || [],
                    i[l].push(e),
                    ln("info", ["%c[å¢å è½¨è¿¹]:ID " + l + " æ¶é´: " + s, "color:green"], n);
                    break;
                case vo:
                    o.forEach(function(e) {
                        i[e] && delete i[e],
                        ua(t.elements, e)
                    }),
                    ln("info", ["%c[å é¤è½¨è¿¹]:IDs:" + o + " æ¶é´: " + s, "color:green"], n);
                    break;
                case yo:
                    this._filterPoints(e, !0, !0),
                    ln("info", ["%c[è¯¾ä»¶ç¿»é¡µ]: " + s, "color:green", e], n)
                }
            }
        }, {
            key: "_initData",
            value: function() {
                var r = this
                  , e = this._options
                  , t = e.liveData
                  , i = t || {
                    sToken: e.liveToken
                }
                  , n = t ? Io : Lo;
                this._options.loginTime = Date.now(),
                l._fetchData(n, {
                    body: Tn(i),
                    hasErr: !0
                }).then(function(e) {
                    r._filterData(e, To),
                    0 < r._options.reconnectCount && ln("info", ["%c[ç¹æ­HTTPéè¿æåï¼]", "color:green"], !(r._options.reconnectCount = 0)),
                    r._options.isHeartBeatOn = !0,
                    r._heartBeat(),
                    r._setBoardTips(!1)
                }).catch(function(e) {
                    var t = e.err;
                    t && (r.trigger("error", t),
                    r._setBoardTips(!0),
                    r._reconnectServer(t, "login"))
                })
            }
        }, {
            key: "_render",
            value: function() {
                var c = this
                  , e = this._options
                  , t = e.dataItem
                  , r = t.dataMap
                  , s = t.scrollPage
                  , i = e.sequence
                  , d = e.defaultSize
                  , f = e.courseSizeMap;
                oi(r).sort(function(e, t) {
                    return +e - +t
                }).filter(function(e) {
                    return +e <= i
                }).forEach(function(e) {
                    var t = r[e];
                    (void 0 === t ? [] : t).forEach(function(e) {
                        return c._filterDataMap(e)
                    }),
                    delete r[e]
                });
                var n = this._options.dataItem
                  , a = n.dataList
                  , o = n.info
                  , l = n.scrollInfo;
                if (oi(o).length) {
                    var u = o.bgColor
                      , h = void 0 === u ? "" : u
                      , p = o.url
                      , g = void 0 === p ? "" : p
                      , v = o.width
                      , y = o.height
                      , m = o.boardWidth
                      , _ = o.boardHeight
                      , T = o.scrollY
                      , b = void 0 === T ? 0 : T
                      , E = o.isInit
                      , S = o.pageId
                      , A = o.courseId;
                    this._cacheKey = "" + A + S,
                    this.bgRect.style.fill = h;
                    var k = Ai(g ? [m, _] : [v, y], 2);
                    this.svgElement.setAttributeNS(null, "viewBox", "0,0," + k[0] + "," + k[1]),
                    this.defsRect.setAttributeNS(null, "width", v);
                    var w = Ai(_ <= y ? [0, _] : [b, y], 2)
                      , R = w[0];
                    this.defsRect.setAttributeNS(null, "height", w[1]),
                    this.defsRect.setAttributeNS(null, "y", -R),
                    this._toggleGroupsClass(!E),
                    this.groups.setAttributeNS(null, "transform", "translate(0, " + -b + ")");
                    var L = this.groups.querySelector("image");
                    g && this._imgUrl !== g && (L = L || this.groups.appendChild(la("image")),
                    this._setLoadingTips(),
                    L.setAttributeNS(null, "height", y),
                    L.setAttributeNS(null, "width", v),
                    L.setAttributeNS("http://www.w3.org/1999/xlink", "href", g),
                    this._reportImageInfo(g, {
                        pageId: S,
                        courseId: A
                    })),
                    !g && L && (L.setAttributeNS("http://www.w3.org/1999/xlink", "href", ""),
                    this._setLoadingTips(!1)),
                    this._imgUrl = g,
                    this._options.dataItem.info = {}
                }
                oi(s).sort(function(e, t) {
                    return +e - +t
                }).filter(function(e) {
                    return +e <= i
                }).forEach(function(e) {
                    var t = s[e]
                      , r = void 0 === t ? {} : t
                      , i = r.iScrollPosition
                      , n = void 0 === i ? 0 : i
                      , a = l.height
                      , o = l.boardHeight;
                    r.iPageId === l.pageId && r.iCoursewareId === l.courseId && (c._toggleGroupsClass(!0),
                    c.groups.setAttributeNS(null, "transform", "translate(0, " + -(Math.round((a - o) * n) / 100) + ")"));
                    delete s[e]
                });
                var I = 0;
                oi(a).forEach(function(e) {
                    var t = a[e];
                    (void 0 === t ? [] : t).forEach(function(e, t) {
                        var r = e.iId
                          , i = e.iType
                          , n = e.config
                          , a = e.sText
                          , o = e.fontSize
                          , s = e.key;
                        if (c._cacheKey === s) {
                            var l = f[s] || d
                              , u = Jn._getScaledPoints(e.points, l);
                            ca(c.elements, {
                                iId: r,
                                iType: i,
                                point: u,
                                idx: t,
                                sText: a,
                                config: n,
                                timeSec: I,
                                fontSize: o,
                                size: l
                            }),
                            I += n.duration
                        }
                    }),
                    delete a[e]
                })
            }
        }], [{
            key: "_fetchData",
            value: function(e, t) {
                return cn("" + kn("VOD_ENTRY") + e, t)
            }
        }]),
        l
    }(), Co = {
        "[æ¨ç¬]": "hanxiao",
        "[ç±æ]": "aimu",
        "[è°åª]": "chanmei",
        "[OK]": "OK",
        "[ç©æ]": "xuanyun",
        "[å²å¨]": "aojiao",
        "[å§å±]": "weiqu",
        "[ä½ å¥½]": "nihao",
        "[å¸æ°]": "shuaiqi",
        "[æ±é¢]": "hanyan",
        "[èå©]": "shengli",
        "[æ³ªå¥]": "leiben",
        "[å®³ç¾]": "haixiu",
        "[æå]": "jingxia",
        "[ä¹ä¹å]": "memeda",
        "[çæ°]": "shengqi",
        "[å°´å°¬]": "ganga",
        "[ç¾]": "mei",
        "[åè¡]": "tuxue",
        "[èç³]": "dangao",
        "[åºç¥]": "qingzhu",
        "[åå¡]": "kafei",
        "[é»ç³]": "zuanshi",
        "[ççå]": "tiantianquan",
        "[æ¡æ³]": "woquan",
        "[éè±]": "songhua",
        "[æè±]": "sahua",
        "[å°å»]": "bingdong",
        "[éç]": "jinpai",
        "[ä¸­å½å¥½èå¸]": "zhongguohaolaoshi",
        "[æ£æ£å]": "bangbangda",
        "[åé¬¼è¸]": "zuoguilian",
        "[æ¡æ]": "woshou",
        "[å¸]": "shuai",
        "[å¿ç¢]": "xinsui",
        "[å´å]": "zuichun",
        "[ç±å¿]": "aixin",
        "[æå®]": "wanan",
        "[é¢ç¬]": "gangbi",
        "[ç¤¼ç©]": "liwu",
        "[çé®]": "yiwen",
        "[ææ³éé]": "woxiangjingjing",
        "[æ¤æ]": "fennu",
        "[çº¢å]": "hongbao",
        "[å°]": "kun",
        "[å¼º]": "qiang",
        "[å¤ªé³]": "taiyang",
        "[æè®¶]": "jingya",
        "[å¼±]": "ruo",
        "[å¿è]": "bisheng",
        "[åè°¢]": "diaoxie",
        "[æåæ¬ ]": "dahaqie",
        "[è¶]": "yeah"
    }, Po = oi(Co).reduce(function(e, t) {
        return e[t] = "https://assorted.sunlands.com/sl-emoji/" + Co[t] + ".png",
        e
    }, {}), Oo = (Di(da = {}, 2, "åéç»å½æ¶æ¯"),
    Di(da, 4, "åéèå¤©ä¿¡æ¯"),
    Di(da, 1, "åéå¿è·³"),
    Di(da, 22, "åéè·åç¦è¨åè¡¨"),
    Di(da, 20, "åéä¿®æ¹å¬å"),
    Di(da, 16, "åéQAæ¶æ¯"),
    Di(da, 15, "åéè¯·æ±ï¼è¦æ±è·åå¨ååè¡¨"),
    Di(da, 13, "è®¾ç½®å­¦ååè¨ç¶æ"),
    Di(da, 25, "åéè·åç§èä¼è¯åè¡¨è¯·æ±"),
    Di(da, 23, "åéç§èæ¶æ¯"),
    Di(da, 26, "åéè·åç§èåå²æ¶æ¯è¯·æ±"),
    da), Mo = (Di(fa = {}, 2, "ç»å½æ¶æ¯åå¤"),
    Di(fa, 4, "èå¤©ä¿¡æ¯ç¡®è®¤åå¤"),
    Di(fa, 1, "å¿è·³åå¤"),
    Di(fa, 16, "QAæ¶æ¯åéåç¡®è®¤åå¤"),
    Di(fa, 13, "è®¾ç½®ä¸ªäººç¦è¨ç¶æç¡®è®¤åå¤"),
    Di(fa, 5, "æ¶å°èå¤©æ¶æ¯"),
    Di(fa, 10, "ç¨æ·è¿/åº"),
    Di(fa, 8, "ç¦è¨ç¶æåå"),
    Di(fa, 11, "æ¿é´è§£æ£"),
    Di(fa, 9, "å½åç¨æ·å å¨å¨å¶ä»å°æ¹ç»éè¢«è¸¢"),
    Di(fa, 19, "ç¨æ·è¢«èå¸å©æè¸¢åº"),
    Di(fa, 12, "ç¨æ·æ¹éä¸çº¿éç¥"),
    Di(fa, 14, "å½åç¨æ·ç¦è¨ç¶æ"),
    Di(fa, 1e3, "WEBSOCKETåºé"),
    Di(fa, 1001, "WEBSOCKETå³é­"),
    Di(fa, 22, "æ¿é´ç¦è¨æååè¡¨"),
    Di(fa, 21, "æ¿é´å¬åæ æ´æ°"),
    Di(fa, 17, "æ¿é´QAæ¶æ¯"),
    Di(fa, 15, "æ¿é´å¨åå¨çº¿åè¡¨"),
    Di(fa, 23, "ç§èæ¶æ¯åéåç¡®è®¤åå¤"),
    Di(fa, 24, "ç§èæ¶æ¯"),
    Di(fa, 25, "ç§èä¼è¯åè¡¨"),
    Di(fa, 26, "ç§èæ¶æ¯åå²"),
    fa), xo = (Di(ha = {}, 2, "login"),
    Di(ha, 4, "send_message_status"),
    Di(ha, 1, "heartbeat"),
    Di(ha, 16, "qa_messages_reply"),
    Di(ha, 13, "set_user_speaking_reply"),
    Di(ha, 5, "receive_message"),
    Di(ha, 10, "user_notification"),
    Di(ha, 8, "room_speaking_status"),
    Di(ha, 11, "room_dismiss"),
    Di(ha, 9, "user_kicked_for_new_login"),
    Di(ha, 19, "user_kicked_notification"),
    Di(ha, 12, "bulk_exit_notification"),
    Di(ha, 14, "user_speaking_status"),
    Di(ha, 1e3, "websocket_error"),
    Di(ha, 1001, "websocket_close"),
    Di(ha, 22, "room_no_speaking_list"),
    Di(ha, 21, "room_announce_update"),
    Di(ha, 17, "qa_messages"),
    Di(ha, 15, "room_list"),
    Di(ha, 23, "send_private_message_reply"),
    Di(ha, 24, "receive_private_message"),
    Di(ha, 25, "private_list"),
    Di(ha, 26, "private_history"),
    ha), Fo = Oo, No = Mo, Bo = xo, jo = {
        "-1": "æªç¥éè¯¯",
        0: "æå¡å¨è¿åæ­£ç¡®",
        1: "æ°æ®åºéè¯¯",
        2: "å¥åéè¯¯",
        3: "ç´æ­é´ä¸å­å¨",
        4: "jsonè§£æéè¯¯",
        5: "ç´æ­é´ä¸å­å¨è¯¥æå",
        6: "ç´æ­é´ç¦è¨",
        7: "ææè¯å±è½",
        8: "éæ³¨åç¨æ·",
        9: "ç¨æ·æ æä½æé",
        10: "ç´æ­é´æ»¡å",
        11: "ç¨æ¶è¢«åç¬ç¦è¨",
        12: "å­¦çå·²ç»è¢«è¸¢åºç´æ­é´",
        13: "æ¶æ¯è¶è¿é¿åº¦éå¶(140æ±å­)"
    }, Uo = "/h/get_live_message_history?live_id=:liveId&ts_lower_bound=:start&ts_upper_bound=:end", Go = "/h/get_live_room_announce?live_id=:liveId", Ho = function() {
        function t(e) {
            if (ki(this, t),
            this.liveId = 0,
            this.userToken = null,
            this.url = "",
            this.startTime = 0,
            this.endTime = 0,
            xi(!(this.liveData = null), this, e),
            this.liveData && (this.liveId = this.liveData.roomId),
            this.needReconnect = !0,
            this.websocket = null,
            this.reconnectTimes = 0,
            this.emoji = Po,
            this.selfId = null,
            !this.url)
                throw Error("å¿é¡»ä¼ å¥èå¤©URLï¼");
            this.events = new In
        }
        return Ii(t, [{
            key: "validateResponse",
            value: function(e) {
                return !e.result || 0 === e.result || (this.debuger("warn", "something wrong", jo[e.result] || jo[-1], e),
                !1)
            }
        }, {
            key: "debuger",
            value: function(e) {
                if (this.debug) {
                    for (var t, r = arguments.length, i = Array(1 < r ? r - 1 : 0), n = 1; n < r; n++)
                        i[n - 1] = arguments[n];
                    (t = console)[e].apply(t, i)
                }
            }
        }, {
            key: "getSLEmoji",
            value: function() {
                return this.emoji
            }
        }, {
            key: "fetchHistoryChat",
            value: function() {
                var e = this.startTime
                  , t = this.endTime;
                return cn(("" + this.url + (this.liveData ? Uo + "&partner_id=" + this.liveData.partnerId : Uo)).replace(/:liveId/, this.liveId).replace(/:start/, e).replace(/:end/, t), {
                    method: "GET"
                })
            }
        }, {
            key: "fetchRoomAnnounce",
            value: function() {
                return cn(("" + this.url + (this.liveData ? Go + "&partner_id=" + this.liveData.partnerId : Go)).replace(/:liveId/, this.liveId), {
                    method: "GET"
                })
            }
        }, {
            key: "triggerEvent",
            value: function(e, t) {
                this.events.trigger(e, t)
            }
        }, {
            key: "triggerInitialDataEvent",
            value: function(e) {
                var t = e.data
                  , r = t.qaData;
                this.triggerEvent("initial_room_announce", {
                    data: {
                        announce: t.roomAnnounce || ""
                    }
                }),
                this.triggerEvent("initial_qa_list", {
                    data: {
                        qaData: r
                    }
                })
            }
        }, {
            key: "initLoginReply",
            value: function(e) {
                2 === e.cmd && (this.selfId = e.data.userToken)
            }
        }, {
            key: "connect",
            value: function(a) {
                var o = this;
                this.websocket && 1 === this.websocket.readyState && this.websocket.close(),
                clearInterval(this.heartbeat),
                this.websocket = new WebSocket(this.url),
                this.websocket.onmessage = function(e) {
                    var t = JSON.parse(e.data)
                      , r = t.cmd
                      , i = t.data
                      , n = o.validateResponse(t);
                    n && 2 === r ? (o.reconnectTimes = 0,
                    o.initLoginReply(t),
                    o.startHeartbeat()) : 2 === r ? 8 !== t.result && 3 !== t.result && 2 !== t.result || (o.needReconnect = !1) : 9 === r ? o.needReconnect = !1 : 19 === r && 1 === i.action && (o.needReconnect = !1),
                    11 === r && (o.needReconnect = !1),
                    2 === r && a && a(),
                    o.debuger("log", "%cwss recv data", "color:red", No[r] || "cmd=" + r, t),
                    o.triggerEvent(Bo[r] ? r + "," + Bo[r] : r, t),
                    n && 2 === r && o.triggerInitialDataEvent(t)
                }
                ,
                this.websocket.onopen = function(e) {
                    o.sendLogin()
                }
                ,
                this.websocket.onerror = function(e) {
                    o.triggerEvent("websocket_error,1000", e),
                    o.debuger("log", "%cws error", "color:red", Bo[1e3], e)
                }
                ,
                this.websocket.onclose = function(e) {
                    o.triggerEvent("websocket_close,1001", e),
                    o.debuger("log", "%cws close", "color:red", Bo[1001], e),
                    setTimeout(function() {
                        o.needReconnect && o.reconnectTimes <= 8 ? (o.reconnectTimes += 1,
                        setTimeout(function() {
                            o.debuger("warn", "reconnecting, times = ", o.reconnectTimes),
                            o.connect()
                        }, 1e3 * Math.pow(2, o.reconnectTimes))) : o.close()
                    }, 500)
                }
            }
        }, {
            key: "close",
            value: function() {
                this.needReconnect = !1,
                this.websocket && 1 === this.websocket.readyState && this.websocket.close(),
                clearInterval(this.heartbeat),
                this.events.removeAllListeners()
            }
        }, {
            key: "dispose",
            value: function() {
                this.close()
            }
        }, {
            key: "on",
            value: function(e, t) {
                this.events.on(e, t)
            }
        }, {
            key: "sendData",
            value: function(e, t, r) {
                var i = Tn({
                    cmd: e,
                    data: t,
                    echo: r
                });
                this.debuger("log", "%cws send data", "color:green", Fo[e], i),
                this.websocket.send(i)
            }
        }, {
            key: "sendHeartbeat",
            value: function() {
                this.sendData(1, {
                    userToken: this.selfId,
                    liveId: this.liveId
                })
            }
        }, {
            key: "startHeartbeat",
            value: function() {
                var t = this;
                clearInterval(this.heartbeat),
                this.sendHeartbeat(),
                this.heartbeat = setInterval(function(e) {
                    t.sendHeartbeat()
                }, 2e4)
            }
        }, {
            key: "sendLogin",
            value: function() {
                this.sendData(this.liveData ? 80 : 2, this.liveData ? this.liveData : {
                    userToken: this.userToken,
                    liveId: this.liveId,
                    terminalType: 3
                })
            }
        }, {
            key: "sendToGetForbidList",
            value: function() {
                this.sendData(22, {
                    fromUserToken: this.selfId,
                    liveId: this.liveId
                })
            }
        }, {
            key: "sendToGetRoomList",
            value: function() {
                this.sendData(15, {
                    fromUserToken: this.selfId,
                    liveId: this.liveId
                })
            }
        }, {
            key: "sendToUpdateAnnouncement",
            value: function(e) {
                this.sendData(20, {
                    userToken: this.selfId,
                    liveId: this.liveId,
                    announce: e
                })
            }
        }, {
            key: "sendToSetSpeaking",
            value: function(e, t) {
                this.sendData(13, {
                    fromUserToken: this.selfId,
                    liveId: this.liveId,
                    forbiddenUserToken: e,
                    status: t
                })
            }
        }, {
            key: "fetchPrivateList",
            value: function(e, t) {
                this._sendDataAndWaitResponse(25, 25, {
                    liveId: this.liveId,
                    userToken: this.selfId
                }).then(e).catch(t)
            }
        }, {
            key: "fetchPrivateHistory",
            value: function(e, t, r, i) {
                this._sendDataAndWaitResponse(26, 26, {
                    liveId: this.liveId,
                    userToken: this.selfId,
                    peerToken: e,
                    msgId: t
                }).then(r).catch(i)
            }
        }, {
            key: "sendQAMessage",
            value: function(e, t) {
                this.sendData(16, {
                    userToken: this.selfId,
                    liveId: this.liveId,
                    msgData: e,
                    toToken: t
                })
            }
        }, {
            key: "sendMessage",
            value: function(e) {
                this.sendData(4, {
                    userToken: this.selfId,
                    liveId: this.liveId,
                    msgData: "" + e,
                    msgType: 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 1
                })
            }
        }, {
            key: "sendPrivateMessage",
            value: function(e, t) {
                var r = arguments[3]
                  , i = arguments[4];
                this._sendDataAndWaitResponse(23, 23, {
                    userToken: this.selfId,
                    liveId: this.liveId,
                    peerToken: e,
                    msgData: t,
                    msgType: 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 1
                }).then(r).catch(i)
            }
        }, {
            key: "loadAllMessages",
            value: function(t, r) {
                if (!t || t && "function" != typeof t || r && "function" != typeof r)
                    throw Error("arguments must be function");
                this.fetchHistoryChat().then(function(e) {
                    return t && t(e)
                }).catch(function(e) {
                    return r && r(e)
                })
            }
        }, {
            key: "loadRoomAnnounce",
            value: function(t, r) {
                if (!t || t && "function" != typeof t || r && "function" != typeof r)
                    throw Error("arguments must be function");
                this.fetchRoomAnnounce().then(function(e) {
                    return t && t(e)
                }).catch(function(e) {
                    return r && r(e)
                })
            }
        }, {
            key: "_sendDataAndWaitResponse",
            value: function(a, o, s) {
                var l = this;
                return new ii(function(r, e) {
                    var i = dn()
                      , n = null
                      , t = function e(t) {
                        t.echo === i && (clearTimeout(n),
                        l.events.removeListener(a, e),
                        r(t))
                    };
                    l.events.on(a, t),
                    n = setTimeout(function() {
                        l.events.removeListener(a, t),
                        e()
                    }, 5e3),
                    l.sendData(o, s, i)
                }
                )
            }
        }]),
        t
    }();
    M(M.S, "Number", {
        isNaN: function(e) {
            return e != e
        }
    });
    var qo = v.Number.isNaN
      , Ko = e(t(function(e) {
        e.exports = {
            default: qo,
            __esModule: !0
        }
    }));
    window.Promise = ii;
    var Vo = function() {
        function t(e) {
            ki(this, t),
            this.options = {
                preload: "metadata",
                controls: !1
            },
            xi(!0, this, e),
            this.events = new In,
            this.playerId = "_sunlplayer" + t.id,
            t.id += 1,
            this._init()
        }
        return Ii(t, [{
            key: "start",
            value: function() {
                this.trigger("ready")
            }
        }, {
            key: "setSrc",
            value: function(e) {
                var t = this;
                this.player.src = e,
                this.autoplay().then(function() {
                    t.trigger("autoplay_success,status_change", {
                        status: "playing"
                    })
                }).catch(function(e) {
                    t.trigger("autoplay_fail", e)
                })
            }
        }, {
            key: "_init",
            value: function() {
                this._initDom(),
                this._initEvents()
            }
        }, {
            key: "_initDom",
            value: function() {
                var e = this.options
                  , r = void 0 === e ? {} : e
                  , t = oi(r).reduce(function(e, t) {
                    return r[t] && (e += " " + [t] + '="' + r[t] + '"'),
                    e
                }, "")
                  , i = '\n            <video id ="' + this.playerId + '" class="slplayer" ' + t + ">\n                <p>æ¨çæ­æ¾å¨æä¸æ¯ææ­æ¾æ­¤è§é¢</p>\n            </video>\n        "
                  , n = document.createElement("html5-template");
                n.innerHTML = i;
                var a = un(this.el) ? this.el : document.querySelector("#" + this.el);
                this.player = a.appendChild(n.firstElementChild)
            }
        }, {
            key: "on",
            value: function(e, t) {
                this.events.on(e, t)
            }
        }, {
            key: "trigger",
            value: function(e) {
                for (var t, r = arguments.length, i = Array(1 < r ? r - 1 : 0), n = 1; n < r; n++)
                    i[n - 1] = arguments[n];
                (t = this.events).trigger.apply(t, [e].concat(i))
            }
        }, {
            key: "_initEvents",
            value: function() {
                var i = this
                  , n = ["time_update", "seeked", "volume_change", "rate_change"];
                this.on("_time_update", function() {
                    i.trigger("metadata_update", {
                        currentTime: i.currentTime
                    })
                }),
                this.on("_rate_change", function() {
                    i.trigger("rate_change", i.playbackRate())
                }),
                this.on("_volume_change", function() {
                    i.trigger("volume_change", i.volume())
                }),
                this.events.videoEvents.forEach(function(r) {
                    var e = r.replace(/_/g, "");
                    i.player.addEventListener(e, function(e) {
                        var t = -1 < n.indexOf(r) ? "_" + r : r;
                        i.trigger(t, e)
                    })
                })
            }
        }, {
            key: "autoplay",
            value: function() {
                var r = this
                  , e = window.Promise;
                return !!e && new e(function(e, t) {
                    e(r.player.play())
                }
                )
            }
        }, {
            key: "play",
            value: function() {
                this.player.play()
            }
        }, {
            key: "pause",
            value: function() {
                this.player.pause()
            }
        }, {
            key: "getPlayer",
            value: function() {
                return this.player
            }
        }, {
            key: "getPlayerType",
            value: function() {
                return "video"
            }
        }, {
            key: "getPlayerId",
            value: function() {
                return this.playerId
            }
        }, {
            key: "toggle",
            value: function() {
                this.player.paused ? this.play() : this.pause()
            }
        }, {
            key: "bufferedPercent",
            value: function() {
                var e = this.player
                  , t = e.buffered
                  , r = e.duration;
                return t.length ? t.end(t.length - 1) / r : 0
            }
        }, {
            key: "volume",
            value: function(e) {
                var t = parseFloat(e);
                return Ko(t) || (this.player.volume = t = Math.min(t = Math.max(t, 0), 1),
                this.player.muted = 0 === e),
                this.player.volume
            }
        }, {
            key: "muted",
            value: function(e) {
                return void 0 !== e ? !!(this.player.muted = e) : this.player.muted
            }
        }, {
            key: "playbackRate",
            value: function(e) {
                return void 0 !== e ? (this.player.playbackRate = parseFloat(e),
                e) : this.player.playbackRate
            }
        }, {
            key: "seek",
            value: function(e) {
                var t = Math.max(e, 0)
                  , r = this.totalDuration || this.duration;
                r && (t = Math.min(t, r)),
                this.player.currentTime = t
            }
        }, {
            key: "dispose",
            value: function() {
                this.events.removeAllListeners()
            }
        }, {
            key: "paused",
            get: function() {
                return this.player.paused
            }
        }, {
            key: "currentTime",
            get: function() {
                return this.player.currentTime
            }
        }, {
            key: "duration",
            get: function() {
                return this.player.duration
            }
        }], [{
            key: "supportHls",
            value: function() {
                return !1
            }
        }]),
        t
    }();
    Vo.id = 100;
    var Yo = e(t(function(e, t) {
        "undefined" != typeof window && (e.exports = function() {
            return function(r) {
                var i = {};
                function n(e) {
                    if (i[e])
                        return i[e].exports;
                    var t = i[e] = {
                        i: e,
                        l: !1,
                        exports: {}
                    };
                    return r[e].call(t.exports, t, t.exports, n),
                    t.l = !0,
                    t.exports
                }
                return n.m = r,
                n.c = i,
                n.d = function(e, t, r) {
                    n.o(e, t) || Object.defineProperty(e, t, {
                        enumerable: !0,
                        get: r
                    })
                }
                ,
                n.r = function(e) {
                    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                        value: "Module"
                    }),
                    Object.defineProperty(e, "__esModule", {
                        value: !0
                    })
                }
                ,
                n.t = function(t, e) {
                    if (1 & e && (t = n(t)),
                    8 & e)
                        return t;
                    if (4 & e && "object" == typeof t && t && t.__esModule)
                        return t;
                    var r = Object.create(null);
                    if (n.r(r),
                    Object.defineProperty(r, "default", {
                        enumerable: !0,
                        value: t
                    }),
                    2 & e && "string" != typeof t)
                        for (var i in t)
                            n.d(r, i, function(e) {
                                return t[e]
                            }
                            .bind(null, i));
                    return r
                }
                ,
                n.n = function(e) {
                    var t = e && e.__esModule ? function() {
                        return e.default
                    }
                    : function() {
                        return e
                    }
                    ;
                    return n.d(t, "a", t),
                    t
                }
                ,
                n.o = function(e, t) {
                    return Object.prototype.hasOwnProperty.call(e, t)
                }
                ,
                n.p = "/dist/",
                n(n.s = "./src/hls.js")
            }({
                "./node_modules/eventemitter3/index.js": function(e, t, r) {
                    var i = Object.prototype.hasOwnProperty
                      , h = "~";
                    function n() {}
                    function s(e, t, r) {
                        this.fn = e,
                        this.context = t,
                        this.once = r || !1
                    }
                    function a(e, t, r, i, n) {
                        if ("function" != typeof r)
                            throw new TypeError("The listener must be a function");
                        var a = new s(r,i || e,n)
                          , o = h ? h + t : t;
                        return e._events[o] ? e._events[o].fn ? e._events[o] = [e._events[o], a] : e._events[o].push(a) : (e._events[o] = a,
                        e._eventsCount++),
                        e
                    }
                    function u(e, t) {
                        0 == --e._eventsCount ? e._events = new n : delete e._events[t]
                    }
                    function o() {
                        this._events = new n,
                        this._eventsCount = 0
                    }
                    Object.create && (n.prototype = Object.create(null),
                    (new n).__proto__ || (h = !1)),
                    o.prototype.eventNames = function() {
                        var e, t, r = [];
                        if (0 === this._eventsCount)
                            return r;
                        for (t in e = this._events)
                            i.call(e, t) && r.push(h ? t.slice(1) : t);
                        return Object.getOwnPropertySymbols ? r.concat(Object.getOwnPropertySymbols(e)) : r
                    }
                    ,
                    o.prototype.listeners = function(e) {
                        var t = this._events[h ? h + e : e];
                        if (!t)
                            return [];
                        if (t.fn)
                            return [t.fn];
                        for (var r = 0, i = t.length, n = Array(i); r < i; r++)
                            n[r] = t[r].fn;
                        return n
                    }
                    ,
                    o.prototype.listenerCount = function(e) {
                        var t = this._events[h ? h + e : e];
                        return t ? t.fn ? 1 : t.length : 0
                    }
                    ,
                    o.prototype.emit = function(e, t, r, i, n, a) {
                        var o = h ? h + e : e;
                        if (!this._events[o])
                            return !1;
                        var s, l, u = this._events[o], c = arguments.length;
                        if (u.fn) {
                            switch (u.once && this.removeListener(e, u.fn, void 0, !0),
                            c) {
                            case 1:
                                return u.fn.call(u.context),
                                !0;
                            case 2:
                                return u.fn.call(u.context, t),
                                !0;
                            case 3:
                                return u.fn.call(u.context, t, r),
                                !0;
                            case 4:
                                return u.fn.call(u.context, t, r, i),
                                !0;
                            case 5:
                                return u.fn.call(u.context, t, r, i, n),
                                !0;
                            case 6:
                                return u.fn.call(u.context, t, r, i, n, a),
                                !0
                            }
                            for (s = Array(c - (l = 1)); l < c; l++)
                                s[l - 1] = arguments[l];
                            u.fn.apply(u.context, s)
                        } else {
                            var d, f = u.length;
                            for (l = 0; l < f; l++)
                                switch (u[l].once && this.removeListener(e, u[l].fn, void 0, !0),
                                c) {
                                case 1:
                                    u[l].fn.call(u[l].context);
                                    break;
                                case 2:
                                    u[l].fn.call(u[l].context, t);
                                    break;
                                case 3:
                                    u[l].fn.call(u[l].context, t, r);
                                    break;
                                case 4:
                                    u[l].fn.call(u[l].context, t, r, i);
                                    break;
                                default:
                                    if (!s)
                                        for (s = Array(c - (d = 1)); d < c; d++)
                                            s[d - 1] = arguments[d];
                                    u[l].fn.apply(u[l].context, s)
                                }
                        }
                        return !0
                    }
                    ,
                    o.prototype.on = function(e, t, r) {
                        return a(this, e, t, r, !1)
                    }
                    ,
                    o.prototype.once = function(e, t, r) {
                        return a(this, e, t, r, !0)
                    }
                    ,
                    o.prototype.removeListener = function(e, t, r, i) {
                        var n = h ? h + e : e;
                        if (!this._events[n])
                            return this;
                        if (!t)
                            return u(this, n),
                            this;
                        var a = this._events[n];
                        if (a.fn)
                            a.fn !== t || i && !a.once || r && a.context !== r || u(this, n);
                        else {
                            for (var o = 0, s = [], l = a.length; o < l; o++)
                                (a[o].fn !== t || i && !a[o].once || r && a[o].context !== r) && s.push(a[o]);
                            s.length ? this._events[n] = 1 === s.length ? s[0] : s : u(this, n)
                        }
                        return this
                    }
                    ,
                    o.prototype.removeAllListeners = function(e) {
                        var t;
                        return e ? this._events[t = h ? h + e : e] && u(this, t) : (this._events = new n,
                        this._eventsCount = 0),
                        this
                    }
                    ,
                    o.prototype.off = o.prototype.removeListener,
                    o.prototype.addListener = o.prototype.on,
                    o.prefixed = h,
                    e.exports = o.EventEmitter = o
                },
                "./node_modules/node-libs-browser/node_modules/events/events.js": function(e, t) {
                    function i() {
                        this._events = this._events || {},
                        this._maxListeners = this._maxListeners || void 0
                    }
                    function l(e) {
                        return "function" == typeof e
                    }
                    function u(e) {
                        return "object" == typeof e && null !== e
                    }
                    function c(e) {
                        return void 0 === e
                    }
                    ((e.exports = i).EventEmitter = i).prototype._events = void 0,
                    i.prototype._maxListeners = void 0,
                    i.defaultMaxListeners = 10,
                    i.prototype.setMaxListeners = function(e) {
                        if ("number" != typeof e || e < 0 || isNaN(e))
                            throw TypeError("n must be a positive number");
                        return this._maxListeners = e,
                        this
                    }
                    ,
                    i.prototype.emit = function(e) {
                        var t, r, i, n, a, o;
                        if (this._events || (this._events = {}),
                        "error" === e && (!this._events.error || u(this._events.error) && !this._events.error.length)) {
                            if ((t = arguments[1])instanceof Error)
                                throw t;
                            var s = Error('Uncaught, unspecified "error" event. (' + t + ")");
                            throw s.context = t,
                            s
                        }
                        if (c(r = this._events[e]))
                            return !1;
                        if (l(r))
                            switch (arguments.length) {
                            case 1:
                                r.call(this);
                                break;
                            case 2:
                                r.call(this, arguments[1]);
                                break;
                            case 3:
                                r.call(this, arguments[1], arguments[2]);
                                break;
                            default:
                                n = Array.prototype.slice.call(arguments, 1),
                                r.apply(this, n)
                            }
                        else if (u(r))
                            for (n = Array.prototype.slice.call(arguments, 1),
                            i = (o = r.slice()).length,
                            a = 0; a < i; a++)
                                o[a].apply(this, n);
                        return !0
                    }
                    ,
                    i.prototype.on = i.prototype.addListener = function(e, t) {
                        var r;
                        if (!l(t))
                            throw TypeError("listener must be a function");
                        return this._events || (this._events = {}),
                        this._events.newListener && this.emit("newListener", e, l(t.listener) ? t.listener : t),
                        this._events[e] ? u(this._events[e]) ? this._events[e].push(t) : this._events[e] = [this._events[e], t] : this._events[e] = t,
                        u(this._events[e]) && !this._events[e].warned && (r = c(this._maxListeners) ? i.defaultMaxListeners : this._maxListeners) && 0 < r && r < this._events[e].length && (this._events[e].warned = !0,
                        console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.", this._events[e].length),
                        "function" == typeof console.trace && console.trace()),
                        this
                    }
                    ,
                    i.prototype.once = function(e, t) {
                        if (!l(t))
                            throw TypeError("listener must be a function");
                        var r = !1;
                        function i() {
                            this.removeListener(e, i),
                            r || (r = !0,
                            t.apply(this, arguments))
                        }
                        return i.listener = t,
                        this.on(e, i),
                        this
                    }
                    ,
                    i.prototype.removeListener = function(e, t) {
                        var r, i, n, a;
                        if (!l(t))
                            throw TypeError("listener must be a function");
                        if (!this._events || !this._events[e])
                            return this;
                        if (n = (r = this._events[e]).length,
                        i = -1,
                        r === t || l(r.listener) && r.listener === t)
                            delete this._events[e],
                            this._events.removeListener && this.emit("removeListener", e, t);
                        else if (u(r)) {
                            for (a = n; 0 < a--; )
                                if (r[a] === t || r[a].listener && r[a].listener === t) {
                                    i = a;
                                    break
                                }
                            if (i < 0)
                                return this;
                            1 === r.length ? (r.length = 0,
                            delete this._events[e]) : r.splice(i, 1),
                            this._events.removeListener && this.emit("removeListener", e, t)
                        }
                        return this
                    }
                    ,
                    i.prototype.removeAllListeners = function(e) {
                        var t, r;
                        if (!this._events)
                            return this;
                        if (!this._events.removeListener)
                            return 0 === arguments.length ? this._events = {} : this._events[e] && delete this._events[e],
                            this;
                        if (0 === arguments.length) {
                            for (t in this._events)
                                "removeListener" !== t && this.removeAllListeners(t);
                            return this.removeAllListeners("removeListener"),
                            this._events = {},
                            this
                        }
                        if (l(r = this._events[e]))
                            this.removeListener(e, r);
                        else if (r)
                            for (; r.length; )
                                this.removeListener(e, r[r.length - 1]);
                        return delete this._events[e],
                        this
                    }
                    ,
                    i.prototype.listeners = function(e) {
                        return this._events && this._events[e] ? l(this._events[e]) ? [this._events[e]] : this._events[e].slice() : []
                    }
                    ,
                    i.prototype.listenerCount = function(e) {
                        if (this._events) {
                            var t = this._events[e];
                            if (l(t))
                                return 1;
                            if (t)
                                return t.length
                        }
                        return 0
                    }
                    ,
                    i.listenerCount = function(e, t) {
                        return e.listenerCount(t)
                    }
                },
                "./node_modules/url-toolkit/src/url-toolkit.js": function(e, t, r) {
                    var i, c, n, a, d;
                    i = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,
                    c = /^([^\/?#]*)(.*)$/,
                    n = /(?:\/|^)\.(?=\/)/g,
                    a = /(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,
                    e.exports = d = {
                        buildAbsoluteURL: function(e, t, r) {
                            if (r = r || {},
                            e = e.trim(),
                            !(t = t.trim())) {
                                if (!r.alwaysNormalize)
                                    return e;
                                var i = d.parseURL(e);
                                if (!i)
                                    throw Error("Error trying to parse base URL.");
                                return i.path = d.normalizePath(i.path),
                                d.buildURLFromParts(i)
                            }
                            var n = d.parseURL(t);
                            if (!n)
                                throw Error("Error trying to parse relative URL.");
                            if (n.scheme)
                                return r.alwaysNormalize ? (n.path = d.normalizePath(n.path),
                                d.buildURLFromParts(n)) : t;
                            var a = d.parseURL(e);
                            if (!a)
                                throw Error("Error trying to parse base URL.");
                            if (!a.netLoc && a.path && "/" !== a.path[0]) {
                                var o = c.exec(a.path);
                                a.netLoc = o[1],
                                a.path = o[2]
                            }
                            a.netLoc && !a.path && (a.path = "/");
                            var s = {
                                scheme: a.scheme,
                                netLoc: n.netLoc,
                                path: null,
                                params: n.params,
                                query: n.query,
                                fragment: n.fragment
                            };
                            if (!n.netLoc && (s.netLoc = a.netLoc,
                            "/" !== n.path[0]))
                                if (n.path) {
                                    var l = a.path
                                      , u = l.substring(0, 1 + l.lastIndexOf("/")) + n.path;
                                    s.path = d.normalizePath(u)
                                } else
                                    s.path = a.path,
                                    n.params || (s.params = a.params,
                                    n.query || (s.query = a.query));
                            return null === s.path && (s.path = r.alwaysNormalize ? d.normalizePath(n.path) : n.path),
                            d.buildURLFromParts(s)
                        },
                        parseURL: function(e) {
                            var t = i.exec(e);
                            return t ? {
                                scheme: t[1] || "",
                                netLoc: t[2] || "",
                                path: t[3] || "",
                                params: t[4] || "",
                                query: t[5] || "",
                                fragment: t[6] || ""
                            } : null
                        },
                        normalizePath: function(e) {
                            for (e = e.split("").reverse().join("").replace(n, ""); e.length !== (e = e.replace(a, "")).length; )
                                ;
                            return e.split("").reverse().join("")
                        },
                        buildURLFromParts: function(e) {
                            return e.scheme + e.netLoc + e.path + e.params + e.query + e.fragment
                        }
                    }
                },
                "./node_modules/webworkify-webpack/index.js": function(e, t, f) {
                    function l(r) {
                        var i = {};
                        function n(e) {
                            if (i[e])
                                return i[e].exports;
                            var t = i[e] = {
                                i: e,
                                l: !1,
                                exports: {}
                            };
                            return r[e].call(t.exports, t, t.exports, n),
                            t.l = !0,
                            t.exports
                        }
                        n.m = r,
                        n.c = i,
                        n.i = function(e) {
                            return e
                        }
                        ,
                        n.d = function(e, t, r) {
                            n.o(e, t) || Object.defineProperty(e, t, {
                                configurable: !1,
                                enumerable: !0,
                                get: r
                            })
                        }
                        ,
                        n.r = function(e) {
                            Object.defineProperty(e, "__esModule", {
                                value: !0
                            })
                        }
                        ,
                        n.n = function(e) {
                            var t = e && e.__esModule ? function() {
                                return e.default
                            }
                            : function() {
                                return e
                            }
                            ;
                            return n.d(t, "a", t),
                            t
                        }
                        ,
                        n.o = function(e, t) {
                            return Object.prototype.hasOwnProperty.call(e, t)
                        }
                        ,
                        n.p = "/",
                        n.oe = function(e) {
                            throw console.error(e),
                            e
                        }
                        ;
                        var e = n(n.s = ENTRY_MODULE);
                        return e.default || e
                    }
                    var h = "[\\.|\\-|\\+|\\w|/|@]+"
                      , p = "\\((/\\*.*?\\*/)?s?.*?(" + h + ").*?\\)";
                    function g(e) {
                        return (e + "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&")
                    }
                    function v(e, t, r) {
                        var i = {};
                        i[r] = [];
                        var n = "" + t
                          , a = n.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);
                        if (!a)
                            return i;
                        for (var o, s = a[1], l = RegExp("(\\\\n|\\W)" + g(s) + p, "g"); o = l.exec(n); )
                            "dll-reference" !== o[3] && i[r].push(o[3]);
                        for (l = RegExp("\\(" + g(s) + '\\("(dll-reference\\s(' + h + '))"\\)\\)' + p, "g"); o = l.exec(n); )
                            e[o[2]] || (i[r].push(o[1]),
                            e[o[2]] = f(o[1]).m),
                            i[o[2]] = i[o[2]] || [],
                            i[o[2]].push(o[4]);
                        for (var u = Object.keys(i), c = 0; c < u.length; c++)
                            for (var d = 0; d < i[u[c]].length; d++)
                                isNaN(1 * i[u[c]][d]) || (i[u[c]][d] = 1 * i[u[c]][d]);
                        return i
                    }
                    function y(r) {
                        return Object.keys(r).reduce(function(e, t) {
                            return e || 0 < r[t].length
                        }, !1)
                    }
                    e.exports = function(e, t) {
                        var r = {
                            main: f.m
                        }
                          , i = (t = t || {}).all ? {
                            main: Object.keys(r.main)
                        } : function(e, t) {
                            for (var r = {
                                main: [t]
                            }, i = {
                                main: []
                            }, n = {
                                main: {}
                            }; y(r); )
                                for (var a = Object.keys(r), o = 0; o < a.length; o++) {
                                    var s = a[o]
                                      , l = r[s].pop();
                                    if (n[s] = n[s] || {},
                                    !n[s][l] && e[s][l]) {
                                        n[s][l] = !0,
                                        i[s] = i[s] || [],
                                        i[s].push(l);
                                        for (var u = v(e, e[s][l], s), c = Object.keys(u), d = 0; d < c.length; d++)
                                            r[c[d]] = r[c[d]] || [],
                                            r[c[d]] = r[c[d]].concat(u[c[d]])
                                    }
                                }
                            return i
                        }(r, e)
                          , n = "";
                        Object.keys(i).filter(function(e) {
                            return "main" !== e
                        }).forEach(function(t) {
                            for (var e = 0; i[t][e]; )
                                e++;
                            i[t].push(e),
                            r[t][e] = "(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",
                            n = n + "var " + t + " = (" + ("" + l).replace("ENTRY_MODULE", JSON.stringify(e)) + ")({" + i[t].map(function(e) {
                                return JSON.stringify(e) + ": " + r[t][e]
                            }).join(",") + "});\n"
                        }),
                        n = n + "new ((" + ("" + l).replace("ENTRY_MODULE", JSON.stringify(e)) + ")({" + i.main.map(function(e) {
                            return JSON.stringify(e) + ": " + r.main[e]
                        }).join(",") + "}))(self);";
                        var a = new window.Blob([n],{
                            type: "text/javascript"
                        });
                        if (t.bare)
                            return a;
                        var o = (window.URL || window.webkitURL || window.mozURL || window.msURL).createObjectURL(a)
                          , s = new window.Worker(o);
                        return s.objectURL = o,
                        s
                    }
                },
                "./src/config.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = r("./src/controller/abr-controller.js")
                      , n = r("./src/controller/buffer-controller.js")
                      , a = r("./src/controller/cap-level-controller.js")
                      , o = r("./src/controller/fps-controller.js")
                      , s = r("./src/utils/xhr-loader.js")
                      , l = r("./src/controller/audio-track-controller.js")
                      , u = r("./src/controller/audio-stream-controller.js")
                      , c = r("./src/utils/cues.js")
                      , d = r("./src/controller/timeline-controller.js")
                      , f = r("./src/controller/subtitle-track-controller.js")
                      , h = r("./src/controller/subtitle-stream-controller.js")
                      , p = r("./src/controller/eme-controller.js")
                      , g = r("./src/utils/mediakeys-helper.js");
                    t.hlsDefaultConfig = {
                        autoStartLoad: !0,
                        startPosition: -1,
                        defaultAudioCodec: void 0,
                        debug: !1,
                        capLevelOnFPSDrop: !1,
                        capLevelToPlayerSize: !1,
                        initialLiveManifestSize: 1,
                        maxBufferLength: 30,
                        maxBufferSize: 6e7,
                        maxBufferHole: .5,
                        lowBufferWatchdogPeriod: .5,
                        highBufferWatchdogPeriod: 3,
                        nudgeOffset: .1,
                        nudgeMaxRetry: 3,
                        maxFragLookUpTolerance: .25,
                        liveSyncDurationCount: 3,
                        liveMaxLatencyDurationCount: 1 / 0,
                        liveSyncDuration: void 0,
                        liveMaxLatencyDuration: void 0,
                        liveDurationInfinity: !1,
                        liveBackBufferLength: 1 / 0,
                        maxMaxBufferLength: 600,
                        enableWorker: !0,
                        enableSoftwareAES: !0,
                        manifestLoadingTimeOut: 1e4,
                        manifestLoadingMaxRetry: 1,
                        manifestLoadingRetryDelay: 1e3,
                        manifestLoadingMaxRetryTimeout: 64e3,
                        startLevel: void 0,
                        levelLoadingTimeOut: 1e4,
                        levelLoadingMaxRetry: 4,
                        levelLoadingRetryDelay: 1e3,
                        levelLoadingMaxRetryTimeout: 64e3,
                        fragLoadingTimeOut: 2e4,
                        fragLoadingMaxRetry: 6,
                        fragLoadingRetryDelay: 1e3,
                        fragLoadingMaxRetryTimeout: 64e3,
                        startFragPrefetch: !1,
                        fpsDroppedMonitoringPeriod: 5e3,
                        fpsDroppedMonitoringThreshold: .2,
                        appendErrorMaxRetry: 3,
                        loader: s.default,
                        fLoader: void 0,
                        pLoader: void 0,
                        xhrSetup: void 0,
                        licenseXhrSetup: void 0,
                        abrController: i.default,
                        bufferController: n.default,
                        capLevelController: a.default,
                        fpsController: o.default,
                        stretchShortVideoTrack: !1,
                        maxAudioFramesDrift: 1,
                        forceKeyFrameOnDiscontinuity: !0,
                        abrEwmaFastLive: 3,
                        abrEwmaSlowLive: 9,
                        abrEwmaFastVoD: 3,
                        abrEwmaSlowVoD: 9,
                        abrEwmaDefaultEstimate: 5e5,
                        abrBandWidthFactor: .95,
                        abrBandWidthUpFactor: .7,
                        abrMaxWithRealBitrate: !1,
                        maxStarvationDelay: 4,
                        maxLoadingDelay: 4,
                        minAutoBitrate: 0,
                        emeEnabled: !1,
                        widevineLicenseUrl: void 0,
                        requestMediaKeySystemAccessFunc: g.requestMediaKeySystemAccess
                    },
                    t.hlsDefaultConfig.subtitleStreamController = h.SubtitleStreamController,
                    t.hlsDefaultConfig.subtitleTrackController = f.default,
                    t.hlsDefaultConfig.timelineController = d.default,
                    t.hlsDefaultConfig.cueHandler = c,
                    t.hlsDefaultConfig.enableCEA708Captions = !0,
                    t.hlsDefaultConfig.enableWebVTT = !0,
                    t.hlsDefaultConfig.captionsTextTrack1Label = "English",
                    t.hlsDefaultConfig.captionsTextTrack1LanguageCode = "en",
                    t.hlsDefaultConfig.captionsTextTrack2Label = "Spanish",
                    t.hlsDefaultConfig.captionsTextTrack2LanguageCode = "es",
                    t.hlsDefaultConfig.audioStreamController = u.default,
                    t.hlsDefaultConfig.audioTrackController = l.default,
                    t.hlsDefaultConfig.emeController = p.default
                },
                "./src/controller/abr-controller.js": function(e, r, l) {
                    (function(o) {
                        var i, t = this && this.__extends || (i = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            i(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(r, "__esModule", {
                            value: !0
                        });
                        var v = l("./src/events.js")
                          , n = l("./src/event-handler.js")
                          , y = l("./src/utils/buffer-helper.js")
                          , a = l("./src/errors.js")
                          , m = l("./src/utils/logger.js")
                          , s = l("./src/utils/ewma-bandwidth-estimator.js")
                          , _ = window.performance
                          , e = function(r) {
                            function e(e) {
                                var t = r.call(this, e, v.default.FRAG_LOADING, v.default.FRAG_LOADED, v.default.FRAG_BUFFERED, v.default.ERROR) || this;
                                return t.lastLoadedFragLevel = 0,
                                t._nextAutoLevel = -1,
                                t.hls = e,
                                t.timer = null,
                                t._bwEstimator = null,
                                t.onCheck = t._abandonRulesCheck.bind(t),
                                t
                            }
                            return t(e, r),
                            e.prototype.destroy = function() {
                                this.clearTimer(),
                                n.default.prototype.destroy.call(this)
                            }
                            ,
                            e.prototype.onFragLoading = function(e) {
                                var t = e.frag;
                                if ("main" === t.type && (this.timer || (this.fragCurrent = t,
                                this.timer = setInterval(this.onCheck, 100)),
                                !this._bwEstimator)) {
                                    var r = this.hls
                                      , i = r.config
                                      , n = void 0
                                      , a = void 0;
                                    a = r.levels[t.level].details.live ? (n = i.abrEwmaFastLive,
                                    i.abrEwmaSlowLive) : (n = i.abrEwmaFastVoD,
                                    i.abrEwmaSlowVoD),
                                    this._bwEstimator = new s.default(r,a,n,i.abrEwmaDefaultEstimate)
                                }
                            }
                            ,
                            e.prototype._abandonRulesCheck = function() {
                                var e = this.hls
                                  , t = e.media
                                  , r = this.fragCurrent;
                                if (r) {
                                    var i = r.loader
                                      , n = e.minAutoLevel;
                                    if (!i || i.stats && i.stats.aborted)
                                        return m.logger.warn("frag loader destroy or aborted, disarm abandonRules"),
                                        this.clearTimer(),
                                        void (this._nextAutoLevel = -1);
                                    var a = i.stats;
                                    if (t && a && (!t.paused && 0 !== t.playbackRate || !t.readyState) && r.autoLevel && r.level) {
                                        var o = _.now() - a.trequest
                                          , s = Math.abs(t.playbackRate);
                                        if (500 * r.duration / s < o) {
                                            var l = e.levels
                                              , u = Math.max(1, a.bw ? a.bw / 8 : 1e3 * a.loaded / o)
                                              , c = l[r.level]
                                              , d = t.currentTime
                                              , f = ((a.total ? a.total : Math.max(a.loaded, Math.round(r.duration * (c.realBitrate ? Math.max(c.realBitrate, c.bitrate) : c.bitrate) / 8))) - a.loaded) / u
                                              , h = (y.BufferHelper.bufferInfo(t, d, e.config.maxBufferHole).end - d) / s;
                                            if (h < 2 * r.duration / s && h < f) {
                                                var p = void 0
                                                  , g = void 0;
                                                for (g = r.level - 1; n < g; g--) {
                                                    if ((p = r.duration * (l[g].realBitrate ? Math.max(l[g].realBitrate, l[g].bitrate) : l[g].bitrate) / (6.4 * u)) < h)
                                                        break
                                                }
                                                p < f && (m.logger.warn("loading too slow, abort fragment loading and switch to level " + g + ":fragLoadedDelay[" + g + "]<fragLoadedDelay[" + (r.level - 1) + "];bufferStarvationDelay:" + p.toFixed(1) + "<" + f.toFixed(1) + ":" + h.toFixed(1)),
                                                e.nextLoadLevel = g,
                                                this._bwEstimator.sample(o, a.loaded),
                                                i.abort(),
                                                this.clearTimer(),
                                                e.trigger(v.default.FRAG_LOAD_EMERGENCY_ABORTED, {
                                                    frag: r,
                                                    stats: a
                                                }))
                                            }
                                        }
                                    }
                                }
                            }
                            ,
                            e.prototype.onFragLoaded = function(e) {
                                var t = e.frag;
                                if ("main" === t.type && o.isFinite(t.sn)) {
                                    if (this.clearTimer(),
                                    this.lastLoadedFragLevel = t.level,
                                    this._nextAutoLevel = -1,
                                    this.hls.config.abrMaxWithRealBitrate) {
                                        var r = this.hls.levels[t.level]
                                          , i = (r.loaded ? r.loaded.bytes : 0) + e.stats.loaded
                                          , n = (r.loaded ? r.loaded.duration : 0) + e.frag.duration;
                                        r.loaded = {
                                            bytes: i,
                                            duration: n
                                        },
                                        r.realBitrate = Math.round(8 * i / n)
                                    }
                                    if (e.frag.bitrateTest) {
                                        var a = e.stats;
                                        a.tparsed = a.tbuffered = a.tload,
                                        this.onFragBuffered(e)
                                    }
                                }
                            }
                            ,
                            e.prototype.onFragBuffered = function(e) {
                                var t = e.stats
                                  , r = e.frag;
                                if (!0 !== t.aborted && "main" === r.type && o.isFinite(r.sn) && (!r.bitrateTest || t.tload === t.tbuffered)) {
                                    var i = t.tparsed - t.trequest;
                                    m.logger.log("latency/loading/parsing/append/kbps:" + Math.round(t.tfirst - t.trequest) + "/" + Math.round(t.tload - t.tfirst) + "/" + Math.round(t.tparsed - t.tload) + "/" + Math.round(t.tbuffered - t.tparsed) + "/" + Math.round(8 * t.loaded / (t.tbuffered - t.trequest))),
                                    this._bwEstimator.sample(i, t.loaded),
                                    t.bwEstimate = this._bwEstimator.getEstimate(),
                                    this.bitrateTestDelay = r.bitrateTest ? i / 1e3 : 0
                                }
                            }
                            ,
                            e.prototype.onError = function(e) {
                                switch (e.details) {
                                case a.ErrorDetails.FRAG_LOAD_ERROR:
                                case a.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                    this.clearTimer()
                                }
                            }
                            ,
                            e.prototype.clearTimer = function() {
                                clearInterval(this.timer),
                                this.timer = null
                            }
                            ,
                            Object.defineProperty(e.prototype, "nextAutoLevel", {
                                get: function() {
                                    var e = this._nextAutoLevel
                                      , t = this._bwEstimator;
                                    if (!(-1 === e || t && t.canEstimate()))
                                        return e;
                                    var r = this._nextABRAutoLevel;
                                    return -1 !== e && (r = Math.min(e, r)),
                                    r
                                },
                                set: function(e) {
                                    this._nextAutoLevel = e
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(e.prototype, "_nextABRAutoLevel", {
                                get: function() {
                                    var e = this.hls
                                      , t = e.maxAutoLevel
                                      , r = e.levels
                                      , i = e.config
                                      , n = e.minAutoLevel
                                      , a = e.media
                                      , o = this.lastLoadedFragLevel
                                      , s = this.fragCurrent ? this.fragCurrent.duration : 0
                                      , l = a ? a.currentTime : 0
                                      , u = a && 0 !== a.playbackRate ? Math.abs(a.playbackRate) : 1
                                      , c = this._bwEstimator ? this._bwEstimator.getEstimate() : i.abrEwmaDefaultEstimate
                                      , d = (y.BufferHelper.bufferInfo(a, l, i.maxBufferHole).end - l) / u
                                      , f = this._findBestLevel(o, s, c, n, t, d, i.abrBandWidthFactor, i.abrBandWidthUpFactor, r);
                                    if (0 <= f)
                                        return f;
                                    m.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");
                                    var h = s ? Math.min(s, i.maxStarvationDelay) : i.maxStarvationDelay
                                      , p = i.abrBandWidthFactor
                                      , g = i.abrBandWidthUpFactor;
                                    if (0 === d) {
                                        var v = this.bitrateTestDelay;
                                        if (v)
                                            h = (s ? Math.min(s, i.maxLoadingDelay) : i.maxLoadingDelay) - v,
                                            m.logger.trace("bitrate test took " + Math.round(1e3 * v) + "ms, set first fragment max fetchDuration to " + Math.round(1e3 * h) + " ms"),
                                            p = g = 1
                                    }
                                    return f = this._findBestLevel(o, s, c, n, t, d + h, p, g, r),
                                    Math.max(f, 0)
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            e.prototype._findBestLevel = function(e, t, r, i, n, a, o, s, l) {
                                for (var u = n; i <= u; u--) {
                                    var c = l[u];
                                    if (c) {
                                        var d = c.details
                                          , f = d ? d.totalduration / d.fragments.length : t
                                          , h = !!d && d.live
                                          , p = void 0;
                                        p = u <= e ? o * r : s * r;
                                        var g = l[u].realBitrate ? Math.max(l[u].realBitrate, l[u].bitrate) : l[u].bitrate
                                          , v = g * f / p;
                                        if (m.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: " + u + "/" + Math.round(p) + "/" + g + "/" + f + "/" + a + "/" + v),
                                        g < p && (!v || h && !this.bitrateTestDelay || v < a))
                                            return u
                                    }
                                }
                                return -1
                            }
                            ,
                            e
                        }(n.default);
                        r.default = e
                    }
                    ).call(this, l("./src/polyfills/number.js").Number)
                },
                "./src/controller/audio-stream-controller.js": function(e, r, a) {
                    (function(I) {
                        var i, t = this && this.__extends || (i = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            i(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(r, "__esModule", {
                            value: !0
                        });
                        var D = a("./src/utils/binary-search.js")
                          , C = a("./src/utils/buffer-helper.js")
                          , h = a("./src/demux/demuxer.js")
                          , P = a("./src/events.js")
                          , d = a("./src/controller/level-helper.js")
                          , n = a("./src/utils/time-ranges.js")
                          , f = a("./src/errors.js")
                          , O = a("./src/utils/logger.js")
                          , M = a("./src/utils/discontinuities.js")
                          , x = a("./src/controller/fragment-tracker.js")
                          , p = a("./src/loader/fragment.js")
                          , F = a("./src/controller/base-stream-controller.js")
                          , N = window.performance
                          , e = function(i) {
                            function e(e, t) {
                                var r = i.call(this, e, P.default.MEDIA_ATTACHED, P.default.MEDIA_DETACHING, P.default.AUDIO_TRACKS_UPDATED, P.default.AUDIO_TRACK_SWITCHING, P.default.AUDIO_TRACK_LOADED, P.default.KEY_LOADED, P.default.FRAG_LOADED, P.default.FRAG_PARSING_INIT_SEGMENT, P.default.FRAG_PARSING_DATA, P.default.FRAG_PARSED, P.default.ERROR, P.default.BUFFER_RESET, P.default.BUFFER_CREATED, P.default.BUFFER_APPENDED, P.default.BUFFER_FLUSHED, P.default.INIT_PTS_FOUND) || this;
                                return r.fragmentTracker = t,
                                r.config = e.config,
                                r.audioCodecSwap = !1,
                                r._state = F.State.STOPPED,
                                r.initPTS = [],
                                r.waitingFragment = null,
                                r.videoTrackCC = null,
                                r
                            }
                            return t(e, i),
                            e.prototype.onInitPtsFound = function(e) {
                                var t = e.frag.cc
                                  , r = e.initPTS;
                                "main" === e.id && (this.initPTS[t] = r,
                                O.logger.log("InitPTS for cc: " + (this.videoTrackCC = t) + " found from video track: " + r),
                                this.state === F.State.WAITING_INIT_PTS && this.tick())
                            }
                            ,
                            e.prototype.startLoad = function(e) {
                                if (this.tracks) {
                                    var t = this.lastCurrentTime;
                                    this.stopLoad(),
                                    this.setInterval(100),
                                    this.fragLoadError = 0,
                                    this.state = 0 < t && -1 === e ? (O.logger.log("audio:override startPosition with lastCurrentTime @" + t.toFixed(3)),
                                    F.State.IDLE) : (this.lastCurrentTime = this.startPosition ? this.startPosition : e,
                                    F.State.STARTING),
                                    this.nextLoadPosition = this.startPosition = this.lastCurrentTime,
                                    this.tick()
                                } else
                                    this.startPosition = e,
                                    this.state = F.State.STOPPED
                            }
                            ,
                            Object.defineProperty(e.prototype, "state", {
                                get: function() {
                                    return this._state
                                },
                                set: function(e) {
                                    this.state !== e && O.logger.log("audio stream:" + this.state + "->" + (this._state = e))
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            e.prototype.doTick = function() {
                                var e, t, r, i = this.hls, n = i.config;
                                switch (this.state) {
                                case F.State.ERROR:
                                case F.State.PAUSED:
                                case F.State.BUFFER_FLUSHING:
                                    break;
                                case F.State.STARTING:
                                    this.state = F.State.WAITING_TRACK,
                                    this.loadedmetadata = !1;
                                    break;
                                case F.State.IDLE:
                                    var a = this.tracks;
                                    if (!a)
                                        break;
                                    if (!this.media && (this.startFragRequested || !n.startFragPrefetch))
                                        break;
                                    if (this.loadedmetadata)
                                        e = this.media.currentTime;
                                    else if (void 0 === (e = this.nextLoadPosition))
                                        break;
                                    var o = this.mediaBuffer ? this.mediaBuffer : this.media
                                      , s = this.videoBuffer ? this.videoBuffer : this.media
                                      , l = C.BufferHelper.bufferInfo(o, e, n.maxBufferHole)
                                      , u = C.BufferHelper.bufferInfo(s, e, n.maxBufferHole)
                                      , c = l.end
                                      , d = this.fragPrevious
                                      , f = this.audioSwitch
                                      , h = this.trackId;
                                    if ((l.len < Math.max(Math.min(n.maxBufferLength, n.maxMaxBufferLength), u.len) || f) && h < a.length) {
                                        if (void 0 === (r = a[h].details)) {
                                            this.state = F.State.WAITING_TRACK;
                                            break
                                        }
                                        if (!f && this._streamEnded(l, r))
                                            return this.hls.trigger(P.default.BUFFER_EOS, {
                                                type: "audio"
                                            }),
                                            void (this.state = F.State.ENDED);
                                        var p = r.fragments
                                          , g = p.length
                                          , v = p[0].start
                                          , y = p[g - 1].start + p[g - 1].duration
                                          , m = void 0;
                                        if (f)
                                            if (r.live && !r.PTSKnown)
                                                O.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),
                                                c = 0;
                                            else if (c = e,
                                            r.PTSKnown && e < v) {
                                                if (!(v < l.end || l.nextStart))
                                                    return;
                                                O.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),
                                                this.media.currentTime = v + .05
                                            }
                                        if (r.initSegment && !r.initSegment.data)
                                            m = r.initSegment;
                                        else if (c <= v) {
                                            if (m = p[0],
                                            null !== this.videoTrackCC && m.cc !== this.videoTrackCC && (m = M.findFragWithCC(p, this.videoTrackCC)),
                                            r.live && m.loadIdx && m.loadIdx === this.fragLoadIdx) {
                                                var _ = l.nextStart ? l.nextStart : v;
                                                return O.logger.log("no alt audio available @currentTime:" + this.media.currentTime + ", seeking @" + (_ + .05)),
                                                void (this.media.currentTime = _ + .05)
                                            }
                                        } else {
                                            var T = void 0
                                              , b = n.maxFragLookUpTolerance
                                              , E = d ? p[d.sn - p[0].sn + 1] : void 0
                                              , S = function(e) {
                                                var t = Math.min(b, e.duration);
                                                return e.start + e.duration - t <= c ? 1 : c < e.start - t && e.start ? -1 : 0
                                            };
                                            (T = c < y ? (y - b < c && (b = 0),
                                            E && !S(E) ? E : D.default.search(p, S)) : p[g - 1]) && (v = (m = T).start,
                                            d && m.level === d.level && m.sn === d.sn && (m.sn < r.endSN ? O.logger.log("SN just loaded, load next one: " + (m = p[m.sn + 1 - r.startSN]).sn) : m = null))
                                        }
                                        m && (m.encrypted ? (O.logger.log("Loading key for " + m.sn + " of [" + r.startSN + " ," + r.endSN + "],track " + h),
                                        this.state = F.State.KEY_LOADING,
                                        i.trigger(P.default.KEY_LOADING, {
                                            frag: m
                                        })) : (O.logger.log("Loading " + m.sn + ", cc: " + m.cc + " of [" + r.startSN + " ," + r.endSN + "],track " + h + ", currentTime:" + e + ",bufferEnd:" + c.toFixed(3)),
                                        this.fragCurrent = m,
                                        (f || this.fragmentTracker.getState(m) === x.FragmentState.NOT_LOADED) && (this.startFragRequested = !0,
                                        I.isFinite(m.sn) && (this.nextLoadPosition = m.start + m.duration),
                                        i.trigger(P.default.FRAG_LOADING, {
                                            frag: m
                                        }),
                                        this.state = F.State.FRAG_LOADING)))
                                    }
                                    break;
                                case F.State.WAITING_TRACK:
                                    (t = this.tracks[this.trackId]) && t.details && (this.state = F.State.IDLE);
                                    break;
                                case F.State.FRAG_LOADING_WAITING_RETRY:
                                    var A = N.now()
                                      , k = this.retryDate;
                                    o = this.media,
                                    (!k || k <= A || o && o.seeking) && (O.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),
                                    this.state = F.State.IDLE);
                                    break;
                                case F.State.WAITING_INIT_PTS:
                                    var w = this.videoTrackCC;
                                    if (void 0 === this.initPTS[w])
                                        break;
                                    var R = this.waitingFragment;
                                    if (R) {
                                        var L = R.frag.cc;
                                        w !== L ? (t = this.tracks[this.trackId]).details && t.details.live && (O.logger.warn("Waiting fragment CC (" + L + ") does not match video track CC (" + w + ")"),
                                        this.waitingFragment = null,
                                        this.state = F.State.IDLE) : (this.state = F.State.FRAG_LOADING,
                                        this.onFragLoaded(this.waitingFragment),
                                        this.waitingFragment = null)
                                    } else
                                        this.state = F.State.IDLE
                                }
                            }
                            ,
                            e.prototype.onMediaAttached = function(e) {
                                var t = this.media = this.mediaBuffer = e.media;
                                this.onvseeking = this.onMediaSeeking.bind(this),
                                this.onvended = this.onMediaEnded.bind(this),
                                t.addEventListener("seeking", this.onvseeking),
                                t.addEventListener("ended", this.onvended);
                                var r = this.config;
                                this.tracks && r.autoStartLoad && this.startLoad(r.startPosition)
                            }
                            ,
                            e.prototype.onMediaDetaching = function() {
                                var e = this.media;
                                e && e.ended && (O.logger.log("MSE detaching and video ended, reset startPosition"),
                                this.startPosition = this.lastCurrentTime = 0),
                                e && (e.removeEventListener("seeking", this.onvseeking),
                                e.removeEventListener("ended", this.onvended),
                                this.onvseeking = this.onvseeked = this.onvended = null),
                                this.media = this.mediaBuffer = this.videoBuffer = null,
                                this.loadedmetadata = !1,
                                this.stopLoad()
                            }
                            ,
                            e.prototype.onAudioTracksUpdated = function(e) {
                                O.logger.log("audio tracks updated"),
                                this.tracks = e.audioTracks
                            }
                            ,
                            e.prototype.onAudioTrackSwitching = function(e) {
                                var t = !!e.url;
                                this.trackId = e.id,
                                this.fragCurrent = null,
                                this.state = F.State.PAUSED,
                                this.waitingFragment = null,
                                t ? this.setInterval(100) : this.demuxer && (this.demuxer.destroy(),
                                this.demuxer = null),
                                t && (this.audioSwitch = !0,
                                this.state = F.State.IDLE),
                                this.tick()
                            }
                            ,
                            e.prototype.onAudioTrackLoaded = function(e) {
                                var t = e.details
                                  , r = e.id
                                  , i = this.tracks[r];
                                if (O.logger.log("track " + r + " loaded [" + t.startSN + "," + t.endSN + "],duration:" + t.totalduration),
                                t.live) {
                                    var n = i.details;
                                    n && 0 < t.fragments.length ? (d.mergeDetails(n, t),
                                    O.logger.log(t.PTSKnown ? "live audio playlist sliding:" + t.fragments[0].start.toFixed(3) : "live audio playlist - outdated PTS, unknown sliding")) : (t.PTSKnown = !1,
                                    O.logger.log("live audio playlist - first load, unknown sliding"))
                                } else
                                    t.PTSKnown = !1;
                                if (i.details = t,
                                !this.startFragRequested) {
                                    if (-1 === this.startPosition) {
                                        var a = t.startTimeOffset;
                                        this.startPosition = I.isFinite(a) ? (O.logger.log("start time offset found in playlist, adjust startPosition to " + a),
                                        a) : 0
                                    }
                                    this.nextLoadPosition = this.startPosition
                                }
                                this.state === F.State.WAITING_TRACK && (this.state = F.State.IDLE),
                                this.tick()
                            }
                            ,
                            e.prototype.onKeyLoaded = function() {
                                this.state === F.State.KEY_LOADING && (this.state = F.State.IDLE,
                                this.tick())
                            }
                            ,
                            e.prototype.onFragLoaded = function(e) {
                                var t = this.fragCurrent
                                  , r = e.frag;
                                if (this.state === F.State.FRAG_LOADING && t && "audio" === r.type && r.level === t.level && r.sn === t.sn) {
                                    var i = this.tracks[this.trackId]
                                      , n = i.details
                                      , a = n.totalduration
                                      , o = t.level
                                      , s = t.sn
                                      , l = t.cc
                                      , u = this.config.defaultAudioCodec || i.audioCodec || "mp4a.40.2"
                                      , c = this.stats = e.stats;
                                    if ("initSegment" === s)
                                        this.state = F.State.IDLE,
                                        c.tparsed = c.tbuffered = N.now(),
                                        n.initSegment.data = e.payload,
                                        this.hls.trigger(P.default.FRAG_BUFFERED, {
                                            stats: c,
                                            frag: t,
                                            id: "audio"
                                        }),
                                        this.tick();
                                    else {
                                        this.state = F.State.PARSING,
                                        this.appended = !1,
                                        this.demuxer || (this.demuxer = new h.default(this.hls,"audio"));
                                        var d = this.initPTS[l]
                                          , f = n.initSegment ? n.initSegment.data : [];
                                        if (n.initSegment || void 0 !== d) {
                                            this.pendingBuffering = !0,
                                            O.logger.log("Demuxing " + s + " of [" + n.startSN + " ," + n.endSN + "],track " + o);
                                            this.demuxer.push(e.payload, f, u, null, t, a, !1, d)
                                        } else
                                            O.logger.log("unknown video PTS for continuity counter " + l + ", waiting for video PTS before demuxing audio frag " + s + " of [" + n.startSN + " ," + n.endSN + "],track " + o),
                                            this.waitingFragment = e,
                                            this.state = F.State.WAITING_INIT_PTS
                                    }
                                }
                                this.fragLoadError = 0
                            }
                            ,
                            e.prototype.onFragParsingInitSegment = function(e) {
                                var t = this.fragCurrent
                                  , r = e.frag;
                                if (t && "audio" === e.id && r.sn === t.sn && r.level === t.level && this.state === F.State.PARSING) {
                                    var i = e.tracks
                                      , n = void 0;
                                    if (i.video && delete i.video,
                                    n = i.audio) {
                                        n.levelCodec = n.codec,
                                        n.id = e.id,
                                        this.hls.trigger(P.default.BUFFER_CODECS, i),
                                        O.logger.log("audio track:audio,container:" + n.container + ",codecs[level/parsed]=[" + n.levelCodec + "/" + n.codec + "]");
                                        var a = n.initSegment;
                                        if (a) {
                                            var o = {
                                                type: "audio",
                                                data: a,
                                                parent: "audio",
                                                content: "initSegment"
                                            };
                                            this.audioSwitch ? this.pendingData = [o] : (this.appended = !0,
                                            this.pendingBuffering = !0,
                                            this.hls.trigger(P.default.BUFFER_APPENDING, o))
                                        }
                                        this.tick()
                                    }
                                }
                            }
                            ,
                            e.prototype.onFragParsingData = function(t) {
                                var r = this
                                  , e = this.fragCurrent
                                  , i = t.frag;
                                if (e && "audio" === t.id && "audio" === t.type && i.sn === e.sn && i.level === e.level && this.state === F.State.PARSING) {
                                    var n = this.trackId
                                      , a = this.tracks[n]
                                      , o = this.hls;
                                    I.isFinite(t.endPTS) || (t.endPTS = t.startPTS + e.duration,
                                    t.endDTS = t.startDTS + e.duration),
                                    e.addElementaryStream(p.default.ElementaryStreamTypes.AUDIO),
                                    O.logger.log("parsed " + t.type + ",PTS:[" + t.startPTS.toFixed(3) + "," + t.endPTS.toFixed(3) + "],DTS:[" + t.startDTS.toFixed(3) + "/" + t.endDTS.toFixed(3) + "],nb:" + t.nb),
                                    d.updateFragPTSDTS(a.details, e, t.startPTS, t.endPTS);
                                    var s = this.media
                                      , l = !1;
                                    if (this.audioSwitch && s)
                                        if (s.readyState) {
                                            var u = s.currentTime;
                                            O.logger.log("switching audio track : currentTime:" + u),
                                            t.startPTS <= u && (O.logger.log("switching audio track : flushing all audio"),
                                            this.state = F.State.BUFFER_FLUSHING,
                                            o.trigger(P.default.BUFFER_FLUSHING, {
                                                startOffset: 0,
                                                endOffset: I.POSITIVE_INFINITY,
                                                type: "audio"
                                            }),
                                            this.audioSwitch = !(l = !0),
                                            o.trigger(P.default.AUDIO_TRACK_SWITCHED, {
                                                id: n
                                            }))
                                        } else
                                            this.audioSwitch = !1,
                                            o.trigger(P.default.AUDIO_TRACK_SWITCHED, {
                                                id: n
                                            });
                                    var c = this.pendingData;
                                    if (!c)
                                        return O.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),
                                        void o.trigger(P.default.ERROR, {
                                            type: f.ErrorTypes.MEDIA_ERROR,
                                            details: null,
                                            fatal: !0
                                        });
                                    this.audioSwitch || ([t.data1, t.data2].forEach(function(e) {
                                        e && e.length && c.push({
                                            type: t.type,
                                            data: e,
                                            parent: "audio",
                                            content: "data"
                                        })
                                    }),
                                    !l && c.length && (c.forEach(function(e) {
                                        r.state === F.State.PARSING && (r.pendingBuffering = !0,
                                        r.hls.trigger(P.default.BUFFER_APPENDING, e))
                                    }),
                                    this.pendingData = [],
                                    this.appended = !0)),
                                    this.tick()
                                }
                            }
                            ,
                            e.prototype.onFragParsed = function(e) {
                                var t = this.fragCurrent
                                  , r = e.frag;
                                t && "audio" === e.id && r.sn === t.sn && r.level === t.level && this.state === F.State.PARSING && (this.stats.tparsed = N.now(),
                                this.state = F.State.PARSED,
                                this._checkAppendedParsed())
                            }
                            ,
                            e.prototype.onBufferReset = function() {
                                this.mediaBuffer = this.videoBuffer = null,
                                this.loadedmetadata = !1
                            }
                            ,
                            e.prototype.onBufferCreated = function(e) {
                                var t = e.tracks.audio;
                                t && (this.mediaBuffer = t.buffer,
                                this.loadedmetadata = !0),
                                e.tracks.video && (this.videoBuffer = e.tracks.video.buffer)
                            }
                            ,
                            e.prototype.onBufferAppended = function(e) {
                                if ("audio" === e.parent) {
                                    var t = this.state;
                                    t !== F.State.PARSING && t !== F.State.PARSED || (this.pendingBuffering = 0 < e.pending,
                                    this._checkAppendedParsed())
                                }
                            }
                            ,
                            e.prototype._checkAppendedParsed = function() {
                                if (!(this.state !== F.State.PARSED || this.appended && this.pendingBuffering)) {
                                    var e = this.fragCurrent
                                      , t = this.stats
                                      , r = this.hls;
                                    if (e)
                                        this.fragPrevious = e,
                                        t.tbuffered = N.now(),
                                        r.trigger(P.default.FRAG_BUFFERED, {
                                            stats: t,
                                            frag: e,
                                            id: "audio"
                                        }),
                                        O.logger.log("audio buffered : " + n.default.toString((this.mediaBuffer ? this.mediaBuffer : this.media).buffered)),
                                        this.audioSwitch && this.appended && (this.audioSwitch = !1,
                                        r.trigger(P.default.AUDIO_TRACK_SWITCHED, {
                                            id: this.trackId
                                        })),
                                        this.state = F.State.IDLE;
                                    this.tick()
                                }
                            }
                            ,
                            e.prototype.onError = function(e) {
                                var t = e.frag;
                                if (!t || "audio" === t.type)
                                    switch (e.details) {
                                    case f.ErrorDetails.FRAG_LOAD_ERROR:
                                    case f.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                        var r = e.frag;
                                        if (r && "audio" !== r.type)
                                            break;
                                        if (!e.fatal) {
                                            var i = this.fragLoadError;
                                            if (i ? i++ : i = 1,
                                            i <= (a = this.config).fragLoadingMaxRetry) {
                                                var n = Math.min(Math.pow(2, (this.fragLoadError = i) - 1) * a.fragLoadingRetryDelay, a.fragLoadingMaxRetryTimeout);
                                                O.logger.warn("AudioStreamController: frag loading failed, retry in " + n + " ms"),
                                                this.retryDate = N.now() + n,
                                                this.state = F.State.FRAG_LOADING_WAITING_RETRY
                                            } else
                                                O.logger.error("AudioStreamController: " + e.details + " reaches max retry, redispatch as fatal ..."),
                                                e.fatal = !0,
                                                this.state = F.State.ERROR
                                        }
                                        break;
                                    case f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:
                                    case f.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:
                                    case f.ErrorDetails.KEY_LOAD_ERROR:
                                    case f.ErrorDetails.KEY_LOAD_TIMEOUT:
                                        this.state !== F.State.ERROR && (this.state = e.fatal ? F.State.ERROR : F.State.IDLE,
                                        O.logger.warn("AudioStreamController: " + e.details + " while loading frag, now switching to " + this.state + " state ..."));
                                        break;
                                    case f.ErrorDetails.BUFFER_FULL_ERROR:
                                        if ("audio" === e.parent && (this.state === F.State.PARSING || this.state === F.State.PARSED)) {
                                            var a, o = this.mediaBuffer, s = this.media.currentTime;
                                            if (o && C.BufferHelper.isBuffered(o, s) && C.BufferHelper.isBuffered(o, s + .5))
                                                (a = this.config).maxBufferLength <= a.maxMaxBufferLength && (a.maxMaxBufferLength /= 2,
                                                O.logger.warn("AudioStreamController: reduce max buffer length to " + a.maxMaxBufferLength + "s")),
                                                this.state = F.State.IDLE;
                                            else
                                                O.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),
                                                this.fragCurrent = null,
                                                this.state = F.State.BUFFER_FLUSHING,
                                                this.hls.trigger(P.default.BUFFER_FLUSHING, {
                                                    startOffset: 0,
                                                    endOffset: I.POSITIVE_INFINITY,
                                                    type: "audio"
                                                })
                                        }
                                    }
                            }
                            ,
                            e.prototype.onBufferFlushed = function() {
                                var t = this
                                  , e = this.pendingData;
                                e && e.length ? (O.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),
                                e.forEach(function(e) {
                                    t.hls.trigger(P.default.BUFFER_APPENDING, e)
                                }),
                                this.appended = !0,
                                this.pendingData = [],
                                this.state = F.State.PARSED) : (this.state = F.State.IDLE,
                                this.fragPrevious = null,
                                this.tick())
                            }
                            ,
                            e
                        }(F.default);
                        r.default = e
                    }
                    ).call(this, a("./src/polyfills/number.js").Number)
                },
                "./src/controller/audio-track-controller.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var s = r("./src/events.js")
                      , a = r("./src/task-loop.js")
                      , l = r("./src/utils/logger.js")
                      , u = r("./src/errors.js")
                      , o = function(r) {
                        function e(e) {
                            var t = r.call(this, e, s.default.MANIFEST_LOADING, s.default.MANIFEST_PARSED, s.default.AUDIO_TRACK_LOADED, s.default.AUDIO_TRACK_SWITCHED, s.default.LEVEL_LOADED, s.default.ERROR) || this;
                            return t._trackId = -1,
                            t._selectDefaultTrack = !0,
                            t.tracks = [],
                            t.trackIdBlacklist = Object.create(null),
                            t.audioGroupId = null,
                            t
                        }
                        return n(e, r),
                        e.prototype.onManifestLoading = function() {
                            this.tracks = [],
                            this._trackId = -1,
                            this._selectDefaultTrack = !0
                        }
                        ,
                        e.prototype.onManifestParsed = function(e) {
                            var t = this.tracks = e.audioTracks || [];
                            this.hls.trigger(s.default.AUDIO_TRACKS_UPDATED, {
                                audioTracks: t
                            })
                        }
                        ,
                        e.prototype.onAudioTrackLoaded = function(e) {
                            if (this.tracks.length <= e.id)
                                l.logger.warn("Invalid audio track id:", e.id);
                            else {
                                if (l.logger.log("audioTrack " + e.id + " loaded"),
                                this.tracks[e.id].details = e.details,
                                e.details.live && !this.hasInterval())
                                    this.setInterval(1e3 * e.details.targetduration);
                                !e.details.live && this.hasInterval() && this.clearInterval()
                            }
                        }
                        ,
                        e.prototype.onAudioTrackSwitched = function(e) {
                            var t = this.tracks[e.id].groupId;
                            t && this.audioGroupId !== t && (this.audioGroupId = t)
                        }
                        ,
                        e.prototype.onLevelLoaded = function(e) {
                            var t = this.hls.levels[e.level];
                            if (t.audioGroupIds) {
                                var r = t.audioGroupIds[t.urlId];
                                this.audioGroupId !== r && (this.audioGroupId = r,
                                this._selectInitialAudioTrack())
                            }
                        }
                        ,
                        e.prototype.onError = function(e) {
                            e.type === u.ErrorTypes.NETWORK_ERROR && (e.fatal && this.clearInterval(),
                            e.details === u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR && (l.logger.warn("Network failure on audio-track id:", e.context.id),
                            this._handleLoadError()))
                        }
                        ,
                        Object.defineProperty(e.prototype, "audioTracks", {
                            get: function() {
                                return this.tracks
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(e.prototype, "audioTrack", {
                            get: function() {
                                return this._trackId
                            },
                            set: function(e) {
                                this._setAudioTrack(e),
                                this._selectDefaultTrack = !1
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        e.prototype._setAudioTrack = function(e) {
                            if (this._trackId === e && this.tracks[this._trackId].details)
                                l.logger.debug("Same id as current audio-track passed, and track details available -> no-op");
                            else if (e < 0 || this.tracks.length <= e)
                                l.logger.warn("Invalid id passed to audio-track controller");
                            else {
                                var t = this.tracks[e];
                                l.logger.log("Now switching to audio-track index " + e),
                                this.clearInterval(),
                                this._trackId = e,
                                this.hls.trigger(s.default.AUDIO_TRACK_SWITCHING, {
                                    id: t.id,
                                    type: t.type,
                                    url: t.url
                                }),
                                this._loadTrackDetailsIfNeeded(t)
                            }
                        }
                        ,
                        e.prototype.doTick = function() {
                            this._updateTrack(this._trackId)
                        }
                        ,
                        e.prototype._selectInitialAudioTrack = function() {
                            var t = this
                              , e = this.tracks;
                            if (e.length) {
                                var r = this.tracks[this._trackId]
                                  , i = null;
                                if (r && (i = r.name),
                                this._selectDefaultTrack) {
                                    var n = e.filter(function(e) {
                                        return e.default
                                    });
                                    n.length ? e = n : l.logger.warn("No default audio tracks defined")
                                }
                                var a = !1
                                  , o = function() {
                                    e.forEach(function(e) {
                                        a || t.audioGroupId && e.groupId !== t.audioGroupId || i && i !== e.name || (t._setAudioTrack(e.id),
                                        a = !0)
                                    })
                                };
                                o(),
                                a || (i = null,
                                o()),
                                a || (l.logger.error("No track found for running audio group-ID: " + this.audioGroupId),
                                this.hls.trigger(s.default.ERROR, {
                                    type: u.ErrorTypes.MEDIA_ERROR,
                                    details: u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,
                                    fatal: !0
                                }))
                            }
                        }
                        ,
                        e.prototype._needsTrackLoading = function(e) {
                            var t = e.details;
                            return !(t && !t.live) && !!e.url
                        }
                        ,
                        e.prototype._loadTrackDetailsIfNeeded = function(e) {
                            if (this._needsTrackLoading(e)) {
                                var t = e.url
                                  , r = e.id;
                                l.logger.log("loading audio-track playlist for id: " + r),
                                this.hls.trigger(s.default.AUDIO_TRACK_LOADING, {
                                    url: t,
                                    id: r
                                })
                            }
                        }
                        ,
                        e.prototype._updateTrack = function(e) {
                            e < 0 || this.tracks.length <= e || (this.clearInterval(),
                            l.logger.log("trying to update audio-track " + (this._trackId = e)),
                            this._loadTrackDetailsIfNeeded(this.tracks[e]))
                        }
                        ,
                        e.prototype._handleLoadError = function() {
                            this.trackIdBlacklist[this._trackId] = !0;
                            var e = this._trackId
                              , t = this.tracks[e]
                              , r = t.name
                              , i = t.language;
                            l.logger.warn("Loading failed on audio track id: " + e + ", group-id: " + t.groupId + ', name/language: "' + r + '" / "' + i + '"');
                            for (var n = e, a = 0; a < this.tracks.length; a++) {
                                if (!this.trackIdBlacklist[a])
                                    if (this.tracks[a].name === r) {
                                        n = a;
                                        break
                                    }
                            }
                            n !== e ? (l.logger.log("Attempting audio-track fallback id:", n, "group-id:", this.tracks[n].groupId),
                            this._setAudioTrack(n)) : l.logger.warn('No fallback audio-track found for name/language: "' + r + '" / "' + i + '"')
                        }
                        ,
                        e
                    }(a.default);
                    t.default = o
                },
                "./src/controller/base-stream-controller.js": function(e, c, a) {
                    (function(s) {
                        var i, r = this && this.__extends || (i = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            i(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(c, "__esModule", {
                            value: !0
                        });
                        var e = a("./src/task-loop.js")
                          , n = a("./src/controller/fragment-tracker.js")
                          , l = a("./src/utils/buffer-helper.js")
                          , u = a("./src/utils/logger.js");
                        c.State = {
                            STOPPED: "STOPPED",
                            STARTING: "STARTING",
                            IDLE: "IDLE",
                            PAUSED: "PAUSED",
                            KEY_LOADING: "KEY_LOADING",
                            FRAG_LOADING: "FRAG_LOADING",
                            FRAG_LOADING_WAITING_RETRY: "FRAG_LOADING_WAITING_RETRY",
                            WAITING_TRACK: "WAITING_TRACK",
                            PARSING: "PARSING",
                            PARSED: "PARSED",
                            BUFFER_FLUSHING: "BUFFER_FLUSHING",
                            ENDED: "ENDED",
                            ERROR: "ERROR",
                            WAITING_INIT_PTS: "WAITING_INIT_PTS",
                            WAITING_LEVEL: "WAITING_LEVEL"
                        };
                        var t = function(e) {
                            function t() {
                                return null !== e && e.apply(this, arguments) || this
                            }
                            return r(t, e),
                            t.prototype.doTick = function() {}
                            ,
                            t.prototype.startLoad = function() {}
                            ,
                            t.prototype.stopLoad = function() {
                                var e = this.fragCurrent;
                                e && (e.loader && e.loader.abort(),
                                this.fragmentTracker.removeFragment(e)),
                                this.demuxer && (this.demuxer.destroy(),
                                this.demuxer = null),
                                this.fragCurrent = null,
                                this.fragPrevious = null,
                                this.clearInterval(),
                                this.clearNextTick(),
                                this.state = c.State.STOPPED
                            }
                            ,
                            t.prototype._streamEnded = function(e, t) {
                                var r = this.fragCurrent;
                                if (t.live || !r || r.backtracked || r.sn !== t.endSN || e.nextStart)
                                    return !1;
                                var i = this.fragmentTracker.getState(r);
                                return i === n.FragmentState.PARTIAL || i === n.FragmentState.OK
                            }
                            ,
                            t.prototype.onMediaSeeking = function() {
                                var e = this.config
                                  , t = this.media
                                  , r = this.state
                                  , i = t ? t.currentTime : null
                                  , n = l.BufferHelper.bufferInfo(this.mediaBuffer || t, i, this.config.maxBufferHole);
                                if (s.isFinite(i) && u.logger.log("media seeking to " + i.toFixed(3)),
                                r === c.State.FRAG_LOADING) {
                                    var a = this.fragCurrent;
                                    if (0 === n.len && a) {
                                        var o = e.maxFragLookUpTolerance;
                                        i < a.start - o || a.start + a.duration + o < i ? (a.loader && (u.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),
                                        a.loader.abort()),
                                        this.fragCurrent = null,
                                        this.fragPrevious = null,
                                        this.state = c.State.IDLE) : u.logger.log("seeking outside of buffer but within currently loaded fragment range")
                                    }
                                } else
                                    r === c.State.ENDED && (0 === n.len && (this.fragPrevious = null,
                                    this.fragCurrent = null),
                                    this.state = c.State.IDLE);
                                t && (this.lastCurrentTime = i),
                                this.loadedmetadata || (this.nextLoadPosition = this.startPosition = i),
                                this.tick()
                            }
                            ,
                            t.prototype.onMediaEnded = function() {
                                this.startPosition = this.lastCurrentTime = 0
                            }
                            ,
                            t.prototype.onHandlerDestroying = function() {
                                this.stopLoad(),
                                e.prototype.onHandlerDestroying.call(this)
                            }
                            ,
                            t.prototype.onHandlerDestroyed = function() {
                                this.state = c.State.STOPPED,
                                this.fragmentTracker = null
                            }
                            ,
                            t
                        }(e.default);
                        c.default = t
                    }
                    ).call(this, a("./src/polyfills/number.js").Number)
                },
                "./src/controller/buffer-controller.js": function(e, r, s) {
                    (function(i) {
                        var n, t = this && this.__extends || (n = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            n(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(r, "__esModule", {
                            value: !0
                        });
                        var l = s("./src/events.js")
                          , a = s("./src/event-handler.js")
                          , u = s("./src/utils/logger.js")
                          , c = s("./src/errors.js")
                          , o = s("./src/utils/mediasource-helper.js").getMediaSource()
                          , e = function(r) {
                            function e(e) {
                                var t = r.call(this, e, l.default.MEDIA_ATTACHING, l.default.MEDIA_DETACHING, l.default.MANIFEST_PARSED, l.default.BUFFER_RESET, l.default.BUFFER_APPENDING, l.default.BUFFER_CODECS, l.default.BUFFER_EOS, l.default.BUFFER_FLUSHING, l.default.LEVEL_PTS_UPDATED, l.default.LEVEL_UPDATED) || this;
                                return t._msDuration = null,
                                t._levelDuration = null,
                                t._levelTargetDuration = 10,
                                t._live = null,
                                t._objectUrl = null,
                                t.bufferCodecEventsExpected = 0,
                                t.onsbue = t.onSBUpdateEnd.bind(t),
                                t.onsbe = t.onSBUpdateError.bind(t),
                                t.pendingTracks = {},
                                t.tracks = {},
                                t
                            }
                            return t(e, r),
                            e.prototype.destroy = function() {
                                a.default.prototype.destroy.call(this)
                            }
                            ,
                            e.prototype.onLevelPtsUpdated = function(e) {
                                var t = this.tracks.audio;
                                if ("audio" === e.type && t && "audio/mpeg" === t.container) {
                                    var r = this.sourceBuffer.audio;
                                    if (.1 < Math.abs(r.timestampOffset - e.start)) {
                                        var i = r.updating;
                                        try {
                                            r.abort()
                                        } catch (e) {
                                            u.logger.warn("can not abort audio buffer: " + e)
                                        }
                                        i ? this.audioTimestampOffset = e.start : (u.logger.warn("change mpeg audio timestamp offset from " + r.timestampOffset + " to " + e.start),
                                        r.timestampOffset = e.start)
                                    }
                                }
                            }
                            ,
                            e.prototype.onManifestParsed = function(e) {
                                this.bufferCodecEventsExpected = e.altAudio ? 2 : 1,
                                u.logger.log(this.bufferCodecEventsExpected + " bufferCodec event(s) expected")
                            }
                            ,
                            e.prototype.onMediaAttaching = function(e) {
                                var t = this.media = e.media;
                                if (t) {
                                    var r = this.mediaSource = new o;
                                    this.onmso = this.onMediaSourceOpen.bind(this),
                                    this.onmse = this.onMediaSourceEnded.bind(this),
                                    this.onmsc = this.onMediaSourceClose.bind(this),
                                    r.addEventListener("sourceopen", this.onmso),
                                    r.addEventListener("sourceended", this.onmse),
                                    r.addEventListener("sourceclose", this.onmsc),
                                    t.src = window.URL.createObjectURL(r),
                                    this._objectUrl = t.src
                                }
                            }
                            ,
                            e.prototype.onMediaDetaching = function() {
                                u.logger.log("media source detaching");
                                var e = this.mediaSource;
                                if (e) {
                                    if ("open" === e.readyState)
                                        try {
                                            e.endOfStream()
                                        } catch (e) {
                                            u.logger.warn("onMediaDetaching:" + e.message + " while calling endOfStream")
                                        }
                                    e.removeEventListener("sourceopen", this.onmso),
                                    e.removeEventListener("sourceended", this.onmse),
                                    e.removeEventListener("sourceclose", this.onmsc),
                                    this.media && (window.URL.revokeObjectURL(this._objectUrl),
                                    this.media.src === this._objectUrl ? (this.media.removeAttribute("src"),
                                    this.media.load()) : u.logger.warn("media.src was changed by a third party - skip cleanup")),
                                    this.mediaSource = null,
                                    this.media = null,
                                    this._objectUrl = null,
                                    this.pendingTracks = {},
                                    this.tracks = {},
                                    this.sourceBuffer = {},
                                    this.flushRange = [],
                                    this.segments = [],
                                    this.appended = 0
                                }
                                this.onmso = this.onmse = this.onmsc = null,
                                this.hls.trigger(l.default.MEDIA_DETACHED)
                            }
                            ,
                            e.prototype.onMediaSourceOpen = function() {
                                u.logger.log("media source opened"),
                                this.hls.trigger(l.default.MEDIA_ATTACHED, {
                                    media: this.media
                                });
                                var e = this.mediaSource;
                                e && e.removeEventListener("sourceopen", this.onmso),
                                this.checkPendingTracks()
                            }
                            ,
                            e.prototype.checkPendingTracks = function() {
                                var e = this.bufferCodecEventsExpected
                                  , t = this.pendingTracks
                                  , r = Object.keys(t).length;
                                (r && !e || 2 === r) && (this.createSourceBuffers(t),
                                this.pendingTracks = {},
                                this.doAppending())
                            }
                            ,
                            e.prototype.onMediaSourceClose = function() {
                                u.logger.log("media source closed")
                            }
                            ,
                            e.prototype.onMediaSourceEnded = function() {
                                u.logger.log("media source ended")
                            }
                            ,
                            e.prototype.onSBUpdateEnd = function() {
                                if (this.audioTimestampOffset) {
                                    var e = this.sourceBuffer.audio;
                                    u.logger.warn("change mpeg audio timestamp offset from " + e.timestampOffset + " to " + this.audioTimestampOffset),
                                    e.timestampOffset = this.audioTimestampOffset,
                                    delete this.audioTimestampOffset
                                }
                                this._needsFlush && this.doFlush(),
                                this._needsEos && this.checkEos(),
                                this.appending = !1;
                                var r = this.parent
                                  , t = this.segments.reduce(function(e, t) {
                                    return t.parent === r ? e + 1 : e
                                }, 0)
                                  , i = {}
                                  , n = this.sourceBuffer;
                                for (var a in n)
                                    i[a] = n[a].buffered;
                                this.hls.trigger(l.default.BUFFER_APPENDED, {
                                    parent: r,
                                    pending: t,
                                    timeRanges: i
                                }),
                                this._needsFlush || this.doAppending(),
                                this.updateMediaElementDuration(),
                                0 === t && this.flushLiveBackBuffer()
                            }
                            ,
                            e.prototype.onSBUpdateError = function(e) {
                                u.logger.error("sourceBuffer error:", e),
                                this.hls.trigger(l.default.ERROR, {
                                    type: c.ErrorTypes.MEDIA_ERROR,
                                    details: c.ErrorDetails.BUFFER_APPENDING_ERROR,
                                    fatal: !1
                                })
                            }
                            ,
                            e.prototype.onBufferReset = function() {
                                var e = this.sourceBuffer;
                                for (var t in e) {
                                    var r = e[t];
                                    try {
                                        this.mediaSource.removeSourceBuffer(r),
                                        r.removeEventListener("updateend", this.onsbue),
                                        r.removeEventListener("error", this.onsbe)
                                    } catch (e) {}
                                }
                                this.sourceBuffer = {},
                                this.flushRange = [],
                                this.segments = [],
                                this.appended = 0
                            }
                            ,
                            e.prototype.onBufferCodecs = function(t) {
                                var r = this;
                                if (!Object.keys(this.sourceBuffer).length) {
                                    Object.keys(t).forEach(function(e) {
                                        r.pendingTracks[e] = t[e]
                                    });
                                    var e = this.mediaSource;
                                    this.bufferCodecEventsExpected = Math.max(this.bufferCodecEventsExpected - 1, 0),
                                    e && "open" === e.readyState && this.checkPendingTracks()
                                }
                            }
                            ,
                            e.prototype.createSourceBuffers = function(e) {
                                var t = this.sourceBuffer
                                  , r = this.mediaSource;
                                for (var i in e)
                                    if (!t[i]) {
                                        var n = e[i]
                                          , a = n.levelCodec || n.codec
                                          , o = n.container + ";codecs=" + a;
                                        u.logger.log("creating sourceBuffer(" + o + ")");
                                        try {
                                            var s = t[i] = r.addSourceBuffer(o);
                                            s.addEventListener("updateend", this.onsbue),
                                            s.addEventListener("error", this.onsbe),
                                            this.tracks[i] = {
                                                codec: a,
                                                container: n.container
                                            },
                                            n.buffer = s
                                        } catch (e) {
                                            u.logger.error("error while trying to add sourceBuffer:" + e.message),
                                            this.hls.trigger(l.default.ERROR, {
                                                type: c.ErrorTypes.MEDIA_ERROR,
                                                details: c.ErrorDetails.BUFFER_ADD_CODEC_ERROR,
                                                fatal: !1,
                                                err: e,
                                                mimeType: o
                                            })
                                        }
                                    }
                                this.hls.trigger(l.default.BUFFER_CREATED, {
                                    tracks: e
                                })
                            }
                            ,
                            e.prototype.onBufferAppending = function(e) {
                                this._needsFlush || (this.segments ? this.segments.push(e) : this.segments = [e],
                                this.doAppending())
                            }
                            ,
                            e.prototype.onBufferAppendFail = function(e) {
                                u.logger.error("sourceBuffer error:", e.event),
                                this.hls.trigger(l.default.ERROR, {
                                    type: c.ErrorTypes.MEDIA_ERROR,
                                    details: c.ErrorDetails.BUFFER_APPENDING_ERROR,
                                    fatal: !1
                                })
                            }
                            ,
                            e.prototype.onBufferEos = function(e) {
                                var t = this.sourceBuffer
                                  , r = e.type;
                                for (var i in t)
                                    r && i !== r || t[i].ended || (t[i].ended = !0,
                                    u.logger.log(i + " sourceBuffer now EOS"));
                                this.checkEos()
                            }
                            ,
                            e.prototype.checkEos = function() {
                                var e = this.sourceBuffer
                                  , t = this.mediaSource;
                                if (t && "open" === t.readyState) {
                                    for (var r in e) {
                                        var i = e[r];
                                        if (!i.ended)
                                            return;
                                        if (i.updating)
                                            return void (this._needsEos = !0)
                                    }
                                    u.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");
                                    try {
                                        t.endOfStream()
                                    } catch (e) {
                                        u.logger.warn("exception while calling mediaSource.endOfStream()")
                                    }
                                    this._needsEos = !1
                                } else
                                    this._needsEos = !1
                            }
                            ,
                            e.prototype.onBufferFlushing = function(e) {
                                this.flushRange.push({
                                    start: e.startOffset,
                                    end: e.endOffset,
                                    type: e.type
                                }),
                                this.flushBufferCounter = 0,
                                this.doFlush()
                            }
                            ,
                            e.prototype.flushLiveBackBuffer = function() {
                                if (this._live) {
                                    var e = this.hls.config.liveBackBufferLength;
                                    if (isFinite(e) && !(e < 0))
                                        for (var t = this.media.currentTime, r = this.sourceBuffer, i = Object.keys(r), n = t - Math.max(e, this._levelTargetDuration), a = i.length - 1; 0 <= a; a--) {
                                            var o = i[a]
                                              , s = r[o].buffered;
                                            0 < s.length && n > s.start(0) && this.removeBufferRange(o, r[o], 0, n)
                                        }
                                }
                            }
                            ,
                            e.prototype.onLevelUpdated = function(e) {
                                var t = e.details;
                                0 < t.fragments.length && (this._levelDuration = t.totalduration + t.fragments[0].start,
                                this._levelTargetDuration = t.averagetargetduration || t.targetduration || 10,
                                this._live = t.live,
                                this.updateMediaElementDuration())
                            }
                            ,
                            e.prototype.updateMediaElementDuration = function() {
                                var e, t = this.hls.config;
                                if (null !== this._levelDuration && this.media && this.mediaSource && this.sourceBuffer && 0 !== this.media.readyState && "open" === this.mediaSource.readyState) {
                                    for (var r in this.sourceBuffer)
                                        if (!0 === this.sourceBuffer[r].updating)
                                            return;
                                    e = this.media.duration,
                                    null === this._msDuration && (this._msDuration = this.mediaSource.duration),
                                    !0 === this._live && !0 === t.liveDurationInfinity ? (u.logger.log("Media Source duration is set to Infinity"),
                                    this._msDuration = this.mediaSource.duration = 1 / 0) : (this._msDuration < this._levelDuration && e < this._levelDuration || !i.isFinite(e)) && (u.logger.log("Updating Media Source duration to " + this._levelDuration.toFixed(3)),
                                    this._msDuration = this.mediaSource.duration = this._levelDuration)
                                }
                            }
                            ,
                            e.prototype.doFlush = function() {
                                for (; this.flushRange.length; ) {
                                    var e = this.flushRange[0];
                                    if (!this.flushBuffer(e.start, e.end, e.type))
                                        return void (this._needsFlush = !0);
                                    this.flushRange.shift(),
                                    this.flushBufferCounter = 0
                                }
                                if (0 === this.flushRange.length) {
                                    this._needsFlush = !1;
                                    var t = 0
                                      , r = this.sourceBuffer;
                                    try {
                                        for (var i in r)
                                            t += r[i].buffered.length
                                    } catch (e) {
                                        u.logger.error("error while accessing sourceBuffer.buffered")
                                    }
                                    this.appended = t,
                                    this.hls.trigger(l.default.BUFFER_FLUSHED)
                                }
                            }
                            ,
                            e.prototype.doAppending = function() {
                                var t = this.hls
                                  , r = this.segments
                                  , e = this.sourceBuffer;
                                if (Object.keys(e).length) {
                                    if (this.media.error)
                                        return this.segments = [],
                                        void u.logger.error("trying to append although a media error occured, flush segment and abort");
                                    if (this.appending)
                                        return;
                                    if (r && r.length) {
                                        var i = r.shift();
                                        try {
                                            var n = e[i.type];
                                            n ? n.updating ? r.unshift(i) : (n.ended = !1,
                                            this.parent = i.parent,
                                            n.appendBuffer(i.data),
                                            this.appendError = 0,
                                            this.appended++,
                                            this.appending = !0) : this.onSBUpdateEnd()
                                        } catch (e) {
                                            u.logger.error("error while trying to append buffer:" + e.message),
                                            r.unshift(i);
                                            var a = {
                                                type: c.ErrorTypes.MEDIA_ERROR,
                                                parent: i.parent
                                            };
                                            a.fatal = 22 !== e.code ? (this.appendError ? this.appendError++ : this.appendError = 1,
                                            a.details = c.ErrorDetails.BUFFER_APPEND_ERROR,
                                            t.config.appendErrorMaxRetry < this.appendError && (u.logger.log("fail " + t.config.appendErrorMaxRetry + " times to append segment in sourceBuffer"),
                                            this.segments = [],
                                            !0)) : (this.segments = [],
                                            a.details = c.ErrorDetails.BUFFER_FULL_ERROR,
                                            !1),
                                            t.trigger(l.default.ERROR, a)
                                        }
                                    }
                                }
                            }
                            ,
                            e.prototype.flushBuffer = function(e, t, r) {
                                var i, n = this.sourceBuffer;
                                if (Object.keys(n).length) {
                                    if (u.logger.log("flushBuffer,pos/start/end: " + this.media.currentTime.toFixed(3) + "/" + e + "/" + t),
                                    this.flushBufferCounter < this.appended) {
                                        for (var a in n)
                                            if (!r || a === r) {
                                                if ((i = n[a]).ended = !1,
                                                i.updating)
                                                    return u.logger.warn("cannot flush, sb updating in progress"),
                                                    !1;
                                                if (this.removeBufferRange(a, i, e, t))
                                                    return this.flushBufferCounter++,
                                                    !1
                                            }
                                    } else
                                        u.logger.warn("abort flushing too many retries");
                                    u.logger.log("buffer flushed")
                                }
                                return !0
                            }
                            ,
                            e.prototype.removeBufferRange = function(e, t, r, i) {
                                try {
                                    for (var n = 0; n < t.buffered.length; n++) {
                                        var a = t.buffered.start(n)
                                          , o = t.buffered.end(n)
                                          , s = Math.max(a, r)
                                          , l = Math.min(o, i);
                                        if (.5 < Math.min(l, o) - s)
                                            return u.logger.log("sb remove " + e + " [" + s + "," + l + "], of [" + a + "," + o + "], pos:" + this.media.currentTime),
                                            t.remove(s, l),
                                            !0
                                    }
                                } catch (e) {
                                    u.logger.warn("removeBufferRange failed", e)
                                }
                                return !1
                            }
                            ,
                            e
                        }(a.default);
                        r.default = e
                    }
                    ).call(this, s("./src/polyfills/number.js").Number)
                },
                "./src/controller/cap-level-controller.js": function(e, r, o) {
                    (function(i) {
                        var n, e = this && this.__extends || (n = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            n(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(r, "__esModule", {
                            value: !0
                        });
                        var a = o("./src/events.js")
                          , t = function(r) {
                            function n(e) {
                                var t = r.call(this, e, a.default.FPS_DROP_LEVEL_CAPPING, a.default.MEDIA_ATTACHING, a.default.MANIFEST_PARSED, a.default.BUFFER_CODECS, a.default.MEDIA_DETACHING) || this;
                                return t.autoLevelCapping = i.POSITIVE_INFINITY,
                                t.firstLevel = null,
                                t.levels = [],
                                t.media = null,
                                t.restrictedLevels = [],
                                t.timer = null,
                                t
                            }
                            return e(n, r),
                            n.prototype.destroy = function() {
                                this.hls.config.capLevelToPlayerSize && (this.media = null,
                                this._stopCapping())
                            }
                            ,
                            n.prototype.onFpsDropLevelCapping = function(e) {
                                n.isLevelAllowed(e.droppedLevel, this.restrictedLevels) && this.restrictedLevels.push(e.droppedLevel)
                            }
                            ,
                            n.prototype.onMediaAttaching = function(e) {
                                this.media = e.media instanceof window.HTMLVideoElement ? e.media : null
                            }
                            ,
                            n.prototype.onManifestParsed = function(e) {
                                var t = this.hls;
                                this.restrictedLevels = [],
                                this.levels = e.levels,
                                this.firstLevel = e.firstLevel,
                                t.config.capLevelToPlayerSize && e.video && this._startCapping()
                            }
                            ,
                            n.prototype.onBufferCodecs = function(e) {
                                this.hls.config.capLevelToPlayerSize && e.video && this._startCapping()
                            }
                            ,
                            n.prototype.onLevelsUpdated = function(e) {
                                this.levels = e.levels
                            }
                            ,
                            n.prototype.onMediaDetaching = function() {
                                this._stopCapping()
                            }
                            ,
                            n.prototype.detectPlayerSize = function() {
                                if (this.media) {
                                    var e = this.levels ? this.levels.length : 0;
                                    if (e) {
                                        var t = this.hls;
                                        t.autoLevelCapping = this.getMaxLevel(e - 1),
                                        this.autoLevelCapping < t.autoLevelCapping && t.streamController.nextLevelSwitch(),
                                        this.autoLevelCapping = t.autoLevelCapping
                                    }
                                }
                            }
                            ,
                            n.prototype.getMaxLevel = function(r) {
                                var i = this;
                                if (!this.levels)
                                    return -1;
                                var e = this.levels.filter(function(e, t) {
                                    return n.isLevelAllowed(t, i.restrictedLevels) && t <= r
                                });
                                return n.getMaxLevelByMediaSize(e, this.mediaWidth, this.mediaHeight)
                            }
                            ,
                            n.prototype._startCapping = function() {
                                this.timer || (this.autoLevelCapping = i.POSITIVE_INFINITY,
                                this.hls.firstLevel = this.getMaxLevel(this.firstLevel),
                                clearInterval(this.timer),
                                this.timer = setInterval(this.detectPlayerSize.bind(this), 1e3),
                                this.detectPlayerSize())
                            }
                            ,
                            n.prototype._stopCapping = function() {
                                this.restrictedLevels = [],
                                this.firstLevel = null,
                                this.autoLevelCapping = i.POSITIVE_INFINITY,
                                this.timer && (this.timer = clearInterval(this.timer),
                                this.timer = null)
                            }
                            ,
                            Object.defineProperty(n.prototype, "mediaWidth", {
                                get: function() {
                                    var e, t = this.media;
                                    return t && (e = t.width || t.clientWidth || t.offsetWidth,
                                    e *= n.contentScaleFactor),
                                    e
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(n.prototype, "mediaHeight", {
                                get: function() {
                                    var e, t = this.media;
                                    return t && (e = t.height || t.clientHeight || t.offsetHeight,
                                    e *= n.contentScaleFactor),
                                    e
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(n, "contentScaleFactor", {
                                get: function() {
                                    var e = 1;
                                    try {
                                        e = window.devicePixelRatio
                                    } catch (e) {}
                                    return e
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            n.isLevelAllowed = function(e, t) {
                                return void 0 === t && (t = []),
                                -1 == t.indexOf(e)
                            }
                            ,
                            n.getMaxLevelByMediaSize = function(e, t, r) {
                                if (!e || e && !e.length)
                                    return -1;
                                for (var i, n, a = e.length - 1, o = 0; o < e.length; o += 1) {
                                    var s = e[o];
                                    if ((t <= s.width || r <= s.height) && (i = s,
                                    !(n = e[o + 1]) || i.width !== n.width || i.height !== n.height)) {
                                        a = o;
                                        break
                                    }
                                }
                                return a
                            }
                            ,
                            n
                        }(o("./src/event-handler.js").default);
                        r.default = t
                    }
                    ).call(this, o("./src/polyfills/number.js").Number)
                },
                "./src/controller/eme-controller.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var a = r("./src/event-handler.js")
                      , o = r("./src/events.js")
                      , s = r("./src/errors.js")
                      , l = r("./src/utils/logger.js")
                      , u = window.XMLHttpRequest
                      , c = "com.widevine.alpha"
                      , d = "com.microsoft.playready"
                      , f = function(r) {
                        function e(e) {
                            var t = r.call(this, e, o.default.MEDIA_ATTACHED, o.default.MANIFEST_PARSED) || this;
                            return t._widevineLicenseUrl = e.config.widevineLicenseUrl,
                            t._licenseXhrSetup = e.config.licenseXhrSetup,
                            t._emeEnabled = e.config.emeEnabled,
                            t._requestMediaKeySystemAccess = e.config.requestMediaKeySystemAccessFunc,
                            t._mediaKeysList = [],
                            t._media = null,
                            t._hasSetMediaKeys = !1,
                            t._isMediaEncrypted = !1,
                            t._requestLicenseFailureCount = 0,
                            t
                        }
                        return n(e, r),
                        e.prototype.getLicenseServerUrl = function(e) {
                            var t;
                            switch (e) {
                            case c:
                                t = this._widevineLicenseUrl;
                                break;
                            default:
                                t = null
                            }
                            return t || (l.logger.error('No license server URL configured for key-system "' + e + '"'),
                            this.hls.trigger(o.default.ERROR, {
                                type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                details: s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                fatal: !0
                            })),
                            t
                        }
                        ,
                        e.prototype._attemptKeySystemAccess = function(t, e, r) {
                            var i = this
                              , n = function(e, t, r) {
                                switch (e) {
                                case c:
                                    return i = {
                                        videoCapabilities: []
                                    },
                                    r.forEach(function(e) {
                                        i.videoCapabilities.push({
                                            contentType: 'video/mp4; codecs="' + e + '"'
                                        })
                                    }),
                                    [i];
                                default:
                                    throw Error("Unknown key-system: " + e)
                                }
                                var i
                            }(t, 0, r);
                            n ? (l.logger.log("Requesting encrypted media key-system access"),
                            this.requestMediaKeySystemAccess(t, n).then(function(e) {
                                i._onMediaKeySystemAccessObtained(t, e)
                            }).catch(function(e) {
                                l.logger.error('Failed to obtain key-system "' + t + '" access:', e)
                            })) : l.logger.warn("Can not create config for key-system (maybe because platform is not supported):", t)
                        }
                        ,
                        Object.defineProperty(e.prototype, "requestMediaKeySystemAccess", {
                            get: function() {
                                if (!this._requestMediaKeySystemAccess)
                                    throw Error("No requestMediaKeySystemAccess function configured");
                                return this._requestMediaKeySystemAccess
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        e.prototype._onMediaKeySystemAccessObtained = function(t, e) {
                            var r = this;
                            l.logger.log('Access for key-system "' + t + '" obtained');
                            var i = {
                                mediaKeys: null,
                                mediaKeysSession: null,
                                mediaKeysSessionInitialized: !1,
                                mediaKeySystemAccess: e,
                                mediaKeySystemDomain: t
                            };
                            this._mediaKeysList.push(i),
                            e.createMediaKeys().then(function(e) {
                                i.mediaKeys = e,
                                l.logger.log('Media-keys created for key-system "' + t + '"'),
                                r._onMediaKeysCreated()
                            }).catch(function(e) {
                                l.logger.error("Failed to create media-keys:", e)
                            })
                        }
                        ,
                        e.prototype._onMediaKeysCreated = function() {
                            var t = this;
                            this._mediaKeysList.forEach(function(e) {
                                e.mediaKeysSession || (e.mediaKeysSession = e.mediaKeys.createSession(),
                                t._onNewMediaKeySession(e.mediaKeysSession))
                            })
                        }
                        ,
                        e.prototype._onNewMediaKeySession = function(t) {
                            var r = this;
                            l.logger.log("New key-system session " + t.sessionId),
                            t.addEventListener("message", function(e) {
                                r._onKeySessionMessage(t, e.message)
                            }, !1)
                        }
                        ,
                        e.prototype._onKeySessionMessage = function(t, e) {
                            l.logger.log("Got EME message event, creating license request"),
                            this._requestLicense(e, function(e) {
                                l.logger.log("Received license data, updating key-session"),
                                t.update(e)
                            })
                        }
                        ,
                        e.prototype._onMediaEncrypted = function(e, t) {
                            l.logger.log('Media is encrypted using "' + e + '" init data type'),
                            this._isMediaEncrypted = !0,
                            this._mediaEncryptionInitDataType = e,
                            this._mediaEncryptionInitData = t,
                            this._attemptSetMediaKeys(),
                            this._generateRequestWithPreferredKeySession()
                        }
                        ,
                        e.prototype._attemptSetMediaKeys = function() {
                            if (!this._hasSetMediaKeys) {
                                var e = this._mediaKeysList[0];
                                if (!e || !e.mediaKeys)
                                    return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),
                                    void this.hls.trigger(o.default.ERROR, {
                                        type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: s.ErrorDetails.KEY_SYSTEM_NO_KEYS,
                                        fatal: !0
                                    });
                                l.logger.log("Setting keys for encrypted media"),
                                this._media.setMediaKeys(e.mediaKeys),
                                this._hasSetMediaKeys = !0
                            }
                        }
                        ,
                        e.prototype._generateRequestWithPreferredKeySession = function() {
                            var t = this
                              , e = this._mediaKeysList[0];
                            if (!e)
                                return l.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),
                                void this.hls.trigger(o.default.ERROR, {
                                    type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,
                                    fatal: !0
                                });
                            if (e.mediaKeysSessionInitialized)
                                l.logger.warn("Key-Session already initialized but requested again");
                            else {
                                var r = e.mediaKeysSession;
                                r || (l.logger.error("Fatal: Media is encrypted but no key-session existing"),
                                this.hls.trigger(o.default.ERROR, {
                                    type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: s.ErrorDetails.KEY_SYSTEM_NO_SESSION,
                                    fatal: !0
                                }));
                                var i = this._mediaEncryptionInitDataType
                                  , n = this._mediaEncryptionInitData;
                                l.logger.log('Generating key-session request for "' + i + '" init data type'),
                                e.mediaKeysSessionInitialized = !0,
                                r.generateRequest(i, n).then(function() {
                                    l.logger.debug("Key-session generation succeeded")
                                }).catch(function(e) {
                                    l.logger.error("Error generating key-session request:", e),
                                    t.hls.trigger(o.default.ERROR, {
                                        type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: s.ErrorDetails.KEY_SYSTEM_NO_SESSION,
                                        fatal: !1
                                    })
                                })
                            }
                        }
                        ,
                        e.prototype._createLicenseXhr = function(t, e, r) {
                            var i = new u
                              , n = this._licenseXhrSetup;
                            try {
                                if (n)
                                    try {
                                        n(i, t)
                                    } catch (e) {
                                        i.open("POST", t, !0),
                                        n(i, t)
                                    }
                                i.readyState || i.open("POST", t, !0)
                            } catch (e) {
                                return l.logger.error("Error setting up key-system license XHR", e),
                                void this.hls.trigger(o.default.ERROR, {
                                    type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                    fatal: !0
                                })
                            }
                            return i.responseType = "arraybuffer",
                            i.onreadystatechange = this._onLicenseRequestReadyStageChange.bind(this, i, t, e, r),
                            i
                        }
                        ,
                        e.prototype._onLicenseRequestReadyStageChange = function(e, t, r, i) {
                            switch (e.readyState) {
                            case 4:
                                if (200 === e.status)
                                    this._requestLicenseFailureCount = 0,
                                    l.logger.log("License request succeeded"),
                                    i(e.response);
                                else {
                                    if (l.logger.error("License Request XHR failed (" + t + "). Status: " + e.status + " (" + e.statusText + ")"),
                                    this._requestLicenseFailureCount++,
                                    this._requestLicenseFailureCount <= 3)
                                        return l.logger.warn("Retrying license request, " + (3 - this._requestLicenseFailureCount + 1) + " attempts left"),
                                        void this._requestLicense(r, i);
                                    this.hls.trigger(o.default.ERROR, {
                                        type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                        fatal: !0
                                    })
                                }
                            }
                        }
                        ,
                        e.prototype._generateLicenseRequestChallenge = function(e, t) {
                            var r;
                            return e.mediaKeySystemDomain === d ? l.logger.error("PlayReady is not supported (yet)") : e.mediaKeySystemDomain === c ? r = t : l.logger.error("Unsupported key-system:", e.mediaKeySystemDomain),
                            r
                        }
                        ,
                        e.prototype._requestLicense = function(e, t) {
                            l.logger.log("Requesting content license for key-system");
                            var r = this._mediaKeysList[0];
                            if (!r)
                                return l.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),
                                void this.hls.trigger(o.default.ERROR, {
                                    type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,
                                    fatal: !0
                                });
                            var i = this.getLicenseServerUrl(r.mediaKeySystemDomain)
                              , n = this._createLicenseXhr(i, e, t);
                            l.logger.log("Sending license request to URL: " + i),
                            n.send(this._generateLicenseRequestChallenge(r, e))
                        }
                        ,
                        e.prototype.onMediaAttached = function(e) {
                            var t = this;
                            if (this._emeEnabled) {
                                var r = e.media;
                                (this._media = r).addEventListener("encrypted", function(e) {
                                    t._onMediaEncrypted(e.initDataType, e.initData)
                                })
                            }
                        }
                        ,
                        e.prototype.onManifestParsed = function(e) {
                            if (this._emeEnabled) {
                                var t = e.levels.map(function(e) {
                                    return e.audioCodec
                                })
                                  , r = e.levels.map(function(e) {
                                    return e.videoCodec
                                });
                                this._attemptKeySystemAccess(c, t, r)
                            }
                        }
                        ,
                        e
                    }(a.default);
                    t.default = f
                },
                "./src/controller/fps-controller.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var u = r("./src/events.js")
                      , a = r("./src/event-handler.js")
                      , c = r("./src/utils/logger.js")
                      , d = window.performance
                      , o = function(t) {
                        function e(e) {
                            return t.call(this, e, u.default.MEDIA_ATTACHING) || this
                        }
                        return n(e, t),
                        e.prototype.destroy = function() {
                            this.timer && clearInterval(this.timer),
                            this.isVideoPlaybackQualityAvailable = !1
                        }
                        ,
                        e.prototype.onMediaAttaching = function(e) {
                            var t = this.hls.config;
                            t.capLevelOnFPSDrop && ("function" == typeof (this.video = e.media instanceof window.HTMLVideoElement ? e.media : null).getVideoPlaybackQuality && (this.isVideoPlaybackQualityAvailable = !0),
                            clearInterval(this.timer),
                            this.timer = setInterval(this.checkFPSInterval.bind(this), t.fpsDroppedMonitoringPeriod))
                        }
                        ,
                        e.prototype.checkFPS = function(e, t, r) {
                            var i = d.now();
                            if (t) {
                                if (this.lastTime) {
                                    var n = r - this.lastDroppedFrames
                                      , a = t - this.lastDecodedFrames
                                      , o = 1e3 * n / (i - this.lastTime)
                                      , s = this.hls;
                                    if (s.trigger(u.default.FPS_DROP, {
                                        currentDropped: n,
                                        currentDecoded: a,
                                        totalDroppedFrames: r
                                    }),
                                    0 < o && s.config.fpsDroppedMonitoringThreshold * a < n) {
                                        var l = s.currentLevel;
                                        c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: " + l),
                                        0 < l && (-1 === s.autoLevelCapping || l <= s.autoLevelCapping) && (s.trigger(u.default.FPS_DROP_LEVEL_CAPPING, {
                                            level: l -= 1,
                                            droppedLevel: s.currentLevel
                                        }),
                                        s.autoLevelCapping = l,
                                        s.streamController.nextLevelSwitch())
                                    }
                                }
                                this.lastTime = i,
                                this.lastDroppedFrames = r,
                                this.lastDecodedFrames = t
                            }
                        }
                        ,
                        e.prototype.checkFPSInterval = function() {
                            var e = this.video;
                            if (e)
                                if (this.isVideoPlaybackQualityAvailable) {
                                    var t = e.getVideoPlaybackQuality();
                                    this.checkFPS(e, t.totalVideoFrames, t.droppedVideoFrames)
                                } else
                                    this.checkFPS(e, e.webkitDecodedFrameCount, e.webkitDroppedFrameCount)
                        }
                        ,
                        e
                    }(a.default);
                    t.default = o
                },
                "./src/controller/fragment-finders.js": function(e, t, r) {
                    !function(a) {
                        Object.defineProperty(t, "__esModule", {
                            value: !0
                        });
                        var o = r("./src/utils/binary-search.js");
                        function s(e, t, r) {
                            void 0 === e && (e = 0),
                            void 0 === t && (t = 0);
                            var i = Math.min(t, r.duration + (r.deltaPTS ? r.deltaPTS : 0));
                            return r.start + r.duration - i <= e ? 1 : e < r.start - i && r.start ? -1 : 0
                        }
                        function l(e, t, r) {
                            return e < r.endProgramDateTime - 1e3 * Math.min(t, r.duration + (r.deltaPTS ? r.deltaPTS : 0))
                        }
                        t.findFragmentByPDT = function(e, t, r) {
                            if (!Array.isArray(e) || !e.length || !a.isFinite(t))
                                return null;
                            if (t < e[0].programDateTime)
                                return null;
                            if (e[e.length - 1].endProgramDateTime <= t)
                                return null;
                            r = r || 0;
                            for (var i = 0; i < e.length; ++i) {
                                var n = e[i];
                                if (l(t, r, n))
                                    return n
                            }
                            return null
                        }
                        ,
                        t.findFragmentByPTS = function(e, t, r, i) {
                            void 0 === r && (r = 0),
                            void 0 === i && (i = 0);
                            var n = e ? t[e.sn - t[0].sn + 1] : null;
                            return n && !s(r, i, n) ? n : o.default.search(t, s.bind(null, r, i))
                        }
                        ,
                        t.fragmentWithinToleranceTest = s,
                        t.pdtWithinToleranceTest = l
                    }(r("./src/polyfills/number.js").Number)
                },
                "./src/controller/fragment-tracker.js": function(e, s, r) {
                    (function(i) {
                        var n, t = this && this.__extends || (n = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            n(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(s, "__esModule", {
                            value: !0
                        });
                        var a = r("./src/event-handler.js")
                          , o = r("./src/events.js");
                        s.FragmentState = {
                            NOT_LOADED: "NOT_LOADED",
                            APPENDING: "APPENDING",
                            PARTIAL: "PARTIAL",
                            OK: "OK"
                        };
                        var e = function(r) {
                            function e(e) {
                                var t = r.call(this, e, o.default.BUFFER_APPENDED, o.default.FRAG_BUFFERED, o.default.FRAG_LOADED) || this;
                                return t.bufferPadding = .2,
                                t.fragments = Object.create(null),
                                t.timeRanges = Object.create(null),
                                t.config = e.config,
                                t
                            }
                            return t(e, r),
                            e.prototype.destroy = function() {
                                this.fragments = Object.create(null),
                                this.timeRanges = Object.create(null),
                                this.config = null,
                                a.default.prototype.destroy.call(this),
                                r.prototype.destroy.call(this)
                            }
                            ,
                            e.prototype.getBufferedFrag = function(i, n) {
                                var a = this.fragments
                                  , e = Object.keys(a).filter(function(e) {
                                    var t = a[e];
                                    if (t.body.type !== n)
                                        return !1;
                                    if (!t.buffered)
                                        return !1;
                                    var r = t.body;
                                    return r.startPTS <= i && i <= r.endPTS
                                });
                                if (0 === e.length)
                                    return null;
                                var t = e.pop();
                                return a[t].body
                            }
                            ,
                            e.prototype.detectEvictedFragments = function(n, a) {
                                var o, s, l = this;
                                Object.keys(this.fragments).forEach(function(e) {
                                    var t = l.fragments[e];
                                    if (!0 === t.buffered) {
                                        var r = t.range[n];
                                        if (r) {
                                            o = r.time;
                                            for (var i = 0; i < o.length; i++)
                                                if (!1 === l.isTimeBuffered((s = o[i]).startPTS, s.endPTS, a)) {
                                                    l.removeFragment(t.body);
                                                    break
                                                }
                                        }
                                    }
                                })
                            }
                            ,
                            e.prototype.detectPartialFragments = function(t) {
                                var r = this
                                  , e = this.getFragmentKey(t)
                                  , i = this.fragments[e];
                                i && (i.buffered = !0,
                                Object.keys(this.timeRanges).forEach(function(e) {
                                    t.hasElementaryStream(e) && (i.range[e] = r.getBufferedTimes(t.startPTS, t.endPTS, r.timeRanges[e]))
                                }))
                            }
                            ,
                            e.prototype.getBufferedTimes = function(e, t, r) {
                                for (var i, n, a = [], o = !1, s = 0; s < r.length; s++) {
                                    if (i = r.start(s) - this.bufferPadding,
                                    n = r.end(s) + this.bufferPadding,
                                    i <= e && t <= n) {
                                        a.push({
                                            startPTS: Math.max(e, r.start(s)),
                                            endPTS: Math.min(t, r.end(s))
                                        });
                                        break
                                    }
                                    if (e < n && i < t)
                                        a.push({
                                            startPTS: Math.max(e, r.start(s)),
                                            endPTS: Math.min(t, r.end(s))
                                        }),
                                        o = !0;
                                    else if (t <= i)
                                        break
                                }
                                return {
                                    time: a,
                                    partial: o
                                }
                            }
                            ,
                            e.prototype.getFragmentKey = function(e) {
                                return e.type + "_" + e.level + "_" + e.urlId + "_" + e.sn
                            }
                            ,
                            e.prototype.getPartialFragment = function(r) {
                                var i, n, a, o = this, s = null, l = 0;
                                return Object.keys(this.fragments).forEach(function(e) {
                                    var t = o.fragments[e];
                                    o.isPartial(t) && (a = t.body.endPTS + o.bufferPadding,
                                    (n = t.body.startPTS - o.bufferPadding) <= r && r <= a && l <= (i = Math.min(r - n, a - r)) && (s = t.body,
                                    l = i))
                                }),
                                s
                            }
                            ,
                            e.prototype.getState = function(e) {
                                var t = this.getFragmentKey(e)
                                  , r = this.fragments[t]
                                  , i = s.FragmentState.NOT_LOADED;
                                return void 0 !== r && (i = r.buffered ? !0 === this.isPartial(r) ? s.FragmentState.PARTIAL : s.FragmentState.OK : s.FragmentState.APPENDING),
                                i
                            }
                            ,
                            e.prototype.isPartial = function(e) {
                                return !0 === e.buffered && (void 0 !== e.range.video && !0 === e.range.video.partial || void 0 !== e.range.audio && !0 === e.range.audio.partial)
                            }
                            ,
                            e.prototype.isTimeBuffered = function(e, t, r) {
                                for (var i, n, a = 0; a < r.length; a++) {
                                    if (i = r.start(a) - this.bufferPadding,
                                    n = r.end(a) + this.bufferPadding,
                                    i <= e && t <= n)
                                        return !0;
                                    if (t <= i)
                                        return !1
                                }
                                return !1
                            }
                            ,
                            e.prototype.onFragLoaded = function(e) {
                                var t = e.frag;
                                i.isFinite(t.sn) && !t.bitrateTest && (this.fragments[this.getFragmentKey(t)] = {
                                    body: t,
                                    range: Object.create(null),
                                    buffered: !1
                                })
                            }
                            ,
                            e.prototype.onBufferAppended = function(e) {
                                var t = this;
                                this.timeRanges = e.timeRanges,
                                Object.keys(this.timeRanges).forEach(function(e) {
                                    t.detectEvictedFragments(e, t.timeRanges[e])
                                })
                            }
                            ,
                            e.prototype.onFragBuffered = function(e) {
                                this.detectPartialFragments(e.frag)
                            }
                            ,
                            e.prototype.hasFragment = function(e) {
                                var t = this.getFragmentKey(e);
                                return void 0 !== this.fragments[t]
                            }
                            ,
                            e.prototype.removeFragment = function(e) {
                                var t = this.getFragmentKey(e);
                                delete this.fragments[t]
                            }
                            ,
                            e.prototype.removeAllFragments = function() {
                                this.fragments = Object.create(null)
                            }
                            ,
                            e
                        }(a.default);
                        s.FragmentTracker = e
                    }
                    ).call(this, r("./src/polyfills/number.js").Number)
                },
                "./src/controller/gap-controller.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var l = r("./src/utils/buffer-helper.js")
                      , s = r("./src/errors.js")
                      , u = r("./src/events.js")
                      , c = r("./src/utils/logger.js")
                      , i = function() {
                        function e(e, t, r, i) {
                            this.config = e,
                            this.media = t,
                            this.fragmentTracker = r,
                            this.hls = i,
                            this.stallReported = !1
                        }
                        return e.prototype.poll = function(e, t) {
                            var r = this.config
                              , i = this.media
                              , n = i.currentTime
                              , a = window.performance.now();
                            if (n !== e)
                                return this.stallReported && (c.logger.warn("playback not stuck anymore @" + n + ", after " + Math.round(a - this.stalled) + "ms"),
                                this.stallReported = !1),
                                this.stalled = null,
                                void (this.nudgeRetry = 0);
                            if (!(i.ended || !i.buffered.length || 2 < i.readyState || i.seeking && l.BufferHelper.isBuffered(i, n))) {
                                var o = a - this.stalled
                                  , s = l.BufferHelper.bufferInfo(i, n, r.maxBufferHole);
                                this.stalled ? (1e3 <= o && this._reportStall(s.len),
                                this._tryFixBufferStall(s, o)) : this.stalled = a
                            }
                        }
                        ,
                        e.prototype._tryFixBufferStall = function(e, t) {
                            var r = this.config
                              , i = this.fragmentTracker.getPartialFragment(this.media.currentTime);
                            i && this._trySkipBufferHole(i),
                            .5 < e.len && 1e3 * r.highBufferWatchdogPeriod < t && (this.stalled = null,
                            this._tryNudgeBuffer())
                        }
                        ,
                        e.prototype._reportStall = function(e) {
                            var t = this.hls
                              , r = this.media;
                            this.stallReported || (this.stallReported = !0,
                            c.logger.warn("Playback stalling at @" + r.currentTime + " due to low buffer"),
                            t.trigger(u.default.ERROR, {
                                type: s.ErrorTypes.MEDIA_ERROR,
                                details: s.ErrorDetails.BUFFER_STALLED_ERROR,
                                fatal: !1,
                                buffer: e
                            }))
                        }
                        ,
                        e.prototype._trySkipBufferHole = function(e) {
                            for (var t = this.hls, r = this.media, i = r.currentTime, n = 0, a = 0; a < r.buffered.length; a++) {
                                var o = r.buffered.start(a);
                                if (n <= i && i < o)
                                    return r.currentTime = Math.max(o, r.currentTime + .1),
                                    c.logger.warn("skipping hole, adjusting currentTime from " + i + " to " + r.currentTime),
                                    this.stalled = null,
                                    void t.trigger(u.default.ERROR, {
                                        type: s.ErrorTypes.MEDIA_ERROR,
                                        details: s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,
                                        fatal: !1,
                                        reason: "fragment loaded with buffer holes, seeking from " + i + " to " + r.currentTime,
                                        frag: e
                                    });
                                n = r.buffered.end(a)
                            }
                        }
                        ,
                        e.prototype._tryNudgeBuffer = function() {
                            var e = this.config
                              , t = this.hls
                              , r = this.media
                              , i = r.currentTime
                              , n = (this.nudgeRetry || 0) + 1;
                            if ((this.nudgeRetry = n) < e.nudgeMaxRetry) {
                                var a = i + n * e.nudgeOffset;
                                c.logger.log("adjust currentTime from " + i + " to " + a),
                                r.currentTime = a,
                                t.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.MEDIA_ERROR,
                                    details: s.ErrorDetails.BUFFER_NUDGE_ON_STALL,
                                    fatal: !1
                                })
                            } else
                                c.logger.error("still stuck in high buffer @" + i + " after " + e.nudgeMaxRetry + ", raise fatal error"),
                                t.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.MEDIA_ERROR,
                                    details: s.ErrorDetails.BUFFER_STALLED_ERROR,
                                    fatal: !0
                                })
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/controller/id3-track-controller.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var a = r("./src/events.js")
                      , o = r("./src/event-handler.js")
                      , d = r("./src/demux/id3.js")
                      , s = r("./src/utils/texttrack-utils.js")
                      , l = function(r) {
                        function e(e) {
                            var t = r.call(this, e, a.default.MEDIA_ATTACHED, a.default.MEDIA_DETACHING, a.default.FRAG_PARSING_METADATA) || this;
                            return t.id3Track = void 0,
                            t.media = void 0,
                            t
                        }
                        return n(e, r),
                        e.prototype.destroy = function() {
                            o.default.prototype.destroy.call(this)
                        }
                        ,
                        e.prototype.onMediaAttached = function(e) {
                            this.media = e.media
                        }
                        ,
                        e.prototype.onMediaDetaching = function() {
                            s.clearCurrentCues(this.id3Track),
                            this.id3Track = void 0,
                            this.media = void 0
                        }
                        ,
                        e.prototype.getID3Track = function(e) {
                            for (var t = 0; t < e.length; t++) {
                                var r = e[t];
                                if ("metadata" === r.kind && "id3" === r.label)
                                    return s.sendAddTrackEvent(r, this.media),
                                    r
                            }
                            return this.media.addTextTrack("metadata", "id3")
                        }
                        ,
                        e.prototype.onFragParsingMetadata = function(e) {
                            var t = e.frag
                              , r = e.samples;
                            this.id3Track || (this.id3Track = this.getID3Track(this.media.textTracks),
                            this.id3Track.mode = "hidden");
                            for (var i = window.WebKitDataCue || window.VTTCue || window.TextTrackCue, n = 0; n < r.length; n++) {
                                var a = d.default.getID3Frames(r[n].data);
                                if (a) {
                                    var o = r[n].pts
                                      , s = n < r.length - 1 ? r[n + 1].pts : t.endPTS;
                                    o === s && (s += 1e-4);
                                    for (var l = 0; l < a.length; l++) {
                                        var u = a[l];
                                        if (!d.default.isTimeStampFrame(u)) {
                                            var c = new i(o,s,"");
                                            c.value = u,
                                            this.id3Track.addCue(c)
                                        }
                                    }
                                }
                            }
                        }
                        ,
                        e
                    }(o.default);
                    t.default = l
                },
                "./src/controller/level-controller.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var u, c = r("./src/events.js"), a = r("./src/event-handler.js"), d = r("./src/utils/logger.js"), f = r("./src/errors.js"), h = r("./src/utils/codecs.js"), p = r("./src/controller/level-helper.js"), o = (window,
                    function(r) {
                        function e(e) {
                            var t = r.call(this, e, c.default.MANIFEST_LOADED, c.default.LEVEL_LOADED, c.default.AUDIO_TRACK_SWITCHED, c.default.FRAG_LOADED, c.default.ERROR) || this;
                            return t.canload = !1,
                            t.currentLevelIndex = null,
                            t.manualLevelIndex = -1,
                            t.timer = null,
                            u = /chrome|firefox/.test(navigator.userAgent.toLowerCase()),
                            t
                        }
                        return n(e, r),
                        e.prototype.onHandlerDestroying = function() {
                            this.clearTimer(),
                            this.manualLevelIndex = -1
                        }
                        ,
                        e.prototype.clearTimer = function() {
                            null !== this.timer && (clearTimeout(this.timer),
                            this.timer = null)
                        }
                        ,
                        e.prototype.startLoad = function() {
                            var e = this._levels;
                            this.canload = !0,
                            this.levelRetryCount = 0,
                            e && e.forEach(function(e) {
                                e.loadError = 0;
                                var t = e.details;
                                t && t.live && (e.details = void 0)
                            }),
                            null !== this.timer && this.loadLevel()
                        }
                        ,
                        e.prototype.stopLoad = function() {
                            this.canload = !1
                        }
                        ,
                        e.prototype.onManifestLoaded = function(e) {
                            var t, r = [], i = [], n = {}, a = null, o = !1, s = !1;
                            if (e.levels.forEach(function(e) {
                                var t = e.attrs;
                                e.loadError = 0,
                                e.fragmentError = !1,
                                o = o || !!e.videoCodec,
                                s = s || !!e.audioCodec,
                                u && e.audioCodec && -1 != e.audioCodec.indexOf("mp4a.40.34") && (e.audioCodec = void 0),
                                (a = n[e.bitrate]) ? a.url.push(e.url) : (e.url = [e.url],
                                e.urlId = 0,
                                r.push(n[e.bitrate] = e)),
                                t && (t.AUDIO && (s = !0,
                                p.addGroupId(a || e, "audio", t.AUDIO)),
                                t.SUBTITLES && p.addGroupId(a || e, "text", t.SUBTITLES))
                            }),
                            o && s && (r = r.filter(function(e) {
                                return !!e.videoCodec
                            })),
                            r = r.filter(function(e) {
                                var t = e.audioCodec
                                  , r = e.videoCodec;
                                return (!t || h.isCodecSupportedInMp4(t, "audio")) && (!r || h.isCodecSupportedInMp4(r, "video"))
                            }),
                            e.audioTracks && (i = e.audioTracks.filter(function(e) {
                                return !e.audioCodec || h.isCodecSupportedInMp4(e.audioCodec, "audio")
                            })).forEach(function(e, t) {
                                e.id = t
                            }),
                            0 < r.length) {
                                t = r[0].bitrate,
                                r.sort(function(e, t) {
                                    return e.bitrate - t.bitrate
                                }),
                                this._levels = r;
                                for (var l = 0; l < r.length; l++)
                                    if (r[l].bitrate === t) {
                                        this._firstLevel = l,
                                        d.logger.log("manifest loaded," + r.length + " level(s) found, first bitrate:" + t);
                                        break
                                    }
                                this.hls.trigger(c.default.MANIFEST_PARSED, {
                                    levels: r,
                                    audioTracks: i,
                                    firstLevel: this._firstLevel,
                                    stats: e.stats,
                                    audio: s,
                                    video: o,
                                    altAudio: i.some(function(e) {
                                        return !!e.url
                                    })
                                })
                            } else
                                this.hls.trigger(c.default.ERROR, {
                                    type: f.ErrorTypes.MEDIA_ERROR,
                                    details: f.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
                                    fatal: !0,
                                    url: this.hls.url,
                                    reason: "no level with compatible codecs found in manifest"
                                })
                        }
                        ,
                        Object.defineProperty(e.prototype, "levels", {
                            get: function() {
                                return this._levels
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(e.prototype, "level", {
                            get: function() {
                                return this.currentLevelIndex
                            },
                            set: function(e) {
                                var t = this._levels;
                                t && (this.currentLevelIndex === (e = Math.min(e, t.length - 1)) && t[e].details || this.setLevelInternal(e))
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        e.prototype.setLevelInternal = function(e) {
                            var t = this._levels
                              , r = this.hls;
                            if (0 <= e && e < t.length) {
                                if (this.clearTimer(),
                                this.currentLevelIndex !== e) {
                                    d.logger.log("switching to level " + e);
                                    var i = t[this.currentLevelIndex = e];
                                    i.level = e,
                                    r.trigger(c.default.LEVEL_SWITCHING, i)
                                }
                                var n = t[e]
                                  , a = n.details;
                                if (!a || a.live) {
                                    var o = n.urlId;
                                    r.trigger(c.default.LEVEL_LOADING, {
                                        url: n.url[o],
                                        level: e,
                                        id: o
                                    })
                                }
                            } else
                                r.trigger(c.default.ERROR, {
                                    type: f.ErrorTypes.OTHER_ERROR,
                                    details: f.ErrorDetails.LEVEL_SWITCH_ERROR,
                                    level: e,
                                    fatal: !1,
                                    reason: "invalid level idx"
                                })
                        }
                        ,
                        Object.defineProperty(e.prototype, "manualLevel", {
                            get: function() {
                                return this.manualLevelIndex
                            },
                            set: function(e) {
                                this.manualLevelIndex = e,
                                void 0 === this._startLevel && (this._startLevel = e),
                                -1 !== e && (this.level = e)
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(e.prototype, "firstLevel", {
                            get: function() {
                                return this._firstLevel
                            },
                            set: function(e) {
                                this._firstLevel = e
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(e.prototype, "startLevel", {
                            get: function() {
                                if (void 0 !== this._startLevel)
                                    return this._startLevel;
                                var e = this.hls.config.startLevel;
                                return void 0 !== e ? e : this._firstLevel
                            },
                            set: function(e) {
                                this._startLevel = e
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        e.prototype.onError = function(e) {
                            if (e.fatal)
                                e.type === f.ErrorTypes.NETWORK_ERROR && this.clearTimer();
                            else {
                                var t, r = !1, i = !1;
                                switch (e.details) {
                                case f.ErrorDetails.FRAG_LOAD_ERROR:
                                case f.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                case f.ErrorDetails.KEY_LOAD_ERROR:
                                case f.ErrorDetails.KEY_LOAD_TIMEOUT:
                                    t = e.frag.level,
                                    i = !0;
                                    break;
                                case f.ErrorDetails.LEVEL_LOAD_ERROR:
                                case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:
                                    t = e.context.level,
                                    r = !0;
                                    break;
                                case f.ErrorDetails.REMUX_ALLOC_ERROR:
                                    t = e.level,
                                    r = !0
                                }
                                void 0 !== t && this.recoverLevel(e, t, r, i)
                            }
                        }
                        ,
                        e.prototype.recoverLevel = function(e, t, r, i) {
                            var n, a, o, s = this, l = this.hls.config, u = e.details, c = this._levels[t];
                            if (c.loadError++,
                            c.fragmentError = i,
                            r) {
                                if (!(this.levelRetryCount + 1 <= l.levelLoadingMaxRetry))
                                    return d.logger.error("level controller, cannot recover from " + u + " error"),
                                    this.currentLevelIndex = null,
                                    this.clearTimer(),
                                    void (e.fatal = !0);
                                this.timer = setTimeout(function() {
                                    return s.loadLevel()
                                }, a = Math.min(Math.pow(2, this.levelRetryCount) * l.levelLoadingRetryDelay, l.levelLoadingMaxRetryTimeout)),
                                e.levelRetry = !0,
                                this.levelRetryCount++,
                                d.logger.warn("level controller, " + u + ", retry in " + a + " ms, current retry count is " + this.levelRetryCount)
                            }
                            (r || i) && (1 < (n = c.url.length) && c.loadError < n ? (c.urlId = (c.urlId + 1) % n,
                            c.details = void 0,
                            d.logger.warn("level controller, " + u + " for level " + t + ": switching to redundant URL-id " + c.urlId)) : -1 === this.manualLevelIndex ? (d.logger.warn("level controller, " + u + ": switch to " + (o = 0 === t ? this._levels.length - 1 : t - 1)),
                            this.hls.nextAutoLevel = this.currentLevelIndex = o) : i && (d.logger.warn("level controller, " + u + ": reload a fragment"),
                            this.currentLevelIndex = null))
                        }
                        ,
                        e.prototype.onFragLoaded = function(e) {
                            var t = e.frag;
                            if (void 0 !== t && "main" === t.type) {
                                var r = this._levels[t.level];
                                void 0 !== r && (r.fragmentError = !1,
                                this.levelRetryCount = r.loadError = 0)
                            }
                        }
                        ,
                        e.prototype.onLevelLoaded = function(e) {
                            var t = this
                              , r = e.level
                              , i = e.details;
                            if (r === this.currentLevelIndex) {
                                var n = this._levels[r];
                                if (n.fragmentError || (this.levelRetryCount = n.loadError = 0),
                                i.live) {
                                    var a = p.computeReloadInterval(n.details, i, e.stats.trequest);
                                    d.logger.log("live playlist, reload in " + Math.round(a) + " ms"),
                                    this.timer = setTimeout(function() {
                                        return t.loadLevel()
                                    }, a)
                                } else
                                    this.clearTimer()
                            }
                        }
                        ,
                        e.prototype.onAudioTrackSwitched = function(e) {
                            var t = this.hls.audioTracks[e.id].groupId
                              , r = this.hls.levels[this.currentLevelIndex];
                            if (r && r.audioGroupIds) {
                                for (var i = -1, n = 0; n < r.audioGroupIds.length; n++)
                                    if (r.audioGroupIds[n] === t) {
                                        i = n;
                                        break
                                    }
                                i !== r.urlId && (r.urlId = i,
                                this.startLoad())
                            }
                        }
                        ,
                        e.prototype.loadLevel = function() {
                            if (d.logger.debug("call to loadLevel"),
                            null !== this.currentLevelIndex && this.canload) {
                                var e = this._levels[this.currentLevelIndex];
                                if ("object" == typeof e && 0 < e.url.length) {
                                    var t = this.currentLevelIndex
                                      , r = e.urlId
                                      , i = e.url[r];
                                    d.logger.log("Attempt loading level index " + t + " with URL-id " + r),
                                    this.hls.trigger(c.default.LEVEL_LOADING, {
                                        url: i,
                                        level: t,
                                        id: r
                                    })
                                }
                            }
                        }
                        ,
                        Object.defineProperty(e.prototype, "nextLoadLevel", {
                            get: function() {
                                return -1 !== this.manualLevelIndex ? this.manualLevelIndex : this.hls.nextAutoLevel
                            },
                            set: function(e) {
                                this.level = e,
                                -1 === this.manualLevelIndex && (this.hls.nextAutoLevel = e)
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        e
                    }(a.default));
                    t.default = o
                },
                "./src/controller/level-helper.js": function(e, t, r) {
                    !function(h) {
                        Object.defineProperty(t, "__esModule", {
                            value: !0
                        });
                        var o = r("./src/utils/logger.js");
                        function p(e, t, r) {
                            var i = e[t]
                              , n = e[r]
                              , a = n.startPTS;
                            h.isFinite(a) ? t < r ? (i.duration = a - i.start,
                            i.duration < 0 && o.logger.warn("negative duration computed for frag " + i.sn + ",level " + i.level + ", there should be some duration drift between playlist and fragment!")) : (n.duration = i.start - a,
                            n.duration < 0 && o.logger.warn("negative duration computed for frag " + n.sn + ",level " + n.level + ", there should be some duration drift between playlist and fragment!")) : n.start = t < r ? i.start + i.duration : Math.max(i.start - n.duration, 0)
                        }
                        function s(e, t, r, i, n, a) {
                            var o = r;
                            if (h.isFinite(t.startPTS)) {
                                var s = Math.abs(t.startPTS - r);
                                t.deltaPTS = h.isFinite(t.deltaPTS) ? Math.max(s, t.deltaPTS) : s,
                                o = Math.max(r, t.startPTS),
                                r = Math.min(r, t.startPTS),
                                i = Math.max(i, t.endPTS),
                                n = Math.min(n, t.startDTS),
                                a = Math.max(a, t.endDTS)
                            }
                            var l = r - t.start;
                            t.start = t.startPTS = r,
                            t.maxStartPTS = o,
                            t.endPTS = i,
                            t.startDTS = n,
                            t.endDTS = a,
                            t.duration = i - r;
                            var u, c, d, f = t.sn;
                            if (!e || f < e.startSN || e.endSN < f)
                                return 0;
                            for ((c = e.fragments)[u = f - e.startSN] = t,
                            d = u; 0 < d; d--)
                                p(c, d, d - 1);
                            for (d = u; d < c.length - 1; d++)
                                p(c, d, d + 1);
                            return e.PTSKnown = !0,
                            l
                        }
                        function l(e, t, r) {
                            if (e && t)
                                for (var i = Math.max(e.startSN, t.startSN) - t.startSN, n = Math.min(e.endSN, t.endSN) - t.startSN, a = t.startSN - e.startSN, o = i; o <= n; o++) {
                                    var s = e.fragments[a + o]
                                      , l = t.fragments[o];
                                    if (!s || !l)
                                        break;
                                    r(s, l, o)
                                }
                        }
                        function u(e, t) {
                            var r = t.startSN - e.startSN
                              , i = e.fragments
                              , n = t.fragments;
                            if (!(r < 0 || i.length < r))
                                for (var a = 0; a < n.length; a++)
                                    n[a].start += i[r].start
                        }
                        t.addGroupId = function(e, t, r) {
                            switch (t) {
                            case "audio":
                                e.audioGroupIds || (e.audioGroupIds = []),
                                e.audioGroupIds.push(r);
                                break;
                            case "text":
                                e.textGroupIds || (e.textGroupIds = []),
                                e.textGroupIds.push(r)
                            }
                        }
                        ,
                        t.updatePTS = p,
                        t.updateFragPTSDTS = s,
                        t.mergeDetails = function(e, r) {
                            r.initSegment && e.initSegment && (r.initSegment = e.initSegment);
                            var i, n = 0;
                            if (l(e, r, function(e, t) {
                                n = e.cc - t.cc,
                                h.isFinite(e.startPTS) && (t.start = t.startPTS = e.startPTS,
                                t.endPTS = e.endPTS,
                                t.duration = e.duration,
                                t.backtracked = e.backtracked,
                                t.dropped = e.dropped,
                                i = t),
                                r.PTSKnown = !0
                            }),
                            r.PTSKnown) {
                                if (n) {
                                    o.logger.log("discontinuity sliding from playlist, take drift into account");
                                    for (var t = r.fragments, a = 0; a < t.length; a++)
                                        t[a].cc += n
                                }
                                i ? s(r, i, i.startPTS, i.endPTS, i.startDTS, i.endDTS) : u(e, r),
                                r.PTSKnown = e.PTSKnown
                            }
                        }
                        ,
                        t.mergeSubtitlePlaylists = function(e, t, r) {
                            void 0 === r && (r = 0);
                            var i = -1;
                            l(e, t, function(e, t, r) {
                                t.start = e.start,
                                i = r
                            });
                            var n = t.fragments;
                            if (i < 0)
                                n.forEach(function(e) {
                                    e.start += r
                                });
                            else
                                for (var a = i + 1; a < n.length; a++)
                                    n[a].start = n[a - 1].start + n[a - 1].duration
                        }
                        ,
                        t.mapFragmentIntersection = l,
                        t.adjustSliding = u,
                        t.computeReloadInterval = function(e, t, r) {
                            var i = 1e3 * (t.averagetargetduration ? t.averagetargetduration : t.targetduration)
                              , n = i / 2;
                            return e && t.endSN === e.endSN && (i = n),
                            r && (i = Math.max(n, i - (window.performance.now() - r))),
                            Math.round(i)
                        }
                    }(r("./src/polyfills/number.js").Number)
                },
                "./src/controller/stream-controller.js": function(e, l, T) {
                    (function(u) {
                        var i, t = this && this.__extends || (i = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            i(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(l, "__esModule", {
                            value: !0
                        });
                        var h = T("./src/utils/binary-search.js")
                          , f = T("./src/utils/buffer-helper.js")
                          , d = T("./src/demux/demuxer.js")
                          , p = T("./src/events.js")
                          , r = T("./src/controller/fragment-tracker.js")
                          , c = T("./src/loader/fragment.js")
                          , n = T("./src/loader/playlist-loader.js")
                          , g = T("./src/controller/level-helper.js")
                          , a = T("./src/utils/time-ranges.js")
                          , o = T("./src/errors.js")
                          , v = T("./src/utils/logger.js")
                          , y = T("./src/utils/discontinuities.js")
                          , m = T("./src/controller/fragment-finders.js")
                          , s = T("./src/controller/gap-controller.js")
                          , _ = T("./src/controller/base-stream-controller.js")
                          , e = function(i) {
                            function e(e, t) {
                                var r = i.call(this, e, p.default.MEDIA_ATTACHED, p.default.MEDIA_DETACHING, p.default.MANIFEST_LOADING, p.default.MANIFEST_PARSED, p.default.LEVEL_LOADED, p.default.KEY_LOADED, p.default.FRAG_LOADED, p.default.FRAG_LOAD_EMERGENCY_ABORTED, p.default.FRAG_PARSING_INIT_SEGMENT, p.default.FRAG_PARSING_DATA, p.default.FRAG_PARSED, p.default.ERROR, p.default.AUDIO_TRACK_SWITCHING, p.default.AUDIO_TRACK_SWITCHED, p.default.BUFFER_CREATED, p.default.BUFFER_APPENDED, p.default.BUFFER_FLUSHED) || this;
                                return r.fragmentTracker = t,
                                r.config = e.config,
                                r.audioCodecSwap = !1,
                                r._state = _.State.STOPPED,
                                r.stallReported = !1,
                                r.gapController = null,
                                r
                            }
                            return t(e, i),
                            e.prototype.startLoad = function(e) {
                                if (this.levels) {
                                    var t = this.lastCurrentTime
                                      , r = this.hls;
                                    if (this.stopLoad(),
                                    this.setInterval(100),
                                    this.level = -1,
                                    this.fragLoadError = 0,
                                    !this.startFragRequested) {
                                        var i = r.startLevel;
                                        -1 === i && (this.bitrateTest = !(i = 0)),
                                        this.level = r.nextLoadLevel = i,
                                        this.loadedmetadata = !1
                                    }
                                    0 < t && -1 === e && (v.logger.log("override startPosition with lastCurrentTime @" + t.toFixed(3)),
                                    e = t),
                                    this.state = _.State.IDLE,
                                    this.nextLoadPosition = this.startPosition = this.lastCurrentTime = e,
                                    this.tick()
                                } else
                                    this.forceStartLoad = !0,
                                    this.state = _.State.STOPPED
                            }
                            ,
                            e.prototype.stopLoad = function() {
                                this.forceStartLoad = !1,
                                i.prototype.stopLoad.call(this)
                            }
                            ,
                            e.prototype.doTick = function() {
                                switch (this.state) {
                                case _.State.BUFFER_FLUSHING:
                                    this.fragLoadError = 0;
                                    break;
                                case _.State.IDLE:
                                    this._doTickIdle();
                                    break;
                                case _.State.WAITING_LEVEL:
                                    var e = this.levels[this.level];
                                    e && e.details && (this.state = _.State.IDLE);
                                    break;
                                case _.State.FRAG_LOADING_WAITING_RETRY:
                                    var t = window.performance.now()
                                      , r = this.retryDate;
                                    (!r || r <= t || this.media && this.media.seeking) && (v.logger.log("mediaController: retryDate reached, switch back to IDLE state"),
                                    this.state = _.State.IDLE)
                                }
                                this._checkBuffer(),
                                this._checkFragmentChanged()
                            }
                            ,
                            e.prototype._doTickIdle = function() {
                                var e = this.hls
                                  , t = e.config
                                  , r = this.media;
                                if (void 0 !== this.levelLastLoaded && (r || !this.startFragRequested && t.startFragPrefetch)) {
                                    var i;
                                    i = this.loadedmetadata ? r.currentTime : this.nextLoadPosition;
                                    var n = e.nextLoadLevel
                                      , a = this.levels[n];
                                    if (a) {
                                        var o, s = a.bitrate;
                                        o = Math.min(o = s ? Math.max(8 * t.maxBufferSize / s, t.maxBufferLength) : t.maxBufferLength, t.maxMaxBufferLength);
                                        var l = f.BufferHelper.bufferInfo(this.mediaBuffer ? this.mediaBuffer : r, i, t.maxBufferHole)
                                          , u = l.len;
                                        if (!(o <= u)) {
                                            v.logger.trace("buffer length of " + u.toFixed(3) + " is below max of " + o.toFixed(3) + ". checking for more payload ..."),
                                            this.level = e.nextLoadLevel = n;
                                            var c = a.details;
                                            if (!c || c.live && this.levelLastLoaded !== n)
                                                this.state = _.State.WAITING_LEVEL;
                                            else {
                                                if (this._streamEnded(l, c)) {
                                                    var d = {};
                                                    return this.altAudio && (d.type = "video"),
                                                    this.hls.trigger(p.default.BUFFER_EOS, d),
                                                    void (this.state = _.State.ENDED)
                                                }
                                                this._fetchPayloadOrEos(i, l, c)
                                            }
                                        }
                                    }
                                }
                            }
                            ,
                            e.prototype._fetchPayloadOrEos = function(e, t, r) {
                                var i = this.fragPrevious
                                  , n = this.level
                                  , a = r.fragments
                                  , o = a.length;
                                if (0 !== o) {
                                    var s, l = a[0].start, u = a[o - 1].start + a[o - 1].duration, c = t.end;
                                    if (r.initSegment && !r.initSegment.data)
                                        s = r.initSegment;
                                    else if (r.live) {
                                        var d = this.config.initialLiveManifestSize;
                                        if (o < d)
                                            return void v.logger.warn("Can not start playback of a level, reason: not enough fragments " + o + " < " + d);
                                        if (null === (s = this._ensureFragmentAtLivePoint(r, c, l, u, i, a, o)))
                                            return
                                    } else
                                        c < l && (s = a[0]);
                                    s || (s = this._findFragment(l, i, o, a, c, u, r)),
                                    s && (s.encrypted ? (v.logger.log("Loading key for " + s.sn + " of [" + r.startSN + " ," + r.endSN + "],level " + n),
                                    this._loadKey(s)) : (v.logger.log("Loading " + s.sn + " of [" + r.startSN + " ," + r.endSN + "],level " + n + ", currentTime:" + e.toFixed(3) + ",bufferEnd:" + c.toFixed(3)),
                                    this._loadFragment(s)))
                                }
                            }
                            ,
                            e.prototype._ensureFragmentAtLivePoint = function(e, t, r, i, n, a, o) {
                                var s, l = this.hls.config, u = this.media;
                                if (t < Math.max(r - l.maxFragLookUpTolerance, i - (void 0 !== l.liveMaxLatencyDuration ? l.liveMaxLatencyDuration : l.liveMaxLatencyDurationCount * e.targetduration))) {
                                    var c = this.liveSyncPosition = this.computeLivePosition(r, e);
                                    v.logger.log("buffer end: " + t.toFixed(3) + " is located too far from the end of live sliding playlist, reset currentTime to : " + c.toFixed(3)),
                                    t = c,
                                    u && u.readyState && c < u.duration && (u.currentTime = c),
                                    this.nextLoadPosition = c
                                }
                                if (e.PTSKnown && i < t && u && u.readyState)
                                    return null;
                                if (this.startFragRequested && !e.PTSKnown) {
                                    if (n)
                                        if (e.hasProgramDateTime)
                                            v.logger.log("live playlist, switching playlist, load frag with same PDT: " + n.programDateTime),
                                            s = m.findFragmentByPDT(a, n.endProgramDateTime, l.maxFragLookUpTolerance);
                                        else {
                                            var d = n.sn + 1;
                                            if (e.startSN <= d && d <= e.endSN) {
                                                var f = a[d - e.startSN];
                                                n.cc === f.cc && v.logger.log("live playlist, switching playlist, load frag with next SN: " + (s = f).sn)
                                            }
                                            s || (s = h.default.search(a, function(e) {
                                                return n.cc - e.cc
                                            })) && v.logger.log("live playlist, switching playlist, load frag with same CC: " + s.sn)
                                        }
                                    s || v.logger.log("live playlist, switching playlist, unknown, load middle frag : " + (s = a[Math.min(o - 1, Math.round(o / 2))]).sn)
                                }
                                return s
                            }
                            ,
                            e.prototype._findFragment = function(e, t, r, i, n, a, o) {
                                var s, l = this.hls.config;
                                n < a ? s = m.findFragmentByPTS(t, i, n, a - l.maxFragLookUpTolerance < n ? 0 : l.maxFragLookUpTolerance) : s = i[r - 1];
                                if (s) {
                                    var u = s.sn - o.startSN
                                      , c = i[u - 1]
                                      , d = i[u + 1];
                                    if (t && s.sn === t.sn)
                                        if (t && s.level === t.level && !s.backtracked)
                                            if (s.sn < o.endSN) {
                                                var f = t.deltaPTS;
                                                f && l.maxBufferHole < f && t.dropped && u ? (s = c,
                                                v.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")) : v.logger.log("SN just loaded, load next one: " + (s = d).sn, s)
                                            } else
                                                s = null;
                                        else
                                            s.backtracked && (d && d.backtracked ? (v.logger.warn("Already backtracked from fragment " + d.sn + ", will not backtrack to fragment " + s.sn + ". Loading fragment " + d.sn),
                                            s = d) : (v.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),
                                            s.dropped = 0,
                                            c ? (s = c).backtracked = !0 : u && (s = null)))
                                }
                                return s
                            }
                            ,
                            e.prototype._loadKey = function(e) {
                                this.state = _.State.KEY_LOADING,
                                this.hls.trigger(p.default.KEY_LOADING, {
                                    frag: e
                                })
                            }
                            ,
                            e.prototype._loadFragment = function(e) {
                                var t = this.fragmentTracker.getState(e);
                                this.fragCurrent = e,
                                this.startFragRequested = !0,
                                u.isFinite(e.sn) && !e.bitrateTest && (this.nextLoadPosition = e.start + e.duration),
                                e.backtracked || t === r.FragmentState.NOT_LOADED || t === r.FragmentState.PARTIAL ? (e.autoLevel = this.hls.autoLevelEnabled,
                                e.bitrateTest = this.bitrateTest,
                                this.hls.trigger(p.default.FRAG_LOADING, {
                                    frag: e
                                }),
                                this.demuxer || (this.demuxer = new d.default(this.hls,"main")),
                                this.state = _.State.FRAG_LOADING) : t === r.FragmentState.APPENDING && this._reduceMaxBufferLength(e.duration) && this.fragmentTracker.removeFragment(e)
                            }
                            ,
                            Object.defineProperty(e.prototype, "state", {
                                get: function() {
                                    return this._state
                                },
                                set: function(e) {
                                    if (this.state !== e) {
                                        var t = this.state;
                                        v.logger.log("main stream:" + t + "->" + (this._state = e)),
                                        this.hls.trigger(p.default.STREAM_STATE_TRANSITION, {
                                            previousState: t,
                                            nextState: e
                                        })
                                    }
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            e.prototype.getBufferedFrag = function(e) {
                                return this.fragmentTracker.getBufferedFrag(e, n.default.LevelType.MAIN)
                            }
                            ,
                            Object.defineProperty(e.prototype, "currentLevel", {
                                get: function() {
                                    var e = this.media;
                                    if (e) {
                                        var t = this.getBufferedFrag(e.currentTime);
                                        if (t)
                                            return t.level
                                    }
                                    return -1
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(e.prototype, "nextBufferedFrag", {
                                get: function() {
                                    var e = this.media;
                                    return e ? this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)) : null
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            e.prototype.followingBufferedFrag = function(e) {
                                return e ? this.getBufferedFrag(e.endPTS + .5) : null
                            }
                            ,
                            Object.defineProperty(e.prototype, "nextLevel", {
                                get: function() {
                                    var e = this.nextBufferedFrag;
                                    return e ? e.level : -1
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            e.prototype._checkFragmentChanged = function() {
                                var e, t, r = this.media;
                                if (r && r.readyState && !1 === r.seeking && (this.lastCurrentTime < (t = r.currentTime) && (this.lastCurrentTime = t),
                                f.BufferHelper.isBuffered(r, t) ? e = this.getBufferedFrag(t) : f.BufferHelper.isBuffered(r, t + .1) && (e = this.getBufferedFrag(t + .1)),
                                e)) {
                                    var i = e;
                                    if (i !== this.fragPlaying) {
                                        this.hls.trigger(p.default.FRAG_CHANGED, {
                                            frag: i
                                        });
                                        var n = i.level;
                                        this.fragPlaying && this.fragPlaying.level === n || this.hls.trigger(p.default.LEVEL_SWITCHED, {
                                            level: n
                                        }),
                                        this.fragPlaying = i
                                    }
                                }
                            }
                            ,
                            e.prototype.immediateLevelSwitch = function() {
                                if (v.logger.log("immediateLevelSwitch"),
                                !this.immediateSwitch) {
                                    this.immediateSwitch = !0;
                                    var e = this.media
                                      , t = void 0;
                                    e ? (t = e.paused,
                                    e.pause()) : t = !0,
                                    this.previouslyPaused = t
                                }
                                var r = this.fragCurrent;
                                r && r.loader && r.loader.abort(),
                                this.fragCurrent = null,
                                this.flushMainBuffer(0, u.POSITIVE_INFINITY)
                            }
                            ,
                            e.prototype.immediateLevelSwitchEnd = function() {
                                var e = this.media;
                                e && e.buffered.length && (this.immediateSwitch = !1,
                                f.BufferHelper.isBuffered(e, e.currentTime) && (e.currentTime -= 1e-4),
                                this.previouslyPaused || e.play())
                            }
                            ,
                            e.prototype.nextLevelSwitch = function() {
                                var e = this.media;
                                if (e && e.readyState) {
                                    var t, r = void 0, i = void 0;
                                    if ((t = this.getBufferedFrag(e.currentTime)) && 1 < t.startPTS && this.flushMainBuffer(0, t.startPTS - 1),
                                    e.paused)
                                        r = 0;
                                    else {
                                        var n = this.fragLastKbps;
                                        r = n && this.fragCurrent ? this.fragCurrent.duration * this.levels[this.hls.nextLoadLevel].bitrate / (1e3 * n) + 1 : 0
                                    }
                                    if ((i = this.getBufferedFrag(e.currentTime + r)) && (i = this.followingBufferedFrag(i))) {
                                        var a = this.fragCurrent;
                                        a && a.loader && a.loader.abort(),
                                        this.fragCurrent = null,
                                        this.flushMainBuffer(i.maxStartPTS, u.POSITIVE_INFINITY)
                                    }
                                }
                            }
                            ,
                            e.prototype.flushMainBuffer = function(e, t) {
                                this.state = _.State.BUFFER_FLUSHING;
                                var r = {
                                    startOffset: e,
                                    endOffset: t
                                };
                                this.altAudio && (r.type = "video"),
                                this.hls.trigger(p.default.BUFFER_FLUSHING, r)
                            }
                            ,
                            e.prototype.onMediaAttached = function(e) {
                                var t = this.media = this.mediaBuffer = e.media;
                                this.onvseeking = this.onMediaSeeking.bind(this),
                                this.onvseeked = this.onMediaSeeked.bind(this),
                                this.onvended = this.onMediaEnded.bind(this),
                                t.addEventListener("seeking", this.onvseeking),
                                t.addEventListener("seeked", this.onvseeked),
                                t.addEventListener("ended", this.onvended);
                                var r = this.config;
                                this.levels && r.autoStartLoad && this.hls.startLoad(r.startPosition),
                                this.gapController = new s.default(r,t,this.fragmentTracker,this.hls)
                            }
                            ,
                            e.prototype.onMediaDetaching = function() {
                                var e = this.media;
                                e && e.ended && (v.logger.log("MSE detaching and video ended, reset startPosition"),
                                this.startPosition = this.lastCurrentTime = 0);
                                var t = this.levels;
                                t && t.forEach(function(e) {
                                    e.details && e.details.fragments.forEach(function(e) {
                                        e.backtracked = void 0
                                    })
                                }),
                                e && (e.removeEventListener("seeking", this.onvseeking),
                                e.removeEventListener("seeked", this.onvseeked),
                                e.removeEventListener("ended", this.onvended),
                                this.onvseeking = this.onvseeked = this.onvended = null),
                                this.media = this.mediaBuffer = null,
                                this.loadedmetadata = !1,
                                this.stopLoad()
                            }
                            ,
                            e.prototype.onMediaSeeked = function() {
                                var e = this.media
                                  , t = e ? e.currentTime : void 0;
                                u.isFinite(t) && v.logger.log("media seeked to " + t.toFixed(3)),
                                this.tick()
                            }
                            ,
                            e.prototype.onManifestLoading = function() {
                                v.logger.log("trigger BUFFER_RESET"),
                                this.hls.trigger(p.default.BUFFER_RESET),
                                this.fragmentTracker.removeAllFragments(),
                                this.stalled = !1,
                                this.startPosition = this.lastCurrentTime = 0
                            }
                            ,
                            e.prototype.onManifestParsed = function(e) {
                                var t, r = !1, i = !1;
                                e.levels.forEach(function(e) {
                                    (t = e.audioCodec) && (-1 != t.indexOf("mp4a.40.2") && (r = !0),
                                    -1 != t.indexOf("mp4a.40.5") && (i = !0))
                                }),
                                this.audioCodecSwitch = r && i,
                                this.audioCodecSwitch && v.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),
                                this.levels = e.levels,
                                this.startFragRequested = !1;
                                var n = this.config;
                                (n.autoStartLoad || this.forceStartLoad) && this.hls.startLoad(n.startPosition)
                            }
                            ,
                            e.prototype.onLevelLoaded = function(e) {
                                var t = e.details
                                  , r = e.level
                                  , i = this.levels[this.levelLastLoaded]
                                  , n = this.levels[r]
                                  , a = t.totalduration
                                  , o = 0;
                                if (v.logger.log("level " + r + " loaded [" + t.startSN + "," + t.endSN + "],duration:" + a),
                                t.live) {
                                    var s = n.details;
                                    s && 0 < t.fragments.length ? (g.mergeDetails(s, t),
                                    this.liveSyncPosition = this.computeLivePosition(o = t.fragments[0].start, s),
                                    t.PTSKnown && u.isFinite(o) ? v.logger.log("live playlist sliding:" + o.toFixed(3)) : (v.logger.log("live playlist - outdated PTS, unknown sliding"),
                                    y.alignStream(this.fragPrevious, i, t))) : (v.logger.log("live playlist - first load, unknown sliding"),
                                    t.PTSKnown = !1,
                                    y.alignStream(this.fragPrevious, i, t))
                                } else
                                    t.PTSKnown = !1;
                                if (n.details = t,
                                this.levelLastLoaded = r,
                                this.hls.trigger(p.default.LEVEL_UPDATED, {
                                    details: t,
                                    level: r
                                }),
                                !1 === this.startFragRequested) {
                                    if (-1 === this.startPosition || -1 === this.lastCurrentTime) {
                                        var l = t.startTimeOffset;
                                        u.isFinite(l) ? (l < 0 && (v.logger.log("negative start time offset " + l + ", count from end of last fragment"),
                                        l = o + a + l),
                                        v.logger.log("start time offset found in playlist, adjust startPosition to " + l),
                                        this.startPosition = l) : t.live ? (this.startPosition = this.computeLivePosition(o, t),
                                        v.logger.log("configure startPosition to " + this.startPosition)) : this.startPosition = 0,
                                        this.lastCurrentTime = this.startPosition
                                    }
                                    this.nextLoadPosition = this.startPosition
                                }
                                this.state === _.State.WAITING_LEVEL && (this.state = _.State.IDLE),
                                this.tick()
                            }
                            ,
                            e.prototype.onKeyLoaded = function() {
                                this.state === _.State.KEY_LOADING && (this.state = _.State.IDLE,
                                this.tick())
                            }
                            ,
                            e.prototype.onFragLoaded = function(e) {
                                var t = this.fragCurrent
                                  , r = this.hls
                                  , i = this.media
                                  , n = e.frag;
                                if (this.state === _.State.FRAG_LOADING && t && "main" === n.type && n.level === t.level && n.sn === t.sn) {
                                    var a = e.stats
                                      , o = this.levels[t.level]
                                      , s = o.details;
                                    if (this.bitrateTest = !1,
                                    this.stats = a,
                                    v.logger.log("Loaded " + t.sn + " of [" + s.startSN + " ," + s.endSN + "],level " + t.level),
                                    n.bitrateTest && r.nextLoadLevel)
                                        this.state = _.State.IDLE,
                                        this.startFragRequested = !1,
                                        a.tparsed = a.tbuffered = window.performance.now(),
                                        r.trigger(p.default.FRAG_BUFFERED, {
                                            stats: a,
                                            frag: t,
                                            id: "main"
                                        }),
                                        this.tick();
                                    else if ("initSegment" === n.sn)
                                        this.state = _.State.IDLE,
                                        a.tparsed = a.tbuffered = window.performance.now(),
                                        s.initSegment.data = e.payload,
                                        r.trigger(p.default.FRAG_BUFFERED, {
                                            stats: a,
                                            frag: t,
                                            id: "main"
                                        }),
                                        this.tick();
                                    else {
                                        v.logger.log("Parsing " + t.sn + " of [" + s.startSN + " ," + s.endSN + "],level " + t.level + ", cc " + t.cc),
                                        this.state = _.State.PARSING,
                                        this.pendingBuffering = !0,
                                        this.appended = !1,
                                        n.bitrateTest && (n.bitrateTest = !1,
                                        this.fragmentTracker.onFragLoaded({
                                            frag: n
                                        }));
                                        var l = !(i && i.seeking) && (s.PTSKnown || !s.live)
                                          , u = s.initSegment ? s.initSegment.data : []
                                          , c = this._getAudioCodec(o);
                                        (this.demuxer = this.demuxer || new d.default(this.hls,"main")).push(e.payload, u, c, o.videoCodec, t, s.totalduration, l)
                                    }
                                }
                                this.fragLoadError = 0
                            }
                            ,
                            e.prototype.onFragParsingInitSegment = function(e) {
                                var t = this.fragCurrent
                                  , r = e.frag;
                                if (t && "main" === e.id && r.sn === t.sn && r.level === t.level && this.state === _.State.PARSING) {
                                    var i = e.tracks
                                      , n = void 0
                                      , a = void 0;
                                    if (i.audio && this.altAudio && delete i.audio,
                                    a = i.audio) {
                                        var o = this.levels[this.level].audioCodec
                                          , s = navigator.userAgent.toLowerCase();
                                        o && this.audioCodecSwap && (v.logger.log("swapping playlist audio codec"),
                                        o = -1 != o.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"),
                                        this.audioCodecSwitch && 1 !== a.metadata.channelCount && -1 == s.indexOf("firefox") && (o = "mp4a.40.5"),
                                        -1 != s.indexOf("android") && "audio/mpeg" !== a.container && v.logger.log("Android: force audio codec to " + (o = "mp4a.40.2")),
                                        a.levelCodec = o,
                                        a.id = e.id
                                    }
                                    for (n in (a = i.video) && (a.levelCodec = this.levels[this.level].videoCodec,
                                    a.id = e.id),
                                    this.hls.trigger(p.default.BUFFER_CODECS, i),
                                    i) {
                                        v.logger.log("main track:" + n + ",container:" + (a = i[n]).container + ",codecs[level/parsed]=[" + a.levelCodec + "/" + a.codec + "]");
                                        var l = a.initSegment;
                                        l && (this.appended = !0,
                                        this.pendingBuffering = !0,
                                        this.hls.trigger(p.default.BUFFER_APPENDING, {
                                            type: n,
                                            data: l,
                                            parent: "main",
                                            content: "initSegment"
                                        }))
                                    }
                                    this.tick()
                                }
                            }
                            ,
                            e.prototype.onFragParsingData = function(t) {
                                var r = this
                                  , e = this.fragCurrent
                                  , i = t.frag;
                                if (e && "main" === t.id && i.sn === e.sn && i.level === e.level && ("audio" !== t.type || !this.altAudio) && this.state === _.State.PARSING) {
                                    var n = this.levels[this.level]
                                      , a = e;
                                    if (u.isFinite(t.endPTS) || (t.endPTS = t.startPTS + e.duration,
                                    t.endDTS = t.startDTS + e.duration),
                                    !0 === t.hasAudio && a.addElementaryStream(c.default.ElementaryStreamTypes.AUDIO),
                                    !0 === t.hasVideo && a.addElementaryStream(c.default.ElementaryStreamTypes.VIDEO),
                                    v.logger.log("Parsed " + t.type + ",PTS:[" + t.startPTS.toFixed(3) + "," + t.endPTS.toFixed(3) + "],DTS:[" + t.startDTS.toFixed(3) + "/" + t.endDTS.toFixed(3) + "],nb:" + t.nb + ",dropped:" + (t.dropped || 0)),
                                    "video" === t.type)
                                        if (a.dropped = t.dropped,
                                        a.dropped)
                                            if (a.backtracked)
                                                v.logger.warn("Already backtracked on this fragment, appending with the gap", a.sn);
                                            else {
                                                var o = n.details;
                                                if (!o || a.sn !== o.startSN)
                                                    return v.logger.warn("missing video frame(s), backtracking fragment", a.sn),
                                                    this.fragmentTracker.removeFragment(a),
                                                    a.backtracked = !0,
                                                    this.nextLoadPosition = t.startPTS,
                                                    this.state = _.State.IDLE,
                                                    this.fragPrevious = a,
                                                    void this.tick();
                                                v.logger.warn("missing video frame(s) on first frag, appending with gap", a.sn)
                                            }
                                        else
                                            a.backtracked = !1;
                                    var s = g.updateFragPTSDTS(n.details, a, t.startPTS, t.endPTS, t.startDTS, t.endDTS)
                                      , l = this.hls;
                                    l.trigger(p.default.LEVEL_PTS_UPDATED, {
                                        details: n.details,
                                        level: this.level,
                                        drift: s,
                                        type: t.type,
                                        start: t.startPTS,
                                        end: t.endPTS
                                    }),
                                    [t.data1, t.data2].forEach(function(e) {
                                        e && e.length && r.state === _.State.PARSING && (r.appended = !0,
                                        r.pendingBuffering = !0,
                                        l.trigger(p.default.BUFFER_APPENDING, {
                                            type: t.type,
                                            data: e,
                                            parent: "main",
                                            content: "data"
                                        }))
                                    }),
                                    this.tick()
                                }
                            }
                            ,
                            e.prototype.onFragParsed = function(e) {
                                var t = this.fragCurrent
                                  , r = e.frag;
                                t && "main" === e.id && r.sn === t.sn && r.level === t.level && this.state === _.State.PARSING && (this.stats.tparsed = window.performance.now(),
                                this.state = _.State.PARSED,
                                this._checkAppendedParsed())
                            }
                            ,
                            e.prototype.onAudioTrackSwitching = function(e) {
                                var t = e.id;
                                if (!!!e.url) {
                                    if (this.mediaBuffer !== this.media) {
                                        v.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),
                                        this.mediaBuffer = this.media;
                                        var r = this.fragCurrent;
                                        r.loader && (v.logger.log("switching to main audio track, cancel main fragment load"),
                                        r.loader.abort()),
                                        this.fragCurrent = null,
                                        this.fragPrevious = null,
                                        this.demuxer && (this.demuxer.destroy(),
                                        this.demuxer = null),
                                        this.state = _.State.IDLE
                                    }
                                    var i = this.hls;
                                    i.trigger(p.default.BUFFER_FLUSHING, {
                                        startOffset: 0,
                                        endOffset: u.POSITIVE_INFINITY,
                                        type: "audio"
                                    }),
                                    i.trigger(p.default.AUDIO_TRACK_SWITCHED, {
                                        id: t
                                    }),
                                    this.altAudio = !1
                                }
                            }
                            ,
                            e.prototype.onAudioTrackSwitched = function(e) {
                                var t = !!this.hls.audioTracks[e.id].url;
                                if (t) {
                                    var r = this.videoBuffer;
                                    r && this.mediaBuffer !== r && (v.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),
                                    this.mediaBuffer = r)
                                }
                                this.altAudio = t,
                                this.tick()
                            }
                            ,
                            e.prototype.onBufferCreated = function(e) {
                                var t, r, i = e.tracks, n = !1;
                                for (var a in i) {
                                    var o = i[a];
                                    "main" === o.id ? (t = o,
                                    "video" === (r = a) && (this.videoBuffer = i[a].buffer)) : n = !0
                                }
                                this.mediaBuffer = n && t ? (v.logger.log("alternate track found, use " + r + ".buffered to schedule main fragment loading"),
                                t.buffer) : this.media
                            }
                            ,
                            e.prototype.onBufferAppended = function(e) {
                                if ("main" === e.parent) {
                                    var t = this.state;
                                    t !== _.State.PARSING && t !== _.State.PARSED || (this.pendingBuffering = 0 < e.pending,
                                    this._checkAppendedParsed())
                                }
                            }
                            ,
                            e.prototype._checkAppendedParsed = function() {
                                if (!(this.state !== _.State.PARSED || this.appended && this.pendingBuffering)) {
                                    var e = this.fragCurrent;
                                    if (e) {
                                        v.logger.log("main buffered : " + a.default.toString((this.mediaBuffer ? this.mediaBuffer : this.media).buffered)),
                                        this.fragPrevious = e;
                                        var t = this.stats;
                                        t.tbuffered = window.performance.now(),
                                        this.fragLastKbps = Math.round(8 * t.total / (t.tbuffered - t.tfirst)),
                                        this.hls.trigger(p.default.FRAG_BUFFERED, {
                                            stats: t,
                                            frag: e,
                                            id: "main"
                                        }),
                                        this.state = _.State.IDLE
                                    }
                                    this.tick()
                                }
                            }
                            ,
                            e.prototype.onError = function(e) {
                                var t = e.frag || this.fragCurrent;
                                if (!t || "main" === t.type) {
                                    var r = !!this.media && f.BufferHelper.isBuffered(this.media, this.media.currentTime) && f.BufferHelper.isBuffered(this.media, this.media.currentTime + .5);
                                    switch (e.details) {
                                    case o.ErrorDetails.FRAG_LOAD_ERROR:
                                    case o.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                    case o.ErrorDetails.KEY_LOAD_ERROR:
                                    case o.ErrorDetails.KEY_LOAD_TIMEOUT:
                                        if (!e.fatal)
                                            if (this.fragLoadError + 1 <= this.config.fragLoadingMaxRetry) {
                                                var i = Math.min(Math.pow(2, this.fragLoadError) * this.config.fragLoadingRetryDelay, this.config.fragLoadingMaxRetryTimeout);
                                                v.logger.warn("mediaController: frag loading failed, retry in " + i + " ms"),
                                                this.retryDate = window.performance.now() + i,
                                                this.loadedmetadata || (this.startFragRequested = !1,
                                                this.nextLoadPosition = this.startPosition),
                                                this.fragLoadError++,
                                                this.state = _.State.FRAG_LOADING_WAITING_RETRY
                                            } else
                                                v.logger.error("mediaController: " + e.details + " reaches max retry, redispatch as fatal ..."),
                                                e.fatal = !0,
                                                this.state = _.State.ERROR;
                                        break;
                                    case o.ErrorDetails.LEVEL_LOAD_ERROR:
                                    case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:
                                        this.state !== _.State.ERROR && (e.fatal ? (this.state = _.State.ERROR,
                                        v.logger.warn("streamController: " + e.details + ",switch to " + this.state + " state ...")) : e.levelRetry || this.state !== _.State.WAITING_LEVEL || (this.state = _.State.IDLE));
                                        break;
                                    case o.ErrorDetails.BUFFER_FULL_ERROR:
                                        "main" !== e.parent || this.state !== _.State.PARSING && this.state !== _.State.PARSED || (r ? (this._reduceMaxBufferLength(this.config.maxBufferLength),
                                        this.state = _.State.IDLE) : (v.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),
                                        this.fragCurrent = null,
                                        this.flushMainBuffer(0, u.POSITIVE_INFINITY)))
                                    }
                                }
                            }
                            ,
                            e.prototype._reduceMaxBufferLength = function(e) {
                                var t = this.config;
                                return e <= t.maxMaxBufferLength && (t.maxMaxBufferLength /= 2,
                                v.logger.warn("main:reduce max buffer length to " + t.maxMaxBufferLength + "s"),
                                !0)
                            }
                            ,
                            e.prototype._checkBuffer = function() {
                                var e = this.media;
                                if (e && 0 !== e.readyState) {
                                    var t = (this.mediaBuffer ? this.mediaBuffer : e).buffered;
                                    !this.loadedmetadata && t.length ? (this.loadedmetadata = !0,
                                    this._seekToStartPos()) : this.immediateSwitch ? this.immediateLevelSwitchEnd() : this.gapController.poll(this.lastCurrentTime, t)
                                }
                            }
                            ,
                            e.prototype.onFragLoadEmergencyAborted = function() {
                                this.state = _.State.IDLE,
                                this.loadedmetadata || (this.startFragRequested = !1,
                                this.nextLoadPosition = this.startPosition),
                                this.tick()
                            }
                            ,
                            e.prototype.onBufferFlushed = function() {
                                var e = this.mediaBuffer ? this.mediaBuffer : this.media;
                                e && this.fragmentTracker.detectEvictedFragments(c.default.ElementaryStreamTypes.VIDEO, e.buffered),
                                this.state = _.State.IDLE,
                                this.fragPrevious = null
                            }
                            ,
                            e.prototype.swapAudioCodec = function() {
                                this.audioCodecSwap = !this.audioCodecSwap
                            }
                            ,
                            e.prototype.computeLivePosition = function(e, t) {
                                return e + Math.max(0, t.totalduration - (void 0 !== this.config.liveSyncDuration ? this.config.liveSyncDuration : this.config.liveSyncDurationCount * t.targetduration))
                            }
                            ,
                            e.prototype._seekToStartPos = function() {
                                var e = this.media
                                  , t = e.currentTime
                                  , r = e.seeking ? t : this.startPosition;
                                t !== r && (v.logger.log("target start position not buffered, seek to buffered.start(0) " + r + " from current time " + t + " "),
                                e.currentTime = r)
                            }
                            ,
                            e.prototype._getAudioCodec = function(e) {
                                var t = this.config.defaultAudioCodec || e.audioCodec;
                                return this.audioCodecSwap && (v.logger.log("swapping playlist audio codec"),
                                t && (t = -1 != t.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5")),
                                t
                            }
                            ,
                            Object.defineProperty(e.prototype, "liveSyncPosition", {
                                get: function() {
                                    return this._liveSyncPosition
                                },
                                set: function(e) {
                                    this._liveSyncPosition = e
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            e
                        }(_.default);
                        l.default = e
                    }
                    ).call(this, T("./src/polyfills/number.js").Number)
                },
                "./src/controller/subtitle-stream-controller.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var g = r("./src/events.js")
                      , v = r("./src/utils/logger.js")
                      , a = r("./src/crypt/decrypter.js")
                      , y = r("./src/utils/buffer-helper.js")
                      , m = r("./src/controller/fragment-finders.js")
                      , _ = r("./src/controller/fragment-tracker.js")
                      , T = r("./src/controller/base-stream-controller.js")
                      , o = r("./src/controller/level-helper.js")
                      , s = window.performance
                      , l = function(i) {
                        function e(e, t) {
                            var r = i.call(this, e, g.default.MEDIA_ATTACHED, g.default.MEDIA_DETACHING, g.default.ERROR, g.default.KEY_LOADED, g.default.FRAG_LOADED, g.default.SUBTITLE_TRACKS_UPDATED, g.default.SUBTITLE_TRACK_SWITCH, g.default.SUBTITLE_TRACK_LOADED, g.default.SUBTITLE_FRAG_PROCESSED, g.default.LEVEL_UPDATED) || this;
                            return r.fragmentTracker = t,
                            r.config = e.config,
                            r.state = T.State.STOPPED,
                            r.tracks = [],
                            r.tracksBuffered = [],
                            r.currentTrackId = -1,
                            r.decrypter = new a.default(e,e.config),
                            r.lastAVStart = 0,
                            r._onMediaSeeking = r.onMediaSeeking.bind(r),
                            r
                        }
                        return n(e, i),
                        e.prototype.onSubtitleFragProcessed = function(e) {
                            var t = e.frag
                              , r = e.success;
                            if (this.fragPrevious = t,
                            this.state = T.State.IDLE,
                            r) {
                                var i = this.tracksBuffered[this.currentTrackId];
                                if (i) {
                                    for (var n, a = t.start, o = 0; o < i.length; o++)
                                        if (i[o].start <= a && a <= i[o].end) {
                                            n = i[o];
                                            break
                                        }
                                    var s = t.start + t.duration;
                                    n ? n.end = s : i.push(n = {
                                        start: a,
                                        end: s
                                    })
                                }
                            }
                        }
                        ,
                        e.prototype.onMediaAttached = function(e) {
                            var t = e.media;
                            (this.media = t).addEventListener("seeking", this._onMediaSeeking),
                            this.state = T.State.IDLE
                        }
                        ,
                        e.prototype.onMediaDetaching = function() {
                            this.media.removeEventListener("seeking", this._onMediaSeeking),
                            this.media = null,
                            this.state = T.State.STOPPED
                        }
                        ,
                        e.prototype.onError = function(e) {
                            var t = e.frag;
                            t && "subtitle" === t.type && (this.state = T.State.IDLE)
                        }
                        ,
                        e.prototype.onSubtitleTracksUpdated = function(e) {
                            var t = this;
                            v.logger.log("subtitle tracks updated"),
                            this.tracksBuffered = [],
                            this.tracks = e.subtitleTracks,
                            this.tracks.forEach(function(e) {
                                t.tracksBuffered[e.id] = []
                            })
                        }
                        ,
                        e.prototype.onSubtitleTrackSwitch = function(e) {
                            if (this.currentTrackId = e.id,
                            this.tracks && -1 !== this.currentTrackId) {
                                var t = this.tracks[this.currentTrackId];
                                t && t.details && this.setInterval(500)
                            } else
                                this.clearInterval()
                        }
                        ,
                        e.prototype.onSubtitleTrackLoaded = function(e) {
                            var t = e.id
                              , r = e.details
                              , i = this.currentTrackId
                              , n = this.tracks
                              , a = n[i];
                            n.length <= t || t !== i || !a || (r.live && o.mergeSubtitlePlaylists(a.details, r, this.lastAVStart),
                            a.details = r,
                            this.setInterval(500))
                        }
                        ,
                        e.prototype.onKeyLoaded = function() {
                            this.state === T.State.KEY_LOADING && (this.state = T.State.IDLE)
                        }
                        ,
                        e.prototype.onFragLoaded = function(e) {
                            var t = this.fragCurrent
                              , r = e.frag.decryptdata
                              , i = e.frag
                              , n = this.hls;
                            if (this.state === T.State.FRAG_LOADING && t && "subtitle" === e.frag.type && t.sn === e.frag.sn && 0 < e.payload.byteLength && r && r.key && "AES-128" === r.method) {
                                var a = s.now();
                                this.decrypter.decrypt(e.payload, r.key.buffer, r.iv.buffer, function(e) {
                                    var t = s.now();
                                    n.trigger(g.default.FRAG_DECRYPTED, {
                                        frag: i,
                                        payload: e,
                                        stats: {
                                            tstart: a,
                                            tdecrypt: t
                                        }
                                    })
                                })
                            }
                        }
                        ,
                        e.prototype.onLevelUpdated = function(e) {
                            var t = e.details.fragments;
                            this.lastAVStart = t.length ? t[0].start : 0
                        }
                        ,
                        e.prototype.doTick = function() {
                            if (this.media)
                                switch (this.state) {
                                case T.State.IDLE:
                                    var e = this.config
                                      , t = this.currentTrackId
                                      , r = this.fragmentTracker
                                      , i = this.media
                                      , n = this.tracks;
                                    if (!n || !n[t] || !n[t].details)
                                        break;
                                    var a = e.maxBufferHole
                                      , o = e.maxFragLookUpTolerance
                                      , s = Math.min(e.maxBufferLength, e.maxMaxBufferLength)
                                      , l = y.BufferHelper.bufferedInfo(this._getBuffered(), i.currentTime, a)
                                      , u = l.end
                                      , c = n[t].details
                                      , d = c.fragments
                                      , f = d.length;
                                    if (s < l.len)
                                        return;
                                    var h = void 0
                                      , p = this.fragPrevious;
                                    u < d[f - 1].start + d[f - 1].duration ? (p && c.hasProgramDateTime && (h = m.findFragmentByPDT(d, p.endProgramDateTime, o)),
                                    h || (h = m.findFragmentByPTS(p, d, u, o))) : h = d[f - 1],
                                    h && h.encrypted ? (v.logger.log("Loading key for " + h.sn),
                                    this.state = T.State.KEY_LOADING,
                                    this.hls.trigger(g.default.KEY_LOADING, {
                                        frag: h
                                    })) : h && r.getState(h) === _.FragmentState.NOT_LOADED && (this.fragCurrent = h,
                                    this.state = T.State.FRAG_LOADING,
                                    this.hls.trigger(g.default.FRAG_LOADING, {
                                        frag: h
                                    }))
                                }
                            else
                                this.state = T.State.IDLE
                        }
                        ,
                        e.prototype.stopLoad = function() {
                            this.lastAVStart = 0,
                            i.prototype.stopLoad.call(this)
                        }
                        ,
                        e.prototype._getBuffered = function() {
                            return this.tracksBuffered[this.currentTrackId] || []
                        }
                        ,
                        e.prototype.onMediaSeeking = function() {
                            this.fragPrevious = null
                        }
                        ,
                        e
                    }(T.default);
                    t.SubtitleStreamController = l
                },
                "./src/controller/subtitle-track-controller.js": function(e, r, c) {
                    (function(i) {
                        var n, t = this && this.__extends || (n = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            n(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(r, "__esModule", {
                            value: !0
                        });
                        var a = c("./src/events.js")
                          , o = c("./src/event-handler.js")
                          , l = c("./src/utils/logger.js")
                          , u = c("./src/controller/level-helper.js")
                          , e = function(r) {
                            function e(e) {
                                var t = r.call(this, e, a.default.MEDIA_ATTACHED, a.default.MEDIA_DETACHING, a.default.MANIFEST_LOADED, a.default.SUBTITLE_TRACK_LOADED) || this;
                                return t.tracks = [],
                                t.trackId = -1,
                                t.media = null,
                                t.stopped = !0,
                                t.subtitleDisplay = !0,
                                t
                            }
                            return t(e, r),
                            e.prototype.destroy = function() {
                                o.default.prototype.destroy.call(this)
                            }
                            ,
                            e.prototype.onMediaAttached = function(e) {
                                var t = this;
                                this.media = e.media,
                                this.media && (this.queuedDefaultTrack && (this.subtitleTrack = this.queuedDefaultTrack,
                                delete this.queuedDefaultTrack),
                                this.trackChangeListener = this._onTextTracksChanged.bind(this),
                                this.useTextTrackPolling = !(this.media.textTracks && "onchange"in this.media.textTracks),
                                this.useTextTrackPolling ? this.subtitlePollingInterval = setInterval(function() {
                                    t.trackChangeListener()
                                }, 500) : this.media.textTracks.addEventListener("change", this.trackChangeListener))
                            }
                            ,
                            e.prototype.onMediaDetaching = function() {
                                this.media && (this.useTextTrackPolling ? clearInterval(this.subtitlePollingInterval) : this.media.textTracks.removeEventListener("change", this.trackChangeListener),
                                this.media = null)
                            }
                            ,
                            e.prototype.onManifestLoaded = function(e) {
                                var t = this
                                  , r = e.subtitles || [];
                                this.tracks = r,
                                this.hls.trigger(a.default.SUBTITLE_TRACKS_UPDATED, {
                                    subtitleTracks: r
                                }),
                                r.forEach(function(e) {
                                    e.default && (t.media ? t.subtitleTrack = e.id : t.queuedDefaultTrack = e.id)
                                })
                            }
                            ,
                            e.prototype.onSubtitleTrackLoaded = function(e) {
                                var t = this
                                  , r = e.id
                                  , i = e.details
                                  , n = this.trackId
                                  , a = this.tracks
                                  , o = a[n];
                                if (a.length <= r || r !== n || !o || this.stopped)
                                    this._clearReloadTimer();
                                else if (l.logger.log("subtitle track " + r + " loaded"),
                                i.live) {
                                    var s = u.computeReloadInterval(o.details, i, e.stats.trequest);
                                    l.logger.log("Reloading live subtitle playlist in " + s + "ms"),
                                    this.timer = setTimeout(function() {
                                        t._loadCurrentTrack()
                                    }, s)
                                } else
                                    this._clearReloadTimer()
                            }
                            ,
                            e.prototype.startLoad = function() {
                                this.stopped = !1,
                                this._loadCurrentTrack()
                            }
                            ,
                            e.prototype.stopLoad = function() {
                                this.stopped = !0,
                                this._clearReloadTimer()
                            }
                            ,
                            Object.defineProperty(e.prototype, "subtitleTracks", {
                                get: function() {
                                    return this.tracks
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(e.prototype, "subtitleTrack", {
                                get: function() {
                                    return this.trackId
                                },
                                set: function(e) {
                                    this.trackId !== e && (this._toggleTrackModes(e),
                                    this._setSubtitleTrackInternal(e))
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            e.prototype._clearReloadTimer = function() {
                                this.timer && (clearTimeout(this.timer),
                                this.timer = null)
                            }
                            ,
                            e.prototype._loadCurrentTrack = function() {
                                var e = this.trackId
                                  , t = this.hls
                                  , r = this.tracks[e];
                                e < 0 || !r || r.details && !r.details.live || (l.logger.log("Loading subtitle track " + e),
                                t.trigger(a.default.SUBTITLE_TRACK_LOADING, {
                                    url: r.url,
                                    id: e
                                }))
                            }
                            ,
                            e.prototype._toggleTrackModes = function(e) {
                                var t = this.media
                                  , r = this.subtitleDisplay
                                  , i = this.trackId;
                                if (t) {
                                    var n = s(t.textTracks);
                                    if (-1 === e)
                                        [].slice.call(n).forEach(function(e) {
                                            e.mode = "disabled"
                                        });
                                    else {
                                        var a = n[i];
                                        a && (a.mode = "disabled")
                                    }
                                    var o = n[e];
                                    o && (o.mode = r ? "showing" : "hidden")
                                }
                            }
                            ,
                            e.prototype._setSubtitleTrackInternal = function(e) {
                                var t = this.hls
                                  , r = this.tracks;
                                !i.isFinite(e) || e < -1 || r.length <= e || (l.logger.log("Switching to subtitle track " + (this.trackId = e)),
                                t.trigger(a.default.SUBTITLE_TRACK_SWITCH, {
                                    id: e
                                }),
                                this._loadCurrentTrack())
                            }
                            ,
                            e.prototype._onTextTracksChanged = function() {
                                if (this.media) {
                                    for (var e = -1, t = s(this.media.textTracks), r = 0; r < t.length; r++)
                                        if ("hidden" === t[r].mode)
                                            e = r;
                                        else if ("showing" === t[r].mode) {
                                            e = r;
                                            break
                                        }
                                    this.subtitleTrack = e
                                }
                            }
                            ,
                            e
                        }(o.default);
                        function s(e) {
                            for (var t = [], r = 0; r < e.length; r++) {
                                var i = e[r];
                                "subtitles" === i.kind && i.label && t.push(e[r])
                            }
                            return t
                        }
                        r.default = e
                    }
                    ).call(this, c("./src/polyfills/number.js").Number)
                },
                "./src/controller/timeline-controller.js": function(e, n, f) {
                    (function(o) {
                        var i, t = this && this.__extends || (i = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            i(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(n, "__esModule", {
                            value: !0
                        });
                        var s = f("./src/events.js")
                          , r = f("./src/event-handler.js")
                          , a = f("./src/utils/cea-608-parser.js")
                          , l = f("./src/utils/output-filter.js")
                          , u = f("./src/utils/webvtt-parser.js")
                          , c = f("./src/utils/logger.js")
                          , d = f("./src/utils/texttrack-utils.js");
                        var e = function(n) {
                            function e(e) {
                                var t = n.call(this, e, s.default.MEDIA_ATTACHING, s.default.MEDIA_DETACHING, s.default.FRAG_PARSING_USERDATA, s.default.FRAG_DECRYPTED, s.default.MANIFEST_LOADING, s.default.MANIFEST_LOADED, s.default.FRAG_LOADED, s.default.LEVEL_SWITCHING, s.default.INIT_PTS_FOUND) || this;
                                if (t.hls = e,
                                t.config = e.config,
                                t.enabled = !0,
                                t.Cues = e.config.cueHandler,
                                t.textTracks = [],
                                t.tracks = [],
                                t.unparsedVttFrags = [],
                                t.initPTS = [],
                                t.cueRanges = [],
                                t.captionsTracks = {},
                                t.captionsProperties = {
                                    textTrack1: {
                                        label: t.config.captionsTextTrack1Label,
                                        languageCode: t.config.captionsTextTrack1LanguageCode
                                    },
                                    textTrack2: {
                                        label: t.config.captionsTextTrack2Label,
                                        languageCode: t.config.captionsTextTrack2LanguageCode
                                    }
                                },
                                t.config.enableCEA708Captions) {
                                    var r = new l.default(t,"textTrack1")
                                      , i = new l.default(t,"textTrack2");
                                    t.cea608Parser = new a.default(0,r,i)
                                }
                                return t
                            }
                            return t(e, n),
                            e.prototype.addCues = function(e, t, r, i) {
                                for (var n, a, o = this.cueRanges, s = !1, l = o.length; l--; ) {
                                    var u = o[l]
                                      , c = (n = u[0],
                                    a = t,
                                    Math.min(u[1], r) - Math.max(n, a));
                                    if (0 <= c && (u[0] = Math.min(u[0], t),
                                    u[1] = Math.max(u[1], r),
                                    s = !0,
                                    .5 < c / (r - t)))
                                        return
                                }
                                s || o.push([t, r]),
                                this.Cues.newCue(this.captionsTracks[e], t, r, i)
                            }
                            ,
                            e.prototype.onInitPtsFound = function(e) {
                                var t = this;
                                if ("main" === e.id && (this.initPTS[e.frag.cc] = e.initPTS),
                                this.unparsedVttFrags.length) {
                                    var r = this.unparsedVttFrags;
                                    this.unparsedVttFrags = [],
                                    r.forEach(function(e) {
                                        t.onFragLoaded(e)
                                    })
                                }
                            }
                            ,
                            e.prototype.getExistingTrack = function(e) {
                                var t = this.media;
                                if (t)
                                    for (var r = 0; r < t.textTracks.length; r++) {
                                        var i = t.textTracks[r];
                                        if (i[e])
                                            return i
                                    }
                                return null
                            }
                            ,
                            e.prototype.createCaptionsTrack = function(e) {
                                var t = this.captionsProperties[e]
                                  , r = t.label
                                  , i = t.languageCode
                                  , n = this.captionsTracks;
                                if (!n[e]) {
                                    var a = this.getExistingTrack(e);
                                    if (a)
                                        n[e] = a,
                                        d.clearCurrentCues(n[e]),
                                        d.sendAddTrackEvent(n[e], this.media);
                                    else {
                                        var o = this.createTextTrack("captions", r, i);
                                        o && (o[e] = !0,
                                        n[e] = o)
                                    }
                                }
                            }
                            ,
                            e.prototype.createTextTrack = function(e, t, r) {
                                var i = this.media;
                                if (i)
                                    return i.addTextTrack(e, t, r)
                            }
                            ,
                            e.prototype.destroy = function() {
                                r.default.prototype.destroy.call(this)
                            }
                            ,
                            e.prototype.onMediaAttaching = function(e) {
                                this.media = e.media,
                                this._cleanTracks()
                            }
                            ,
                            e.prototype.onMediaDetaching = function() {
                                var t = this.captionsTracks;
                                Object.keys(t).forEach(function(e) {
                                    d.clearCurrentCues(t[e]),
                                    delete t[e]
                                })
                            }
                            ,
                            e.prototype.onManifestLoading = function() {
                                this.lastSn = -1,
                                this.prevCC = -1,
                                this.vttCCs = {
                                    ccOffset: 0,
                                    presentationOffset: 0,
                                    0: {
                                        start: 0,
                                        prevCC: -1,
                                        new: !1
                                    }
                                },
                                this._cleanTracks()
                            }
                            ,
                            e.prototype._cleanTracks = function() {
                                var e = this.media;
                                if (e) {
                                    var t = e.textTracks;
                                    if (t)
                                        for (var r = 0; r < t.length; r++)
                                            d.clearCurrentCues(t[r])
                                }
                            }
                            ,
                            e.prototype.onManifestLoaded = function(e) {
                                var s = this;
                                if (this.textTracks = [],
                                this.unparsedVttFrags = this.unparsedVttFrags || [],
                                this.initPTS = [],
                                this.cueRanges = [],
                                this.config.enableWebVTT) {
                                    this.tracks = e.subtitles || [];
                                    var l = this.media ? this.media.textTracks : [];
                                    this.tracks.forEach(function(e, t) {
                                        var r, i, n;
                                        if (t < l.length) {
                                            for (var a = null, o = 0; o < l.length; o++)
                                                if (n = e,
                                                (i = l[o]) && i.label === n.name && !i.textTrack1 && !i.textTrack2) {
                                                    a = l[o];
                                                    break
                                                }
                                            a && (r = a)
                                        }
                                        r || (r = s.createTextTrack("subtitles", e.name, e.lang)),
                                        r.mode = e.default ? s.hls.subtitleDisplay ? "showing" : "hidden" : "disabled",
                                        s.textTracks.push(r)
                                    })
                                }
                            }
                            ,
                            e.prototype.onLevelSwitching = function() {
                                this.enabled = "NONE" !== this.hls.currentLevel.closedCaptions
                            }
                            ,
                            e.prototype.onFragLoaded = function(e) {
                                var t = e.frag
                                  , r = e.payload;
                                if ("main" === t.type) {
                                    var i = t.sn;
                                    if (i !== this.lastSn + 1) {
                                        var n = this.cea608Parser;
                                        n && n.reset()
                                    }
                                    this.lastSn = i
                                } else if ("subtitle" === t.type)
                                    if (r.byteLength) {
                                        if (!o.isFinite(this.initPTS[t.cc]))
                                            return this.unparsedVttFrags.push(e),
                                            void (this.initPTS.length && this.hls.trigger(s.default.SUBTITLE_FRAG_PROCESSED, {
                                                success: !1,
                                                frag: t
                                            }));
                                        var a = t.decryptdata;
                                        null != a && null != a.key && "AES-128" === a.method || this._parseVTTs(t, r)
                                    } else
                                        this.hls.trigger(s.default.SUBTITLE_FRAG_PROCESSED, {
                                            success: !1,
                                            frag: t
                                        })
                            }
                            ,
                            e.prototype._parseVTTs = function(t, e) {
                                var r = this.vttCCs;
                                r[t.cc] || (r[t.cc] = {
                                    start: t.start,
                                    prevCC: this.prevCC,
                                    new: !0
                                },
                                this.prevCC = t.cc);
                                var n = this.textTracks
                                  , a = this.hls;
                                u.default.parse(e, this.initPTS[t.cc], r, t.cc, function(e) {
                                    var i = n[t.level];
                                    "disabled" !== i.mode ? (e.forEach(function(t) {
                                        if (!i.cues.getCueById(t.id))
                                            try {
                                                i.addCue(t)
                                            } catch (e) {
                                                var r = new window.TextTrackCue(t.startTime,t.endTime,t.text);
                                                r.id = t.id,
                                                i.addCue(r)
                                            }
                                    }),
                                    a.trigger(s.default.SUBTITLE_FRAG_PROCESSED, {
                                        success: !0,
                                        frag: t
                                    })) : a.trigger(s.default.SUBTITLE_FRAG_PROCESSED, {
                                        success: !1,
                                        frag: t
                                    })
                                }, function(e) {
                                    c.logger.log("Failed to parse VTT cue: " + e),
                                    a.trigger(s.default.SUBTITLE_FRAG_PROCESSED, {
                                        success: !1,
                                        frag: t
                                    })
                                })
                            }
                            ,
                            e.prototype.onFragDecrypted = function(e) {
                                var t = e.payload
                                  , r = e.frag;
                                if ("subtitle" === r.type) {
                                    if (!o.isFinite(this.initPTS[r.cc]))
                                        return void this.unparsedVttFrags.push(e);
                                    this._parseVTTs(r, t)
                                }
                            }
                            ,
                            e.prototype.onFragParsingUserdata = function(e) {
                                if (this.enabled && this.config.enableCEA708Captions)
                                    for (var t = 0; t < e.samples.length; t++) {
                                        var r = this.extractCea608Data(e.samples[t].bytes);
                                        this.cea608Parser.addData(e.samples[t].pts, r)
                                    }
                            }
                            ,
                            e.prototype.extractCea608Data = function(e) {
                                for (var t, r, i, n = 31 & e[0], a = 2, o = [], s = 0; s < n; s++)
                                    t = e[a++],
                                    r = 127 & e[a++],
                                    i = 127 & e[a++],
                                    0 === r && 0 === i || 0 != (4 & t) && 0 === (3 & t) && (o.push(r),
                                    o.push(i));
                                return o
                            }
                            ,
                            e
                        }(r.default);
                        n.default = e
                    }
                    ).call(this, f("./src/polyfills/number.js").Number)
                },
                "./src/crypt/aes-crypto.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = function() {
                        function e(e, t) {
                            this.subtle = e,
                            this.aesIV = t
                        }
                        return e.prototype.decrypt = function(e, t) {
                            return this.subtle.decrypt({
                                name: "AES-CBC",
                                iv: this.aesIV
                            }, t, e)
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/crypt/aes-decryptor.js": function(e, t, r) {
                    function M(e) {
                        var t = e.byteLength
                          , r = t && new DataView(e).getUint8(t - 1);
                        return r ? e.slice(0, t - r) : e
                    }
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.removePadding = M;
                    var i = function() {
                        function e() {
                            this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
                            this.subMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)],
                            this.invSubMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)],
                            this.sBox = new Uint32Array(256),
                            this.invSBox = new Uint32Array(256),
                            this.key = new Uint32Array(0),
                            this.initTable()
                        }
                        return e.prototype.uint8ArrayToUint32Array_ = function(e) {
                            for (var t = new DataView(e), r = new Uint32Array(4), i = 0; i < 4; i++)
                                r[i] = t.getUint32(4 * i);
                            return r
                        }
                        ,
                        e.prototype.initTable = function() {
                            var e = this.sBox
                              , t = this.invSBox
                              , r = this.subMix
                              , i = r[0]
                              , n = r[1]
                              , a = r[2]
                              , o = r[3]
                              , s = this.invSubMix
                              , l = s[0]
                              , u = s[1]
                              , c = s[2]
                              , d = s[3]
                              , f = new Uint32Array(256)
                              , h = 0
                              , p = 0
                              , g = 0;
                            for (g = 0; g < 256; g++)
                                f[g] = g < 128 ? g << 1 : g << 1 ^ 283;
                            for (g = 0; g < 256; g++) {
                                var v = p ^ p << 1 ^ p << 2 ^ p << 3 ^ p << 4
                                  , y = f[t[e[h] = v = v >>> 8 ^ 255 & v ^ 99] = h]
                                  , m = f[y]
                                  , _ = f[m]
                                  , T = 257 * f[v] ^ 16843008 * v;
                                i[h] = T << 24 | T >>> 8,
                                n[h] = T << 16 | T >>> 16,
                                a[h] = T << 8 | T >>> 24,
                                o[h] = T,
                                l[v] = (T = 16843009 * _ ^ 65537 * m ^ 257 * y ^ 16843008 * h) << 24 | T >>> 8,
                                u[v] = T << 16 | T >>> 16,
                                c[v] = T << 8 | T >>> 24,
                                d[v] = T,
                                h ? (h = y ^ f[f[f[_ ^ y]]],
                                p ^= f[f[p]]) : h = p = 1
                            }
                        }
                        ,
                        e.prototype.expandKey = function(e) {
                            for (var t = this.uint8ArrayToUint32Array_(e), r = !0, i = 0; i < t.length && r; )
                                r = t[i] === this.key[i],
                                i++;
                            if (!r) {
                                this.key = t;
                                var n = this.keySize = t.length;
                                if (4 !== n && 6 !== n && 8 !== n)
                                    throw Error("Invalid aes key size=" + n);
                                var a, o, s, l, u = this.ksRows = 4 * (n + 6 + 1), c = this.keySchedule = new Uint32Array(u), d = this.invKeySchedule = new Uint32Array(u), f = this.sBox, h = this.rcon, p = this.invSubMix, g = p[0], v = p[1], y = p[2], m = p[3];
                                for (a = 0; a < u; a++)
                                    a < n ? s = c[a] = t[a] : (l = s,
                                    a % n == 0 ? (l = f[(l = l << 8 | l >>> 24) >>> 24] << 24 | f[l >>> 16 & 255] << 16 | f[l >>> 8 & 255] << 8 | f[255 & l],
                                    l ^= h[a / n | 0] << 24) : 6 < n && a % n == 4 && (l = f[l >>> 24] << 24 | f[l >>> 16 & 255] << 16 | f[l >>> 8 & 255] << 8 | f[255 & l]),
                                    c[a] = s = (c[a - n] ^ l) >>> 0);
                                for (o = 0; o < u; o++)
                                    a = u - o,
                                    l = 3 & o ? c[a] : c[a - 4],
                                    d[o] = o < 4 || a <= 4 ? l : g[f[l >>> 24]] ^ v[f[l >>> 16 & 255]] ^ y[f[l >>> 8 & 255]] ^ m[f[255 & l]],
                                    d[o] = d[o] >>> 0
                            }
                        }
                        ,
                        e.prototype.networkToHostOrderSwap = function(e) {
                            return e << 24 | (65280 & e) << 8 | (16711680 & e) >> 8 | e >>> 24
                        }
                        ,
                        e.prototype.decrypt = function(e, t, r, i) {
                            for (var n, a, o, s, l, u, c, d, f, h, p, g, v, y, m = this.keySize + 6, _ = this.invKeySchedule, T = this.invSBox, b = this.invSubMix, E = b[0], S = b[1], A = b[2], k = b[3], w = this.uint8ArrayToUint32Array_(r), R = w[0], L = w[1], I = w[2], D = w[3], C = new Int32Array(e), P = new Int32Array(C.length), O = this.networkToHostOrderSwap; t < C.length; ) {
                                for (f = O(C[t]),
                                h = O(C[t + 1]),
                                p = O(C[t + 2]),
                                g = O(C[t + 3]),
                                l = f ^ _[0],
                                u = g ^ _[1],
                                c = p ^ _[2],
                                d = h ^ _[3],
                                v = 4,
                                y = 1; y < m; y++)
                                    a = E[u >>> 24] ^ S[c >> 16 & 255] ^ A[d >> 8 & 255] ^ k[255 & l] ^ _[v + 1],
                                    o = E[c >>> 24] ^ S[d >> 16 & 255] ^ A[l >> 8 & 255] ^ k[255 & u] ^ _[v + 2],
                                    s = E[d >>> 24] ^ S[l >> 16 & 255] ^ A[u >> 8 & 255] ^ k[255 & c] ^ _[v + 3],
                                    l = n = E[l >>> 24] ^ S[u >> 16 & 255] ^ A[c >> 8 & 255] ^ k[255 & d] ^ _[v],
                                    u = a,
                                    c = o,
                                    d = s,
                                    v += 4;
                                n = T[l >>> 24] << 24 ^ T[u >> 16 & 255] << 16 ^ T[c >> 8 & 255] << 8 ^ T[255 & d] ^ _[v],
                                a = T[u >>> 24] << 24 ^ T[c >> 16 & 255] << 16 ^ T[d >> 8 & 255] << 8 ^ T[255 & l] ^ _[v + 1],
                                o = T[c >>> 24] << 24 ^ T[d >> 16 & 255] << 16 ^ T[l >> 8 & 255] << 8 ^ T[255 & u] ^ _[v + 2],
                                s = T[d >>> 24] << 24 ^ T[l >> 16 & 255] << 16 ^ T[u >> 8 & 255] << 8 ^ T[255 & c] ^ _[v + 3],
                                v += 3,
                                P[t] = O(n ^ R),
                                P[t + 1] = O(s ^ L),
                                P[t + 2] = O(o ^ I),
                                P[t + 3] = O(a ^ D),
                                R = f,
                                L = h,
                                I = p,
                                D = g,
                                t += 4
                            }
                            return i ? M(P.buffer) : P.buffer
                        }
                        ,
                        e.prototype.destroy = function() {
                            this.key = void 0,
                            this.keySize = void 0,
                            this.ksRows = void 0,
                            this.sBox = void 0,
                            this.invSBox = void 0,
                            this.subMix = void 0,
                            this.invSubMix = void 0,
                            this.keySchedule = void 0,
                            this.invKeySchedule = void 0,
                            this.rcon = void 0
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/crypt/decrypter.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var s = r("./src/crypt/aes-crypto.js")
                      , l = r("./src/crypt/fast-aes-key.js")
                      , u = r("./src/crypt/aes-decryptor.js")
                      , a = r("./src/errors.js")
                      , c = r("./src/utils/logger.js")
                      , o = r("./src/events.js")
                      , d = r("./src/utils/get-self-scope.js").getSelfScope()
                      , i = function() {
                        function e(e, t, r) {
                            var i = (void 0 === r ? {} : r).removePKCS7Padding
                              , n = void 0 === i || i;
                            if (this.logEnabled = !0,
                            this.observer = e,
                            this.config = t,
                            this.removePKCS7Padding = n)
                                try {
                                    var a = d.crypto;
                                    a && (this.subtle = a.subtle || a.webkitSubtle)
                                } catch (e) {}
                            this.disableWebCrypto = !this.subtle
                        }
                        return e.prototype.isSync = function() {
                            return this.disableWebCrypto && this.config.enableSoftwareAES
                        }
                        ,
                        e.prototype.decrypt = function(t, r, i, n) {
                            var a = this;
                            if (this.disableWebCrypto && this.config.enableSoftwareAES) {
                                this.logEnabled && (c.logger.log("JS AES decrypt"),
                                this.logEnabled = !1);
                                var e = this.decryptor;
                                e || (this.decryptor = e = new u.default),
                                e.expandKey(r),
                                n(e.decrypt(t, 0, i, this.removePKCS7Padding))
                            } else {
                                this.logEnabled && (c.logger.log("WebCrypto AES decrypt"),
                                this.logEnabled = !1);
                                var o = this.subtle;
                                this.key !== r && (this.key = r,
                                this.fastAesKey = new l.default(o,r)),
                                this.fastAesKey.expandKey().then(function(e) {
                                    new s.default(o,i).decrypt(t, e).catch(function(e) {
                                        a.onWebCryptoError(e, t, r, i, n)
                                    }).then(function(e) {
                                        n(e)
                                    })
                                }).catch(function(e) {
                                    a.onWebCryptoError(e, t, r, i, n)
                                })
                            }
                        }
                        ,
                        e.prototype.onWebCryptoError = function(e, t, r, i, n) {
                            this.config.enableSoftwareAES ? (c.logger.log("WebCrypto Error, disable WebCrypto API"),
                            this.disableWebCrypto = !0,
                            this.logEnabled = !0,
                            this.decrypt(t, r, i, n)) : (c.logger.error("decrypting error : " + e.message),
                            this.observer.trigger(o.default.ERROR, {
                                type: a.ErrorTypes.MEDIA_ERROR,
                                details: a.ErrorDetails.FRAG_DECRYPT_ERROR,
                                fatal: !0,
                                reason: e.message
                            }))
                        }
                        ,
                        e.prototype.destroy = function() {
                            var e = this.decryptor;
                            e && (e.destroy(),
                            this.decryptor = void 0)
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/crypt/fast-aes-key.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = function() {
                        function e(e, t) {
                            this.subtle = e,
                            this.key = t
                        }
                        return e.prototype.expandKey = function() {
                            return this.subtle.importKey("raw", this.key, {
                                name: "AES-CBC"
                            }, !1, ["encrypt", "decrypt"])
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/demux/aacdemuxer.js": function(e, t, r) {
                    !function(p) {
                        Object.defineProperty(t, "__esModule", {
                            value: !0
                        });
                        var g = r("./src/demux/adts.js")
                          , v = r("./src/utils/logger.js")
                          , y = r("./src/demux/id3.js")
                          , e = function() {
                            function e(e, t, r) {
                                this.observer = e,
                                this.config = r,
                                this.remuxer = t
                            }
                            return e.prototype.resetInitSegment = function(e, t, r, i) {
                                this._audioTrack = {
                                    container: "audio/adts",
                                    type: "audio",
                                    id: 0,
                                    sequenceNumber: 0,
                                    isAAC: !0,
                                    samples: [],
                                    len: 0,
                                    manifestCodec: t,
                                    duration: i,
                                    inputTimeScale: 9e4
                                }
                            }
                            ,
                            e.prototype.resetTimeStamp = function() {}
                            ,
                            e.probe = function(e) {
                                if (!e)
                                    return !1;
                                for (var t = (y.default.getID3Data(e, 0) || []).length, r = e.length; t < r; t++)
                                    if (g.probe(e, t))
                                        return v.logger.log("ADTS sync word found !"),
                                        !0;
                                return !1
                            }
                            ,
                            e.prototype.append = function(e, t, r, i) {
                                for (var n = this._audioTrack, a = y.default.getID3Data(e, 0) || [], o = y.default.getTimeStamp(a), s = p.isFinite(o) ? 90 * o : 9e4 * t, l = 0, u = s, c = e.length, d = a.length, f = [{
                                    pts: u,
                                    dts: u,
                                    data: a
                                }]; d < c - 1; )
                                    if (g.isHeader(e, d) && d + 5 < c) {
                                        g.initTrackConfig(n, this.observer, e, d, n.manifestCodec);
                                        var h = g.appendFrame(n, e, d, s, l);
                                        if (!h) {
                                            v.logger.log("Unable to parse AAC frame");
                                            break
                                        }
                                        d += h.length,
                                        u = h.sample.pts,
                                        l++
                                    } else
                                        y.default.isHeader(e, d) ? (a = y.default.getID3Data(e, d),
                                        f.push({
                                            pts: u,
                                            dts: u,
                                            data: a
                                        }),
                                        d += a.length) : d++;
                                this.remuxer.remux(n, {
                                    samples: []
                                }, {
                                    samples: f,
                                    inputTimeScale: 9e4
                                }, {
                                    samples: []
                                }, t, r, i)
                            }
                            ,
                            e.prototype.destroy = function() {}
                            ,
                            e
                        }();
                        t.default = e
                    }(r("./src/polyfills/number.js").Number)
                },
                "./src/demux/adts.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var f = r("./src/utils/logger.js")
                      , h = r("./src/errors.js")
                      , p = r("./src/events.js");
                    function o(e, t, r, i) {
                        var n, a, o, s, l, u = navigator.userAgent.toLowerCase(), c = i, d = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
                        if (n = 1 + ((192 & t[r + 2]) >>> 6),
                        !(d.length - 1 < (a = (60 & t[r + 2]) >>> 2)))
                            return s = (1 & t[r + 2]) << 2,
                            f.logger.log("manifest codec:" + i + ",ADTS data:type:" + n + ",sampleingIndex:" + a + "[" + d[a] + "Hz],channelConfig:" + (s |= (192 & t[r + 3]) >>> 6)),
                            o = /firefox/i.test(u) ? 6 <= a ? (n = 5,
                            l = Array(4),
                            a - 3) : (l = Array(n = 2),
                            a) : -1 != u.indexOf("android") ? (l = Array(n = 2),
                            a) : (n = 5,
                            l = Array(4),
                            i && (-1 != i.indexOf("mp4a.40.29") || -1 != i.indexOf("mp4a.40.5")) || !i && 6 <= a ? a - 3 : ((i && -1 != i.indexOf("mp4a.40.2") && (6 <= a && 1 === s || /vivaldi/i.test(u)) || !i && 1 === s) && (l = Array(n = 2)),
                            a)),
                            l[0] = n << 3,
                            l[0] |= (14 & a) >> 1,
                            l[1] |= (1 & a) << 7,
                            l[1] |= s << 3,
                            5 === n && (l[1] |= (14 & o) >> 1,
                            l[2] = (1 & o) << 7,
                            l[2] |= 8,
                            l[3] = 0),
                            {
                                config: l,
                                samplerate: d[a],
                                channelCount: s,
                                codec: "mp4a.40." + n,
                                manifestCodec: c
                            };
                        e.trigger(p.default.ERROR, {
                            type: h.ErrorTypes.MEDIA_ERROR,
                            details: h.ErrorDetails.FRAG_PARSING_ERROR,
                            fatal: !0,
                            reason: "invalid ADTS sampling index:" + a
                        })
                    }
                    function n(e, t) {
                        return 255 === e[t] && 240 == (246 & e[t + 1])
                    }
                    function l(e, t) {
                        return 1 & e[t + 1] ? 7 : 9
                    }
                    function u(e, t) {
                        return (3 & e[t + 3]) << 11 | e[t + 4] << 3 | (224 & e[t + 5]) >>> 5
                    }
                    function c(e) {
                        return 9216e4 / e
                    }
                    function d(e, t, r, i, n) {
                        var a, o, s = e.length;
                        if (a = l(e, t),
                        o = u(e, t),
                        0 < (o -= a) && t + a + o <= s)
                            return {
                                headerLength: a,
                                frameLength: o,
                                stamp: r + i * n
                            }
                    }
                    t.getAudioConfig = o,
                    t.isHeaderPattern = n,
                    t.getHeaderLength = l,
                    t.getFullFrameLength = u,
                    t.isHeader = function(e, t) {
                        return !!(t + 1 < e.length && n(e, t))
                    }
                    ,
                    t.probe = function(e, t) {
                        if (t + 1 < e.length && n(e, t)) {
                            var r = l(e, t);
                            t + 5 < e.length && (r = u(e, t));
                            var i = t + r;
                            if (i === e.length || i + 1 < e.length && n(e, i))
                                return !0
                        }
                        return !1
                    }
                    ,
                    t.initTrackConfig = function(e, t, r, i, n) {
                        if (!e.samplerate) {
                            var a = o(t, r, i, n);
                            e.config = a.config,
                            e.samplerate = a.samplerate,
                            e.channelCount = a.channelCount,
                            e.codec = a.codec,
                            e.manifestCodec = a.manifestCodec,
                            f.logger.log("parsed codec:" + e.codec + ",rate:" + a.samplerate + ",nb channel:" + a.channelCount)
                        }
                    }
                    ,
                    t.getFrameDuration = c,
                    t.parseFrameHeader = d,
                    t.appendFrame = function(e, t, r, i, n) {
                        var a = d(t, r, i, n, c(e.samplerate));
                        if (a) {
                            var o = a.stamp
                              , s = a.headerLength
                              , l = a.frameLength
                              , u = {
                                unit: t.subarray(r + s, r + s + l),
                                pts: o,
                                dts: o
                            };
                            return e.samples.push(u),
                            e.len += l,
                            {
                                sample: u,
                                length: l + s
                            }
                        }
                    }
                },
                "./src/demux/demuxer-inline.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var g, S = r("./src/events.js"), A = r("./src/errors.js"), v = r("./src/crypt/decrypter.js"), k = r("./src/demux/aacdemuxer.js"), w = r("./src/demux/mp4demuxer.js"), R = r("./src/demux/tsdemuxer.js"), L = r("./src/demux/mp3demuxer.js"), I = r("./src/remux/mp4-remuxer.js"), D = r("./src/remux/passthrough-remuxer.js"), i = r("./src/utils/get-self-scope.js"), n = r("./src/utils/logger.js"), a = i.getSelfScope();
                    try {
                        g = a.performance.now.bind(a.performance)
                    } catch (e) {
                        n.logger.debug("Unable to use Performance API on this environment"),
                        g = a.Date.now
                    }
                    var o = function() {
                        function e(e, t, r, i) {
                            this.observer = e,
                            this.typeSupported = t,
                            this.config = r,
                            this.vendor = i
                        }
                        return e.prototype.destroy = function() {
                            var e = this.demuxer;
                            e && e.destroy()
                        }
                        ,
                        e.prototype.push = function(e, r, i, n, a, o, s, l, u, c, d, f) {
                            var h = this;
                            if (0 < e.byteLength && null != r && null != r.key && "AES-128" === r.method) {
                                var t = this.decrypter;
                                null == t && (t = this.decrypter = new v.default(this.observer,this.config));
                                var p = g();
                                t.decrypt(e, r.key.buffer, r.iv.buffer, function(e) {
                                    var t = g();
                                    h.observer.trigger(S.default.FRAG_DECRYPTED, {
                                        stats: {
                                            tstart: p,
                                            tdecrypt: t
                                        }
                                    }),
                                    h.pushDecrypted(new Uint8Array(e), r, new Uint8Array(i), n, a, o, s, l, u, c, d, f)
                                })
                            } else
                                this.pushDecrypted(new Uint8Array(e), r, new Uint8Array(i), n, a, o, s, l, u, c, d, f)
                        }
                        ,
                        e.prototype.pushDecrypted = function(e, t, r, i, n, a, o, s, l, u, c, d) {
                            var f = this.demuxer;
                            if (!f || (o || s) && !this.probe(e)) {
                                for (var h = this.observer, p = this.typeSupported, g = this.config, v = [{
                                    demux: R.default,
                                    remux: I.default
                                }, {
                                    demux: w.default,
                                    remux: D.default
                                }, {
                                    demux: k.default,
                                    remux: I.default
                                }, {
                                    demux: L.default,
                                    remux: I.default
                                }], y = 0, m = v.length; y < m; y++) {
                                    var _ = v[y]
                                      , T = _.demux.probe;
                                    if (T(e)) {
                                        var b = this.remuxer = new _.remux(h,g,p,this.vendor);
                                        f = new _.demux(h,b,g,p),
                                        this.probe = T;
                                        break
                                    }
                                }
                                if (!f)
                                    return void h.trigger(S.default.ERROR, {
                                        type: A.ErrorTypes.MEDIA_ERROR,
                                        details: A.ErrorDetails.FRAG_PARSING_ERROR,
                                        fatal: !0,
                                        reason: "no demux matching with content found"
                                    });
                                this.demuxer = f
                            }
                            var E = this.remuxer;
                            (o || s) && (f.resetInitSegment(r, i, n, u),
                            E.resetInitSegment()),
                            o && (f.resetTimeStamp(d),
                            E.resetTimeStamp(d)),
                            "function" == typeof f.setDecryptData && f.setDecryptData(t),
                            f.append(e, a, l, c)
                        }
                        ,
                        e
                    }();
                    t.default = o
                },
                "./src/demux/demuxer-worker.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var o = r("./src/demux/demuxer-inline.js")
                      , s = r("./src/events.js")
                      , l = r("./src/utils/logger.js")
                      , u = r("./node_modules/node-libs-browser/node_modules/events/events.js");
                    t.default = function(n) {
                        var i = new u.EventEmitter;
                        i.trigger = function(e) {
                            for (var t = [], r = 1; r < arguments.length; r++)
                                t[r - 1] = arguments[r];
                            i.emit.apply(i, [e, e].concat(t))
                        }
                        ,
                        i.off = function(e) {
                            for (var t = [], r = 1; r < arguments.length; r++)
                                t[r - 1] = arguments[r];
                            i.removeListener.apply(i, [e].concat(t))
                        }
                        ;
                        var a = function(e, t) {
                            n.postMessage({
                                event: e,
                                data: t
                            })
                        };
                        n.addEventListener("message", function(e) {
                            var t = e.data;
                            switch (t.cmd) {
                            case "init":
                                var r = JSON.parse(t.config);
                                n.demuxer = new o.default(i,t.typeSupported,r,t.vendor),
                                l.enableLogs(r.debug),
                                a("init", null);
                                break;
                            case "demux":
                                n.demuxer.push(t.data, t.decryptdata, t.initSegment, t.audioCodec, t.videoCodec, t.timeOffset, t.discontinuity, t.trackSwitch, t.contiguous, t.duration, t.accurateTimeOffset, t.defaultInitPTS)
                            }
                        }),
                        i.on(s.default.FRAG_DECRYPTED, a),
                        i.on(s.default.FRAG_PARSING_INIT_SEGMENT, a),
                        i.on(s.default.FRAG_PARSED, a),
                        i.on(s.default.ERROR, a),
                        i.on(s.default.FRAG_PARSING_METADATA, a),
                        i.on(s.default.FRAG_PARSING_USERDATA, a),
                        i.on(s.default.INIT_PTS_FOUND, a),
                        i.on(s.default.FRAG_PARSING_DATA, function(e, t) {
                            var r = []
                              , i = {
                                event: e,
                                data: t
                            };
                            t.data1 && (i.data1 = t.data1.buffer,
                            r.push(t.data1.buffer),
                            delete t.data1),
                            t.data2 && (i.data2 = t.data2.buffer,
                            r.push(t.data2.buffer),
                            delete t.data2),
                            n.postMessage(i, r)
                        })
                    }
                },
                "./src/demux/demuxer.js": function(e, i, n) {
                    !function(v) {
                        Object.defineProperty(i, "__esModule", {
                            value: !0
                        });
                        var u = n("./node_modules/webworkify-webpack/index.js")
                          , c = n("./src/events.js")
                          , d = n("./src/demux/demuxer-inline.js")
                          , y = n("./src/utils/logger.js")
                          , f = n("./src/errors.js")
                          , e = n("./src/utils/mediasource-helper.js")
                          , t = n("./src/utils/get-self-scope.js")
                          , h = n("./src/observer.js")
                          , p = t.getSelfScope()
                          , g = e.getMediaSource()
                          , r = function() {
                            function e(r, e) {
                                var i = this;
                                this.hls = r,
                                this.id = e;
                                var t = this.observer = new h.Observer
                                  , n = r.config
                                  , a = function(e, t) {
                                    (t = t || {}).frag = i.frag,
                                    t.id = i.id,
                                    r.trigger(e, t)
                                };
                                t.on(c.default.FRAG_DECRYPTED, a),
                                t.on(c.default.FRAG_PARSING_INIT_SEGMENT, a),
                                t.on(c.default.FRAG_PARSING_DATA, a),
                                t.on(c.default.FRAG_PARSED, a),
                                t.on(c.default.ERROR, a),
                                t.on(c.default.FRAG_PARSING_METADATA, a),
                                t.on(c.default.FRAG_PARSING_USERDATA, a),
                                t.on(c.default.INIT_PTS_FOUND, a);
                                var o = {
                                    mp4: g.isTypeSupported("video/mp4"),
                                    mpeg: g.isTypeSupported("audio/mpeg"),
                                    mp3: g.isTypeSupported('audio/mp4; codecs="mp3"')
                                }
                                  , s = navigator.vendor;
                                if (n.enableWorker && "undefined" != typeof Worker) {
                                    y.logger.log("demuxing in webworker");
                                    var l = void 0;
                                    try {
                                        l = this.w = u("./src/demux/demuxer-worker.js"),
                                        this.onwmsg = this.onWorkerMessage.bind(this),
                                        l.addEventListener("message", this.onwmsg),
                                        l.onerror = function(e) {
                                            r.trigger(c.default.ERROR, {
                                                type: f.ErrorTypes.OTHER_ERROR,
                                                details: f.ErrorDetails.INTERNAL_EXCEPTION,
                                                fatal: !0,
                                                event: "demuxerWorker",
                                                err: {
                                                    message: e.message + " (" + e.filename + ":" + e.lineno + ")"
                                                }
                                            })
                                        }
                                        ,
                                        l.postMessage({
                                            cmd: "init",
                                            typeSupported: o,
                                            vendor: s,
                                            id: e,
                                            config: JSON.stringify(n)
                                        })
                                    } catch (e) {
                                        y.logger.warn("Error in worker:", e),
                                        y.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),
                                        l && p.URL.revokeObjectURL(l.objectURL),
                                        this.demuxer = new d.default(t,o,n,s),
                                        this.w = void 0
                                    }
                                } else
                                    this.demuxer = new d.default(t,o,n,s)
                            }
                            return e.prototype.destroy = function() {
                                var e = this.w;
                                if (e)
                                    e.removeEventListener("message", this.onwmsg),
                                    e.terminate(),
                                    this.w = null;
                                else {
                                    var t = this.demuxer;
                                    t && (t.destroy(),
                                    this.demuxer = null)
                                }
                                var r = this.observer;
                                r && (r.removeAllListeners(),
                                this.observer = null)
                            }
                            ,
                            e.prototype.push = function(e, t, r, i, n, a, o, s) {
                                var l = this.w
                                  , u = v.isFinite(n.startPTS) ? n.startPTS : n.start
                                  , c = n.decryptdata
                                  , d = this.frag
                                  , f = !(d && n.cc === d.cc)
                                  , h = !(d && n.level === d.level)
                                  , p = !h && (d && n.sn === d.sn + 1);
                                if (f && y.logger.log(this.id + ":discontinuity detected"),
                                h && y.logger.log(this.id + ":switch detected"),
                                this.frag = n,
                                l)
                                    l.postMessage({
                                        cmd: "demux",
                                        data: e,
                                        decryptdata: c,
                                        initSegment: t,
                                        audioCodec: r,
                                        videoCodec: i,
                                        timeOffset: u,
                                        discontinuity: f,
                                        trackSwitch: h,
                                        contiguous: p,
                                        duration: a,
                                        accurateTimeOffset: o,
                                        defaultInitPTS: s
                                    }, e instanceof ArrayBuffer ? [e] : []);
                                else {
                                    var g = this.demuxer;
                                    g && g.push(e, c, t, r, i, u, f, h, p, a, o, s)
                                }
                            }
                            ,
                            e.prototype.onWorkerMessage = function(e) {
                                var t = e.data
                                  , r = this.hls;
                                switch (t.event) {
                                case "init":
                                    p.URL.revokeObjectURL(this.w.objectURL);
                                    break;
                                case c.default.FRAG_PARSING_DATA:
                                    t.data.data1 = new Uint8Array(t.data1),
                                    t.data2 && (t.data.data2 = new Uint8Array(t.data2));
                                default:
                                    t.data = t.data || {},
                                    t.data.frag = this.frag,
                                    t.data.id = this.id,
                                    r.trigger(t.event, t.data)
                                }
                            }
                            ,
                            e
                        }();
                        i.default = r
                    }(n("./src/polyfills/number.js").Number)
                },
                "./src/demux/exp-golomb.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = r("./src/utils/logger.js")
                      , n = function() {
                        function e(e) {
                            this.data = e,
                            this.bytesAvailable = e.byteLength,
                            this.word = 0,
                            this.bitsAvailable = 0
                        }
                        return e.prototype.loadWord = function() {
                            var e = this.data
                              , t = this.bytesAvailable
                              , r = e.byteLength - t
                              , i = new Uint8Array(4)
                              , n = Math.min(4, t);
                            if (0 === n)
                                throw Error("no bytes available");
                            i.set(e.subarray(r, r + n)),
                            this.word = new DataView(i.buffer).getUint32(0),
                            this.bitsAvailable = 8 * n,
                            this.bytesAvailable -= n
                        }
                        ,
                        e.prototype.skipBits = function(e) {
                            var t;
                            e < this.bitsAvailable || (e -= this.bitsAvailable,
                            e -= (t = e >> 3) >> 3,
                            this.bytesAvailable -= t,
                            this.loadWord()),
                            this.word <<= e,
                            this.bitsAvailable -= e
                        }
                        ,
                        e.prototype.readBits = function(e) {
                            var t = Math.min(this.bitsAvailable, e)
                              , r = this.word >>> 32 - t;
                            return 32 < e && i.logger.error("Cannot read more than 32 bits at a time"),
                            this.bitsAvailable -= t,
                            0 < this.bitsAvailable ? this.word <<= t : 0 < this.bytesAvailable && this.loadWord(),
                            0 < (t = e - t) && this.bitsAvailable ? r << t | this.readBits(t) : r
                        }
                        ,
                        e.prototype.skipLZ = function() {
                            var e;
                            for (e = 0; e < this.bitsAvailable; ++e)
                                if (0 != (this.word & 2147483648 >>> e))
                                    return this.word <<= e,
                                    this.bitsAvailable -= e,
                                    e;
                            return this.loadWord(),
                            e + this.skipLZ()
                        }
                        ,
                        e.prototype.skipUEG = function() {
                            this.skipBits(1 + this.skipLZ())
                        }
                        ,
                        e.prototype.skipEG = function() {
                            this.skipBits(1 + this.skipLZ())
                        }
                        ,
                        e.prototype.readUEG = function() {
                            var e = this.skipLZ();
                            return this.readBits(e + 1) - 1
                        }
                        ,
                        e.prototype.readEG = function() {
                            var e = this.readUEG();
                            return 1 & e ? 1 + e >>> 1 : -1 * (e >>> 1)
                        }
                        ,
                        e.prototype.readBoolean = function() {
                            return 1 === this.readBits(1)
                        }
                        ,
                        e.prototype.readUByte = function() {
                            return this.readBits(8)
                        }
                        ,
                        e.prototype.readUShort = function() {
                            return this.readBits(16)
                        }
                        ,
                        e.prototype.readUInt = function() {
                            return this.readBits(32)
                        }
                        ,
                        e.prototype.skipScalingList = function(e) {
                            var t, r = 8, i = 8;
                            for (t = 0; t < e; t++)
                                0 !== i && (i = (r + this.readEG() + 256) % 256),
                                r = 0 === i ? r : i
                        }
                        ,
                        e.prototype.readSPS = function() {
                            var e, t, r, i, n, a, o, s = 0, l = 0, u = 0, c = 0, d = this.readUByte.bind(this), f = this.readBits.bind(this), h = this.readUEG.bind(this), p = this.readBoolean.bind(this), g = this.skipBits.bind(this), v = this.skipEG.bind(this), y = this.skipUEG.bind(this), m = this.skipScalingList.bind(this);
                            if (d(),
                            e = d(),
                            f(5),
                            g(3),
                            d(),
                            y(),
                            100 === e || 110 === e || 122 === e || 244 === e || 44 === e || 83 === e || 86 === e || 118 === e || 128 === e) {
                                var _ = h();
                                if (3 === _ && g(1),
                                y(),
                                y(),
                                g(1),
                                p())
                                    for (a = 3 !== _ ? 8 : 12,
                                    o = 0; o < a; o++)
                                        p() && m(o < 6 ? 16 : 64)
                            }
                            y();
                            var T = h();
                            if (0 === T)
                                h();
                            else if (1 === T)
                                for (g(1),
                                v(),
                                v(),
                                t = h(),
                                o = 0; o < t; o++)
                                    v();
                            y(),
                            g(1),
                            r = h(),
                            i = h(),
                            0 === (n = f(1)) && g(1),
                            g(1),
                            p() && (s = h(),
                            l = h(),
                            u = h(),
                            c = h());
                            var b = [1, 1];
                            if (p() && p())
                                switch (d()) {
                                case 1:
                                    b = [1, 1];
                                    break;
                                case 2:
                                    b = [12, 11];
                                    break;
                                case 3:
                                    b = [10, 11];
                                    break;
                                case 4:
                                    b = [16, 11];
                                    break;
                                case 5:
                                    b = [40, 33];
                                    break;
                                case 6:
                                    b = [24, 11];
                                    break;
                                case 7:
                                    b = [20, 11];
                                    break;
                                case 8:
                                    b = [32, 11];
                                    break;
                                case 9:
                                    b = [80, 33];
                                    break;
                                case 10:
                                    b = [18, 11];
                                    break;
                                case 11:
                                    b = [15, 11];
                                    break;
                                case 12:
                                    b = [64, 33];
                                    break;
                                case 13:
                                    b = [160, 99];
                                    break;
                                case 14:
                                    b = [4, 3];
                                    break;
                                case 15:
                                    b = [3, 2];
                                    break;
                                case 16:
                                    b = [2, 1];
                                    break;
                                case 255:
                                    b = [d() << 8 | d(), d() << 8 | d()]
                                }
                            return {
                                width: Math.ceil(16 * (r + 1) - 2 * s - 2 * l),
                                height: (2 - n) * (i + 1) * 16 - (n ? 2 : 4) * (u + c),
                                pixelRatio: b
                            }
                        }
                        ,
                        e.prototype.readSliceType = function() {
                            return this.readUByte(),
                            this.readUEG(),
                            this.readUEG()
                        }
                        ,
                        e
                    }();
                    t.default = n
                },
                "./src/demux/id3.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = function() {
                        function s() {}
                        return s.isHeader = function(e, t) {
                            return t + 10 <= e.length && 73 === e[t] && 68 === e[t + 1] && 51 === e[t + 2] && e[t + 3] < 255 && e[t + 4] < 255 && e[t + 6] < 128 && e[t + 7] < 128 && e[t + 8] < 128 && e[t + 9] < 128
                        }
                        ,
                        s.isFooter = function(e, t) {
                            return t + 10 <= e.length && 51 === e[t] && 68 === e[t + 1] && 73 === e[t + 2] && e[t + 3] < 255 && e[t + 4] < 255 && e[t + 6] < 128 && e[t + 7] < 128 && e[t + 8] < 128 && e[t + 9] < 128
                        }
                        ,
                        s.getID3Data = function(e, t) {
                            for (var r = t, i = 0; s.isHeader(e, t); ) {
                                i += 10,
                                i += s._readSize(e, t + 6),
                                s.isFooter(e, t + 10) && (i += 10),
                                t += i
                            }
                            if (0 < i)
                                return e.subarray(r, r + i)
                        }
                        ,
                        s._readSize = function(e, t) {
                            var r = 0;
                            return r = (127 & e[t]) << 21,
                            r |= (127 & e[t + 1]) << 14,
                            r |= (127 & e[t + 2]) << 7,
                            r |= 127 & e[t + 3]
                        }
                        ,
                        s.getTimeStamp = function(e) {
                            for (var t = s.getID3Frames(e), r = 0; r < t.length; r++) {
                                var i = t[r];
                                if (s.isTimeStampFrame(i))
                                    return s._readTimeStamp(i)
                            }
                        }
                        ,
                        s.isTimeStampFrame = function(e) {
                            return e && "PRIV" === e.key && "com.apple.streaming.transportStreamTimestamp" === e.info
                        }
                        ,
                        s._getFrameData = function(e) {
                            var t = String.fromCharCode(e[0], e[1], e[2], e[3])
                              , r = s._readSize(e, 4);
                            return {
                                type: t,
                                size: r,
                                data: e.subarray(10, 10 + r)
                            }
                        }
                        ,
                        s.getID3Frames = function(e) {
                            for (var t = 0, r = []; s.isHeader(e, t); ) {
                                for (var i = s._readSize(e, t + 6), n = (t += 10) + i; t + 8 < n; ) {
                                    var a = s._getFrameData(e.subarray(t))
                                      , o = s._decodeFrame(a);
                                    o && r.push(o),
                                    t += a.size + 10
                                }
                                s.isFooter(e, t) && (t += 10)
                            }
                            return r
                        }
                        ,
                        s._decodeFrame = function(e) {
                            return "PRIV" === e.type ? s._decodePrivFrame(e) : "T" === e.type[0] ? s._decodeTextFrame(e) : "W" === e.type[0] ? s._decodeURLFrame(e) : void 0
                        }
                        ,
                        s._readTimeStamp = function(e) {
                            if (8 === e.data.byteLength) {
                                var t = new Uint8Array(e.data)
                                  , r = (t[4] << 23) + (t[5] << 15) + (t[6] << 7) + t[7];
                                return r /= 45,
                                1 & t[3] && (r += 47721858.84),
                                Math.round(r)
                            }
                        }
                        ,
                        s._decodePrivFrame = function(e) {
                            if (!(e.size < 2)) {
                                var t = s._utf8ArrayToStr(e.data, !0)
                                  , r = new Uint8Array(e.data.subarray(t.length + 1));
                                return {
                                    key: e.type,
                                    info: t,
                                    data: r.buffer
                                }
                            }
                        }
                        ,
                        s._decodeTextFrame = function(e) {
                            if (!(e.size < 2)) {
                                if ("TXXX" === e.type) {
                                    var t = 1
                                      , r = s._utf8ArrayToStr(e.data.subarray(t))
                                      , i = s._utf8ArrayToStr(e.data.subarray(t += r.length + 1));
                                    return {
                                        key: e.type,
                                        info: r,
                                        data: i
                                    }
                                }
                                var n = s._utf8ArrayToStr(e.data.subarray(1));
                                return {
                                    key: e.type,
                                    data: n
                                }
                            }
                        }
                        ,
                        s._decodeURLFrame = function(e) {
                            if ("WXXX" === e.type) {
                                if (e.size < 2)
                                    return;
                                var t = 1
                                  , r = s._utf8ArrayToStr(e.data.subarray(t))
                                  , i = s._utf8ArrayToStr(e.data.subarray(t += r.length + 1));
                                return {
                                    key: e.type,
                                    info: r,
                                    data: i
                                }
                            }
                            var n = s._utf8ArrayToStr(e.data);
                            return {
                                key: e.type,
                                data: n
                            }
                        }
                        ,
                        s._utf8ArrayToStr = function(e, t) {
                            void 0 === t && (t = !1);
                            for (var r, i, n, a = e.length, o = "", s = 0; s < a; ) {
                                if (0 === (r = e[s++]) && t)
                                    return o;
                                if (0 !== r && 3 !== r)
                                    switch (r >> 4) {
                                    case 0:
                                    case 1:
                                    case 2:
                                    case 3:
                                    case 4:
                                    case 5:
                                    case 6:
                                    case 7:
                                        o += String.fromCharCode(r);
                                        break;
                                    case 12:
                                    case 13:
                                        i = e[s++],
                                        o += String.fromCharCode((31 & r) << 6 | 63 & i);
                                        break;
                                    case 14:
                                        i = e[s++],
                                        n = e[s++],
                                        o += String.fromCharCode((15 & r) << 12 | (63 & i) << 6 | (63 & n) << 0)
                                    }
                            }
                            return o
                        }
                        ,
                        s
                    }();
                    t.utf8ArrayToStr = i._utf8ArrayToStr,
                    t.default = i
                },
                "./src/demux/mp3demuxer.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var p = r("./src/demux/id3.js")
                      , n = r("./src/utils/logger.js")
                      , g = r("./src/demux/mpegaudio.js")
                      , i = function() {
                        function e(e, t, r) {
                            this.observer = e,
                            this.config = r,
                            this.remuxer = t
                        }
                        return e.prototype.resetInitSegment = function(e, t, r, i) {
                            this._audioTrack = {
                                container: "audio/mpeg",
                                type: "audio",
                                id: -1,
                                sequenceNumber: 0,
                                isAAC: !1,
                                samples: [],
                                len: 0,
                                manifestCodec: t,
                                duration: i,
                                inputTimeScale: 9e4
                            }
                        }
                        ,
                        e.prototype.resetTimeStamp = function() {}
                        ,
                        e.probe = function(e) {
                            var t, r, i = p.default.getID3Data(e, 0);
                            if (i && void 0 !== p.default.getTimeStamp(i))
                                for (r = Math.min(e.length - 1, (t = i.length) + 100); t < r; t++)
                                    if (g.default.probe(e, t))
                                        return n.logger.log("MPEG Audio sync word found !"),
                                        !0;
                            return !1
                        }
                        ,
                        e.prototype.append = function(e, t, r, i) {
                            for (var n = p.default.getID3Data(e, 0), a = p.default.getTimeStamp(n), o = a ? 90 * a : 9e4 * t, s = n.length, l = e.length, u = 0, c = 0, d = this._audioTrack, f = [{
                                pts: o,
                                dts: o,
                                data: n
                            }]; s < l; )
                                if (g.default.isHeader(e, s)) {
                                    var h = g.default.appendFrame(d, e, s, o, u);
                                    if (!h)
                                        break;
                                    s += h.length,
                                    c = h.sample.pts,
                                    u++
                                } else
                                    p.default.isHeader(e, s) ? (n = p.default.getID3Data(e, s),
                                    f.push({
                                        pts: c,
                                        dts: c,
                                        data: n
                                    }),
                                    s += n.length) : s++;
                            this.remuxer.remux(d, {
                                samples: []
                            }, {
                                samples: f,
                                inputTimeScale: 9e4
                            }, {
                                samples: []
                            }, t, r, i)
                        }
                        ,
                        e.prototype.destroy = function() {}
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/demux/mp4demuxer.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var f = r("./src/utils/logger.js")
                      , l = r("./src/events.js")
                      , i = function() {
                        function g(e, t) {
                            this.observer = e,
                            this.remuxer = t
                        }
                        return g.prototype.resetTimeStamp = function(e) {
                            this.initPTS = e
                        }
                        ,
                        g.prototype.resetInitSegment = function(e, t, r, i) {
                            if (e && e.byteLength) {
                                var n = this.initData = g.parseInitSegment(e);
                                null == t && (t = "mp4a.40.5"),
                                null == r && (r = "avc1.42e01e");
                                var a = {};
                                n.audio && n.video ? a.audiovideo = {
                                    container: "video/mp4",
                                    codec: t + "," + r,
                                    initSegment: i ? e : null
                                } : (n.audio && (a.audio = {
                                    container: "audio/mp4",
                                    codec: t,
                                    initSegment: i ? e : null
                                }),
                                n.video && (a.video = {
                                    container: "video/mp4",
                                    codec: r,
                                    initSegment: i ? e : null
                                })),
                                this.observer.trigger(l.default.FRAG_PARSING_INIT_SEGMENT, {
                                    tracks: a
                                })
                            } else
                                t && (this.audioCodec = t),
                                r && (this.videoCodec = r)
                        }
                        ,
                        g.probe = function(e) {
                            return 0 < g.findBox({
                                data: e,
                                start: 0,
                                end: Math.min(e.length, 16384)
                            }, ["moof"]).length
                        }
                        ,
                        g.bin2str = function(e) {
                            return String.fromCharCode.apply(null, e)
                        }
                        ,
                        g.readUint16 = function(e, t) {
                            e.data && (t += e.start,
                            e = e.data);
                            var r = e[t] << 8 | e[t + 1];
                            return r < 0 ? 65536 + r : r
                        }
                        ,
                        g.readUint32 = function(e, t) {
                            e.data && (t += e.start,
                            e = e.data);
                            var r = e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3];
                            return r < 0 ? 4294967296 + r : r
                        }
                        ,
                        g.writeUint32 = function(e, t, r) {
                            e.data && (t += e.start,
                            e = e.data),
                            e[t] = r >> 24,
                            e[t + 1] = r >> 16 & 255,
                            e[t + 2] = r >> 8 & 255,
                            e[t + 3] = 255 & r
                        }
                        ,
                        g.findBox = function(e, t) {
                            var r, i, n, a, o, s, l = [];
                            if (e.data ? (o = e.start,
                            n = e.end,
                            e = e.data) : (o = 0,
                            n = e.byteLength),
                            !t.length)
                                return null;
                            for (r = o; r < n; )
                                s = 1 < (i = g.readUint32(e, r)) ? r + i : n,
                                g.bin2str(e.subarray(r + 4, r + 8)) === t[0] && (1 === t.length ? l.push({
                                    data: e,
                                    start: r + 8,
                                    end: s
                                }) : (a = g.findBox({
                                    data: e,
                                    start: r + 8,
                                    end: s
                                }, t.slice(1))).length && (l = l.concat(a))),
                                r = s;
                            return l
                        }
                        ,
                        g.parseSegmentIndex = function(e) {
                            var t, r = g.findBox(e, ["moov"])[0], i = r ? r.end : null, n = 0, a = g.findBox(e, ["sidx"]);
                            if (!a || !a[0])
                                return null;
                            t = [];
                            var o = (a = a[0]).data[0]
                              , s = g.readUint32(a, n = 0 === o ? 8 : 16);
                            n += 4;
                            n += 0 === o ? 8 : 16;
                            var l = a.end + 0
                              , u = g.readUint16(a, n += 2);
                            n += 2;
                            for (var c = 0; c < u; c++) {
                                var d = n
                                  , f = g.readUint32(a, d);
                                d += 4;
                                var h = 2147483647 & f;
                                if (1 === (2147483648 & f) >>> 31)
                                    return void console.warn("SIDX has hierarchical references (not supported)");
                                var p = g.readUint32(a, d);
                                d += 4,
                                t.push({
                                    referenceSize: h,
                                    subsegmentDuration: p,
                                    info: {
                                        duration: p / s,
                                        start: l,
                                        end: l + h - 1
                                    }
                                }),
                                l += h,
                                n = d += 4
                            }
                            return {
                                earliestPresentationTime: 0,
                                timescale: s,
                                version: o,
                                referencesCount: u,
                                references: t,
                                moovEndOffset: i
                            }
                        }
                        ,
                        g.parseInitSegment = function(e) {
                            var d = [];
                            return g.findBox(e, ["moov", "trak"]).forEach(function(e) {
                                var t = g.findBox(e, ["tkhd"])[0];
                                if (t) {
                                    var r = t.data[t.start]
                                      , i = 0 === r ? 12 : 20
                                      , n = g.readUint32(t, i)
                                      , a = g.findBox(e, ["mdia", "mdhd"])[0];
                                    if (a) {
                                        var o = g.readUint32(a, i = 0 === (r = a.data[a.start]) ? 12 : 20)
                                          , s = g.findBox(e, ["mdia", "hdlr"])[0];
                                        if (s) {
                                            var l = {
                                                soun: "audio",
                                                vide: "video"
                                            }[g.bin2str(s.data.subarray(s.start + 8, s.start + 12))];
                                            if (l) {
                                                var u = g.findBox(e, ["mdia", "minf", "stbl", "stsd"]);
                                                if (u.length) {
                                                    var c = g.bin2str((u = u[0]).data.subarray(u.start + 12, u.start + 16));
                                                    f.logger.log("MP4Demuxer:" + l + ":" + c + " found")
                                                }
                                                d[n] = {
                                                    timescale: o,
                                                    type: l
                                                },
                                                d[l] = {
                                                    timescale: o,
                                                    id: n
                                                }
                                            }
                                        }
                                    }
                                }
                            }),
                            d
                        }
                        ,
                        g.getStartDTS = function(n, e) {
                            var t, r, i;
                            return t = g.findBox(e, ["moof", "traf"]),
                            r = [].concat.apply([], t.map(function(i) {
                                return g.findBox(i, ["tfhd"]).map(function(e) {
                                    var t, r;
                                    return t = g.readUint32(e, 4),
                                    r = n[t].timescale || 9e4,
                                    g.findBox(i, ["tfdt"]).map(function(e) {
                                        var t, r;
                                        return t = e.data[e.start],
                                        r = g.readUint32(e, 4),
                                        1 === t && (r *= 4294967296,
                                        r += g.readUint32(e, 8)),
                                        r
                                    })[0] / r
                                })
                            })),
                            i = Math.min.apply(null, r),
                            isFinite(i) ? i : 0
                        }
                        ,
                        g.offsetStartDTS = function(i, e, o) {
                            g.findBox(e, ["moof", "traf"]).map(function(r) {
                                return g.findBox(r, ["tfhd"]).map(function(e) {
                                    var t = g.readUint32(e, 4)
                                      , a = i[t].timescale || 9e4;
                                    g.findBox(r, ["tfdt"]).map(function(e) {
                                        var t = e.data[e.start]
                                          , r = g.readUint32(e, 4);
                                        if (0 === t)
                                            g.writeUint32(e, 4, r - o * a);
                                        else {
                                            r *= 4294967296,
                                            r += g.readUint32(e, 8);
                                            var i = Math.floor((r = Math.max(r -= o * a, 0)) / 4294967296)
                                              , n = Math.floor(r % 4294967296);
                                            g.writeUint32(e, 4, i),
                                            g.writeUint32(e, 8, n)
                                        }
                                    })
                                })
                            })
                        }
                        ,
                        g.prototype.append = function(e, t, r, i) {
                            var n = this.initData;
                            n || (this.resetInitSegment(e, this.audioCodec, this.videoCodec, !1),
                            n = this.initData);
                            var a, o = this.initPTS;
                            if (void 0 === o) {
                                var s = g.getStartDTS(n, e);
                                this.initPTS = o = s - t,
                                this.observer.trigger(l.default.INIT_PTS_FOUND, {
                                    initPTS: o
                                })
                            }
                            g.offsetStartDTS(n, e, o),
                            a = g.getStartDTS(n, e),
                            this.remuxer.remux(n.audio, n.video, null, null, a, r, i, e)
                        }
                        ,
                        g.prototype.destroy = function() {}
                        ,
                        g
                    }();
                    t.default = i
                },
                "./src/demux/mpegaudio.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var c = {
                        BitratesMap: [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160],
                        SamplingRateMap: [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
                        SamplesCoefficients: [[0, 72, 144, 12], [0, 0, 0, 0], [0, 72, 144, 12], [0, 144, 144, 12]],
                        BytesInSlot: [0, 1, 1, 4],
                        appendFrame: function(e, t, r, i, n) {
                            if (!(t.length < r + 24)) {
                                var a = this.parseHeader(t, r);
                                if (a && r + a.frameLength <= t.length) {
                                    var o = i + n * (9e4 * a.samplesPerFrame / a.sampleRate)
                                      , s = {
                                        unit: t.subarray(r, r + a.frameLength),
                                        pts: o,
                                        dts: o
                                    };
                                    return e.config = [],
                                    e.channelCount = a.channelCount,
                                    e.samplerate = a.sampleRate,
                                    e.samples.push(s),
                                    e.len += a.frameLength,
                                    {
                                        sample: s,
                                        length: a.frameLength
                                    }
                                }
                            }
                        },
                        parseHeader: function(e, t) {
                            var r = e[t + 1] >> 3 & 3
                              , i = e[t + 1] >> 1 & 3
                              , n = e[t + 2] >> 4 & 15
                              , a = e[t + 2] >> 2 & 3;
                            if (1 !== r && 0 !== n && 15 !== n && 3 !== a) {
                                var o = c.SamplingRateMap[3 * (3 === r ? 0 : 2 === r ? 1 : 2) + a]
                                  , s = c.SamplesCoefficients[r][i]
                                  , l = c.BytesInSlot[i]
                                  , u = 8 * s * l;
                                return {
                                    sampleRate: o,
                                    channelCount: e[t + 3] >> 6 == 3 ? 1 : 2,
                                    frameLength: parseInt(s * (1e3 * c.BitratesMap[14 * (3 === r ? 3 - i : 3 === i ? 3 : 4) + n - 1]) / o + (e[t + 2] >> 1 & 1), 10) * l,
                                    samplesPerFrame: u
                                }
                            }
                        },
                        isHeaderPattern: function(e, t) {
                            return 255 === e[t] && 224 == (224 & e[t + 1]) && 0 != (6 & e[t + 1])
                        },
                        isHeader: function(e, t) {
                            return !!(t + 1 < e.length && this.isHeaderPattern(e, t))
                        },
                        probe: function(e, t) {
                            if (t + 1 < e.length && this.isHeaderPattern(e, t)) {
                                var r = this.parseHeader(e, t)
                                  , i = 4;
                                r && r.frameLength && (i = r.frameLength);
                                var n = t + i;
                                if (n === e.length || n + 1 < e.length && this.isHeaderPattern(e, n))
                                    return !0
                            }
                            return !1
                        }
                    };
                    t.default = c
                },
                "./src/demux/sample-aes.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var n = r("./src/crypt/decrypter.js")
                      , i = function() {
                        function e(e, t, r, i) {
                            this.decryptdata = r,
                            this.discardEPB = i,
                            this.decrypter = new n.default(e,t,{
                                removePKCS7Padding: !1
                            })
                        }
                        return e.prototype.decryptBuffer = function(e, t) {
                            this.decrypter.decrypt(e, this.decryptdata.key.buffer, this.decryptdata.iv.buffer, t)
                        }
                        ,
                        e.prototype.decryptAacSample = function(t, r, i, n) {
                            var a = t[r].unit
                              , e = a.subarray(16, a.length - a.length % 16)
                              , o = e.buffer.slice(e.byteOffset, e.byteOffset + e.length)
                              , s = this;
                            this.decryptBuffer(o, function(e) {
                                e = new Uint8Array(e),
                                a.set(e, 16),
                                n || s.decryptAacSamples(t, r + 1, i)
                            })
                        }
                        ,
                        e.prototype.decryptAacSamples = function(e, t, r) {
                            for (; ; t++) {
                                if (e.length <= t)
                                    return void r();
                                if (!(e[t].unit.length < 32)) {
                                    var i = this.decrypter.isSync();
                                    if (this.decryptAacSample(e, t, r, i),
                                    !i)
                                        return
                                }
                            }
                        }
                        ,
                        e.prototype.getAvcEncryptedData = function(e) {
                            for (var t = new Int8Array(16 * Math.floor((e.length - 48) / 160) + 16), r = 0, i = 32; i <= e.length - 16; i += 160,
                            r += 16)
                                t.set(e.subarray(i, i + 16), r);
                            return t
                        }
                        ,
                        e.prototype.getAvcDecryptedUnit = function(e, t) {
                            t = new Uint8Array(t);
                            for (var r = 0, i = 32; i <= e.length - 16; i += 160,
                            r += 16)
                                e.set(t.subarray(r, r + 16), i);
                            return e
                        }
                        ,
                        e.prototype.decryptAvcSample = function(t, r, i, n, a, o) {
                            var s = this.discardEPB(a.data)
                              , e = this.getAvcEncryptedData(s)
                              , l = this;
                            this.decryptBuffer(e.buffer, function(e) {
                                a.data = l.getAvcDecryptedUnit(s, e),
                                o || l.decryptAvcSamples(t, r, i + 1, n)
                            })
                        }
                        ,
                        e.prototype.decryptAvcSamples = function(e, t, r, i) {
                            for (; ; t++,
                            r = 0) {
                                if (e.length <= t)
                                    return void i();
                                for (var n = e[t].units; !(n.length <= r); r++) {
                                    var a = n[r];
                                    if (!(a.length <= 48 || 1 !== a.type && 5 !== a.type)) {
                                        var o = this.decrypter.isSync();
                                        if (this.decryptAvcSample(e, t, r, i, a, o),
                                        !o)
                                            return
                                    }
                                }
                            }
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/demux/tsdemuxer.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var v = r("./src/demux/adts.js")
                      , s = r("./src/demux/mpegaudio.js")
                      , P = r("./src/events.js")
                      , A = r("./src/demux/exp-golomb.js")
                      , i = r("./src/demux/sample-aes.js")
                      , O = r("./src/utils/logger.js")
                      , M = r("./src/errors.js")
                      , n = {
                        video: 1,
                        audio: 2,
                        id3: 3,
                        text: 4
                    }
                      , a = function() {
                        function C(e, t, r, i) {
                            this.observer = e,
                            this.config = r,
                            this.typeSupported = i,
                            this.remuxer = t,
                            this.sampleAes = null
                        }
                        return C.prototype.setDecryptData = function(e) {
                            this.sampleAes = null != e && null != e.key && "SAMPLE-AES" === e.method ? new i.default(this.observer,this.config,e,this.discardEPB) : null
                        }
                        ,
                        C.probe = function(e) {
                            var t = C._syncOffset(e);
                            return !(t < 0) && (t && O.logger.warn("MPEG2-TS detected but first sync word found @ offset " + t + ", junk ahead ?"),
                            !0)
                        }
                        ,
                        C._syncOffset = function(e) {
                            for (var t = Math.min(1e3, e.length - 564), r = 0; r < t; ) {
                                if (71 === e[r] && 71 === e[r + 188] && 71 === e[r + 376])
                                    return r;
                                r++
                            }
                            return -1
                        }
                        ,
                        C.createTrack = function(e, t) {
                            return {
                                container: "video" === e || "audio" === e ? "video/mp2t" : void 0,
                                type: e,
                                id: n[e],
                                pid: -1,
                                inputTimeScale: 9e4,
                                sequenceNumber: 0,
                                samples: [],
                                len: 0,
                                dropped: "video" === e ? 0 : void 0,
                                isAAC: "audio" === e || void 0,
                                duration: "audio" === e ? t : void 0
                            }
                        }
                        ,
                        C.prototype.resetInitSegment = function(e, t, r, i) {
                            this.pmtParsed = !1,
                            this._pmtId = -1,
                            this._avcTrack = C.createTrack("video", i),
                            this._audioTrack = C.createTrack("audio", i),
                            this._id3Track = C.createTrack("id3", i),
                            this._txtTrack = C.createTrack("text", i),
                            this.aacOverFlow = null,
                            this.aacLastPTS = null,
                            this.avcSample = null,
                            this.audioCodec = t,
                            this.videoCodec = r,
                            this._duration = i
                        }
                        ,
                        C.prototype.resetTimeStamp = function() {}
                        ,
                        C.prototype.append = function(e, t, r, i) {
                            var n, a, o, s, l, u = e.length, c = !1;
                            this.contiguous = r;
                            var d = this.pmtParsed
                              , f = this._avcTrack
                              , h = this._audioTrack
                              , p = this._id3Track
                              , g = f.pid
                              , v = h.pid
                              , y = p.pid
                              , m = this._pmtId
                              , _ = f.pesData
                              , T = h.pesData
                              , b = p.pesData
                              , E = this._parsePAT
                              , S = this._parsePMT
                              , A = this._parsePES
                              , k = this._parseAVCPES.bind(this)
                              , w = this._parseAACPES.bind(this)
                              , R = this._parseMPEGPES.bind(this)
                              , L = this._parseID3PES.bind(this)
                              , I = C._syncOffset(e);
                            for (u -= (u + I) % 188,
                            n = I; n < u; n += 188)
                                if (71 === e[n]) {
                                    if (a = !!(64 & e[n + 1]),
                                    o = ((31 & e[n + 1]) << 8) + e[n + 2],
                                    1 < (48 & e[n + 3]) >> 4) {
                                        if ((s = n + 5 + e[n + 4]) === n + 188)
                                            continue
                                    } else
                                        s = n + 4;
                                    switch (o) {
                                    case g:
                                        a && (_ && (l = A(_)) && void 0 !== l.pts && k(l, !1),
                                        _ = {
                                            data: [],
                                            size: 0
                                        }),
                                        _ && (_.data.push(e.subarray(s, n + 188)),
                                        _.size += n + 188 - s);
                                        break;
                                    case v:
                                        a && (T && (l = A(T)) && void 0 !== l.pts && (h.isAAC ? w(l) : R(l)),
                                        T = {
                                            data: [],
                                            size: 0
                                        }),
                                        T && (T.data.push(e.subarray(s, n + 188)),
                                        T.size += n + 188 - s);
                                        break;
                                    case y:
                                        a && (b && (l = A(b)) && void 0 !== l.pts && L(l),
                                        b = {
                                            data: [],
                                            size: 0
                                        }),
                                        b && (b.data.push(e.subarray(s, n + 188)),
                                        b.size += n + 188 - s);
                                        break;
                                    case 0:
                                        a && (s += e[s] + 1),
                                        m = this._pmtId = E(e, s);
                                        break;
                                    case m:
                                        a && (s += e[s] + 1);
                                        var D = S(e, s, !0 === this.typeSupported.mpeg || !0 === this.typeSupported.mp3, null != this.sampleAes);
                                        0 < (g = D.avc) && (f.pid = g),
                                        0 < (v = D.audio) && (h.pid = v,
                                        h.isAAC = D.isAAC),
                                        0 < (y = D.id3) && (p.pid = y),
                                        c && !d && (O.logger.log("reparse from beginning"),
                                        c = !1,
                                        n = I - 188),
                                        d = this.pmtParsed = !0;
                                        break;
                                    case 17:
                                    case 8191:
                                        break;
                                    default:
                                        c = !0
                                    }
                                } else
                                    this.observer.trigger(P.default.ERROR, {
                                        type: M.ErrorTypes.MEDIA_ERROR,
                                        details: M.ErrorDetails.FRAG_PARSING_ERROR,
                                        fatal: !1,
                                        reason: "TS packet did not start with 0x47"
                                    });
                            f.pesData = _ && (l = A(_)) && void 0 !== l.pts ? (k(l, !0),
                            null) : _,
                            h.pesData = T && (l = A(T)) && void 0 !== l.pts ? (h.isAAC ? w(l) : R(l),
                            null) : (T && T.size && O.logger.log("last AAC PES packet truncated,might overlap between fragments"),
                            T),
                            p.pesData = b && (l = A(b)) && void 0 !== l.pts ? (L(l),
                            null) : b,
                            null == this.sampleAes ? this.remuxer.remux(h, f, p, this._txtTrack, t, r, i) : this.decryptAndRemux(h, f, p, this._txtTrack, t, r, i)
                        }
                        ,
                        C.prototype.decryptAndRemux = function(e, t, r, i, n, a, o) {
                            if (e.samples && e.isAAC) {
                                var s = this;
                                this.sampleAes.decryptAacSamples(e.samples, 0, function() {
                                    s.decryptAndRemuxAvc(e, t, r, i, n, a, o)
                                })
                            } else
                                this.decryptAndRemuxAvc(e, t, r, i, n, a, o)
                        }
                        ,
                        C.prototype.decryptAndRemuxAvc = function(e, t, r, i, n, a, o) {
                            if (t.samples) {
                                var s = this;
                                this.sampleAes.decryptAvcSamples(t.samples, 0, 0, function() {
                                    s.remuxer.remux(e, t, r, i, n, a, o)
                                })
                            } else
                                this.remuxer.remux(e, t, r, i, n, a, o)
                        }
                        ,
                        C.prototype.destroy = function() {
                            this._initPTS = this._initDTS = void 0,
                            this._duration = 0
                        }
                        ,
                        C.prototype._parsePAT = function(e, t) {
                            return (31 & e[t + 10]) << 8 | e[t + 11]
                        }
                        ,
                        C.prototype._parsePMT = function(e, t, r, i) {
                            var n, a, o = {
                                audio: -1,
                                avc: -1,
                                id3: -1,
                                isAAC: !0
                            };
                            for (n = t + 3 + ((15 & e[t + 1]) << 8 | e[t + 2]) - 4,
                            t += 12 + ((15 & e[t + 10]) << 8 | e[t + 11]); t < n; ) {
                                switch (a = (31 & e[t + 1]) << 8 | e[t + 2],
                                e[t]) {
                                case 207:
                                    if (!i) {
                                        O.logger.log("unkown stream type:" + e[t]);
                                        break
                                    }
                                case 15:
                                    -1 === o.audio && (o.audio = a);
                                    break;
                                case 21:
                                    -1 === o.id3 && (o.id3 = a);
                                    break;
                                case 219:
                                    if (!i) {
                                        O.logger.log("unkown stream type:" + e[t]);
                                        break
                                    }
                                case 27:
                                    -1 === o.avc && (o.avc = a);
                                    break;
                                case 3:
                                case 4:
                                    r ? -1 === o.audio && (o.audio = a,
                                    o.isAAC = !1) : O.logger.log("MPEG audio found, not supported in this browser for now");
                                    break;
                                case 36:
                                    O.logger.warn("HEVC stream type found, not supported for now");
                                    break;
                                default:
                                    O.logger.log("unkown stream type:" + e[t])
                                }
                                t += 5 + ((15 & e[t + 3]) << 8 | e[t + 4])
                            }
                            return o
                        }
                        ,
                        C.prototype._parsePES = function(e) {
                            var t, r, i, n, a, o, s, l, u = 0, c = e.data;
                            if (!e || 0 === e.size)
                                return null;
                            for (; c[0].length < 19 && 1 < c.length; ) {
                                var d = new Uint8Array(c[0].length + c[1].length);
                                d.set(c[0]),
                                d.set(c[1], c[0].length),
                                c[0] = d,
                                c.splice(1, 1)
                            }
                            if (1 !== ((t = c[0])[0] << 16) + (t[1] << 8) + t[2])
                                return null;
                            if ((i = (t[4] << 8) + t[5]) && e.size - 6 < i)
                                return null;
                            192 & (r = t[7]) && (4294967295 < (o = 536870912 * (14 & t[9]) + 4194304 * (255 & t[10]) + 16384 * (254 & t[11]) + 128 * (255 & t[12]) + (254 & t[13]) / 2) && (o -= 8589934592),
                            64 & r ? (4294967295 < (s = 536870912 * (14 & t[14]) + 4194304 * (255 & t[15]) + 16384 * (254 & t[16]) + 128 * (255 & t[17]) + (254 & t[18]) / 2) && (s -= 8589934592),
                            54e5 < o - s && (O.logger.warn(Math.round((o - s) / 9e4) + "s delta between PTS and DTS, align them"),
                            o = s)) : s = o),
                            e.size -= l = (n = t[8]) + 9,
                            a = new Uint8Array(e.size);
                            for (var f = 0, h = c.length; f < h; f++) {
                                var p = (t = c[f]).byteLength;
                                if (l) {
                                    if (p < l) {
                                        l -= p;
                                        continue
                                    }
                                    t = t.subarray(l),
                                    p -= l,
                                    l = 0
                                }
                                a.set(t, u),
                                u += p
                            }
                            return i && (i -= n + 3),
                            {
                                data: a,
                                pts: o,
                                dts: s,
                                len: i
                            }
                        }
                        ,
                        C.prototype.pushAccesUnit = function(e, t) {
                            if (e.units.length && e.frame) {
                                var r = t.samples
                                  , i = r.length;
                                !this.config.forceKeyFrameOnDiscontinuity || !0 === e.key || t.sps && (i || this.contiguous) ? (e.id = i,
                                r.push(e)) : t.dropped++
                            }
                            e.debug.length && O.logger.log(e.pts + "/" + e.dts + ":" + e.debug)
                        }
                        ,
                        C.prototype._parseAVCPES = function(p, e) {
                            var g, v, y, m = this, _ = this._avcTrack, t = this._parseAVCNALu(p.data), T = this.avcSample, b = !1, E = this.pushAccesUnit.bind(this), S = function(e, t, r, i) {
                                return {
                                    key: e,
                                    pts: t,
                                    dts: r,
                                    units: [],
                                    debug: i
                                }
                            };
                            p.data = null,
                            T && t.length && !_.audFound && (E(T, _),
                            T = this.avcSample = S(!1, p.pts, p.dts, "")),
                            t.forEach(function(e) {
                                switch (e.type) {
                                case 1:
                                    v = !0,
                                    T || (T = m.avcSample = S(!0, p.pts, p.dts, "")),
                                    T.frame = !0;
                                    var t = e.data;
                                    if (b && 4 < t.length) {
                                        var r = new A.default(t).readSliceType();
                                        2 !== r && 4 !== r && 7 !== r && 9 !== r || (T.key = !0)
                                    }
                                    break;
                                case 5:
                                    v = !0,
                                    T || (T = m.avcSample = S(!0, p.pts, p.dts, "")),
                                    T.key = !0,
                                    T.frame = !0;
                                    break;
                                case 6:
                                    v = !0,
                                    (g = new A.default(m.discardEPB(e.data))).readUByte();
                                    for (var i = 0, n = 0, a = !1, o = 0; !a && 1 < g.bytesAvailable; ) {
                                        for (i = 0; i += o = g.readUByte(),
                                        255 === o; )
                                            ;
                                        for (n = 0; n += o = g.readUByte(),
                                        255 === o; )
                                            ;
                                        if (4 === i && 0 !== g.bytesAvailable) {
                                            if (a = !0,
                                            181 === g.readUByte())
                                                if (49 === g.readUShort())
                                                    if (1195456820 === g.readUInt())
                                                        if (3 === g.readUByte()) {
                                                            var s = g.readUByte()
                                                              , l = 31 & s
                                                              , u = [s, g.readUByte()];
                                                            for (y = 0; y < l; y++)
                                                                u.push(g.readUByte()),
                                                                u.push(g.readUByte()),
                                                                u.push(g.readUByte());
                                                            m._insertSampleInOrder(m._txtTrack.samples, {
                                                                type: 3,
                                                                pts: p.pts,
                                                                bytes: u
                                                            })
                                                        }
                                        } else if (n < g.bytesAvailable)
                                            for (y = 0; y < n; y++)
                                                g.readUByte()
                                    }
                                    break;
                                case 7:
                                    if (b = v = !0,
                                    !_.sps) {
                                        var c = (g = new A.default(e.data)).readSPS();
                                        _.width = c.width,
                                        _.height = c.height,
                                        _.pixelRatio = c.pixelRatio,
                                        _.sps = [e.data],
                                        _.duration = m._duration;
                                        var d = e.data.subarray(1, 4)
                                          , f = "avc1.";
                                        for (y = 0; y < 3; y++) {
                                            var h = d[y].toString(16);
                                            h.length < 2 && (h = "0" + h),
                                            f += h
                                        }
                                        _.codec = f
                                    }
                                    break;
                                case 8:
                                    v = !0,
                                    _.pps || (_.pps = [e.data]);
                                    break;
                                case 9:
                                    _.audFound = !(v = !1),
                                    T && E(T, _),
                                    T = m.avcSample = S(!1, p.pts, p.dts, "");
                                    break;
                                case 12:
                                    v = !1;
                                    break;
                                default:
                                    v = !1,
                                    T && (T.debug += "unknown NAL " + e.type + " ")
                                }
                                T && v && T.units.push(e)
                            }),
                            e && T && (E(T, _),
                            this.avcSample = null)
                        }
                        ,
                        C.prototype._insertSampleInOrder = function(e, t) {
                            var r = e.length;
                            if (0 < r) {
                                if (e[r - 1].pts <= t.pts)
                                    e.push(t);
                                else
                                    for (var i = r - 1; 0 <= i; i--)
                                        if (t.pts < e[i].pts) {
                                            e.splice(i, 0, t);
                                            break
                                        }
                            } else
                                e.push(t)
                        }
                        ,
                        C.prototype._getLastNalUnit = function() {
                            var e, t = this.avcSample;
                            if (!t || 0 === t.units.length) {
                                var r = this._avcTrack.samples;
                                t = r[r.length - 1]
                            }
                            if (t) {
                                var i = t.units;
                                e = i[i.length - 1]
                            }
                            return e
                        }
                        ,
                        C.prototype._parseAVCNALu = function(e) {
                            var t, r, i, n, a = 0, o = e.byteLength, s = this._avcTrack, l = s.naluState || 0, u = l, c = [], d = -1;
                            for (-1 === l && (n = 31 & e[d = 0],
                            l = 0,
                            a = 1); a < o; )
                                if (t = e[a++],
                                l)
                                    if (1 !== l)
                                        if (t)
                                            if (1 === t) {
                                                var f, h;
                                                if (0 <= d)
                                                    i = {
                                                        data: e.subarray(d, a - l - 1),
                                                        type: n
                                                    },
                                                    c.push(i);
                                                else if (f = this._getLastNalUnit())
                                                    if (u && a <= 4 - u && f.state && (f.data = f.data.subarray(0, f.data.byteLength - u)),
                                                    0 < (r = a - l - 1))
                                                        (h = new Uint8Array(f.data.byteLength + r)).set(f.data, 0),
                                                        h.set(e.subarray(0, r), f.data.byteLength),
                                                        f.data = h;
                                                l = a < o ? (n = 31 & e[d = a],
                                                0) : -1
                                            } else
                                                l = 0;
                                        else
                                            l = 3;
                                    else
                                        l = t ? 0 : 2;
                                else
                                    l = t ? 0 : 1;
                            (0 <= d && 0 <= l && (i = {
                                data: e.subarray(d, o),
                                type: n,
                                state: l
                            },
                            c.push(i)),
                            0 === c.length) && ((f = this._getLastNalUnit()) && ((h = new Uint8Array(f.data.byteLength + e.byteLength)).set(f.data, 0),
                            h.set(e, f.data.byteLength),
                            f.data = h));
                            return s.naluState = l,
                            c
                        }
                        ,
                        C.prototype.discardEPB = function(e) {
                            for (var t, r, i = e.byteLength, n = [], a = 1; a < i - 2; )
                                0 === e[a] && 0 === e[a + 1] && 3 === e[a + 2] ? (n.push(a + 2),
                                a += 2) : a++;
                            if (0 === n.length)
                                return e;
                            t = i - n.length,
                            r = new Uint8Array(t);
                            var o = 0;
                            for (a = 0; a < t; o++,
                            a++)
                                o === n[0] && (o++,
                                n.shift()),
                                r[a] = e[o];
                            return r
                        }
                        ,
                        C.prototype._parseAACPES = function(e) {
                            var t, r, i, n, a, o = this._audioTrack, s = e.data, l = e.pts, u = this.aacOverFlow, c = this.aacLastPTS;
                            if (u) {
                                var d = new Uint8Array(u.byteLength + s.byteLength);
                                d.set(u, 0),
                                d.set(s, u.byteLength),
                                s = d
                            }
                            for (i = 0,
                            a = s.length; i < a - 1 && !v.isHeader(s, i); i++)
                                ;
                            if (i) {
                                var f = void 0
                                  , h = void 0;
                                if (h = i < a - 1 ? (f = "AAC PES did not start with ADTS header,offset:" + i,
                                !1) : (f = "no ADTS header found in AAC PES",
                                !0),
                                O.logger.warn("parsing error:" + f),
                                this.observer.trigger(P.default.ERROR, {
                                    type: M.ErrorTypes.MEDIA_ERROR,
                                    details: M.ErrorDetails.FRAG_PARSING_ERROR,
                                    fatal: h,
                                    reason: f
                                }),
                                h)
                                    return
                            }
                            if (v.initTrackConfig(o, this.observer, s, i, this.audioCodec),
                            r = 0,
                            t = v.getFrameDuration(o.samplerate),
                            u && c) {
                                var p = c + t;
                                1 < Math.abs(p - l) && (O.logger.log("AAC: align PTS for overlapping frames by " + Math.round((p - l) / 90)),
                                l = p)
                            }
                            for (; i < a; )
                                if (v.isHeader(s, i) && i + 5 < a) {
                                    var g = v.appendFrame(o, s, i, l, r);
                                    if (!g)
                                        break;
                                    i += g.length,
                                    n = g.sample.pts,
                                    r++
                                } else
                                    i++;
                            u = i < a ? s.subarray(i, a) : null,
                            this.aacOverFlow = u,
                            this.aacLastPTS = n
                        }
                        ,
                        C.prototype._parseMPEGPES = function(e) {
                            for (var t = e.data, r = t.length, i = 0, n = 0, a = e.pts; n < r; )
                                if (s.default.isHeader(t, n)) {
                                    var o = s.default.appendFrame(this._audioTrack, t, n, a, i);
                                    if (!o)
                                        break;
                                    n += o.length,
                                    i++
                                } else
                                    n++
                        }
                        ,
                        C.prototype._parseID3PES = function(e) {
                            this._id3Track.samples.push(e)
                        }
                        ,
                        C
                    }();
                    t.default = a
                },
                "./src/errors.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.ErrorTypes = {
                        NETWORK_ERROR: "networkError",
                        MEDIA_ERROR: "mediaError",
                        KEY_SYSTEM_ERROR: "keySystemError",
                        MUX_ERROR: "muxError",
                        OTHER_ERROR: "otherError"
                    },
                    t.ErrorDetails = {
                        KEY_SYSTEM_NO_KEYS: "keySystemNoKeys",
                        KEY_SYSTEM_NO_ACCESS: "keySystemNoAccess",
                        KEY_SYSTEM_NO_SESSION: "keySystemNoSession",
                        KEY_SYSTEM_LICENSE_REQUEST_FAILED: "keySystemLicenseRequestFailed",
                        MANIFEST_LOAD_ERROR: "manifestLoadError",
                        MANIFEST_LOAD_TIMEOUT: "manifestLoadTimeOut",
                        MANIFEST_PARSING_ERROR: "manifestParsingError",
                        MANIFEST_INCOMPATIBLE_CODECS_ERROR: "manifestIncompatibleCodecsError",
                        LEVEL_LOAD_ERROR: "levelLoadError",
                        LEVEL_LOAD_TIMEOUT: "levelLoadTimeOut",
                        LEVEL_SWITCH_ERROR: "levelSwitchError",
                        AUDIO_TRACK_LOAD_ERROR: "audioTrackLoadError",
                        AUDIO_TRACK_LOAD_TIMEOUT: "audioTrackLoadTimeOut",
                        FRAG_LOAD_ERROR: "fragLoadError",
                        FRAG_LOAD_TIMEOUT: "fragLoadTimeOut",
                        FRAG_DECRYPT_ERROR: "fragDecryptError",
                        FRAG_PARSING_ERROR: "fragParsingError",
                        REMUX_ALLOC_ERROR: "remuxAllocError",
                        KEY_LOAD_ERROR: "keyLoadError",
                        KEY_LOAD_TIMEOUT: "keyLoadTimeOut",
                        BUFFER_ADD_CODEC_ERROR: "bufferAddCodecError",
                        BUFFER_APPEND_ERROR: "bufferAppendError",
                        BUFFER_APPENDING_ERROR: "bufferAppendingError",
                        BUFFER_STALLED_ERROR: "bufferStalledError",
                        BUFFER_FULL_ERROR: "bufferFullError",
                        BUFFER_SEEK_OVER_HOLE: "bufferSeekOverHole",
                        BUFFER_NUDGE_ON_STALL: "bufferNudgeOnStall",
                        INTERNAL_EXCEPTION: "internalException"
                    }
                },
                "./src/event-handler.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = r("./src/utils/logger.js")
                      , n = r("./src/errors.js")
                      , a = r("./src/events.js")
                      , o = {
                        hlsEventGeneric: !0,
                        hlsHandlerDestroying: !0,
                        hlsHandlerDestroyed: !0
                    }
                      , s = function() {
                        function e(e) {
                            for (var t = [], r = 1; r < arguments.length; r++)
                                t[r - 1] = arguments[r];
                            this.hls = e,
                            this.onEvent = this.onEvent.bind(this),
                            this.handledEvents = t,
                            this.useGenericHandler = !0,
                            this.registerListeners()
                        }
                        return e.prototype.destroy = function() {
                            this.onHandlerDestroying(),
                            this.unregisterListeners(),
                            this.onHandlerDestroyed()
                        }
                        ,
                        e.prototype.onHandlerDestroying = function() {}
                        ,
                        e.prototype.onHandlerDestroyed = function() {}
                        ,
                        e.prototype.isEventHandler = function() {
                            return "object" == typeof this.handledEvents && this.handledEvents.length && "function" == typeof this.onEvent
                        }
                        ,
                        e.prototype.registerListeners = function() {
                            this.isEventHandler() && this.handledEvents.forEach(function(e) {
                                if (o[e])
                                    throw Error("Forbidden event-name: " + e);
                                this.hls.on(e, this.onEvent)
                            }, this)
                        }
                        ,
                        e.prototype.unregisterListeners = function() {
                            this.isEventHandler() && this.handledEvents.forEach(function(e) {
                                this.hls.off(e, this.onEvent)
                            }, this)
                        }
                        ,
                        e.prototype.onEvent = function(e, t) {
                            this.onEventGeneric(e, t)
                        }
                        ,
                        e.prototype.onEventGeneric = function(t, e) {
                            try {
                                (function(e, t) {
                                    var r = "on" + e.replace("hls", "");
                                    if ("function" != typeof this[r])
                                        throw Error("Event " + e + " has no generic handler in this " + this.constructor.name + " class (tried " + r + ")");
                                    return this[r].bind(this, t)
                                }
                                ).call(this, t, e).call()
                            } catch (e) {
                                i.logger.error("An internal error happened while handling event " + t + '. Error message: "' + e.message + '". Here is a stacktrace:', e),
                                this.hls.trigger(a.default.ERROR, {
                                    type: n.ErrorTypes.OTHER_ERROR,
                                    details: n.ErrorDetails.INTERNAL_EXCEPTION,
                                    fatal: !1,
                                    event: t,
                                    err: e
                                })
                            }
                        }
                        ,
                        e
                    }();
                    t.default = s
                },
                "./src/events.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    t.default = {
                        MEDIA_ATTACHING: "hlsMediaAttaching",
                        MEDIA_ATTACHED: "hlsMediaAttached",
                        MEDIA_DETACHING: "hlsMediaDetaching",
                        MEDIA_DETACHED: "hlsMediaDetached",
                        BUFFER_RESET: "hlsBufferReset",
                        BUFFER_CODECS: "hlsBufferCodecs",
                        BUFFER_CREATED: "hlsBufferCreated",
                        BUFFER_APPENDING: "hlsBufferAppending",
                        BUFFER_APPENDED: "hlsBufferAppended",
                        BUFFER_EOS: "hlsBufferEos",
                        BUFFER_FLUSHING: "hlsBufferFlushing",
                        BUFFER_FLUSHED: "hlsBufferFlushed",
                        MANIFEST_LOADING: "hlsManifestLoading",
                        MANIFEST_LOADED: "hlsManifestLoaded",
                        MANIFEST_PARSED: "hlsManifestParsed",
                        LEVEL_SWITCHING: "hlsLevelSwitching",
                        LEVEL_SWITCHED: "hlsLevelSwitched",
                        LEVEL_LOADING: "hlsLevelLoading",
                        LEVEL_LOADED: "hlsLevelLoaded",
                        LEVEL_UPDATED: "hlsLevelUpdated",
                        LEVEL_PTS_UPDATED: "hlsLevelPtsUpdated",
                        AUDIO_TRACKS_UPDATED: "hlsAudioTracksUpdated",
                        AUDIO_TRACK_SWITCHING: "hlsAudioTrackSwitching",
                        AUDIO_TRACK_SWITCHED: "hlsAudioTrackSwitched",
                        AUDIO_TRACK_LOADING: "hlsAudioTrackLoading",
                        AUDIO_TRACK_LOADED: "hlsAudioTrackLoaded",
                        SUBTITLE_TRACKS_UPDATED: "hlsSubtitleTracksUpdated",
                        SUBTITLE_TRACK_SWITCH: "hlsSubtitleTrackSwitch",
                        SUBTITLE_TRACK_LOADING: "hlsSubtitleTrackLoading",
                        SUBTITLE_TRACK_LOADED: "hlsSubtitleTrackLoaded",
                        SUBTITLE_FRAG_PROCESSED: "hlsSubtitleFragProcessed",
                        INIT_PTS_FOUND: "hlsInitPtsFound",
                        FRAG_LOADING: "hlsFragLoading",
                        FRAG_LOAD_PROGRESS: "hlsFragLoadProgress",
                        FRAG_LOAD_EMERGENCY_ABORTED: "hlsFragLoadEmergencyAborted",
                        FRAG_LOADED: "hlsFragLoaded",
                        FRAG_DECRYPTED: "hlsFragDecrypted",
                        FRAG_PARSING_INIT_SEGMENT: "hlsFragParsingInitSegment",
                        FRAG_PARSING_USERDATA: "hlsFragParsingUserdata",
                        FRAG_PARSING_METADATA: "hlsFragParsingMetadata",
                        FRAG_PARSING_DATA: "hlsFragParsingData",
                        FRAG_PARSED: "hlsFragParsed",
                        FRAG_BUFFERED: "hlsFragBuffered",
                        FRAG_CHANGED: "hlsFragChanged",
                        FPS_DROP: "hlsFpsDrop",
                        FPS_DROP_LEVEL_CAPPING: "hlsFpsDropLevelCapping",
                        ERROR: "hlsError",
                        DESTROYING: "hlsDestroying",
                        KEY_LOADING: "hlsKeyLoading",
                        KEY_LOADED: "hlsKeyLoaded",
                        STREAM_STATE_TRANSITION: "hlsStreamStateTransition"
                    }
                },
                "./src/hls.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var a = r("./node_modules/url-toolkit/src/url-toolkit.js")
                      , o = r("./src/errors.js")
                      , E = r("./src/loader/playlist-loader.js")
                      , S = r("./src/loader/fragment-loader.js")
                      , A = r("./src/loader/key-loader.js")
                      , k = r("./src/controller/fragment-tracker.js")
                      , w = r("./src/controller/stream-controller.js")
                      , R = r("./src/controller/level-controller.js")
                      , L = r("./src/controller/id3-track-controller.js")
                      , s = r("./src/is-supported.js")
                      , I = r("./src/utils/logger.js")
                      , l = r("./src/config.js")
                      , u = r("./src/events.js")
                      , c = function(T) {
                        function b(e) {
                            void 0 === e && (e = {});
                            var t = T.call(this) || this
                              , r = b.DefaultConfig;
                            if ((e.liveSyncDurationCount || e.liveMaxLatencyDurationCount) && (e.liveSyncDuration || e.liveMaxLatencyDuration))
                                throw Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");
                            for (var i in r)
                                i in e || (e[i] = r[i]);
                            if (void 0 !== e.liveMaxLatencyDurationCount && e.liveMaxLatencyDurationCount <= e.liveSyncDurationCount)
                                throw Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');
                            if (void 0 !== e.liveMaxLatencyDuration && (e.liveMaxLatencyDuration <= e.liveSyncDuration || void 0 === e.liveSyncDuration))
                                throw Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');
                            I.enableLogs(e.debug),
                            t.config = e,
                            t._autoLevelCapping = -1;
                            var n = t.abrController = new e.abrController(t)
                              , a = new e.bufferController(t)
                              , o = new e.capLevelController(t)
                              , s = new e.fpsController(t)
                              , l = new E.default(t)
                              , u = new S.default(t)
                              , c = new A.default(t)
                              , d = new L.default(t)
                              , f = t.levelController = new R.default(t)
                              , h = new k.FragmentTracker(t)
                              , p = [f, t.streamController = new w.default(t,h)]
                              , g = e.audioStreamController;
                            g && p.push(new g(t,h)),
                            t.networkControllers = p;
                            var v = [l, u, c, n, a, o, s, d, h];
                            if (g = e.audioTrackController) {
                                var y = new g(t);
                                v.push(t.audioTrackController = y)
                            }
                            if (g = e.subtitleTrackController) {
                                var m = new g(t);
                                p.push(t.subtitleTrackController = m)
                            }
                            if (g = e.emeController) {
                                var _ = new g(t);
                                v.push(t.emeController = _)
                            }
                            return (g = e.subtitleStreamController) && p.push(new g(t,h)),
                            (g = e.timelineController) && v.push(new g(t)),
                            t.coreComponents = v,
                            t
                        }
                        return n(b, T),
                        Object.defineProperty(b, "version", {
                            get: function() {
                                return "0.12.4"
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        b.isSupported = function() {
                            return s.isSupported()
                        }
                        ,
                        Object.defineProperty(b, "Events", {
                            get: function() {
                                return u.default
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b, "ErrorTypes", {
                            get: function() {
                                return o.ErrorTypes
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b, "ErrorDetails", {
                            get: function() {
                                return o.ErrorDetails
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b, "DefaultConfig", {
                            get: function() {
                                return b.defaultConfig ? b.defaultConfig : l.hlsDefaultConfig
                            },
                            set: function(e) {
                                b.defaultConfig = e
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        b.prototype.destroy = function() {
                            I.logger.log("destroy"),
                            this.trigger(u.default.DESTROYING),
                            this.detachMedia(),
                            this.coreComponents.concat(this.networkControllers).forEach(function(e) {
                                e.destroy()
                            }),
                            this.url = null,
                            this.removeAllListeners(),
                            this._autoLevelCapping = -1
                        }
                        ,
                        b.prototype.attachMedia = function(e) {
                            I.logger.log("attachMedia"),
                            this.media = e,
                            this.trigger(u.default.MEDIA_ATTACHING, {
                                media: e
                            })
                        }
                        ,
                        b.prototype.detachMedia = function() {
                            I.logger.log("detachMedia"),
                            this.trigger(u.default.MEDIA_DETACHING),
                            this.media = null
                        }
                        ,
                        b.prototype.loadSource = function(e) {
                            e = a.buildAbsoluteURL(window.location.href, e, {
                                alwaysNormalize: !0
                            }),
                            I.logger.log("loadSource:" + e),
                            this.url = e,
                            this.trigger(u.default.MANIFEST_LOADING, {
                                url: e
                            })
                        }
                        ,
                        b.prototype.startLoad = function(t) {
                            void 0 === t && (t = -1),
                            I.logger.log("startLoad(" + t + ")"),
                            this.networkControllers.forEach(function(e) {
                                e.startLoad(t)
                            })
                        }
                        ,
                        b.prototype.stopLoad = function() {
                            I.logger.log("stopLoad"),
                            this.networkControllers.forEach(function(e) {
                                e.stopLoad()
                            })
                        }
                        ,
                        b.prototype.swapAudioCodec = function() {
                            I.logger.log("swapAudioCodec"),
                            this.streamController.swapAudioCodec()
                        }
                        ,
                        b.prototype.recoverMediaError = function() {
                            I.logger.log("recoverMediaError");
                            var e = this.media;
                            this.detachMedia(),
                            this.attachMedia(e)
                        }
                        ,
                        Object.defineProperty(b.prototype, "levels", {
                            get: function() {
                                return this.levelController.levels
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "currentLevel", {
                            get: function() {
                                return this.streamController.currentLevel
                            },
                            set: function(e) {
                                I.logger.log("set currentLevel:" + e),
                                this.loadLevel = e,
                                this.streamController.immediateLevelSwitch()
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "nextLevel", {
                            get: function() {
                                return this.streamController.nextLevel
                            },
                            set: function(e) {
                                I.logger.log("set nextLevel:" + e),
                                this.levelController.manualLevel = e,
                                this.streamController.nextLevelSwitch()
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "loadLevel", {
                            get: function() {
                                return this.levelController.level
                            },
                            set: function(e) {
                                I.logger.log("set loadLevel:" + e),
                                this.levelController.manualLevel = e
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "nextLoadLevel", {
                            get: function() {
                                return this.levelController.nextLoadLevel
                            },
                            set: function(e) {
                                this.levelController.nextLoadLevel = e
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "firstLevel", {
                            get: function() {
                                return Math.max(this.levelController.firstLevel, this.minAutoLevel)
                            },
                            set: function(e) {
                                I.logger.log("set firstLevel:" + e),
                                this.levelController.firstLevel = e
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "startLevel", {
                            get: function() {
                                return this.levelController.startLevel
                            },
                            set: function(e) {
                                I.logger.log("set startLevel:" + e);
                                -1 !== e && (e = Math.max(e, this.minAutoLevel)),
                                this.levelController.startLevel = e
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "autoLevelCapping", {
                            get: function() {
                                return this._autoLevelCapping
                            },
                            set: function(e) {
                                I.logger.log("set autoLevelCapping:" + e),
                                this._autoLevelCapping = e
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "autoLevelEnabled", {
                            get: function() {
                                return -1 === this.levelController.manualLevel
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "manualLevel", {
                            get: function() {
                                return this.levelController.manualLevel
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "minAutoLevel", {
                            get: function() {
                                for (var e = this.levels, t = this.config.minAutoBitrate, r = e ? e.length : 0, i = 0; i < r; i++) {
                                    if (t < (e[i].realBitrate ? Math.max(e[i].realBitrate, e[i].bitrate) : e[i].bitrate))
                                        return i
                                }
                                return 0
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "maxAutoLevel", {
                            get: function() {
                                var e = this.levels
                                  , t = this.autoLevelCapping;
                                return -1 === t && e && e.length ? e.length - 1 : t
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "nextAutoLevel", {
                            get: function() {
                                return Math.min(Math.max(this.abrController.nextAutoLevel, this.minAutoLevel), this.maxAutoLevel)
                            },
                            set: function(e) {
                                this.abrController.nextAutoLevel = Math.max(this.minAutoLevel, e)
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "audioTracks", {
                            get: function() {
                                var e = this.audioTrackController;
                                return e ? e.audioTracks : []
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "audioTrack", {
                            get: function() {
                                var e = this.audioTrackController;
                                return e ? e.audioTrack : -1
                            },
                            set: function(e) {
                                var t = this.audioTrackController;
                                t && (t.audioTrack = e)
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "liveSyncPosition", {
                            get: function() {
                                return this.streamController.liveSyncPosition
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "subtitleTracks", {
                            get: function() {
                                var e = this.subtitleTrackController;
                                return e ? e.subtitleTracks : []
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "subtitleTrack", {
                            get: function() {
                                var e = this.subtitleTrackController;
                                return e ? e.subtitleTrack : -1
                            },
                            set: function(e) {
                                var t = this.subtitleTrackController;
                                t && (t.subtitleTrack = e)
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        Object.defineProperty(b.prototype, "subtitleDisplay", {
                            get: function() {
                                var e = this.subtitleTrackController;
                                return !!e && e.subtitleDisplay
                            },
                            set: function(e) {
                                var t = this.subtitleTrackController;
                                t && (t.subtitleDisplay = e)
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        b
                    }(r("./src/observer.js").Observer);
                    t.default = c
                },
                "./src/is-supported.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = r("./src/utils/mediasource-helper.js");
                    t.isSupported = function() {
                        var e = i.getMediaSource()
                          , t = window.SourceBuffer || window.WebKitSourceBuffer;
                        return !(!e || "function" != typeof e.isTypeSupported || !e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"') || t && (!t.prototype || "function" != typeof t.prototype.appendBuffer || "function" != typeof t.prototype.remove))
                    }
                },
                "./src/loader/fragment-loader.js": function(e, n, s) {
                    (function(h) {
                        var i, t = this && this.__extends || (i = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            i(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(n, "__esModule", {
                            value: !0
                        });
                        var o = s("./src/events.js")
                          , e = s("./src/event-handler.js")
                          , a = s("./src/errors.js")
                          , p = s("./src/utils/logger.js")
                          , r = function(i) {
                            function e(e) {
                                var t = i.call(this, e, o.default.FRAG_LOADING) || this;
                                return t.loaders = {},
                                t
                            }
                            return t(e, i),
                            e.prototype.destroy = function() {
                                var e = this.loaders;
                                for (var t in e) {
                                    var r = e[t];
                                    r && r.destroy()
                                }
                                this.loaders = {},
                                i.prototype.destroy.call(this)
                            }
                            ,
                            e.prototype.onFragLoading = function(e) {
                                var t = e.frag
                                  , r = t.type
                                  , i = this.loaders
                                  , n = this.hls.config
                                  , a = n.fLoader
                                  , o = n.loader;
                                t.loaded = 0;
                                var s, l, u, c = i[r];
                                c && (p.logger.warn("abort previous fragment loader for type: " + r),
                                c.abort()),
                                c = i[r] = t.loader = n.fLoader ? new a(n) : new o(n),
                                s = {
                                    url: t.url,
                                    frag: t,
                                    responseType: "arraybuffer",
                                    progressData: !1
                                };
                                var d = t.byteRangeStartOffset
                                  , f = t.byteRangeEndOffset;
                                h.isFinite(d) && h.isFinite(f) && (s.rangeStart = d,
                                s.rangeEnd = f),
                                l = {
                                    timeout: n.fragLoadingTimeOut,
                                    maxRetry: 0,
                                    retryDelay: 0,
                                    maxRetryDelay: n.fragLoadingMaxRetryTimeout
                                },
                                u = {
                                    onSuccess: this.loadsuccess.bind(this),
                                    onError: this.loaderror.bind(this),
                                    onTimeout: this.loadtimeout.bind(this),
                                    onProgress: this.loadprogress.bind(this)
                                },
                                c.load(s, l, u)
                            }
                            ,
                            e.prototype.loadsuccess = function(e, t, r, i) {
                                void 0 === i && (i = null);
                                var n = e.data
                                  , a = r.frag;
                                a.loader = void 0,
                                this.loaders[a.type] = void 0,
                                this.hls.trigger(o.default.FRAG_LOADED, {
                                    payload: n,
                                    frag: a,
                                    stats: t,
                                    networkDetails: i
                                })
                            }
                            ,
                            e.prototype.loaderror = function(e, t, r) {
                                void 0 === r && (r = null);
                                var i = t.frag
                                  , n = i.loader;
                                n && n.abort(),
                                this.loaders[i.type] = void 0,
                                this.hls.trigger(o.default.ERROR, {
                                    type: a.ErrorTypes.NETWORK_ERROR,
                                    details: a.ErrorDetails.FRAG_LOAD_ERROR,
                                    fatal: !1,
                                    frag: t.frag,
                                    response: e,
                                    networkDetails: r
                                })
                            }
                            ,
                            e.prototype.loadtimeout = function(e, t, r) {
                                void 0 === r && (r = null);
                                var i = t.frag
                                  , n = i.loader;
                                n && n.abort(),
                                this.loaders[i.type] = void 0,
                                this.hls.trigger(o.default.ERROR, {
                                    type: a.ErrorTypes.NETWORK_ERROR,
                                    details: a.ErrorDetails.FRAG_LOAD_TIMEOUT,
                                    fatal: !1,
                                    frag: t.frag,
                                    networkDetails: r
                                })
                            }
                            ,
                            e.prototype.loadprogress = function(e, t, r, i) {
                                void 0 === i && (i = null);
                                var n = t.frag;
                                n.loaded = e.loaded,
                                this.hls.trigger(o.default.FRAG_LOAD_PROGRESS, {
                                    frag: n,
                                    stats: e,
                                    networkDetails: i
                                })
                            }
                            ,
                            e
                        }(e.default);
                        n.default = r
                    }
                    ).call(this, s("./src/polyfills/number.js").Number)
                },
                "./src/loader/fragment.js": function(e, n, a) {
                    !function(r) {
                        Object.defineProperty(n, "__esModule", {
                            value: !0
                        });
                        var e = a("./node_modules/url-toolkit/src/url-toolkit.js")
                          , i = a("./src/loader/level-key.js")
                          , t = function() {
                            function t() {
                                var e;
                                this._url = null,
                                this._byteRange = null,
                                this._decryptdata = null,
                                this.tagList = [],
                                this.programDateTime = null,
                                this.rawProgramDateTime = null,
                                this._elementaryStreams = ((e = {})[t.ElementaryStreamTypes.AUDIO] = !1,
                                e[t.ElementaryStreamTypes.VIDEO] = !1,
                                e)
                            }
                            return Object.defineProperty(t, "ElementaryStreamTypes", {
                                get: function() {
                                    return {
                                        AUDIO: "audio",
                                        VIDEO: "video"
                                    }
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(t.prototype, "url", {
                                get: function() {
                                    return !this._url && this.relurl && (this._url = e.buildAbsoluteURL(this.baseurl, this.relurl, {
                                        alwaysNormalize: !0
                                    })),
                                    this._url
                                },
                                set: function(e) {
                                    this._url = e
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(t.prototype, "byteRange", {
                                get: function() {
                                    if (!this._byteRange && !this.rawByteRange)
                                        return [];
                                    if (this._byteRange)
                                        return this._byteRange;
                                    var e = [];
                                    if (this.rawByteRange) {
                                        var t = this.rawByteRange.split("@", 2);
                                        if (1 === t.length)
                                            e[0] = this.lastByteRangeEndOffset || 0;
                                        else
                                            e[0] = parseInt(t[1]);
                                        e[1] = parseInt(t[0]) + e[0],
                                        this._byteRange = e
                                    }
                                    return e
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(t.prototype, "byteRangeStartOffset", {
                                get: function() {
                                    return this.byteRange[0]
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(t.prototype, "byteRangeEndOffset", {
                                get: function() {
                                    return this.byteRange[1]
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(t.prototype, "decryptdata", {
                                get: function() {
                                    return this._decryptdata || (this._decryptdata = this.fragmentDecryptdataFromLevelkey(this.levelkey, this.sn)),
                                    this._decryptdata
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(t.prototype, "endProgramDateTime", {
                                get: function() {
                                    if (!r.isFinite(this.programDateTime))
                                        return null;
                                    var e = r.isFinite(this.duration) ? this.duration : 0;
                                    return this.programDateTime + 1e3 * e
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(t.prototype, "encrypted", {
                                get: function() {
                                    return !(!this.decryptdata || null === this.decryptdata.uri || null !== this.decryptdata.key)
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            t.prototype.addElementaryStream = function(e) {
                                this._elementaryStreams[e] = !0
                            }
                            ,
                            t.prototype.hasElementaryStream = function(e) {
                                return !0 === this._elementaryStreams[e]
                            }
                            ,
                            t.prototype.createInitializationVector = function(e) {
                                for (var t = new Uint8Array(16), r = 12; r < 16; r++)
                                    t[r] = e >> 8 * (15 - r) & 255;
                                return t
                            }
                            ,
                            t.prototype.fragmentDecryptdataFromLevelkey = function(e, t) {
                                var r = e;
                                return e && e.method && e.uri && !e.iv && ((r = new i.default).method = e.method,
                                r.baseuri = e.baseuri,
                                r.reluri = e.reluri,
                                r.iv = this.createInitializationVector(t)),
                                r
                            }
                            ,
                            t
                        }();
                        n.default = t
                    }(a("./src/polyfills/number.js").Number)
                },
                "./src/loader/key-loader.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var c = r("./src/events.js")
                      , a = r("./src/event-handler.js")
                      , o = r("./src/errors.js")
                      , d = r("./src/utils/logger.js")
                      , s = function(r) {
                        function e(e) {
                            var t = r.call(this, e, c.default.KEY_LOADING) || this;
                            return t.loaders = {},
                            t.decryptkey = null,
                            t.decrypturl = null,
                            t
                        }
                        return n(e, r),
                        e.prototype.destroy = function() {
                            for (var e in this.loaders) {
                                var t = this.loaders[e];
                                t && t.destroy()
                            }
                            this.loaders = {},
                            a.default.prototype.destroy.call(this)
                        }
                        ,
                        e.prototype.onKeyLoading = function(e) {
                            var t = e.frag
                              , r = t.type
                              , i = this.loaders[r]
                              , n = t.decryptdata
                              , a = n.uri;
                            if (a !== this.decrypturl || null === this.decryptkey) {
                                var o = this.hls.config;
                                i && (d.logger.warn("abort previous key loader for type:" + r),
                                i.abort()),
                                t.loader = this.loaders[r] = new o.loader(o),
                                this.decrypturl = a,
                                this.decryptkey = null;
                                var s, l, u;
                                s = {
                                    url: a,
                                    frag: t,
                                    responseType: "arraybuffer"
                                },
                                l = {
                                    timeout: o.fragLoadingTimeOut,
                                    maxRetry: 0,
                                    retryDelay: o.fragLoadingRetryDelay,
                                    maxRetryDelay: o.fragLoadingMaxRetryTimeout
                                },
                                u = {
                                    onSuccess: this.loadsuccess.bind(this),
                                    onError: this.loaderror.bind(this),
                                    onTimeout: this.loadtimeout.bind(this)
                                },
                                t.loader.load(s, l, u)
                            } else
                                this.decryptkey && (n.key = this.decryptkey,
                                this.hls.trigger(c.default.KEY_LOADED, {
                                    frag: t
                                }))
                        }
                        ,
                        e.prototype.loadsuccess = function(e, t, r) {
                            var i = r.frag;
                            this.decryptkey = i.decryptdata.key = new Uint8Array(e.data),
                            i.loader = void 0,
                            this.loaders[i.type] = void 0,
                            this.hls.trigger(c.default.KEY_LOADED, {
                                frag: i
                            })
                        }
                        ,
                        e.prototype.loaderror = function(e, t) {
                            var r = t.frag
                              , i = r.loader;
                            i && i.abort(),
                            this.loaders[t.type] = void 0,
                            this.hls.trigger(c.default.ERROR, {
                                type: o.ErrorTypes.NETWORK_ERROR,
                                details: o.ErrorDetails.KEY_LOAD_ERROR,
                                fatal: !1,
                                frag: r,
                                response: e
                            })
                        }
                        ,
                        e.prototype.loadtimeout = function(e, t) {
                            var r = t.frag
                              , i = r.loader;
                            i && i.abort(),
                            this.loaders[t.type] = void 0,
                            this.hls.trigger(c.default.ERROR, {
                                type: o.ErrorTypes.NETWORK_ERROR,
                                details: o.ErrorDetails.KEY_LOAD_TIMEOUT,
                                fatal: !1,
                                frag: r
                            })
                        }
                        ,
                        e
                    }(a.default);
                    t.default = s
                },
                "./src/loader/level-key.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = r("./node_modules/url-toolkit/src/url-toolkit.js")
                      , n = function() {
                        function e() {
                            this.method = null,
                            this.key = null,
                            this.iv = null,
                            this._uri = null
                        }
                        return Object.defineProperty(e.prototype, "uri", {
                            get: function() {
                                return !this._uri && this.reluri && (this._uri = i.buildAbsoluteURL(this.baseuri, this.reluri, {
                                    alwaysNormalize: !0
                                })),
                                this._uri
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        e
                    }();
                    t.default = n
                },
                "./src/loader/level.js": function(e, r, t) {
                    !function(t) {
                        Object.defineProperty(r, "__esModule", {
                            value: !0
                        });
                        var e = function() {
                            function e(e) {
                                this.endCC = 0,
                                this.endSN = 0,
                                this.fragments = [],
                                this.initSegment = null,
                                this.live = !0,
                                this.needSidxRanges = !1,
                                this.startCC = 0,
                                this.startSN = 0,
                                this.startTimeOffset = null,
                                this.targetduration = 0,
                                this.totalduration = 0,
                                this.type = null,
                                this.url = e,
                                this.version = null
                            }
                            return Object.defineProperty(e.prototype, "hasProgramDateTime", {
                                get: function() {
                                    return !(!this.fragments[0] || !t.isFinite(this.fragments[0].programDateTime))
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            e
                        }();
                        r.default = e
                    }(t("./src/polyfills/number.js").Number)
                },
                "./src/loader/m3u8-parser.js": function(e, t, i) {
                    !function(R) {
                        Object.defineProperty(t, "__esModule", {
                            value: !0
                        });
                        var r = i("./node_modules/url-toolkit/src/url-toolkit.js")
                          , L = i("./src/loader/fragment.js")
                          , I = i("./src/loader/level.js")
                          , D = i("./src/loader/level-key.js")
                          , C = i("./src/utils/attr-list.js")
                          , P = i("./src/utils/logger.js")
                          , l = i("./src/utils/codecs.js")
                          , u = /#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g
                          , d = /#EXT-X-MEDIA:(.*)/g
                          , O = RegExp("" + /#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source + /|(?!#)([\S+ ?]+)/.source + /|#EXT-X-BYTERANGE:*(.+)/.source + /|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source + /|#.*/.source, "g")
                          , M = /(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/
                          , x = /\.(mp4|m4s|m4v|m4a)$/i
                          , e = function() {
                            function c() {}
                            return c.findGroup = function(e, t) {
                                if (!e)
                                    return null;
                                for (var r = null, i = 0; i < e.length; i++) {
                                    var n = e[i];
                                    n.id === t && (r = n)
                                }
                                return r
                            }
                            ,
                            c.convertAVC1ToAVCOTI = function(e) {
                                var t, r = e.split(".");
                                return 2 < r.length ? (t = r.shift() + ".",
                                t += parseInt(r.shift()).toString(16),
                                t += ("000" + parseInt(r.shift()).toString(16)).substr(-4)) : t = e,
                                t
                            }
                            ,
                            c.resolve = function(e, t) {
                                return r.buildAbsoluteURL(t, e, {
                                    alwaysNormalize: !0
                                })
                            }
                            ,
                            c.parseMasterPlaylist = function(e, t) {
                                var r, i = [];
                                function n(i, n) {
                                    ["video", "audio"].forEach(function(t) {
                                        var r = i.filter(function(e) {
                                            return l.isCodecType(e, t)
                                        });
                                        if (r.length) {
                                            var e = r.filter(function(e) {
                                                return 0 == e.lastIndexOf("avc1", 0) || 0 == e.lastIndexOf("mp4a", 0)
                                            });
                                            n[t + "Codec"] = 0 < e.length ? e[0] : r[0],
                                            i = i.filter(function(e) {
                                                return -1 == r.indexOf(e)
                                            })
                                        }
                                    }),
                                    n.unknownCodecs = i
                                }
                                for (u.lastIndex = 0; null != (r = u.exec(e)); ) {
                                    var a = {}
                                      , o = a.attrs = new C.default(r[1]);
                                    a.url = c.resolve(r[2], t);
                                    var s = o.decimalResolution("RESOLUTION");
                                    s && (a.width = s.width,
                                    a.height = s.height),
                                    a.bitrate = o.decimalInteger("AVERAGE-BANDWIDTH") || o.decimalInteger("BANDWIDTH"),
                                    a.name = o.NAME,
                                    n([].concat((o.CODECS || "").split(/[ ,]+/)), a),
                                    a.videoCodec && -1 != a.videoCodec.indexOf("avc1") && (a.videoCodec = c.convertAVC1ToAVCOTI(a.videoCodec)),
                                    i.push(a)
                                }
                                return i
                            }
                            ,
                            c.parseMasterPlaylistMedia = function(e, t, r, i) {
                                var n;
                                void 0 === i && (i = []);
                                var a = []
                                  , o = 0;
                                for (d.lastIndex = 0; null !== (n = d.exec(e)); ) {
                                    var s = {}
                                      , l = new C.default(n[1]);
                                    if (l.TYPE === r) {
                                        if (s.groupId = l["GROUP-ID"],
                                        s.name = l.NAME,
                                        s.type = r,
                                        s.default = "YES" === l.DEFAULT,
                                        s.autoselect = "YES" === l.AUTOSELECT,
                                        s.forced = "YES" === l.FORCED,
                                        l.URI && (s.url = c.resolve(l.URI, t)),
                                        s.lang = l.LANGUAGE,
                                        s.name || (s.name = s.lang),
                                        i.length) {
                                            var u = c.findGroup(i, s.groupId);
                                            s.audioCodec = u ? u.codec : i[0].codec
                                        }
                                        s.id = o++,
                                        a.push(s)
                                    }
                                }
                                return a
                            }
                            ,
                            c.parseLevelPlaylist = function(e, t, r, i, n) {
                                var a, o, s = 0, l = 0, u = new I.default(t), c = new D.default, d = 0, f = null, h = new L.default, p = null;
                                for (O.lastIndex = 0; null !== (a = O.exec(e)); ) {
                                    var g = a[1];
                                    if (g) {
                                        h.duration = parseFloat(g);
                                        var v = (" " + a[2]).slice(1);
                                        h.title = v || null,
                                        h.tagList.push(v ? ["INF", g, v] : ["INF", g])
                                    } else if (a[3]) {
                                        if (R.isFinite(h.duration)) {
                                            var y = s++;
                                            h.type = i,
                                            h.start = l,
                                            h.levelkey = c,
                                            h.sn = y,
                                            h.level = r,
                                            h.cc = d,
                                            h.urlId = n,
                                            h.baseurl = t,
                                            h.relurl = (" " + a[3]).slice(1),
                                            F(h, f),
                                            u.fragments.push(h),
                                            l += (f = h).duration,
                                            h = new L.default
                                        }
                                    } else if (a[4]) {
                                        if (h.rawByteRange = (" " + a[4]).slice(1),
                                        f) {
                                            var m = f.byteRangeEndOffset;
                                            m && (h.lastByteRangeEndOffset = m)
                                        }
                                    } else if (a[5])
                                        h.rawProgramDateTime = (" " + a[5]).slice(1),
                                        h.tagList.push(["PROGRAM-DATE-TIME", h.rawProgramDateTime]),
                                        null === p && (p = u.fragments.length);
                                    else {
                                        for (a = a[0].match(M),
                                        o = 1; o < a.length && void 0 === a[o]; o++)
                                            ;
                                        var _ = (" " + a[o + 1]).slice(1)
                                          , T = (" " + a[o + 2]).slice(1);
                                        switch (a[o]) {
                                        case "#":
                                            h.tagList.push(T ? [_, T] : [_]);
                                            break;
                                        case "PLAYLIST-TYPE":
                                            u.type = _.toUpperCase();
                                            break;
                                        case "MEDIA-SEQUENCE":
                                            s = u.startSN = parseInt(_);
                                            break;
                                        case "TARGETDURATION":
                                            u.targetduration = parseFloat(_);
                                            break;
                                        case "VERSION":
                                            u.version = parseInt(_);
                                            break;
                                        case "EXTM3U":
                                            break;
                                        case "ENDLIST":
                                            u.live = !1;
                                            break;
                                        case "DIS":
                                            d++,
                                            h.tagList.push(["DIS"]);
                                            break;
                                        case "DISCONTINUITY-SEQ":
                                            d = parseInt(_);
                                            break;
                                        case "KEY":
                                            var b = new C.default(_)
                                              , E = b.enumeratedString("METHOD")
                                              , S = b.URI
                                              , A = b.hexadecimalInteger("IV");
                                            E && (c = new D.default,
                                            S && 0 <= ["AES-128", "SAMPLE-AES", "SAMPLE-AES-CENC"].indexOf(E) && (c.method = E,
                                            c.baseuri = t,
                                            c.reluri = S,
                                            c.key = null,
                                            c.iv = A));
                                            break;
                                        case "START":
                                            var k = new C.default(_).decimalFloatingPoint("TIME-OFFSET");
                                            R.isFinite(k) && (u.startTimeOffset = k);
                                            break;
                                        case "MAP":
                                            var w = new C.default(_);
                                            h.relurl = w.URI,
                                            h.rawByteRange = w.BYTERANGE,
                                            h.baseurl = t,
                                            h.level = r,
                                            h.type = i,
                                            h.sn = "initSegment",
                                            u.initSegment = h,
                                            (h = new L.default).rawProgramDateTime = u.initSegment.rawProgramDateTime;
                                            break;
                                        default:
                                            P.logger.warn("line parsed but not handled: " + a)
                                        }
                                    }
                                }
                                return (h = f) && !h.relurl && (u.fragments.pop(),
                                l -= h.duration),
                                u.totalduration = l,
                                u.averagetargetduration = l / u.fragments.length,
                                u.endSN = s - 1,
                                u.startCC = u.fragments[0] ? u.fragments[0].cc : 0,
                                u.endCC = d,
                                !u.initSegment && u.fragments.length && u.fragments.every(function(e) {
                                    return x.test(e.relurl)
                                }) && (P.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),
                                (h = new L.default).relurl = u.fragments[0].relurl,
                                h.baseurl = t,
                                h.level = r,
                                h.type = i,
                                h.sn = "initSegment",
                                u.initSegment = h,
                                u.needSidxRanges = !0),
                                p && function(e, t) {
                                    for (var r = e[t], i = t - 1; 0 <= i; i--) {
                                        var n = e[i];
                                        n.programDateTime = r.programDateTime - 1e3 * n.duration,
                                        r = n
                                    }
                                }(u.fragments, p),
                                u
                            }
                            ,
                            c
                        }();
                        function F(e, t) {
                            e.rawProgramDateTime ? e.programDateTime = Date.parse(e.rawProgramDateTime) : t && t.programDateTime && (e.programDateTime = t.endProgramDateTime),
                            R.isFinite(e.programDateTime) || (e.programDateTime = null,
                            e.rawProgramDateTime = null)
                        }
                        t.default = e
                    }(i("./src/polyfills/number.js").Number)
                },
                "./src/loader/playlist-loader.js": function(e, o, s) {
                    (function(p) {
                        var i, e = this && this.__extends || (i = Object.setPrototypeOf || {
                            __proto__: []
                        }instanceof Array && function(e, t) {
                            e.__proto__ = t
                        }
                        || function(e, t) {
                            for (var r in t)
                                t.hasOwnProperty(r) && (e[r] = t[r])
                        }
                        ,
                        function(e, t) {
                            function r() {
                                this.constructor = e
                            }
                            i(e, t),
                            e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                            new r)
                        }
                        );
                        Object.defineProperty(o, "__esModule", {
                            value: !0
                        });
                        var g = s("./src/events.js")
                          , t = s("./src/event-handler.js")
                          , l = s("./src/errors.js")
                          , f = s("./src/utils/logger.js")
                          , a = s("./src/demux/mp4demuxer.js")
                          , v = s("./src/loader/m3u8-parser.js")
                          , y = window.performance
                          , m = {
                            MANIFEST: "manifest",
                            LEVEL: "level",
                            AUDIO_TRACK: "audioTrack",
                            SUBTITLE_TRACK: "subtitleTrack"
                        }
                          , n = {
                            MAIN: "main",
                            AUDIO: "audio",
                            SUBTITLE: "subtitle"
                        }
                          , r = function(r) {
                            function h(e) {
                                var t = r.call(this, e, g.default.MANIFEST_LOADING, g.default.LEVEL_LOADING, g.default.AUDIO_TRACK_LOADING, g.default.SUBTITLE_TRACK_LOADING) || this;
                                return t.loaders = {},
                                t
                            }
                            return e(h, r),
                            Object.defineProperty(h, "ContextType", {
                                get: function() {
                                    return m
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            Object.defineProperty(h, "LevelType", {
                                get: function() {
                                    return n
                                },
                                enumerable: !0,
                                configurable: !0
                            }),
                            h.canHaveQualityLevels = function(e) {
                                return e !== m.AUDIO_TRACK && e !== m.SUBTITLE_TRACK
                            }
                            ,
                            h.mapContextToLevelType = function(e) {
                                switch (e.type) {
                                case m.AUDIO_TRACK:
                                    return n.AUDIO;
                                case m.SUBTITLE_TRACK:
                                    return n.SUBTITLE;
                                default:
                                    return n.MAIN
                                }
                            }
                            ,
                            h.getResponseUrl = function(e, t) {
                                var r = e.url;
                                return void 0 !== r && 0 != r.indexOf("data:") || (r = t.url),
                                r
                            }
                            ,
                            h.prototype.createInternalLoader = function(e) {
                                var t = this.hls.config
                                  , r = new (t.pLoader || t.loader)(t);
                                return e.loader = r,
                                this.loaders[e.type] = r
                            }
                            ,
                            h.prototype.getInternalLoader = function(e) {
                                return this.loaders[e.type]
                            }
                            ,
                            h.prototype.resetInternalLoader = function(e) {
                                this.loaders[e] && delete this.loaders[e]
                            }
                            ,
                            h.prototype.destroyInternalLoaders = function() {
                                for (var e in this.loaders) {
                                    var t = this.loaders[e];
                                    t && t.destroy(),
                                    this.resetInternalLoader(e)
                                }
                            }
                            ,
                            h.prototype.destroy = function() {
                                this.destroyInternalLoaders(),
                                r.prototype.destroy.call(this)
                            }
                            ,
                            h.prototype.onManifestLoading = function(e) {
                                this.load(e.url, {
                                    type: m.MANIFEST,
                                    level: 0,
                                    id: null
                                })
                            }
                            ,
                            h.prototype.onLevelLoading = function(e) {
                                this.load(e.url, {
                                    type: m.LEVEL,
                                    level: e.level,
                                    id: e.id
                                })
                            }
                            ,
                            h.prototype.onAudioTrackLoading = function(e) {
                                this.load(e.url, {
                                    type: m.AUDIO_TRACK,
                                    level: null,
                                    id: e.id
                                })
                            }
                            ,
                            h.prototype.onSubtitleTrackLoading = function(e) {
                                this.load(e.url, {
                                    type: m.SUBTITLE_TRACK,
                                    level: null,
                                    id: e.id
                                })
                            }
                            ,
                            h.prototype.load = function(e, t) {
                                var r = this.hls.config;
                                f.logger.debug("Loading playlist of type " + t.type + ", level: " + t.level + ", id: " + t.id);
                                var i, n, a, o, s = this.getInternalLoader(t);
                                if (s) {
                                    var l = s.context;
                                    if (l && l.url === e)
                                        return f.logger.trace("playlist request ongoing"),
                                        !1;
                                    f.logger.warn("aborting previous loader for type: " + t.type),
                                    s.abort()
                                }
                                switch (t.type) {
                                case m.MANIFEST:
                                    i = r.manifestLoadingMaxRetry,
                                    n = r.manifestLoadingTimeOut,
                                    a = r.manifestLoadingRetryDelay,
                                    o = r.manifestLoadingMaxRetryTimeout;
                                    break;
                                case m.LEVEL:
                                    i = 0,
                                    n = r.levelLoadingTimeOut;
                                    break;
                                default:
                                    i = r.levelLoadingMaxRetry,
                                    n = r.levelLoadingTimeOut,
                                    a = r.levelLoadingRetryDelay,
                                    o = r.levelLoadingMaxRetryTimeout
                                }
                                s = this.createInternalLoader(t),
                                t.url = e,
                                t.responseType = t.responseType || "";
                                var u = {
                                    timeout: n,
                                    maxRetry: i,
                                    retryDelay: a,
                                    maxRetryDelay: o
                                }
                                  , c = {
                                    onSuccess: this.loadsuccess.bind(this),
                                    onError: this.loaderror.bind(this),
                                    onTimeout: this.loadtimeout.bind(this)
                                };
                                return f.logger.debug("Calling internal loader delegate for URL: " + e),
                                s.load(t, u, c),
                                !0
                            }
                            ,
                            h.prototype.loadsuccess = function(e, t, r, i) {
                                if (void 0 === i && (i = null),
                                r.isSidxRequest)
                                    return this._handleSidxRequest(e, r),
                                    void this._handlePlaylistLoaded(e, t, r, i);
                                this.resetInternalLoader(r.type);
                                var n = e.data;
                                t.tload = y.now(),
                                0 == n.indexOf("#EXTM3U") ? 0 < n.indexOf("#EXTINF:") || 0 < n.indexOf("#EXT-X-TARGETDURATION:") ? this._handleTrackOrLevelPlaylist(e, t, r, i) : this._handleMasterPlaylist(e, t, r, i) : this._handleManifestParsingError(e, r, "no EXTM3U delimiter", i)
                            }
                            ,
                            h.prototype.loaderror = function(e, t, r) {
                                void 0 === r && (r = null),
                                this._handleNetworkError(t, r, !1, e)
                            }
                            ,
                            h.prototype.loadtimeout = function(e, t, r) {
                                void 0 === r && (r = null),
                                this._handleNetworkError(t, r, !0)
                            }
                            ,
                            h.prototype._handleMasterPlaylist = function(e, t, r, i) {
                                var n = this.hls
                                  , a = e.data
                                  , o = h.getResponseUrl(e, r)
                                  , s = v.default.parseMasterPlaylist(a, o);
                                if (s.length) {
                                    var l = s.map(function(e) {
                                        return {
                                            id: e.attrs.AUDIO,
                                            codec: e.audioCodec
                                        }
                                    })
                                      , u = v.default.parseMasterPlaylistMedia(a, o, "AUDIO", l)
                                      , c = v.default.parseMasterPlaylistMedia(a, o, "SUBTITLES");
                                    if (u.length) {
                                        var d = !1;
                                        u.forEach(function(e) {
                                            e.url || (d = !0)
                                        }),
                                        !1 === d && s[0].audioCodec && !s[0].attrs.AUDIO && (f.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),
                                        u.unshift({
                                            type: "main",
                                            name: "main"
                                        }))
                                    }
                                    n.trigger(g.default.MANIFEST_LOADED, {
                                        levels: s,
                                        audioTracks: u,
                                        subtitles: c,
                                        url: o,
                                        stats: t,
                                        networkDetails: i
                                    })
                                } else
                                    this._handleManifestParsingError(e, r, "no level found in manifest", i)
                            }
                            ,
                            h.prototype._handleTrackOrLevelPlaylist = function(e, t, r, i) {
                                var n = this.hls
                                  , a = r.id
                                  , o = r.level
                                  , s = r.type
                                  , l = h.getResponseUrl(e, r)
                                  , u = p.isFinite(a) ? a : 0
                                  , c = p.isFinite(o) ? o : u
                                  , d = h.mapContextToLevelType(r)
                                  , f = v.default.parseLevelPlaylist(e.data, l, c, d, u);
                                (f.tload = t.tload,
                                s === m.MANIFEST) && n.trigger(g.default.MANIFEST_LOADED, {
                                    levels: [{
                                        url: l,
                                        details: f
                                    }],
                                    audioTracks: [],
                                    url: l,
                                    stats: t,
                                    networkDetails: i
                                });
                                (t.tparsed = y.now(),
                                f.needSidxRanges) ? this.load(f.initSegment.url, {
                                    isSidxRequest: !0,
                                    type: s,
                                    level: o,
                                    levelDetails: f,
                                    id: a,
                                    rangeStart: 0,
                                    rangeEnd: 2048,
                                    responseType: "arraybuffer"
                                }) : (r.levelDetails = f,
                                this._handlePlaylistLoaded(e, t, r, i))
                            }
                            ,
                            h.prototype._handleSidxRequest = function(e, t) {
                                var r = a.default.parseSegmentIndex(new Uint8Array(e.data));
                                if (r) {
                                    var n = t.levelDetails;
                                    r.references.forEach(function(e, t) {
                                        var r = e.info
                                          , i = n.fragments[t];
                                        0 === i.byteRange.length && (i.rawByteRange = 1 + r.end - r.start + "@" + r.start)
                                    }),
                                    n.initSegment.rawByteRange = r.moovEndOffset + "@0"
                                }
                            }
                            ,
                            h.prototype._handleManifestParsingError = function(e, t, r, i) {
                                this.hls.trigger(g.default.ERROR, {
                                    type: l.ErrorTypes.NETWORK_ERROR,
                                    details: l.ErrorDetails.MANIFEST_PARSING_ERROR,
                                    fatal: !0,
                                    url: e.url,
                                    reason: r,
                                    networkDetails: i
                                })
                            }
                            ,
                            h.prototype._handleNetworkError = function(e, t, r, i) {
                                var n, a;
                                void 0 === r && (r = !1),
                                void 0 === i && (i = null),
                                f.logger.info("A network error occured while loading a " + e.type + "-type playlist");
                                var o = this.getInternalLoader(e);
                                switch (e.type) {
                                case m.MANIFEST:
                                    n = r ? l.ErrorDetails.MANIFEST_LOAD_TIMEOUT : l.ErrorDetails.MANIFEST_LOAD_ERROR,
                                    a = !0;
                                    break;
                                case m.LEVEL:
                                    n = r ? l.ErrorDetails.LEVEL_LOAD_TIMEOUT : l.ErrorDetails.LEVEL_LOAD_ERROR,
                                    a = !1;
                                    break;
                                case m.AUDIO_TRACK:
                                    n = r ? l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT : l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,
                                    a = !1;
                                    break;
                                default:
                                    a = !1
                                }
                                o && (o.abort(),
                                this.resetInternalLoader(e.type));
                                var s = {
                                    type: l.ErrorTypes.NETWORK_ERROR,
                                    details: n,
                                    fatal: a,
                                    url: o.url,
                                    loader: o,
                                    context: e,
                                    networkDetails: t
                                };
                                i && (s.response = i),
                                this.hls.trigger(g.default.ERROR, s)
                            }
                            ,
                            h.prototype._handlePlaylistLoaded = function(e, t, r, i) {
                                var n = r.type
                                  , a = r.level
                                  , o = r.id
                                  , s = r.levelDetails;
                                if (s.targetduration)
                                    if (h.canHaveQualityLevels(r.type))
                                        this.hls.trigger(g.default.LEVEL_LOADED, {
                                            details: s,
                                            level: a || 0,
                                            id: o || 0,
                                            stats: t,
                                            networkDetails: i
                                        });
                                    else
                                        switch (n) {
                                        case m.AUDIO_TRACK:
                                            this.hls.trigger(g.default.AUDIO_TRACK_LOADED, {
                                                details: s,
                                                id: o,
                                                stats: t,
                                                networkDetails: i
                                            });
                                            break;
                                        case m.SUBTITLE_TRACK:
                                            this.hls.trigger(g.default.SUBTITLE_TRACK_LOADED, {
                                                details: s,
                                                id: o,
                                                stats: t,
                                                networkDetails: i
                                            })
                                        }
                                else
                                    this._handleManifestParsingError(e, r, "invalid target duration", i)
                            }
                            ,
                            h
                        }(t.default);
                        o.default = r
                    }
                    ).call(this, s("./src/polyfills/number.js").Number)
                },
                "./src/observer.js": function(e, t, r) {
                    var i, n = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var a = function(e) {
                        function t() {
                            return null !== e && e.apply(this, arguments) || this
                        }
                        return n(t, e),
                        t.prototype.trigger = function(e) {
                            for (var t = [], r = 1; r < arguments.length; r++)
                                t[r - 1] = arguments[r];
                            this.emit.apply(this, [e, e].concat(t))
                        }
                        ,
                        t
                    }(r("./node_modules/eventemitter3/index.js").EventEmitter);
                    t.Observer = a
                },
                "./src/polyfills/number.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = r("./src/utils/get-self-scope.js").getSelfScope().Number;
                    (t.Number = i).isFinite = i.isFinite || function(e) {
                        return "number" == typeof e && isFinite(e)
                    }
                },
                "./src/remux/aac-helper.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = function() {
                        function e() {}
                        return e.getSilentFrame = function(e, t) {
                            switch (e) {
                            case "mp4a.40.2":
                                if (1 === t)
                                    return new Uint8Array([0, 200, 0, 128, 35, 128]);
                                if (2 === t)
                                    return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                                if (3 === t)
                                    return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                                if (4 === t)
                                    return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
                                if (5 === t)
                                    return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
                                if (6 === t)
                                    return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224]);
                                break;
                            default:
                                if (1 === t)
                                    return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                                if (2 === t)
                                    return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                                if (3 === t)
                                    return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94])
                            }
                            return null
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/remux/mp4-generator.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var s = 4294967295
                      , i = function() {
                        function f() {}
                        return f.init = function() {
                            var e;
                            for (e in f.types = {
                                avc1: [],
                                avcC: [],
                                btrt: [],
                                dinf: [],
                                dref: [],
                                esds: [],
                                ftyp: [],
                                hdlr: [],
                                mdat: [],
                                mdhd: [],
                                mdia: [],
                                mfhd: [],
                                minf: [],
                                moof: [],
                                moov: [],
                                mp4a: [],
                                ".mp3": [],
                                mvex: [],
                                mvhd: [],
                                pasp: [],
                                sdtp: [],
                                stbl: [],
                                stco: [],
                                stsc: [],
                                stsd: [],
                                stsz: [],
                                stts: [],
                                tfdt: [],
                                tfhd: [],
                                traf: [],
                                trak: [],
                                trun: [],
                                trex: [],
                                tkhd: [],
                                vmhd: [],
                                smhd: []
                            })
                                f.types.hasOwnProperty(e) && (f.types[e] = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]);
                            var t = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0])
                              , r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
                            f.HDLR_TYPES = {
                                video: t,
                                audio: r
                            };
                            var i = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1])
                              , n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                            f.STTS = f.STSC = f.STCO = n,
                            f.STSZ = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
                            f.VMHD = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]),
                            f.SMHD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
                            f.STSD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
                            var a = new Uint8Array([105, 115, 111, 109])
                              , o = new Uint8Array([97, 118, 99, 49])
                              , s = new Uint8Array([0, 0, 0, 1]);
                            f.FTYP = f.box(f.types.ftyp, a, s, a, o),
                            f.DINF = f.box(f.types.dinf, f.box(f.types.dref, i))
                        }
                        ,
                        f.box = function(e) {
                            for (var t, r = Array.prototype.slice.call(arguments, 1), i = 8, n = r.length, a = n; n--; )
                                i += r[n].byteLength;
                            for ((t = new Uint8Array(i))[0] = i >> 24 & 255,
                            t[1] = i >> 16 & 255,
                            t[2] = i >> 8 & 255,
                            t[3] = 255 & i,
                            t.set(e, 4),
                            n = 0,
                            i = 8; n < a; n++)
                                t.set(r[n], i),
                                i += r[n].byteLength;
                            return t
                        }
                        ,
                        f.hdlr = function(e) {
                            return f.box(f.types.hdlr, f.HDLR_TYPES[e])
                        }
                        ,
                        f.mdat = function(e) {
                            return f.box(f.types.mdat, e)
                        }
                        ,
                        f.mdhd = function(e, t) {
                            var r = Math.floor((t *= e) / (s + 1))
                              , i = Math.floor(t % (s + 1));
                            return f.box(f.types.mdhd, new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, 85, 196, 0, 0]))
                        }
                        ,
                        f.mdia = function(e) {
                            return f.box(f.types.mdia, f.mdhd(e.timescale, e.duration), f.hdlr(e.type), f.minf(e))
                        }
                        ,
                        f.mfhd = function(e) {
                            return f.box(f.types.mfhd, new Uint8Array([0, 0, 0, 0, e >> 24, e >> 16 & 255, e >> 8 & 255, 255 & e]))
                        }
                        ,
                        f.minf = function(e) {
                            return f.box(f.types.minf, "audio" === e.type ? f.box(f.types.smhd, f.SMHD) : f.box(f.types.vmhd, f.VMHD), f.DINF, f.stbl(e))
                        }
                        ,
                        f.moof = function(e, t, r) {
                            return f.box(f.types.moof, f.mfhd(e), f.traf(r, t))
                        }
                        ,
                        f.moov = function(e) {
                            for (var t = e.length, r = []; t--; )
                                r[t] = f.trak(e[t]);
                            return f.box.apply(null, [f.types.moov, f.mvhd(e[0].timescale, e[0].duration)].concat(r).concat(f.mvex(e)))
                        }
                        ,
                        f.mvex = function(e) {
                            for (var t = e.length, r = []; t--; )
                                r[t] = f.trex(e[t]);
                            return f.box.apply(null, [f.types.mvex].concat(r))
                        }
                        ,
                        f.mvhd = function(e, t) {
                            var r = Math.floor((t *= e) / (s + 1))
                              , i = Math.floor(t % (s + 1))
                              , n = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
                            return f.box(f.types.mvhd, n)
                        }
                        ,
                        f.sdtp = function(e) {
                            var t, r, i = e.samples || [], n = new Uint8Array(4 + i.length);
                            for (r = 0; r < i.length; r++)
                                n[r + 4] = (t = i[r].flags).dependsOn << 4 | t.isDependedOn << 2 | t.hasRedundancy;
                            return f.box(f.types.sdtp, n)
                        }
                        ,
                        f.stbl = function(e) {
                            return f.box(f.types.stbl, f.stsd(e), f.box(f.types.stts, f.STTS), f.box(f.types.stsc, f.STSC), f.box(f.types.stsz, f.STSZ), f.box(f.types.stco, f.STCO))
                        }
                        ,
                        f.avc1 = function(e) {
                            var t, r, i, n = [], a = [];
                            for (t = 0; t < e.sps.length; t++)
                                n.push((i = (r = e.sps[t]).byteLength) >>> 8 & 255),
                                n.push(255 & i),
                                n = n.concat(Array.prototype.slice.call(r));
                            for (t = 0; t < e.pps.length; t++)
                                a.push((i = (r = e.pps[t]).byteLength) >>> 8 & 255),
                                a.push(255 & i),
                                a = a.concat(Array.prototype.slice.call(r));
                            var o = f.box(f.types.avcC, new Uint8Array([1, n[3], n[4], n[5], 255, 224 | e.sps.length].concat(n).concat([e.pps.length]).concat(a)))
                              , s = e.width
                              , l = e.height
                              , u = e.pixelRatio[0]
                              , c = e.pixelRatio[1];
                            return f.box(f.types.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, s >> 8 & 255, 255 & s, l >> 8 & 255, 255 & l, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 18, 100, 97, 105, 108, 121, 109, 111, 116, 105, 111, 110, 47, 104, 108, 115, 46, 106, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), o, f.box(f.types.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])), f.box(f.types.pasp, new Uint8Array([u >> 24, u >> 16 & 255, u >> 8 & 255, 255 & u, c >> 24, c >> 16 & 255, c >> 8 & 255, 255 & c])))
                        }
                        ,
                        f.esds = function(e) {
                            var t = e.config.length;
                            return new Uint8Array([0, 0, 0, 0, 3, 23 + t, 0, 1, 0, 4, 15 + t, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5].concat([t]).concat(e.config).concat([6, 1, 2]))
                        }
                        ,
                        f.mp4a = function(e) {
                            var t = e.samplerate;
                            return f.box(f.types.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, e.channelCount, 0, 16, 0, 0, 0, 0, t >> 8 & 255, 255 & t, 0, 0]), f.box(f.types.esds, f.esds(e)))
                        }
                        ,
                        f.mp3 = function(e) {
                            var t = e.samplerate;
                            return f.box(f.types[".mp3"], new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, e.channelCount, 0, 16, 0, 0, 0, 0, t >> 8 & 255, 255 & t, 0, 0]))
                        }
                        ,
                        f.stsd = function(e) {
                            return f.box(f.types.stsd, f.STSD, "audio" === e.type ? e.isAAC || "mp3" !== e.codec ? f.mp4a(e) : f.mp3(e) : f.avc1(e))
                        }
                        ,
                        f.tkhd = function(e) {
                            var t = e.id
                              , r = e.duration * e.timescale
                              , i = e.width
                              , n = e.height
                              , a = Math.floor(r / (s + 1))
                              , o = Math.floor(r % (s + 1));
                            return f.box(f.types.tkhd, new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, 0, 0, 0, 0, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, i >> 8 & 255, 255 & i, 0, 0, n >> 8 & 255, 255 & n, 0, 0]))
                        }
                        ,
                        f.traf = function(e, t) {
                            var r = f.sdtp(e)
                              , i = e.id
                              , n = Math.floor(t / (s + 1))
                              , a = Math.floor(t % (s + 1));
                            return f.box(f.types.traf, f.box(f.types.tfhd, new Uint8Array([0, 0, 0, 0, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i])), f.box(f.types.tfdt, new Uint8Array([1, 0, 0, 0, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a])), f.trun(e, r.length + 16 + 20 + 8 + 16 + 8 + 8), r)
                        }
                        ,
                        f.trak = function(e) {
                            return e.duration = e.duration || 4294967295,
                            f.box(f.types.trak, f.tkhd(e), f.mdia(e))
                        }
                        ,
                        f.trex = function(e) {
                            var t = e.id;
                            return f.box(f.types.trex, new Uint8Array([0, 0, 0, 0, t >> 24, t >> 16 & 255, t >> 8 & 255, 255 & t, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]))
                        }
                        ,
                        f.trun = function(e, t) {
                            var r, i, n, a, o, s, l = e.samples || [], u = l.length, c = 12 + 16 * u, d = new Uint8Array(c);
                            for (d.set([0, 0, 15, 1, u >>> 24 & 255, u >>> 16 & 255, u >>> 8 & 255, 255 & u, (t += 8 + c) >>> 24 & 255, t >>> 16 & 255, t >>> 8 & 255, 255 & t], 0),
                            r = 0; r < u; r++)
                                d.set([(n = (i = l[r]).duration) >>> 24 & 255, n >>> 16 & 255, n >>> 8 & 255, 255 & n, (a = i.size) >>> 24 & 255, a >>> 16 & 255, a >>> 8 & 255, 255 & a, (o = i.flags).isLeading << 2 | o.dependsOn, o.isDependedOn << 6 | o.hasRedundancy << 4 | o.paddingValue << 1 | o.isNonSync, 61440 & o.degradPrio, 15 & o.degradPrio, (s = i.cts) >>> 24 & 255, s >>> 16 & 255, s >>> 8 & 255, 255 & s], 12 + 16 * r);
                            return f.box(f.types.trun, d)
                        }
                        ,
                        f.initSegment = function(e) {
                            f.types || f.init();
                            var t, r = f.moov(e);
                            return (t = new Uint8Array(f.FTYP.byteLength + r.byteLength)).set(f.FTYP),
                            t.set(r, f.FTYP.byteLength),
                            t
                        }
                        ,
                        f
                    }();
                    t.default = i
                },
                "./src/remux/mp4-remuxer.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var H = r("./src/remux/aac-helper.js")
                      , Y = r("./src/remux/mp4-generator.js")
                      , W = r("./src/events.js")
                      , z = r("./src/errors.js")
                      , X = r("./src/utils/logger.js")
                      , i = function() {
                        function e(e, t, r, i) {
                            this.observer = e,
                            this.config = t,
                            this.typeSupported = r;
                            var n = navigator.userAgent;
                            this.isSafari = i && -1 < i.indexOf("Apple") && n && !n.match("CriOS"),
                            this.ISGenerated = !1
                        }
                        return e.prototype.destroy = function() {}
                        ,
                        e.prototype.resetTimeStamp = function(e) {
                            this._initPTS = this._initDTS = e
                        }
                        ,
                        e.prototype.resetInitSegment = function() {
                            this.ISGenerated = !1
                        }
                        ,
                        e.prototype.remux = function(e, t, r, i, n, a, o) {
                            if (this.ISGenerated || this.generateIS(e, t, n),
                            this.ISGenerated) {
                                var s = e.samples.length
                                  , l = t.samples.length
                                  , u = n
                                  , c = n;
                                if (s && l) {
                                    var d = (e.samples[0].pts - t.samples[0].pts) / t.inputTimeScale;
                                    u += Math.max(0, d),
                                    c += Math.max(0, -d)
                                }
                                if (s) {
                                    e.timescale || (X.logger.warn("regenerate InitSegment as audio detected"),
                                    this.generateIS(e, t, n));
                                    var f = this.remuxAudio(e, u, a, o);
                                    if (l) {
                                        var h = void 0;
                                        f && (h = f.endPTS - f.startPTS),
                                        t.timescale || (X.logger.warn("regenerate InitSegment as video detected"),
                                        this.generateIS(e, t, n)),
                                        this.remuxVideo(t, c, a, h, o)
                                    }
                                } else if (l) {
                                    var p = this.remuxVideo(t, c, a, 0, o);
                                    p && e.codec && this.remuxEmptyAudio(e, u, a, p)
                                }
                            }
                            r.samples.length && this.remuxID3(r, n),
                            i.samples.length && this.remuxText(i, n),
                            this.observer.trigger(W.default.FRAG_PARSED)
                        }
                        ,
                        e.prototype.generateIS = function(e, t, r) {
                            var i, n, a = this.observer, o = e.samples, s = t.samples, l = this.typeSupported, u = "audio/mp4", c = {}, d = {
                                tracks: c
                            }, f = void 0 === this._initPTS;
                            if (f && (i = n = 1 / 0),
                            e.config && o.length && (e.timescale = e.samplerate,
                            X.logger.log("audio sampling rate : " + e.samplerate),
                            e.isAAC || (l.mpeg ? (u = "audio/mpeg",
                            e.codec = "") : l.mp3 && (e.codec = "mp3")),
                            c.audio = {
                                container: u,
                                codec: e.codec,
                                initSegment: !e.isAAC && l.mpeg ? new Uint8Array : Y.default.initSegment([e]),
                                metadata: {
                                    channelCount: e.channelCount
                                }
                            },
                            f && (i = n = o[0].pts - e.inputTimeScale * r)),
                            t.sps && t.pps && s.length) {
                                var h = t.inputTimeScale;
                                t.timescale = h,
                                c.video = {
                                    container: "video/mp4",
                                    codec: t.codec,
                                    initSegment: Y.default.initSegment([t]),
                                    metadata: {
                                        width: t.width,
                                        height: t.height
                                    }
                                },
                                f && (i = Math.min(i, s[0].pts - h * r),
                                n = Math.min(n, s[0].dts - h * r),
                                this.observer.trigger(W.default.INIT_PTS_FOUND, {
                                    initPTS: i
                                }))
                            }
                            Object.keys(c).length ? (a.trigger(W.default.FRAG_PARSING_INIT_SEGMENT, d),
                            this.ISGenerated = !0,
                            f && (this._initPTS = i,
                            this._initDTS = n)) : a.trigger(W.default.ERROR, {
                                type: z.ErrorTypes.MEDIA_ERROR,
                                details: z.ErrorDetails.FRAG_PARSING_ERROR,
                                fatal: !1,
                                reason: "no audio/video samples found"
                            })
                        }
                        ,
                        e.prototype.remuxVideo = function(e, t, r, i, n) {
                            var a, o, s, l, u, c, d = 8, f = e.timescale, h = e.samples, p = [], g = h.length, v = this._PTSNormalize, y = this._initPTS, m = this.nextAvcDts, _ = this.isSafari;
                            if (0 !== g) {
                                _ && (r |= h.length && m && (n && Math.abs(t - m / f) < .1 || Math.abs(h[0].pts - m - y) < f / 5)),
                                r || (m = t * f),
                                h.forEach(function(e) {
                                    e.pts = v(e.pts - y, m),
                                    e.dts = v(e.dts - y, m)
                                }),
                                h.sort(function(e, t) {
                                    return e.dts - t.dts || e.pts - t.pts || e.id - t.id
                                });
                                var T = h.reduce(function(e, t) {
                                    return Math.max(Math.min(e, t.pts - t.dts), -18e3)
                                }, 0);
                                if (T < 0) {
                                    X.logger.warn("PTS < DTS detected in video samples, shifting DTS by " + Math.round(T / 90) + " ms to overcome this issue");
                                    for (var b = 0; b < h.length; b++)
                                        h[b].dts += T
                                }
                                var E = h[0];
                                l = Math.max(E.dts, 0),
                                s = Math.max(E.pts, 0);
                                var S = Math.round((l - m) / 90);
                                r && S && (1 < S ? X.logger.log("AVC:" + S + " ms hole between fragments detected,filling it") : S < -1 && X.logger.log("AVC:" + -S + " ms overlapping between fragments detected"),
                                h[0].dts = l = m,
                                X.logger.log("Video/PTS/DTS adjusted: " + Math.round((h[0].pts = s = Math.max(s - S, m)) / 90) + "/" + Math.round(l / 90) + ",delta:" + S + " ms")),
                                u = Math.max((E = h[h.length - 1]).pts, 0, c = Math.max(E.dts, 0)),
                                _ && (a = Math.round((c - l) / (h.length - 1)));
                                var A = 0
                                  , k = 0;
                                for (b = 0; b < g; b++) {
                                    for (var w = h[b], R = w.units, L = R.length, I = 0, D = 0; D < L; D++)
                                        I += R[D].data.length;
                                    k += I,
                                    A += L,
                                    w.length = I,
                                    w.dts = _ ? l + b * a : Math.max(w.dts, l),
                                    w.pts = Math.max(w.pts, w.dts)
                                }
                                var C = k + 4 * A + 8;
                                try {
                                    o = new Uint8Array(C)
                                } catch (e) {
                                    return void this.observer.trigger(W.default.ERROR, {
                                        type: z.ErrorTypes.MUX_ERROR,
                                        details: z.ErrorDetails.REMUX_ALLOC_ERROR,
                                        fatal: !1,
                                        bytes: C,
                                        reason: "fail allocating video mdat " + C
                                    })
                                }
                                var P = new DataView(o.buffer);
                                P.setUint32(0, C),
                                o.set(Y.default.types.mdat, 4);
                                for (b = 0; b < g; b++) {
                                    var O = h[b]
                                      , M = O.units
                                      , x = 0
                                      , F = void 0;
                                    for (D = 0,
                                    L = M.length; D < L; D++) {
                                        var N = M[D]
                                          , B = N.data
                                          , j = N.data.byteLength;
                                        P.setUint32(d, j),
                                        o.set(B, d += 4),
                                        d += j,
                                        x += 4 + j
                                    }
                                    if (_)
                                        F = Math.max(0, a * Math.round((O.pts - O.dts) / a));
                                    else {
                                        if (b < g - 1)
                                            a = h[b + 1].dts - O.dts;
                                        else {
                                            var U = this.config
                                              , G = O.dts - h[0 < b ? b - 1 : b].dts;
                                            if (U.stretchShortVideoTrack) {
                                                var H = (i ? s + i * f : this.nextAudioPts) - O.pts;
                                                Math.floor(U.maxBufferHole * f) < H ? ((a = H - G) < 0 && (a = G),
                                                X.logger.log("It is approximately " + H / 90 + " ms to the next segment; using duration " + a / 90 + " ms for the last video frame.")) : a = G
                                            } else
                                                a = G
                                        }
                                        F = Math.round(O.pts - O.dts)
                                    }
                                    p.push({
                                        size: x,
                                        duration: a,
                                        cts: F,
                                        flags: {
                                            isLeading: 0,
                                            isDependedOn: 0,
                                            hasRedundancy: 0,
                                            degradPrio: 0,
                                            dependsOn: O.key ? 2 : 1,
                                            isNonSync: O.key ? 0 : 1
                                        }
                                    })
                                }
                                this.nextAvcDts = c + a;
                                var q = e.dropped;
                                if (e.len = 0,
                                e.nbNalu = 0,
                                e.dropped = 0,
                                p.length && -1 < navigator.userAgent.toLowerCase().indexOf("chrome")) {
                                    var K = p[0].flags;
                                    K.dependsOn = 2,
                                    K.isNonSync = 0
                                }
                                e.samples = p;
                                var V = {
                                    data1: Y.default.moof(e.sequenceNumber++, l, e),
                                    data2: o,
                                    startPTS: s / f,
                                    endPTS: (u + a) / f,
                                    startDTS: l / f,
                                    endDTS: this.nextAvcDts / f,
                                    type: "video",
                                    hasAudio: !(e.samples = []),
                                    hasVideo: !0,
                                    nb: p.length,
                                    dropped: q
                                };
                                return this.observer.trigger(W.default.FRAG_PARSING_DATA, V),
                                V
                            }
                        }
                        ,
                        e.prototype.remuxAudio = function(e, t, r, i) {
                            var n, a, o, s, l, u, c, d = e.inputTimeScale, f = d / e.timescale, h = (e.isAAC ? 1024 : 1152) * f, p = this._PTSNormalize, g = this._initPTS, v = !e.isAAC && this.typeSupported.mpeg, y = e.samples, m = [], _ = this.nextAudioPts;
                            if (r |= y.length && _ && (i && Math.abs(t - _ / d) < .1 || Math.abs(y[0].pts - _ - g) < 20 * h),
                            y.forEach(function(e) {
                                e.pts = e.dts = p(e.pts - g, t * d)
                            }),
                            0 !== (y = y.filter(function(e) {
                                return 0 <= e.pts
                            })).length) {
                                if (r || (_ = i ? t * d : y[0].pts),
                                e.isAAC)
                                    for (var T = this.config.maxAudioFramesDrift, b = 0, E = _; b < y.length; ) {
                                        var S, A = y[b], k = Math.abs(1e3 * (S = (P = A.pts) - E) / d);
                                        if (S <= -T * h)
                                            X.logger.warn("Dropping 1 audio frame @ " + (E / d).toFixed(3) + "s due to " + Math.round(k) + " ms overlap."),
                                            y.splice(b, 1),
                                            e.len -= A.unit.length;
                                        else if (T * h <= S && k < 1e4 && E) {
                                            var w = Math.round(S / h);
                                            X.logger.warn("Injecting " + w + " audio frame @ " + (E / d).toFixed(3) + "s due to " + Math.round(1e3 * S / d) + " ms gap.");
                                            for (var R = 0; R < w; R++) {
                                                var L = Math.max(E, 0);
                                                (o = H.default.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (X.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),
                                                o = A.unit.subarray()),
                                                y.splice(b, 0, {
                                                    unit: o,
                                                    pts: L,
                                                    dts: L
                                                }),
                                                e.len += o.length,
                                                E += h,
                                                b++
                                            }
                                            A.pts = A.dts = E,
                                            E += h,
                                            b++
                                        } else
                                            A.pts = A.dts = E,
                                            E += h,
                                            b++
                                    }
                                R = 0;
                                for (var I = y.length; R < I; R++) {
                                    var D = y[R]
                                      , C = D.unit
                                      , P = D.pts;
                                    if (void 0 !== c)
                                        a.duration = Math.round((P - c) / f);
                                    else {
                                        var O = Math.round(1e3 * (P - _) / d)
                                          , M = 0;
                                        if (r && e.isAAC && O) {
                                            if (0 < O && O < 1e4)
                                                M = Math.round((P - _) / h),
                                                X.logger.log(O + " ms hole between AAC samples detected,filling it"),
                                                0 < M && ((o = H.default.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (o = C.subarray()),
                                                e.len += M * o.length);
                                            else if (O < -12) {
                                                X.logger.log("drop overlapping AAC sample, expected/parsed/delta:" + (_ / d).toFixed(3) + "s/" + (P / d).toFixed(3) + "s/" + -O + "ms"),
                                                e.len -= C.byteLength;
                                                continue
                                            }
                                            P = _
                                        }
                                        if (u = P,
                                        !(0 < e.len))
                                            return;
                                        var x = v ? e.len : e.len + 8;
                                        n = v ? 0 : 8;
                                        try {
                                            s = new Uint8Array(x)
                                        } catch (e) {
                                            return void this.observer.trigger(W.default.ERROR, {
                                                type: z.ErrorTypes.MUX_ERROR,
                                                details: z.ErrorDetails.REMUX_ALLOC_ERROR,
                                                fatal: !1,
                                                bytes: x,
                                                reason: "fail allocating audio mdat " + x
                                            })
                                        }
                                        v || (new DataView(s.buffer).setUint32(0, x),
                                        s.set(Y.default.types.mdat, 4));
                                        for (b = 0; b < M; b++)
                                            (o = H.default.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (X.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),
                                            o = C.subarray()),
                                            s.set(o, n),
                                            n += o.byteLength,
                                            m.push(a = {
                                                size: o.byteLength,
                                                cts: 0,
                                                duration: 1024,
                                                flags: {
                                                    isLeading: 0,
                                                    isDependedOn: 0,
                                                    hasRedundancy: 0,
                                                    degradPrio: 0,
                                                    dependsOn: 1
                                                }
                                            })
                                    }
                                    s.set(C, n);
                                    var F = C.byteLength;
                                    n += F,
                                    m.push(a = {
                                        size: F,
                                        cts: 0,
                                        duration: 0,
                                        flags: {
                                            isLeading: 0,
                                            isDependedOn: 0,
                                            hasRedundancy: 0,
                                            degradPrio: 0,
                                            dependsOn: 1
                                        }
                                    }),
                                    c = P
                                }
                                var N = 0
                                  , B = m.length;
                                if (2 <= B && (a.duration = N = m[B - 2].duration),
                                B) {
                                    this.nextAudioPts = _ = c + f * N,
                                    e.len = 0,
                                    e.samples = m,
                                    l = v ? new Uint8Array : Y.default.moof(e.sequenceNumber++, u / f, e);
                                    var j = u / d
                                      , U = _ / d
                                      , G = {
                                        data1: l,
                                        data2: s,
                                        startPTS: j,
                                        endPTS: U,
                                        startDTS: j,
                                        endDTS: U,
                                        type: "audio",
                                        hasAudio: !0,
                                        hasVideo: !(e.samples = []),
                                        nb: B
                                    };
                                    return this.observer.trigger(W.default.FRAG_PARSING_DATA, G),
                                    G
                                }
                                return null
                            }
                        }
                        ,
                        e.prototype.remuxEmptyAudio = function(e, t, r, i) {
                            var n = e.inputTimeScale
                              , a = this.nextAudioPts
                              , o = (void 0 !== a ? a : i.startDTS * n) + this._initDTS
                              , s = 1024 * (n / (e.samplerate ? e.samplerate : n))
                              , l = Math.ceil((i.endDTS * n + this._initDTS - o) / s)
                              , u = H.default.getSilentFrame(e.manifestCodec || e.codec, e.channelCount);
                            if (X.logger.warn("remux empty Audio"),
                            u) {
                                for (var c = [], d = 0; d < l; d++) {
                                    var f = o + d * s;
                                    c.push({
                                        unit: u,
                                        pts: f,
                                        dts: f
                                    }),
                                    e.len += u.length
                                }
                                e.samples = c,
                                this.remuxAudio(e, t, r)
                            } else
                                X.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")
                        }
                        ,
                        e.prototype.remuxID3 = function(e) {
                            var t, r = e.samples.length, i = e.inputTimeScale, n = this._initPTS, a = this._initDTS;
                            if (r) {
                                for (var o = 0; o < r; o++)
                                    (t = e.samples[o]).pts = (t.pts - n) / i,
                                    t.dts = (t.dts - a) / i;
                                this.observer.trigger(W.default.FRAG_PARSING_METADATA, {
                                    samples: e.samples
                                })
                            }
                            e.samples = []
                        }
                        ,
                        e.prototype.remuxText = function(e) {
                            e.samples.sort(function(e, t) {
                                return e.pts - t.pts
                            });
                            var t, r = e.samples.length, i = e.inputTimeScale, n = this._initPTS;
                            if (r) {
                                for (var a = 0; a < r; a++)
                                    (t = e.samples[a]).pts = (t.pts - n) / i;
                                this.observer.trigger(W.default.FRAG_PARSING_USERDATA, {
                                    samples: e.samples
                                })
                            }
                            e.samples = []
                        }
                        ,
                        e.prototype._PTSNormalize = function(e, t) {
                            var r;
                            if (void 0 === t)
                                return e;
                            for (r = t < e ? -8589934592 : 8589934592; 4294967296 < Math.abs(e - t); )
                                e += r;
                            return e
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/remux/passthrough-remuxer.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var c = r("./src/events.js")
                      , i = function() {
                        function e(e) {
                            this.observer = e
                        }
                        return e.prototype.destroy = function() {}
                        ,
                        e.prototype.resetTimeStamp = function() {}
                        ,
                        e.prototype.resetInitSegment = function() {}
                        ,
                        e.prototype.remux = function(e, t, r, i, n, a, o, s) {
                            var l = this.observer
                              , u = "";
                            e && (u += "audio"),
                            t && (u += "video"),
                            l.trigger(c.default.FRAG_PARSING_DATA, {
                                data1: s,
                                startPTS: n,
                                startDTS: n,
                                type: u,
                                hasAudio: !!e,
                                hasVideo: !!t,
                                nb: 1,
                                dropped: 0
                            }),
                            l.trigger(c.default.FRAG_PARSED)
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/task-loop.js": function(e, t, r) {
                    var i, a = this && this.__extends || (i = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(e, t) {
                        e.__proto__ = t
                    }
                    || function(e, t) {
                        for (var r in t)
                            t.hasOwnProperty(r) && (e[r] = t[r])
                    }
                    ,
                    function(e, t) {
                        function r() {
                            this.constructor = e
                        }
                        i(e, t),
                        e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype,
                        new r)
                    }
                    );
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var n = function(n) {
                        function e(e) {
                            for (var t = [], r = 1; r < arguments.length; r++)
                                t[r - 1] = arguments[r];
                            var i = n.apply(this, [e].concat(t)) || this;
                            return i._tickInterval = null,
                            i._tickTimer = null,
                            i._tickCallCount = 0,
                            i._boundTick = i.tick.bind(i),
                            i
                        }
                        return a(e, n),
                        e.prototype.onHandlerDestroying = function() {
                            this.clearNextTick(),
                            this.clearInterval()
                        }
                        ,
                        e.prototype.hasInterval = function() {
                            return !!this._tickInterval
                        }
                        ,
                        e.prototype.hasNextTick = function() {
                            return !!this._tickTimer
                        }
                        ,
                        e.prototype.setInterval = function(e) {
                            return !this._tickInterval && (this._tickInterval = setInterval(this._boundTick, e),
                            !0)
                        }
                        ,
                        e.prototype.clearInterval = function() {
                            return !!this._tickInterval && (clearInterval(this._tickInterval),
                            !(this._tickInterval = null))
                        }
                        ,
                        e.prototype.clearNextTick = function() {
                            return !!this._tickTimer && (clearTimeout(this._tickTimer),
                            !(this._tickTimer = null))
                        }
                        ,
                        e.prototype.tick = function() {
                            this._tickCallCount++,
                            1 === this._tickCallCount && (this.doTick(),
                            1 < this._tickCallCount && (this.clearNextTick(),
                            this._tickTimer = setTimeout(this._boundTick, 0)),
                            this._tickCallCount = 0)
                        }
                        ,
                        e.prototype.doTick = function() {}
                        ,
                        e
                    }(r("./src/event-handler.js").default);
                    t.default = n
                },
                "./src/utils/attr-list.js": function(e, t, r) {
                    !function(i) {
                        Object.defineProperty(t, "__esModule", {
                            value: !0
                        });
                        var n = /^(\d+)x(\d+)$/
                          , a = /\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g
                          , e = function() {
                            function r(e) {
                                for (var t in "string" == typeof e && (e = r.parseAttrList(e)),
                                e)
                                    e.hasOwnProperty(t) && (this[t] = e[t])
                            }
                            return r.prototype.decimalInteger = function(e) {
                                var t = parseInt(this[e], 10);
                                return i.MAX_SAFE_INTEGER < t ? 1 / 0 : t
                            }
                            ,
                            r.prototype.hexadecimalInteger = function(e) {
                                if (this[e]) {
                                    var t = (this[e] || "0x").slice(2);
                                    t = (1 & t.length ? "0" : "") + t;
                                    for (var r = new Uint8Array(t.length / 2), i = 0; i < t.length / 2; i++)
                                        r[i] = parseInt(t.slice(2 * i, 2 * i + 2), 16);
                                    return r
                                }
                                return null
                            }
                            ,
                            r.prototype.hexadecimalIntegerAsNumber = function(e) {
                                var t = parseInt(this[e], 16);
                                return i.MAX_SAFE_INTEGER < t ? 1 / 0 : t
                            }
                            ,
                            r.prototype.decimalFloatingPoint = function(e) {
                                return parseFloat(this[e])
                            }
                            ,
                            r.prototype.enumeratedString = function(e) {
                                return this[e]
                            }
                            ,
                            r.prototype.decimalResolution = function(e) {
                                var t = n.exec(this[e]);
                                if (null !== t)
                                    return {
                                        width: parseInt(t[1], 10),
                                        height: parseInt(t[2], 10)
                                    }
                            }
                            ,
                            r.parseAttrList = function(e) {
                                var t, r = {};
                                for (a.lastIndex = 0; null !== (t = a.exec(e)); ) {
                                    var i = t[2];
                                    0 == i.indexOf('"') && i.lastIndexOf('"') == i.length - 1 && (i = i.slice(1, -1)),
                                    r[t[1]] = i
                                }
                                return r
                            }
                            ,
                            r
                        }();
                        t.default = e
                    }(r("./src/polyfills/number.js").Number)
                },
                "./src/utils/binary-search.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    t.default = {
                        search: function(e, t) {
                            for (var r = 0, i = e.length - 1, n = null, a = null; r <= i; ) {
                                var o = t(a = e[n = (r + i) / 2 | 0]);
                                if (0 < o)
                                    r = n + 1;
                                else {
                                    if (!(o < 0))
                                        return a;
                                    i = n - 1
                                }
                            }
                            return null
                        }
                    }
                },
                "./src/utils/buffer-helper.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = function() {
                        function e() {}
                        return e.isBuffered = function(e, t) {
                            try {
                                if (e)
                                    for (var r = e.buffered, i = 0; i < r.length; i++)
                                        if (t >= r.start(i) && t <= r.end(i))
                                            return !0
                            } catch (e) {}
                            return !1
                        }
                        ,
                        e.bufferInfo = function(e, t, r) {
                            try {
                                if (e) {
                                    var i = e.buffered
                                      , n = []
                                      , a = void 0;
                                    for (a = 0; a < i.length; a++)
                                        n.push({
                                            start: i.start(a),
                                            end: i.end(a)
                                        });
                                    return this.bufferedInfo(n, t, r)
                                }
                            } catch (e) {}
                            return {
                                len: 0,
                                start: t,
                                end: t,
                                nextStart: void 0
                            }
                        }
                        ,
                        e.bufferedInfo = function(e, t, r) {
                            var i, n, a, o, s, l = [];
                            for (e.sort(function(e, t) {
                                var r = e.start - t.start;
                                return r || t.end - e.end
                            }),
                            s = 0; s < e.length; s++) {
                                var u = l.length;
                                if (u) {
                                    var c = l[u - 1].end;
                                    e[s].start - c < r ? c < e[s].end && (l[u - 1].end = e[s].end) : l.push(e[s])
                                } else
                                    l.push(e[s])
                            }
                            for (i = s = 0,
                            n = a = t; s < l.length; s++) {
                                var d = l[s].start
                                  , f = l[s].end;
                                if (d <= t + r && t < f)
                                    n = d,
                                    i = (a = f) - t;
                                else if (t + r < d) {
                                    o = d;
                                    break
                                }
                            }
                            return {
                                len: i,
                                start: n,
                                end: a,
                                nextStart: o
                            }
                        }
                        ,
                        e
                    }();
                    t.BufferHelper = i
                },
                "./src/utils/cea-608-parser.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = {
                        42: 225,
                        92: 233,
                        94: 237,
                        95: 243,
                        96: 250,
                        123: 231,
                        124: 247,
                        125: 209,
                        126: 241,
                        127: 9608,
                        128: 174,
                        129: 176,
                        130: 189,
                        131: 191,
                        132: 8482,
                        133: 162,
                        134: 163,
                        135: 9834,
                        136: 224,
                        137: 32,
                        138: 232,
                        139: 226,
                        140: 234,
                        141: 238,
                        142: 244,
                        143: 251,
                        144: 193,
                        145: 201,
                        146: 211,
                        147: 218,
                        148: 220,
                        149: 252,
                        150: 8216,
                        151: 161,
                        152: 42,
                        153: 8217,
                        154: 9473,
                        155: 169,
                        156: 8480,
                        157: 8226,
                        158: 8220,
                        159: 8221,
                        160: 192,
                        161: 194,
                        162: 199,
                        163: 200,
                        164: 202,
                        165: 203,
                        166: 235,
                        167: 206,
                        168: 207,
                        169: 239,
                        170: 212,
                        171: 217,
                        172: 249,
                        173: 219,
                        174: 171,
                        175: 187,
                        176: 195,
                        177: 227,
                        178: 205,
                        179: 204,
                        180: 236,
                        181: 210,
                        182: 242,
                        183: 213,
                        184: 245,
                        185: 123,
                        186: 125,
                        187: 92,
                        188: 94,
                        189: 95,
                        190: 124,
                        191: 8764,
                        192: 196,
                        193: 228,
                        194: 214,
                        195: 246,
                        196: 223,
                        197: 165,
                        198: 164,
                        199: 9475,
                        200: 197,
                        201: 229,
                        202: 216,
                        203: 248,
                        204: 9487,
                        205: 9491,
                        206: 9495,
                        207: 9499
                    }
                      , s = function(e) {
                        var t = e;
                        return i.hasOwnProperty(e) && (t = i[e]),
                        String.fromCharCode(t)
                    }
                      , n = {
                        17: 1,
                        18: 3,
                        21: 5,
                        22: 7,
                        23: 9,
                        16: 11,
                        19: 12,
                        20: 14
                    }
                      , a = {
                        17: 2,
                        18: 4,
                        21: 6,
                        22: 8,
                        23: 10,
                        19: 13,
                        20: 15
                    }
                      , o = {
                        25: 1,
                        26: 3,
                        29: 5,
                        30: 7,
                        31: 9,
                        24: 11,
                        27: 12,
                        28: 14
                    }
                      , l = {
                        25: 2,
                        26: 4,
                        29: 6,
                        30: 8,
                        31: 10,
                        27: 13,
                        28: 15
                    }
                      , u = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"]
                      , c = {
                        verboseFilter: {
                            DATA: 3,
                            DEBUG: 3,
                            INFO: 2,
                            WARNING: 2,
                            TEXT: 1,
                            ERROR: 0
                        },
                        time: null,
                        verboseLevel: 0,
                        setTime: function(e) {
                            this.time = e
                        },
                        log: function(e, t) {}
                    }
                      , d = function(e) {
                        for (var t = [], r = 0; r < e.length; r++)
                            t.push(e[r].toString(16));
                        return t
                    }
                      , f = function() {
                        function e(e, t, r, i, n) {
                            this.foreground = e || "white",
                            this.underline = t || !1,
                            this.italics = r || !1,
                            this.background = i || "black",
                            this.flash = n || !1
                        }
                        return e.prototype.reset = function() {
                            this.foreground = "white",
                            this.underline = !1,
                            this.italics = !1,
                            this.background = "black",
                            this.flash = !1
                        }
                        ,
                        e.prototype.setStyles = function(e) {
                            for (var t = ["foreground", "underline", "italics", "background", "flash"], r = 0; r < t.length; r++) {
                                var i = t[r];
                                e.hasOwnProperty(i) && (this[i] = e[i])
                            }
                        }
                        ,
                        e.prototype.isDefault = function() {
                            return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
                        }
                        ,
                        e.prototype.equals = function(e) {
                            return this.foreground === e.foreground && this.underline === e.underline && this.italics === e.italics && this.background === e.background && this.flash === e.flash
                        }
                        ,
                        e.prototype.copy = function(e) {
                            this.foreground = e.foreground,
                            this.underline = e.underline,
                            this.italics = e.italics,
                            this.background = e.background,
                            this.flash = e.flash
                        }
                        ,
                        e.prototype.toString = function() {
                            return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
                        }
                        ,
                        e
                    }()
                      , h = function() {
                        function e(e, t, r, i, n, a) {
                            this.uchar = e || " ",
                            this.penState = new f(t,r,i,n,a)
                        }
                        return e.prototype.reset = function() {
                            this.uchar = " ",
                            this.penState.reset()
                        }
                        ,
                        e.prototype.setChar = function(e, t) {
                            this.uchar = e,
                            this.penState.copy(t)
                        }
                        ,
                        e.prototype.setPenState = function(e) {
                            this.penState.copy(e)
                        }
                        ,
                        e.prototype.equals = function(e) {
                            return this.uchar === e.uchar && this.penState.equals(e.penState)
                        }
                        ,
                        e.prototype.copy = function(e) {
                            this.uchar = e.uchar,
                            this.penState.copy(e.penState)
                        }
                        ,
                        e.prototype.isEmpty = function() {
                            return " " === this.uchar && this.penState.isDefault()
                        }
                        ,
                        e
                    }()
                      , p = function() {
                        function e() {
                            this.chars = [];
                            for (var e = 0; e < 100; e++)
                                this.chars.push(new h);
                            this.pos = 0,
                            this.currPenState = new f
                        }
                        return e.prototype.equals = function(e) {
                            for (var t = !0, r = 0; r < 100; r++)
                                if (!this.chars[r].equals(e.chars[r])) {
                                    t = !1;
                                    break
                                }
                            return t
                        }
                        ,
                        e.prototype.copy = function(e) {
                            for (var t = 0; t < 100; t++)
                                this.chars[t].copy(e.chars[t])
                        }
                        ,
                        e.prototype.isEmpty = function() {
                            for (var e = !0, t = 0; t < 100; t++)
                                if (!this.chars[t].isEmpty()) {
                                    e = !1;
                                    break
                                }
                            return e
                        }
                        ,
                        e.prototype.setCursor = function(e) {
                            this.pos !== e && (this.pos = e),
                            this.pos < 0 ? (c.log("ERROR", "Negative cursor position " + this.pos),
                            this.pos = 0) : 100 < this.pos && (c.log("ERROR", "Too large cursor position " + this.pos),
                            this.pos = 100)
                        }
                        ,
                        e.prototype.moveCursor = function(e) {
                            var t = this.pos + e;
                            if (1 < e)
                                for (var r = this.pos + 1; r < t + 1; r++)
                                    this.chars[r].setPenState(this.currPenState);
                            this.setCursor(t)
                        }
                        ,
                        e.prototype.backSpace = function() {
                            this.moveCursor(-1),
                            this.chars[this.pos].setChar(" ", this.currPenState)
                        }
                        ,
                        e.prototype.insertChar = function(e) {
                            144 <= e && this.backSpace();
                            var t = s(e);
                            100 <= this.pos ? c.log("ERROR", "Cannot insert " + e.toString(16) + " (" + t + ") at position " + this.pos + ". Skipping it!") : (this.chars[this.pos].setChar(t, this.currPenState),
                            this.moveCursor(1))
                        }
                        ,
                        e.prototype.clearFromPos = function(e) {
                            var t;
                            for (t = e; t < 100; t++)
                                this.chars[t].reset()
                        }
                        ,
                        e.prototype.clear = function() {
                            this.clearFromPos(0),
                            this.pos = 0,
                            this.currPenState.reset()
                        }
                        ,
                        e.prototype.clearToEndOfRow = function() {
                            this.clearFromPos(this.pos)
                        }
                        ,
                        e.prototype.getTextString = function() {
                            for (var e = [], t = !0, r = 0; r < 100; r++) {
                                var i = this.chars[r].uchar;
                                " " !== i && (t = !1),
                                e.push(i)
                            }
                            return t ? "" : e.join("")
                        }
                        ,
                        e.prototype.setPenStyles = function(e) {
                            this.currPenState.setStyles(e),
                            this.chars[this.pos].setPenState(this.currPenState)
                        }
                        ,
                        e
                    }()
                      , g = function() {
                        function e() {
                            this.rows = [];
                            for (var e = 0; e < 15; e++)
                                this.rows.push(new p);
                            this.currRow = 14,
                            this.nrRollUpRows = null,
                            this.reset()
                        }
                        return e.prototype.reset = function() {
                            for (var e = 0; e < 15; e++)
                                this.rows[e].clear();
                            this.currRow = 14
                        }
                        ,
                        e.prototype.equals = function(e) {
                            for (var t = !0, r = 0; r < 15; r++)
                                if (!this.rows[r].equals(e.rows[r])) {
                                    t = !1;
                                    break
                                }
                            return t
                        }
                        ,
                        e.prototype.copy = function(e) {
                            for (var t = 0; t < 15; t++)
                                this.rows[t].copy(e.rows[t])
                        }
                        ,
                        e.prototype.isEmpty = function() {
                            for (var e = !0, t = 0; t < 15; t++)
                                if (!this.rows[t].isEmpty()) {
                                    e = !1;
                                    break
                                }
                            return e
                        }
                        ,
                        e.prototype.backSpace = function() {
                            this.rows[this.currRow].backSpace()
                        }
                        ,
                        e.prototype.clearToEndOfRow = function() {
                            this.rows[this.currRow].clearToEndOfRow()
                        }
                        ,
                        e.prototype.insertChar = function(e) {
                            this.rows[this.currRow].insertChar(e)
                        }
                        ,
                        e.prototype.setPen = function(e) {
                            this.rows[this.currRow].setPenStyles(e)
                        }
                        ,
                        e.prototype.moveCursor = function(e) {
                            this.rows[this.currRow].moveCursor(e)
                        }
                        ,
                        e.prototype.setCursor = function(e) {
                            c.log("INFO", "setCursor: " + e),
                            this.rows[this.currRow].setCursor(e)
                        }
                        ,
                        e.prototype.setPAC = function(e) {
                            c.log("INFO", "pacData = " + JSON.stringify(e));
                            var t = e.row - 1;
                            if (this.nrRollUpRows && t < this.nrRollUpRows - 1 && (t = this.nrRollUpRows - 1),
                            this.nrRollUpRows && this.currRow !== t) {
                                for (var r = 0; r < 15; r++)
                                    this.rows[r].clear();
                                var i = this.currRow + 1 - this.nrRollUpRows
                                  , n = this.lastOutputScreen;
                                if (n) {
                                    var a = n.rows[i].cueStartTime;
                                    if (a && a < c.time)
                                        for (r = 0; r < this.nrRollUpRows; r++)
                                            this.rows[t - this.nrRollUpRows + r + 1].copy(n.rows[i + r])
                                }
                            }
                            this.currRow = t;
                            var o = this.rows[this.currRow];
                            if (null !== e.indent) {
                                var s = Math.max(e.indent - 1, 0);
                                o.setCursor(e.indent),
                                e.color = o.chars[s].penState.foreground
                            }
                            this.setPen({
                                foreground: e.color,
                                underline: e.underline,
                                italics: e.italics,
                                background: "black",
                                flash: !1
                            })
                        }
                        ,
                        e.prototype.setBkgData = function(e) {
                            c.log("INFO", "bkgData = " + JSON.stringify(e)),
                            this.backSpace(),
                            this.setPen(e),
                            this.insertChar(32)
                        }
                        ,
                        e.prototype.setRollUpRows = function(e) {
                            this.nrRollUpRows = e
                        }
                        ,
                        e.prototype.rollUp = function() {
                            if (null !== this.nrRollUpRows) {
                                c.log("TEXT", this.getDisplayText());
                                var e = this.rows.splice(this.currRow + 1 - this.nrRollUpRows, 1)[0];
                                e.clear(),
                                this.rows.splice(this.currRow, 0, e),
                                c.log("INFO", "Rolling up")
                            } else
                                c.log("DEBUG", "roll_up but nrRollUpRows not set yet")
                        }
                        ,
                        e.prototype.getDisplayText = function(e) {
                            e = e || !1;
                            for (var t = [], r = "", i = 0; i < 15; i++) {
                                var n = this.rows[i].getTextString();
                                n && t.push(e ? "Row " + (i + 1) + ": '" + n + "'" : n.trim())
                            }
                            return 0 < t.length && (r = e ? "[" + t.join(" | ") + "]" : t.join("\n")),
                            r
                        }
                        ,
                        e.prototype.getTextAndFormat = function() {
                            return this.rows
                        }
                        ,
                        e
                    }()
                      , v = function() {
                        function e(e, t) {
                            this.chNr = e,
                            this.outputFilter = t,
                            this.mode = null,
                            this.verbose = 0,
                            this.displayedMemory = new g,
                            this.nonDisplayedMemory = new g,
                            this.lastOutputScreen = new g,
                            this.currRollUpRow = this.displayedMemory.rows[14],
                            this.writeScreen = this.displayedMemory,
                            this.mode = null,
                            this.cueStartTime = null
                        }
                        return e.prototype.reset = function() {
                            this.mode = null,
                            this.displayedMemory.reset(),
                            this.nonDisplayedMemory.reset(),
                            this.lastOutputScreen.reset(),
                            this.currRollUpRow = this.displayedMemory.rows[14],
                            this.writeScreen = this.displayedMemory,
                            this.mode = null,
                            this.cueStartTime = null,
                            this.lastCueEndTime = null
                        }
                        ,
                        e.prototype.getHandler = function() {
                            return this.outputFilter
                        }
                        ,
                        e.prototype.setHandler = function(e) {
                            this.outputFilter = e
                        }
                        ,
                        e.prototype.setPAC = function(e) {
                            this.writeScreen.setPAC(e)
                        }
                        ,
                        e.prototype.setBkgData = function(e) {
                            this.writeScreen.setBkgData(e)
                        }
                        ,
                        e.prototype.setMode = function(e) {
                            e !== this.mode && (c.log("INFO", "MODE=" + (this.mode = e)),
                            "MODE_POP-ON" === this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory,
                            this.writeScreen.reset()),
                            "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null,
                            this.nonDisplayedMemory.nrRollUpRows = null),
                            this.mode = e)
                        }
                        ,
                        e.prototype.insertChars = function(e) {
                            for (var t = 0; t < e.length; t++)
                                this.writeScreen.insertChar(e[t]);
                            c.log("INFO", (this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP") + ": " + this.writeScreen.getDisplayText(!0)),
                            "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (c.log("TEXT", "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)),
                            this.outputDataUpdate())
                        }
                        ,
                        e.prototype.ccRCL = function() {
                            c.log("INFO", "RCL - Resume Caption Loading"),
                            this.setMode("MODE_POP-ON")
                        }
                        ,
                        e.prototype.ccBS = function() {
                            c.log("INFO", "BS - BackSpace"),
                            "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(),
                            this.writeScreen === this.displayedMemory && this.outputDataUpdate())
                        }
                        ,
                        e.prototype.ccAOF = function() {}
                        ,
                        e.prototype.ccAON = function() {}
                        ,
                        e.prototype.ccDER = function() {
                            c.log("INFO", "DER- Delete to End of Row"),
                            this.writeScreen.clearToEndOfRow(),
                            this.outputDataUpdate()
                        }
                        ,
                        e.prototype.ccRU = function(e) {
                            c.log("INFO", "RU(" + e + ") - Roll Up"),
                            this.writeScreen = this.displayedMemory,
                            this.setMode("MODE_ROLL-UP"),
                            this.writeScreen.setRollUpRows(e)
                        }
                        ,
                        e.prototype.ccFON = function() {
                            c.log("INFO", "FON - Flash On"),
                            this.writeScreen.setPen({
                                flash: !0
                            })
                        }
                        ,
                        e.prototype.ccRDC = function() {
                            c.log("INFO", "RDC - Resume Direct Captioning"),
                            this.setMode("MODE_PAINT-ON")
                        }
                        ,
                        e.prototype.ccTR = function() {
                            c.log("INFO", "TR"),
                            this.setMode("MODE_TEXT")
                        }
                        ,
                        e.prototype.ccRTD = function() {
                            c.log("INFO", "RTD"),
                            this.setMode("MODE_TEXT")
                        }
                        ,
                        e.prototype.ccEDM = function() {
                            c.log("INFO", "EDM - Erase Displayed Memory"),
                            this.displayedMemory.reset(),
                            this.outputDataUpdate(!0)
                        }
                        ,
                        e.prototype.ccCR = function() {
                            c.log("CR - Carriage Return"),
                            this.writeScreen.rollUp(),
                            this.outputDataUpdate(!0)
                        }
                        ,
                        e.prototype.ccENM = function() {
                            c.log("INFO", "ENM - Erase Non-displayed Memory"),
                            this.nonDisplayedMemory.reset()
                        }
                        ,
                        e.prototype.ccEOC = function() {
                            if (c.log("INFO", "EOC - End Of Caption"),
                            "MODE_POP-ON" === this.mode) {
                                var e = this.displayedMemory;
                                this.displayedMemory = this.nonDisplayedMemory,
                                this.nonDisplayedMemory = e,
                                this.writeScreen = this.nonDisplayedMemory,
                                c.log("TEXT", "DISP: " + this.displayedMemory.getDisplayText())
                            }
                            this.outputDataUpdate(!0)
                        }
                        ,
                        e.prototype.ccTO = function(e) {
                            c.log("INFO", "TO(" + e + ") - Tab Offset"),
                            this.writeScreen.moveCursor(e)
                        }
                        ,
                        e.prototype.ccMIDROW = function(e) {
                            var t = {
                                flash: !1
                            };
                            if (t.underline = e % 2 == 1,
                            t.italics = 46 <= e,
                            t.italics)
                                t.foreground = "white";
                            else {
                                t.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][Math.floor(e / 2) - 16]
                            }
                            c.log("INFO", "MIDROW: " + JSON.stringify(t)),
                            this.writeScreen.setPen(t)
                        }
                        ,
                        e.prototype.outputDataUpdate = function(e) {
                            void 0 === e && (e = !1)
                        }
                        ,
                        e.prototype.cueSplitAtTime = function(e) {
                            this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, e, this.displayedMemory),
                            this.cueStartTime = e))
                        }
                        ,
                        e
                    }()
                      , y = function() {
                        function e(e, t, r) {
                            this.field = e || 1,
                            this.outputs = [t, r],
                            this.channels = [new v(1,t), new v(2,r)],
                            this.currChNr = -1,
                            this.lastCmdA = null,
                            this.lastCmdB = null,
                            this.bufferedData = [],
                            this.startTime = null,
                            this.lastTime = null,
                            this.dataCounters = {
                                padding: 0,
                                char: 0,
                                cmd: 0,
                                other: 0
                            }
                        }
                        return e.prototype.getHandler = function(e) {
                            return this.channels[e].getHandler()
                        }
                        ,
                        e.prototype.setHandler = function(e, t) {
                            this.channels[e].setHandler(t)
                        }
                        ,
                        e.prototype.addData = function(e, t) {
                            var r, i, n, a = !1;
                            c.setTime(this.lastTime = e);
                            for (var o = 0; o < t.length; o += 2)
                                if (n = 127 & t[o + 1],
                                0 !== (i = 127 & t[o]) || 0 !== n) {
                                    if (c.log("DATA", "[" + d([t[o], t[o + 1]]) + "] -> (" + d([i, n]) + ")"),
                                    (r = this.parseCmd(i, n)) || (r = this.parseMidrow(i, n)),
                                    r || (r = this.parsePAC(i, n)),
                                    r || (r = this.parseBackgroundAttributes(i, n)),
                                    !r)
                                        if (a = this.parseChars(i, n))
                                            if (this.currChNr && 0 <= this.currChNr)
                                                this.channels[this.currChNr - 1].insertChars(a);
                                            else
                                                c.log("WARNING", "No channel found yet. TEXT-MODE?");
                                    r ? this.dataCounters.cmd += 2 : a ? this.dataCounters.char += 2 : (this.dataCounters.other += 2,
                                    c.log("WARNING", "Couldn't parse cleaned data " + d([i, n]) + " orig: " + d([t[o], t[o + 1]])))
                                } else
                                    this.dataCounters.padding += 2
                        }
                        ,
                        e.prototype.parseCmd = function(e, t) {
                            var r = null;
                            if (!((20 === e || 28 === e) && 32 <= t && t <= 47) && !((23 === e || 31 === e) && 33 <= t && t <= 35))
                                return !1;
                            if (e === this.lastCmdA && t === this.lastCmdB)
                                return this.lastCmdA = null,
                                this.lastCmdB = null,
                                c.log("DEBUG", "Repeated command (" + d([e, t]) + ") is dropped"),
                                !0;
                            var i = this.channels[(r = 20 === e || 23 === e ? 1 : 2) - 1];
                            return 20 === e || 28 === e ? 32 === t ? i.ccRCL() : 33 === t ? i.ccBS() : 34 === t ? i.ccAOF() : 35 === t ? i.ccAON() : 36 === t ? i.ccDER() : 37 === t ? i.ccRU(2) : 38 === t ? i.ccRU(3) : 39 === t ? i.ccRU(4) : 40 === t ? i.ccFON() : 41 === t ? i.ccRDC() : 42 === t ? i.ccTR() : 43 === t ? i.ccRTD() : 44 === t ? i.ccEDM() : 45 === t ? i.ccCR() : 46 === t ? i.ccENM() : 47 === t && i.ccEOC() : i.ccTO(t - 32),
                            this.lastCmdA = e,
                            this.lastCmdB = t,
                            this.currChNr = r,
                            !0
                        }
                        ,
                        e.prototype.parseMidrow = function(e, t) {
                            var r = null;
                            return (17 === e || 25 === e) && 32 <= t && t <= 47 && ((r = 17 === e ? 1 : 2) !== this.currChNr ? (c.log("ERROR", "Mismatch channel in midrow parsing"),
                            !1) : (this.channels[r - 1].ccMIDROW(t),
                            c.log("DEBUG", "MIDROW (" + d([e, t]) + ")"),
                            !0))
                        }
                        ,
                        e.prototype.parsePAC = function(e, t) {
                            var r;
                            if (!((17 <= e && e <= 23 || 25 <= e && e <= 31) && 64 <= t && t <= 127) && !((16 === e || 24 === e) && 64 <= t && t <= 95))
                                return !1;
                            if (e === this.lastCmdA && t === this.lastCmdB)
                                return this.lastCmdA = null,
                                !(this.lastCmdB = null);
                            r = e <= 23 ? 1 : 2;
                            var i = this.interpretPAC(64 <= t && t <= 95 ? 1 === r ? n[e] : o[e] : 1 === r ? a[e] : l[e], t);
                            return this.channels[r - 1].setPAC(i),
                            this.lastCmdA = e,
                            this.lastCmdB = t,
                            this.currChNr = r,
                            !0
                        }
                        ,
                        e.prototype.interpretPAC = function(e, t) {
                            var r = t
                              , i = {
                                color: null,
                                italics: !1,
                                indent: null,
                                underline: !1,
                                row: e
                            };
                            return i.underline = 1 == (1 & (r = 95 < t ? t - 96 : t - 64)),
                            r <= 13 ? i.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(r / 2)] : r <= 15 ? (i.italics = !0,
                            i.color = "white") : i.indent = 4 * Math.floor((r - 16) / 2),
                            i
                        }
                        ,
                        e.prototype.parseChars = function(e, t) {
                            var r = null
                              , i = null
                              , n = null;
                            if (17 <= (n = 25 <= e ? (r = 2,
                            e - 8) : (r = 1,
                            e)) && n <= 19) {
                                var a = t;
                                c.log("INFO", "Special char '" + s(a = 17 === n ? t + 80 : 18 === n ? t + 112 : t + 144) + "' in channel " + r),
                                i = [a]
                            } else
                                32 <= e && e <= 127 && (i = 0 === t ? [e] : [e, t]);
                            if (i) {
                                var o = d(i);
                                c.log("DEBUG", "Char codes =  " + o.join(",")),
                                this.lastCmdA = null,
                                this.lastCmdB = null
                            }
                            return i
                        }
                        ,
                        e.prototype.parseBackgroundAttributes = function(e, t) {
                            var r;
                            return ((16 === e || 24 === e) && 32 <= t && t <= 47 || (23 === e || 31 === e) && 45 <= t && t <= 47) && (r = {},
                            16 === e || 24 === e ? (r.background = u[Math.floor((t - 32) / 2)],
                            t % 2 == 1 && (r.background = r.background + "_semi")) : 45 === t ? r.background = "transparent" : (r.foreground = "black",
                            47 === t && (r.underline = !0)),
                            this.channels[(e < 24 ? 1 : 2) - 1].setBkgData(r),
                            this.lastCmdA = null,
                            !(this.lastCmdB = null))
                        }
                        ,
                        e.prototype.reset = function() {
                            for (var e = 0; e < this.channels.length; e++)
                                this.channels[e] && this.channels[e].reset();
                            this.lastCmdA = null,
                            this.lastCmdB = null
                        }
                        ,
                        e.prototype.cueSplitAtTime = function(e) {
                            for (var t = 0; t < this.channels.length; t++)
                                this.channels[t] && this.channels[t].cueSplitAtTime(e)
                        }
                        ,
                        e
                    }();
                    t.default = y
                },
                "./src/utils/codecs.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = {
                        audio: {
                            a3ds: !0,
                            "ac-3": !0,
                            "ac-4": !0,
                            alac: !0,
                            alaw: !0,
                            dra1: !0,
                            "dts+": !0,
                            "dts-": !0,
                            dtsc: !0,
                            dtse: !0,
                            dtsh: !0,
                            "ec-3": !0,
                            enca: !0,
                            g719: !0,
                            g726: !0,
                            m4ae: !0,
                            mha1: !0,
                            mha2: !0,
                            mhm1: !0,
                            mhm2: !0,
                            mlpa: !0,
                            mp4a: !0,
                            "raw ": !0,
                            Opus: !0,
                            samr: !0,
                            sawb: !0,
                            sawp: !0,
                            sevc: !0,
                            sqcp: !0,
                            ssmv: !0,
                            twos: !0,
                            ulaw: !0
                        },
                        video: {
                            avc1: !0,
                            avc2: !0,
                            avc3: !0,
                            avc4: !0,
                            avcp: !0,
                            drac: !0,
                            dvav: !0,
                            dvhe: !0,
                            encv: !0,
                            hev1: !0,
                            hvc1: !0,
                            mjp2: !0,
                            mp4v: !0,
                            mvc1: !0,
                            mvc2: !0,
                            mvc3: !0,
                            mvc4: !0,
                            resv: !0,
                            rv60: !0,
                            s263: !0,
                            svc1: !0,
                            svc2: !0,
                            "vc-1": !0,
                            vp08: !0,
                            vp09: !0
                        }
                    };
                    t.isCodecType = function(e, t) {
                        var r = i[t];
                        return !!r && !0 === r[e.slice(0, 4)]
                    }
                    ,
                    t.isCodecSupportedInMp4 = function(e, t) {
                        return window.MediaSource.isTypeSupported((t || "video") + '/mp4;codecs="' + e + '"')
                    }
                },
                "./src/utils/cues.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var f = r("./src/utils/vttparser.js");
                    t.newCue = function(e, t, r, i) {
                        for (var n, a, o, s, l, u = window.VTTCue || window.TextTrackCue, c = 0; c < i.rows.length; c++)
                            if (o = !0,
                            s = 0,
                            l = "",
                            !(n = i.rows[c]).isEmpty()) {
                                for (var d = 0; d < n.chars.length; d++)
                                    n.chars[d].uchar.match(/\s/) && o ? s++ : (l += n.chars[d].uchar,
                                    o = !1);
                                (n.cueStartTime = t) === r && (r += 1e-4),
                                16 <= s ? s-- : s++,
                                (a = new u(t,r,f.fixLineBreaks(l.trim()))).line = navigator.userAgent.match(/Firefox\//) ? c + 1 : 7 < c ? c - 2 : c + 1,
                                a.align = "left",
                                a.position = Math.max(0, Math.min(100, s / 32 * 100 + (navigator.userAgent.match(/Firefox\//) ? 50 : 0))),
                                e.addCue(a)
                            }
                    }
                },
                "./src/utils/discontinuities.js": function(e, t, d) {
                    !function(i) {
                        Object.defineProperty(t, "__esModule", {
                            value: !0
                        });
                        var r = d("./src/utils/binary-search.js")
                          , a = d("./src/utils/logger.js");
                        function o(e, t) {
                            for (var r = null, i = 0; i < e.length; i += 1) {
                                var n = e[i];
                                if (n && n.cc === t) {
                                    r = n;
                                    break
                                }
                            }
                            return r
                        }
                        function n(e, t, r) {
                            var i = !1;
                            return t && t.details && r && (r.startCC < r.endCC || e && e.cc < r.startCC) && (i = !0),
                            i
                        }
                        function s(e, t) {
                            var r = e.fragments
                              , i = t.fragments;
                            if (i.length && r.length) {
                                var n = o(r, i[0].cc);
                                if (n && (!n || n.startPTS))
                                    return n;
                                a.logger.log("No frag in previous level to align on")
                            } else
                                a.logger.log("No fragments to align")
                        }
                        function l(r, e) {
                            e.fragments.forEach(function(e) {
                                if (e) {
                                    var t = e.start + r;
                                    e.start = e.startPTS = t,
                                    e.endPTS = t + e.duration
                                }
                            }),
                            e.PTSKnown = !0
                        }
                        function u(e, t, r) {
                            if (n(e, r, t)) {
                                var i = s(r.details, t);
                                i && (a.logger.log("Adjusting PTS using last level due to CC increase within current level"),
                                l(i.start, t))
                            }
                        }
                        function c(e, t) {
                            if (t && t.fragments.length) {
                                if (!e.hasProgramDateTime || !t.hasProgramDateTime)
                                    return;
                                var r = (e.fragments[0].programDateTime - t.fragments[0].programDateTime) / 1e3 + t.fragments[0].start;
                                i.isFinite(r) && (a.logger.log("adjusting PTS using programDateTime delta, sliding:" + r.toFixed(3)),
                                l(r, e))
                            }
                        }
                        t.findFirstFragWithCC = o,
                        t.findFragWithCC = function(e, t) {
                            return r.default.search(e, function(e) {
                                return e.cc < t ? 1 : t < e.cc ? -1 : 0
                            })
                        }
                        ,
                        t.shouldAlignOnDiscontinuities = n,
                        t.findDiscontinuousReferenceFrag = s,
                        t.adjustPts = l,
                        t.alignStream = function(e, t, r) {
                            u(e, r, t),
                            !r.PTSKnown && t && c(r, t.details)
                        }
                        ,
                        t.alignDiscontinuities = u,
                        t.alignPDT = c
                    }(d("./src/polyfills/number.js").Number)
                },
                "./src/utils/ewma-bandwidth-estimator.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var n = r("./src/utils/ewma.js")
                      , i = function() {
                        function e(e, t, r, i) {
                            this.hls = e,
                            this.defaultEstimate_ = i,
                            this.minWeight_ = .001,
                            this.minDelayMs_ = 50,
                            this.slow_ = new n.default(t),
                            this.fast_ = new n.default(r)
                        }
                        return e.prototype.sample = function(e, t) {
                            var r = 8e3 * t / (e = Math.max(e, this.minDelayMs_))
                              , i = e / 1e3;
                            this.fast_.sample(i, r),
                            this.slow_.sample(i, r)
                        }
                        ,
                        e.prototype.canEstimate = function() {
                            var e = this.fast_;
                            return e && e.getTotalWeight() >= this.minWeight_
                        }
                        ,
                        e.prototype.getEstimate = function() {
                            return this.canEstimate() ? Math.min(this.fast_.getEstimate(), this.slow_.getEstimate()) : this.defaultEstimate_
                        }
                        ,
                        e.prototype.destroy = function() {}
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/utils/ewma.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = function() {
                        function e(e) {
                            this.alpha_ = e ? Math.exp(Math.log(.5) / e) : 0,
                            this.estimate_ = 0,
                            this.totalWeight_ = 0
                        }
                        return e.prototype.sample = function(e, t) {
                            var r = Math.pow(this.alpha_, e);
                            this.estimate_ = t * (1 - r) + r * this.estimate_,
                            this.totalWeight_ += e
                        }
                        ,
                        e.prototype.getTotalWeight = function() {
                            return this.totalWeight_
                        }
                        ,
                        e.prototype.getEstimate = function() {
                            return this.alpha_ ? this.estimate_ / (1 - Math.pow(this.alpha_, this.totalWeight_)) : this.estimate_
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/utils/get-self-scope.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.getSelfScope = function() {
                        return "undefined" == typeof window ? self : window
                    }
                },
                "./src/utils/logger.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = r("./src/utils/get-self-scope.js");
                    function n() {}
                    var a = {
                        trace: n,
                        debug: n,
                        log: n,
                        warn: n,
                        info: n,
                        error: n
                    }
                      , o = a;
                    var s = i.getSelfScope();
                    function l(t) {
                        for (var e = [], r = 1; r < arguments.length; r++)
                            e[r - 1] = arguments[r];
                        e.forEach(function(e) {
                            var r, i;
                            o[e] = t[e] ? t[e].bind(t) : (i = s.console[r = e]) ? function() {
                                for (var e = [], t = 0; t < arguments.length; t++)
                                    e[t] = arguments[t];
                                e[0] && (e[0] = "[" + r + "] > " + e[0]),
                                i.apply(s.console, e)
                            }
                            : n
                        })
                    }
                    t.enableLogs = function(e) {
                        if (!0 === e || "object" == typeof e) {
                            l(e, "debug", "log", "info", "warn", "error");
                            try {
                                o.log()
                            } catch (e) {
                                o = a
                            }
                        } else
                            o = a
                    }
                    ,
                    t.logger = o
                },
                "./src/utils/mediakeys-helper.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = "undefined" != typeof window && window.navigator && window.navigator.requestMediaKeySystemAccess ? window.navigator.requestMediaKeySystemAccess.bind(window.navigator) : null;
                    t.requestMediaKeySystemAccess = i
                },
                "./src/utils/mediasource-helper.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.getMediaSource = function() {
                        if ("undefined" != typeof window)
                            return window.MediaSource || window.WebKitMediaSource
                    }
                },
                "./src/utils/output-filter.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = function() {
                        function e(e, t) {
                            this.timelineController = e,
                            this.trackName = t,
                            this.startTime = null,
                            this.endTime = null,
                            this.screen = null
                        }
                        return e.prototype.dispatchCue = function() {
                            null !== this.startTime && (this.timelineController.addCues(this.trackName, this.startTime, this.endTime, this.screen),
                            this.startTime = null)
                        }
                        ,
                        e.prototype.newCue = function(e, t, r) {
                            (null === this.startTime || e < this.startTime) && (this.startTime = e),
                            this.endTime = t,
                            this.screen = r,
                            this.timelineController.createCaptionsTrack(this.trackName)
                        }
                        ,
                        e
                    }();
                    t.default = i
                },
                "./src/utils/texttrack-utils.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.sendAddTrackEvent = function(e, t) {
                        var r = null;
                        try {
                            r = new window.Event("addtrack")
                        } catch (e) {
                            (r = document.createEvent("Event")).initEvent("addtrack", !1, !1)
                        }
                        r.track = e,
                        t.dispatchEvent(r)
                    }
                    ,
                    t.clearCurrentCues = function(e) {
                        if (e && e.cues)
                            for (; 0 < e.cues.length; )
                                e.removeCue(e.cues[0])
                    }
                },
                "./src/utils/time-ranges.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    t.default = {
                        toString: function(e) {
                            for (var t = "", r = e.length, i = 0; i < r; i++)
                                t += "[" + e.start(i).toFixed(3) + "," + e.end(i).toFixed(3) + "]";
                            return t
                        }
                    }
                },
                "./src/utils/vttcue.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.default = function() {
                        if ("undefined" != typeof window && window.VTTCue)
                            return window.VTTCue;
                        var T = {
                            "": !0,
                            lr: !0,
                            rl: !0
                        }
                          , t = {
                            start: !0,
                            middle: !0,
                            end: !0,
                            left: !0,
                            right: !0
                        };
                        function b(e) {
                            return "string" == typeof e && (!!t[e.toLowerCase()] && e.toLowerCase())
                        }
                        function E(e) {
                            for (var t = 1; t < arguments.length; t++) {
                                var r = arguments[t];
                                for (var i in r)
                                    e[i] = r[i]
                            }
                            return e
                        }
                        function e(e, t, r) {
                            var i = this
                              , n = function() {
                                if ("undefined" != typeof navigator)
                                    return /MSIE\s8\.0/.test(navigator.userAgent)
                            }()
                              , a = {};
                            n ? i = document.createElement("custom") : a.enumerable = !0;
                            var o = ""
                              , s = i.hasBeenReset = !1
                              , l = e
                              , u = t
                              , c = r
                              , d = null
                              , f = ""
                              , h = !0
                              , p = "auto"
                              , g = "start"
                              , v = 50
                              , y = "middle"
                              , m = 50
                              , _ = "middle";
                            if (Object.defineProperty(i, "id", E({}, a, {
                                get: function() {
                                    return o
                                },
                                set: function(e) {
                                    o = "" + e
                                }
                            })),
                            Object.defineProperty(i, "pauseOnExit", E({}, a, {
                                get: function() {
                                    return s
                                },
                                set: function(e) {
                                    s = !!e
                                }
                            })),
                            Object.defineProperty(i, "startTime", E({}, a, {
                                get: function() {
                                    return l
                                },
                                set: function(e) {
                                    if ("number" != typeof e)
                                        throw new TypeError("Start time must be set to a number.");
                                    l = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "endTime", E({}, a, {
                                get: function() {
                                    return u
                                },
                                set: function(e) {
                                    if ("number" != typeof e)
                                        throw new TypeError("End time must be set to a number.");
                                    u = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "text", E({}, a, {
                                get: function() {
                                    return c
                                },
                                set: function(e) {
                                    c = "" + e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "region", E({}, a, {
                                get: function() {
                                    return d
                                },
                                set: function(e) {
                                    d = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "vertical", E({}, a, {
                                get: function() {
                                    return f
                                },
                                set: function(e) {
                                    var t, r = "string" == typeof (t = e) && !!T[t.toLowerCase()] && t.toLowerCase();
                                    if (!1 === r)
                                        throw new SyntaxError("An invalid or illegal string was specified.");
                                    f = r,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "snapToLines", E({}, a, {
                                get: function() {
                                    return h
                                },
                                set: function(e) {
                                    h = !!e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "line", E({}, a, {
                                get: function() {
                                    return p
                                },
                                set: function(e) {
                                    if ("number" != typeof e && "auto" !== e)
                                        throw new SyntaxError("An invalid number or illegal string was specified.");
                                    p = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "lineAlign", E({}, a, {
                                get: function() {
                                    return g
                                },
                                set: function(e) {
                                    var t = b(e);
                                    if (!t)
                                        throw new SyntaxError("An invalid or illegal string was specified.");
                                    g = t,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "position", E({}, a, {
                                get: function() {
                                    return v
                                },
                                set: function(e) {
                                    if (e < 0 || 100 < e)
                                        throw Error("Position must be between 0 and 100.");
                                    v = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "positionAlign", E({}, a, {
                                get: function() {
                                    return y
                                },
                                set: function(e) {
                                    var t = b(e);
                                    if (!t)
                                        throw new SyntaxError("An invalid or illegal string was specified.");
                                    y = t,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "size", E({}, a, {
                                get: function() {
                                    return m
                                },
                                set: function(e) {
                                    if (e < 0 || 100 < e)
                                        throw Error("Size must be between 0 and 100.");
                                    m = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(i, "align", E({}, a, {
                                get: function() {
                                    return _
                                },
                                set: function(e) {
                                    var t = b(e);
                                    if (!t)
                                        throw new SyntaxError("An invalid or illegal string was specified.");
                                    _ = t,
                                    this.hasBeenReset = !0
                                }
                            })),
                            i.displayState = void 0,
                            n)
                                return i
                        }
                        return e.prototype.getCueAsHTML = function() {
                            return window.WebVTT.convertCueToDOMTree(window, this.text)
                        }
                        ,
                        e
                    }()
                },
                "./src/utils/vttparser.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var s = r("./src/utils/vttcue.js")
                      , i = function() {
                        return {
                            decode: function(e) {
                                if (!e)
                                    return "";
                                if ("string" != typeof e)
                                    throw Error("Error - expected string data.");
                                return decodeURIComponent(encodeURIComponent(e))
                            }
                        }
                    };
                    function n() {
                        this.window = window,
                        this.state = "INITIAL",
                        this.buffer = "",
                        this.decoder = new i,
                        this.regionList = []
                    }
                    function l() {
                        this.values = Object.create(null)
                    }
                    function u(e, t, r, i) {
                        var n = i ? e.split(i) : [e];
                        for (var a in n)
                            if ("string" == typeof n[a]) {
                                var o = n[a].split(r);
                                if (2 === o.length)
                                    t(o[0], o[1])
                            }
                    }
                    l.prototype = {
                        set: function(e, t) {
                            this.get(e) || "" === t || (this.values[e] = t)
                        },
                        get: function(e, t, r) {
                            return r ? this.has(e) ? this.values[e] : t[r] : this.has(e) ? this.values[e] : t
                        },
                        has: function(e) {
                            return e in this.values
                        },
                        alt: function(e, t, r) {
                            for (var i = 0; i < r.length; ++i)
                                if (t === r[i]) {
                                    this.set(e, t);
                                    break
                                }
                        },
                        integer: function(e, t) {
                            /^-?\d+$/.test(t) && this.set(e, parseInt(t, 10))
                        },
                        percent: function(e, t) {
                            return !!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/) && 0 <= (t = parseFloat(t)) && t <= 100) && (this.set(e, t),
                            !0)
                        }
                    };
                    var c = new s.default(0,0,0)
                      , d = "middle" === c.align ? "middle" : "center";
                    function f(t, e, o) {
                        var r = t;
                        function i() {
                            var e = function(e) {
                                function t(e, t, r, i) {
                                    return 3600 * (0 | e) + 60 * (0 | t) + (0 | r) + (0 | i) / 1e3
                                }
                                var r = e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
                                return r ? r[3] ? t(r[1], r[2], r[3].replace(":", ""), r[4]) : 59 < r[1] ? t(r[1], r[2], 0, r[4]) : t(0, r[1], r[2], r[4]) : null
                            }(t);
                            if (null === e)
                                throw Error("Malformed timestamp: " + r);
                            return t = t.replace(/^[^\sa-zA-Z-]+/, ""),
                            e
                        }
                        function n() {
                            t = t.replace(/^\s+/, "")
                        }
                        if (n(),
                        e.startTime = i(),
                        n(),
                        "--\x3e" !== t.substr(0, 3))
                            throw Error("Malformed time stamp (time stamps must be separated by '--\x3e'): " + r);
                        t = t.substr(3),
                        n(),
                        e.endTime = i(),
                        n(),
                        function(e, t) {
                            var a = new l;
                            u(e, function(e, t) {
                                switch (e) {
                                case "region":
                                    for (var r = o.length - 1; 0 <= r; r--)
                                        if (o[r].id === t) {
                                            a.set(e, o[r].region);
                                            break
                                        }
                                    break;
                                case "vertical":
                                    a.alt(e, t, ["rl", "lr"]);
                                    break;
                                case "line":
                                    var i = t.split(",")
                                      , n = i[0];
                                    a.integer(e, n),
                                    a.percent(e, n) && a.set("snapToLines", !1),
                                    a.alt(e, n, ["auto"]),
                                    2 === i.length && a.alt("lineAlign", i[1], ["start", d, "end"]);
                                    break;
                                case "position":
                                    i = t.split(","),
                                    a.percent(e, i[0]),
                                    2 === i.length && a.alt("positionAlign", i[1], ["start", d, "end", "line-left", "line-right", "auto"]);
                                    break;
                                case "size":
                                    a.percent(e, t);
                                    break;
                                case "align":
                                    a.alt(e, t, ["start", d, "end", "left", "right"])
                                }
                            }, /:/, /\s/),
                            t.region = a.get("region", null),
                            t.vertical = a.get("vertical", "");
                            var r = a.get("line", "auto");
                            "auto" === r && -1 === c.line && (r = -1),
                            t.line = r,
                            t.lineAlign = a.get("lineAlign", "start"),
                            t.snapToLines = a.get("snapToLines", !0),
                            t.size = a.get("size", 100),
                            t.align = a.get("align", d);
                            var i = a.get("position", "auto");
                            "auto" === i && 50 === c.position && (i = "start" === t.align || "left" === t.align ? 0 : "end" === t.align || "right" === t.align ? 100 : 50),
                            t.position = i
                        }(t, e)
                    }
                    function h(e) {
                        return e.replace(/<br(?: \/)?>/gi, "\n")
                    }
                    t.fixLineBreaks = h,
                    n.prototype = {
                        parse: function(e) {
                            var i = this;
                            function t() {
                                var e = i.buffer
                                  , t = 0;
                                for (e = h(e); t < e.length && "\r" !== e[t] && "\n" !== e[t]; )
                                    ++t;
                                var r = e.substr(0, t);
                                return "\r" === e[t] && ++t,
                                "\n" === e[t] && ++t,
                                i.buffer = e.substr(t),
                                r
                            }
                            e && (i.buffer += i.decoder.decode(e, {
                                stream: !0
                            }));
                            try {
                                var r = void 0;
                                if ("INITIAL" === i.state) {
                                    if (!/\r\n|\n/.test(i.buffer))
                                        return this;
                                    var n = (r = t()).match(/^(Ã¯Â»Â¿)?WEBVTT([ \t].*)?$/);
                                    if (!n || !n[0])
                                        throw Error("Malformed WebVTT signature.");
                                    i.state = "HEADER"
                                }
                                for (var a = !1; i.buffer; ) {
                                    if (!/\r\n|\n/.test(i.buffer))
                                        return this;
                                    switch (a ? a = !1 : r = t(),
                                    i.state) {
                                    case "HEADER":
                                        /:/.test(r) ? u(r, function(e, t) {}, /:/) : r || (i.state = "ID");
                                        continue;
                                    case "NOTE":
                                        r || (i.state = "ID");
                                        continue;
                                    case "ID":
                                        if (/^NOTE($|[ \t])/.test(r)) {
                                            i.state = "NOTE";
                                            break
                                        }
                                        if (!r)
                                            continue;
                                        if (i.cue = new s.default(0,0,""),
                                        i.state = "CUE",
                                        -1 == r.indexOf("--\x3e")) {
                                            i.cue.id = r;
                                            continue
                                        }
                                    case "CUE":
                                        try {
                                            f(r, i.cue, i.regionList)
                                        } catch (e) {
                                            i.cue = null,
                                            i.state = "BADCUE";
                                            continue
                                        }
                                        i.state = "CUETEXT";
                                        continue;
                                    case "CUETEXT":
                                        var o = -1 != r.indexOf("--\x3e");
                                        if (!r || o && (a = !0)) {
                                            i.oncue && i.oncue(i.cue),
                                            i.cue = null,
                                            i.state = "ID";
                                            continue
                                        }
                                        i.cue.text && (i.cue.text += "\n"),
                                        i.cue.text += r;
                                        continue;
                                    case "BADCUE":
                                        r || (i.state = "ID");
                                        continue
                                    }
                                }
                            } catch (e) {
                                "CUETEXT" === i.state && i.cue && i.oncue && i.oncue(i.cue),
                                i.cue = null,
                                i.state = "INITIAL" === i.state ? "BADWEBVTT" : "BADCUE"
                            }
                            return this
                        },
                        flush: function() {
                            try {
                                if (this.buffer += this.decoder.decode(),
                                (this.cue || "HEADER" === this.state) && (this.buffer += "\n\n",
                                this.parse()),
                                "INITIAL" === this.state)
                                    throw Error("Malformed WebVTT signature.")
                            } catch (e) {
                                throw e
                            }
                            return this.onflush && this.onflush(),
                            this
                        }
                    },
                    t.default = n
                },
                "./src/utils/webvtt-parser.js": function(e, t, r) {
                    !function(v) {
                        Object.defineProperty(t, "__esModule", {
                            value: !0
                        });
                        var a = r("./src/utils/vttparser.js")
                          , y = r("./src/demux/id3.js")
                          , m = function(e, t, r) {
                            return e.substr(r || 0, t.length) === t
                        }
                          , _ = function(e) {
                            for (var t = 5381, r = e.length; r; )
                                t = 33 * t ^ e.charCodeAt(--r);
                            return "" + (t >>> 0)
                        };
                        t.default = {
                            parse: function(e, o, s, l, t, r) {
                                var u, i = y.utf8ArrayToStr(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g, "\n").split("\n"), c = "00:00.000", d = 0, f = 0, h = 0, n = [], p = !0, g = new a.default;
                                g.oncue = function(e) {
                                    var t = s[l]
                                      , r = s.ccOffset;
                                    t && t.new && (void 0 !== f ? r = s.ccOffset = t.start : function(e, t, r) {
                                        var i = e[t]
                                          , n = e[i.prevCC];
                                        if (!n || !n.new && i.new)
                                            return e.ccOffset = e.presentationOffset = i.start,
                                            i.new = !1;
                                        for (; n && n.new; )
                                            e.ccOffset += i.start - n.start,
                                            i.new = !1,
                                            n = e[(i = n).prevCC];
                                        e.presentationOffset = r
                                    }(s, l, h)),
                                    h && (r = h - s.presentationOffset),
                                    e.startTime += r - f,
                                    e.endTime += r - f,
                                    e.id = _("" + e.startTime) + _("" + e.endTime) + _(e.text),
                                    e.text = decodeURIComponent(encodeURIComponent(e.text)),
                                    0 < e.endTime && n.push(e)
                                }
                                ,
                                g.onparsingerror = function(e) {
                                    u = e
                                }
                                ,
                                g.onflush = function() {
                                    u && r ? r(u) : t(n)
                                }
                                ,
                                i.forEach(function(t) {
                                    if (p) {
                                        if (m(t, "X-TIMESTAMP-MAP=")) {
                                            p = !1,
                                            t.substr(16).split(",").forEach(function(e) {
                                                m(e, "LOCAL:") ? c = e.substr(6) : m(e, "MPEGTS:") && (d = parseInt(e.substr(7)))
                                            });
                                            try {
                                                o + (9e4 * s[l].start || 0) < 0 && (o += 8589934592),
                                                d -= o,
                                                r = parseInt((e = c).substr(-3)),
                                                i = parseInt(e.substr(-6, 2)),
                                                n = parseInt(e.substr(-9, 2)),
                                                a = 9 < e.length ? parseInt(e.substr(0, e.indexOf(":"))) : 0,
                                                f = (v.isFinite(r) && v.isFinite(i) && v.isFinite(n) && v.isFinite(a) ? (r += 1e3 * i,
                                                r += 6e4 * n,
                                                r += 36e5 * a) : -1) / 1e3,
                                                h = d / 9e4,
                                                -1 === f && (u = Error("Malformed X-TIMESTAMP-MAP: " + t))
                                            } catch (e) {
                                                u = Error("Malformed X-TIMESTAMP-MAP: " + t)
                                            }
                                            return
                                        }
                                        "" === t && (p = !1)
                                    }
                                    var e, r, i, n, a;
                                    g.parse(t + "\n")
                                }),
                                g.flush()
                            }
                        }
                    }(r("./src/polyfills/number.js").Number)
                },
                "./src/utils/xhr-loader.js": function(e, t, r) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var u = r("./src/utils/logger.js")
                      , c = window.performance
                      , n = window.XMLHttpRequest
                      , i = function() {
                        function e(e) {
                            e && e.xhrSetup && (this.xhrSetup = e.xhrSetup)
                        }
                        return e.prototype.destroy = function() {
                            this.abort(),
                            this.loader = null
                        }
                        ,
                        e.prototype.abort = function() {
                            var e = this.loader;
                            e && 4 !== e.readyState && (this.stats.aborted = !0,
                            e.abort()),
                            window.clearTimeout(this.requestTimeout),
                            this.requestTimeout = null,
                            window.clearTimeout(this.retryTimeout),
                            this.retryTimeout = null
                        }
                        ,
                        e.prototype.load = function(e, t, r) {
                            this.context = e,
                            this.config = t,
                            this.callbacks = r,
                            this.stats = {
                                trequest: c.now(),
                                retry: 0
                            },
                            this.retryDelay = t.retryDelay,
                            this.loadInternal()
                        }
                        ,
                        e.prototype.loadInternal = function() {
                            var t, r = this.context;
                            t = this.loader = new n;
                            var e = this.stats;
                            e.tfirst = 0,
                            e.loaded = 0;
                            var i = this.xhrSetup;
                            try {
                                if (i)
                                    try {
                                        i(t, r.url)
                                    } catch (e) {
                                        t.open("GET", r.url, !0),
                                        i(t, r.url)
                                    }
                                t.readyState || t.open("GET", r.url, !0)
                            } catch (e) {
                                return void this.callbacks.onError({
                                    code: t.status,
                                    text: e.message
                                }, r, t)
                            }
                            r.rangeEnd && t.setRequestHeader("Range", "bytes=" + r.rangeStart + "-" + (r.rangeEnd - 1)),
                            t.onreadystatechange = this.readystatechange.bind(this),
                            t.onprogress = this.loadprogress.bind(this),
                            t.responseType = r.responseType,
                            this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), this.config.timeout),
                            t.send()
                        }
                        ,
                        e.prototype.readystatechange = function(e) {
                            var t = e.currentTarget
                              , r = t.readyState
                              , i = this.stats
                              , n = this.context
                              , a = this.config;
                            if (!i.aborted && 2 <= r)
                                if (window.clearTimeout(this.requestTimeout),
                                0 === i.tfirst && (i.tfirst = Math.max(c.now(), i.trequest)),
                                4 === r) {
                                    var o = t.status;
                                    if (200 <= o && o < 300) {
                                        i.tload = Math.max(i.tfirst, c.now());
                                        var s = void 0
                                          , l = void 0;
                                        l = "arraybuffer" === n.responseType ? (s = t.response).byteLength : (s = t.responseText).length,
                                        i.loaded = i.total = l,
                                        this.callbacks.onSuccess({
                                            url: t.responseURL,
                                            data: s
                                        }, i, n, t)
                                    } else
                                        a.maxRetry <= i.retry || 400 <= o && o < 499 ? (u.logger.error(o + " while loading " + n.url),
                                        this.callbacks.onError({
                                            code: o,
                                            text: t.statusText
                                        }, n, t)) : (u.logger.warn(o + " while loading " + n.url + ", retrying in " + this.retryDelay + "..."),
                                        this.destroy(),
                                        this.retryTimeout = window.setTimeout(this.loadInternal.bind(this), this.retryDelay),
                                        this.retryDelay = Math.min(2 * this.retryDelay, a.maxRetryDelay),
                                        i.retry++)
                                } else
                                    this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), a.timeout)
                        }
                        ,
                        e.prototype.loadtimeout = function() {
                            u.logger.warn("timeout while loading " + this.context.url),
                            this.callbacks.onTimeout(this.stats, this.context, null)
                        }
                        ,
                        e.prototype.loadprogress = function(e) {
                            var t = e.currentTarget
                              , r = this.stats;
                            r.loaded = e.loaded,
                            e.lengthComputable && (r.total = e.total);
                            var i = this.callbacks.onProgress;
                            i && i(r, this.context, null, t)
                        }
                        ,
                        e
                    }();
                    t.default = i
                }
            }).default
        }())
    }));
    window.Promise = ii;
    var Wo = function() {
        function t(e) {
            ki(this, t),
            this.vol = 1,
            this.options = {},
            xi(!0, this, e),
            this.events = new In,
            this._lastVolume = this.vol,
            this._fragStartTime = 0,
            this.userData = {},
            this.playerId = "_sunlplayer" + t.id,
            t.id += 1,
            this._init()
        }
        return Ii(t, [{
            key: "start",
            value: function() {
                if (!this.hlsplayer) {
                    var e = {
                        autoStartLoad: !0
                    };
                    xi(!0, e, this.options),
                    this.hlsplayer = new Yo(e),
                    this.hlsplayer.attachMedia(this.player)
                }
            }
        }, {
            key: "setSrc",
            value: function(e) {
                this.hlsplayer.loadSource(e),
                this.hlsplayer.attachMedia(this.player)
            }
        }, {
            key: "_init",
            value: function() {
                this._initDom(),
                this.start(),
                this._initEvents()
            }
        }, {
            key: "_initDom",
            value: function() {
                var e = document.createElement("video");
                e.id = this.playerId,
                e.style.cssText = "height:100%;width:100%;object-fit:fill;background:#000;";
                var t = document.createElement("p");
                t.textContent = "æ¨çæ­æ¾å¨æä¸æ¯ææ­æ¾æ­¤è§é¢",
                e.appendChild(t);
                var r = un(this.el) ? this.el : document.querySelector("#" + this.el);
                if (!r)
                    throw Error("è¯·ä¼ å¥æ­£ç¡®çel");
                this.player = r.appendChild(e)
            }
        }, {
            key: "on",
            value: function(e, t) {
                this.events.on(e, t)
            }
        }, {
            key: "trigger",
            value: function(e) {
                for (var t, r = arguments.length, i = Array(1 < r ? r - 1 : 0), n = 1; n < r; n++)
                    i[n - 1] = arguments[n];
                (t = this.events).trigger.apply(t, [e].concat(i))
            }
        }, {
            key: "_initEvents",
            value: function() {
                var s = this
                  , e = {
                    ready: "MEDIA_ATTACHED",
                    reset: "MANIFEST_PARSED",
                    auto_play: "MANIFEST_PARSED",
                    user_data: "FRAG_PARSING_DATA",
                    frag_changed: "FRAG_CHANGED",
                    hls_error: "ERROR"
                };
                this.on("reset", function() {
                    s.userData = {},
                    s._currentFragData = null,
                    s._lastFragData = null,
                    s._fragStartTime = 0
                }),
                this.on("auto_play,loaded_metadata,can_play", function() {
                    s.player.paused && s.autoplay().then(function() {
                        s.trigger("autoplay_success,status_change", {
                            status: "playing"
                        })
                    }).catch(function(e) {
                        s.trigger("autoplay_fail", e)
                    })
                }),
                this.on("frag_changed", function(e, t) {
                    var r = t.frag
                      , i = (r = void 0 === r ? {} : r).relurl;
                    s._currentFragData = s.userData[i],
                    delete s.userData[i]
                }),
                this.on("user_data", function(e, t) {
                    var r = t.data2
                      , i = t.frag
                      , n = (i = void 0 === i ? {} : i).relurl;
                    if ("video" === t.type && r.buffer) {
                        var a = function(e) {
                            for (var t = new DataView(e), r = [], i = [185, 156, 144, 12, 111, 208, 17, 233, 187, 178, 0, 12, 41, 249, 134, 227], n = 8; n < t.byteLength; ) {
                                if (6 == (31 & t.getUint8(n + 4)) && 5 === t.getUint8(n + 5)) {
                                    for (var a = [], o = 0, s = 0, l = 0; s += o = t.getUint8(n + 6 + l),
                                    l += 1,
                                    255 === o; )
                                        ;
                                    for (var u = 0; u < s; u += 1)
                                        if (o = t.getUint8(n + 6 + l + u),
                                        16 <= u)
                                            a.push(o);
                                        else if (i[u] !== o)
                                            break;
                                    0 < a.length && r.push(parseInt(String.fromCharCode.apply(null, a), 10))
                                }
                                n += 4 + t.getUint32(n)
                            }
                            return r
                        }(r.buffer)
                          , o = Ai(a, 1);
                        s.userData[n] = o[0]
                    }
                }),
                this.on("_time_update", function(e) {
                    if (s._currentFragData) {
                        var t = 0;
                        s._currentFragData !== s._lastFragData ? s._fragStartTime = s.currentTime || 0 : t = parseInt(1e3 * (s.currentTime - s._fragStartTime), 10),
                        s.trigger("metadata_update", {
                            currentTime: s.currentTime,
                            user_data: s._currentFragData + t,
                            playbackBytesPerSecond: s.getBandwidthEstimate() / 8
                        }),
                        s._lastFragData = s._currentFragData
                    }
                }),
                this.on("_volume_change", function() {
                    s.trigger("volume_change", s.volume())
                }),
                this.on("waiting", function() {
                    var e = s.player
                      , t = e.duration;
                    Math.floor(e.currentTime) == Math.floor(t) && (s.status = "stop",
                    s.trigger("status_change", {
                        status: "stop"
                    }))
                }),
                this.on("ended,hls_error", function() {
                    s.status = "stop",
                    s.trigger("status_change", {
                        status: "stop"
                    })
                }),
                this.on("canplay", function() {
                    s._status = "playing",
                    s.trigger("status_change", {
                        status: "playing"
                    })
                }),
                oi(e).forEach(function(i) {
                    s.hlsplayer.on(Yo.Events[e[i]], function() {
                        for (var e = arguments.length, t = Array(e), r = 0; r < e; r++)
                            t[r] = arguments[r];
                        s.trigger.apply(s, [i].concat(t))
                    })
                });
                var a = ["time_update", "volume_change"];
                this.events.videoEvents.forEach(function(n) {
                    if (!a[n]) {
                        var e = n.replace(/_/g, "");
                        s.player.addEventListener(e, function() {
                            for (var e = arguments.length, t = Array(e), r = 0; r < e; r++)
                                t[r] = arguments[r];
                            var i = -1 < a.indexOf(n) ? "_" + n : n;
                            s.trigger.apply(s, [i].concat(t))
                        })
                    }
                })
            }
        }, {
            key: "autoplay",
            value: function() {
                var r = this
                  , e = window.Promise;
                return !!e && new e(function(e, t) {
                    e(r.player.play())
                }
                )
            }
        }, {
            key: "play",
            value: function() {
                this.player.play(),
                this.hlsplayer.startLoad()
            }
        }, {
            key: "stop",
            value: function() {
                this.player.pause(),
                this.hlsplayer.stopLoad(),
                this.hlsplayer.detachMedia()
            }
        }, {
            key: "getPlayer",
            value: function() {
                return this.player
            }
        }, {
            key: "getPlayerType",
            value: function() {
                return "hls"
            }
        }, {
            key: "getPlayerId",
            value: function() {
                return this.playerId
            }
        }, {
            key: "toggle",
            value: function() {
                this.player.paused ? this.play() : this.pause()
            }
        }, {
            key: "bufferedPercent",
            value: function() {
                var e = this.player
                  , t = e.buffered
                  , r = e.duration;
                return t.length ? t.end(t.length - 1) / r : 0
            }
        }, {
            key: "volume",
            value: function(e) {
                var t = parseFloat(e);
                return Ko(t) || (this.player.volume = t = Math.min(t = Math.max(t, 0), 1),
                this.player.muted = 0 === e),
                this.player.volume
            }
        }, {
            key: "muted",
            value: function(e) {
                return void 0 !== e ? !!(this.player.muted = e) : this.player.muted
            }
        }, {
            key: "playbackRate",
            value: function(e) {
                return void 0 !== e ? (this.player.playbackRate = parseFloat(e),
                e) : this.player.playbackRate
            }
        }, {
            key: "getBandwidthEstimate",
            value: function() {
                var e = this.hlsplayer.abrController._bwEstimator;
                return e ? e.getEstimate() : NaN
            }
        }, {
            key: "dispose",
            value: function() {
                this.events.removeAllListeners()
            }
        }, {
            key: "paused",
            get: function() {
                return this.player.paused
            }
        }, {
            key: "currentTime",
            get: function() {
                return this.player.currentTime
            }
        }, {
            key: "duration",
            get: function() {
                return this.player.duration
            }
        }], [{
            key: "supportHls",
            value: function() {
                return Yo.isSupported()
            }
        }]),
        t
    }();
    Wo.id = 100;
    var zo, Xo = {
        play: {
            path: '\n            <g id="æ­æ¾" transform="translate(-19.000000, -824.000000)">\n                <g id="Group-11" transform="translate(20.000000, 825.000000)">\n                    <path d="M16.7249851,10.5338574 L8.82529189,6.07217527 C8.6550567,5.97596257 8.44527446,5.97594018 8.27501781,6.07211653 C8.10476115,6.16829289 7.99991552,6.34604555 8.00000008,6.53837472 L8.00000008,15.4616492 C7.99989147,15.6539858 8.10474016,15.8317517 8.27501162,15.9279179 C8.44528308,16.0240841 8.65507851,16.0240235 8.82529189,15.927759 L16.7248934,11.4661666 C16.8951156,11.3700083 16.9999811,11.1923288 17,11.0000379 C17.0000189,10.8077469 16.8951884,10.6300476 16.7249851,10.5338574 Z" id="Shape" fill="#F9FAFC" fill-rule="nonzero"></path>\n                    <circle id="Oval-5" stroke="#FBFBFD" cx="11" cy="11" r="11"></circle>\n                </g>\n            </g>\n        ',
            size: [24, 24]
        },
        pause: {
            path: '\n            <g transform="translate(-19.000000, -890.000000)">\n                <g transform="translate(0.000000, 778.000000)">\n                    <g id="Group-4">\n                        <g id="Group">\n                            <g id="Group-6" transform="translate(0.000000, 90.000000)">\n                                <g id="Group-5">\n                                    <g id="Group-8" transform="translate(20.000000, 23.000000)">\n                                        <g id="Group-9">\n                                            <circle id="Oval-5" stroke="#FFFFFF" cx="11" cy="11" r="11"></circle>\n                                            <g id="Group-2" transform="translate(7.000000, 6.000000)"></g>\n                                        </g>\n                                        <rect id="rect-pause-1" fill="#FFFFFF" x="7" y="6" width="2" height="10" rx="1"></rect>\n                                        <rect id="rect-pause-2" fill="#FFFFFF" x="13" y="6" width="2" height="10" rx="1"></rect>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        ',
            size: [24, 24]
        },
        replay: {
            path: '\n            <g transform="translate(-51.000000, -828.000000)" fill="#FFFFFF" fill-rule="nonzero" stroke="#FFFFFF" stroke-width="0.2">\n                <g transform="translate(52.000000, 827.000000)">\n                    <path d="M12.6585,4.1025 C10.488,1.236 6.3635,0.65 3.465,2.7955 C2.525,3.4915 1.7965,4.426 1.3465,5.4865 L1.0075,4.3315 C0.9295,4.0665 0.652,3.9135 0.387,3.9925 C0.122,4.0705 -0.03,4.3485 0.048,4.6135 L0.7895,7.141 C0.8535,7.3585 1.0525,7.5 1.269,7.5 C1.3155,7.5 1.624,7.41 1.6725,7.392 L4.192,6.466 C4.451,6.371 4.584,6.0835 4.4885,5.824 C4.3935,5.565 4.1075,5.4325 3.8465,5.5275 L2.1595,6.1475 C2.5255,5.1385 3.184,4.247 4.0595,3.599 C6.5185,1.7775 10.0185,2.2745 11.861,4.706 C12.749,5.878 13.1235,7.3225 12.9155,8.7725 C12.7065,10.23 11.9345,11.518 10.7425,12.4005 C8.281,14.221 4.7805,13.7245 2.9395,11.2955 C2.7725,11.075 2.4595,11.032 2.239,11.199 C2.019,11.3655 1.976,11.6795 2.1425,11.899 C3.431,13.5995 5.408,14.4965 7.4085,14.4965 C8.7785,14.4965 10.159,14.076 11.3375,13.204 C12.746,12.1615 13.658,10.638 13.9055,8.9145 C14.153,7.1985 13.71,5.4895 12.6585,4.1025 Z" id="Shape"></path>\n                </g>\n            </g>\n        ',
            size: [16, 14]
        },
        volume: {
            path: '\n            <g transform="translate(-976.000000, -827.000000)" fill="#FFFFFF" fill-rule="nonzero">\n                <g id="Group-10" transform="translate(0.000000, 812.000000)">\n                    <path d="M986.001162,31.8068816 C986.001162,33.740756 984.519274,32.7423322 984.519274,32.7423322 L978.102373,27.3381774 L977.111353,27.3381774 C976.497406,27.3381774 976,26.8310979 976,26.2056136 L976,21.6762113 C976,21.0507295 976.497406,20.5438475 977.111353,20.5438475 L978.296724,20.5438475 L984.5193,15.2596923 C984.5193,15.2596923 986.001188,14.2531248 986.001188,16.2033617 L986.001188,31.8068824 L986.001162,31.8068816 Z M989.334624,26.9603912 C991.187046,25.4506886 991.063369,22.5882826 989.334624,21.2987997 C988.655918,20.8900131 988.223693,22.2424941 988.223693,22.2424941 C988.223693,22.2424941 989.952089,24.4127982 988.223693,26.0169717 C987.883982,26.4572311 988.532291,27.3695027 989.334624,26.9603912 Z M990.260786,18.0905776 C990.01388,17.8702355 988.810241,18.6881336 989.520117,19.4114359 C993.193245,22.5255594 993.254834,25.4506661 989.520117,28.6589881 C988.964291,29.193646 989.704935,30.2004884 990.260786,29.9799213 C995.353641,27.6208453 995.138003,20.2923571 990.260786,18.0905776 Z" id="Shape"></path>\n                </g>\n            </g>\n        ',
            size: [18, 18]
        },
        volumeMute: {
            path: '\n            <g transform="translate(-976.000000, -827.000000)" fill="#FFFFFF">\n                <g id="Group-10" transform="translate(0.000000, 697.000000)">\n                    <g id="Group-2" transform="translate(976.000000, 130.000000)">\n                        <path d="M10.0011624,16.8068816 C10.0011624,18.740756 8.51927366,17.7423322 8.51927366,17.7423322 L2.10237307,12.3381774 L1.11135286,12.3381774 C0.497406415,12.3381774 0,11.8310979 0,11.2056136 L0,6.67621133 C0,6.05072952 0.497406415,5.54384754 1.11135286,5.54384754 L2.29672403,5.54384754 L8.51929968,0.2596923 C8.51929968,0.2596923 10.0011884,-0.746875236 10.0011884,1.20336171 L10.0011884,16.8068824 L10.0011624,16.8068816 Z" id="Shape" fill-rule="nonzero"></path>\n                        <path d="M16.7759478,8.72368657 L18.8259225,6.5297666 C19.1497156,6.18440685 19.1497156,5.60659341 18.8259225,5.25901982 C18.5021294,4.91366006 17.9617595,4.91366006 17.6379665,5.25901982 L15.5879918,7.45293979 L13.5380171,5.26123366 C13.214224,4.91587391 12.6738541,4.91587391 12.3500611,5.26123366 C12.026268,5.60659341 12.026268,6.18440685 12.3500611,6.53198044 L14.2928195,8.72590042 L12.2428448,10.9198204 C11.9190517,11.267394 11.9190517,11.8429936 12.2428448,12.1905672 C12.5666379,12.5359269 13.1070078,12.5359269 13.4308008,12.1905672 L15.4807755,9.9966472 L17.6722757,12.2946179 C17.9960687,12.6399776 18.5364386,12.6399776 18.8602317,12.2946179 C19.1840248,11.9492581 19.1840248,11.3714447 18.8602317,11.0238711 L16.7759478,8.72368657 Z" id="Path" stroke="#FFFFFF" stroke-width="0.3"></path>\n                    </g>\n                </g>\n            </g>\n        ',
            size: [20, 18]
        },
        fullScreen: {
            path: '\n            <g transform="translate(-1034.000000, -828.000000)" fill="#FFFFFF" fill-rule="nonzero">\n                <g id="Group-10" transform="translate(0.000000, 697.000000)">\n                    <g transform="translate(1034.000000, 131.000000)">\n                        <g id="Group-3">\n                            <g id="Group-7">\n                                <path d="M9.84615385,6.15064935 C10.174359,6.48311688 10.7487179,6.48311688 11.0769231,6.15064935 L14.2358974,2.99220779 L14.2358974,5.52727273 C14.2358974,5.9012987 14.5230769,6.19220779 14.8512821,6.19220779 L15.3025641,6.19220779 C15.6717949,6.19220779 16,5.94285714 16,5.61038961 L16,0.997402597 C16,0.997402597 16,0.997402597 16,0.997402597 L16,0.664935065 C16,0.498701299 15.9589744,0.332467532 15.8358974,0.207792208 C15.7128205,0.0831168831 15.5487179,0 15.3435897,0 L15.0153846,0 C15.0153846,0 15.0153846,0 15.0153846,0 L10.4615385,0 C10.0923077,0 9.80512821,0.290909091 9.80512821,0.664935065 L9.80512821,1.12207792 C9.84615385,1.53766234 10.174359,1.78701299 10.5435897,1.78701299 L12.9641026,1.78701299 L9.84615385,4.9038961 C9.51794872,5.27792208 9.51794872,5.81818182 9.84615385,6.15064935 Z M6.15384615,9.84935065 C5.82564103,9.51688312 5.25128205,9.51688312 4.92307692,9.84935065 L1.76410256,12.9662338 L1.76410256,10.4727273 C1.76410256,10.0987013 1.47692308,9.76623377 1.14871795,9.76623377 L0.697435897,9.76623377 C0.328205128,9.76623377 0,10.0571429 0,10.3896104 L0,15.0025974 C0,15.0025974 0,15.0025974 0,15.0025974 L0,15.3350649 C0,15.5012987 0.041025641,15.6675325 0.164102564,15.7922078 C0.246153846,15.9168831 0.41025641,16 0.615384615,16 L0.943589744,16 C0.943589744,16 0.943589744,16 0.943589744,16 L5.4974359,16 C5.86666667,16 6.15384615,15.7090909 6.15384615,15.3350649 L6.15384615,14.8779221 C6.15384615,14.4623377 5.78461538,14.2545455 5.41538462,14.2545455 L2.99487179,14.2545455 L6.15384615,11.0961039 C6.48205128,10.7220779 6.48205128,10.1818182 6.15384615,9.84935065 Z" id="Shape"></path>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        ',
            size: [16, 16]
        },
        exitFullScreen: {
            path: '\n            <g transform="translate(-1039.000000, -827.000000)" fill="#FFFFFF" fill-rule="nonzero">\n                <g transform="translate(0.000000, 712.000000)">\n                    <g transform="translate(1039.000000, 115.000000)">\n                        <g id="Group-3">\n                            <g id="Group-7">\n                                <path d="M0.246153846,15.7506494 C0.574358974,16.0831169 1.14871795,16.0831169 1.47692308,15.7506494 L4.63589744,12.5922078 L4.63589744,15.1272727 C4.63589744,15.5012987 4.92307692,15.7922078 5.25128205,15.7922078 L5.7025641,15.7922078 C6.07179487,15.7922078 6.4,15.5428571 6.4,15.2103896 L6.4,10.5974026 C6.4,10.5974026 6.4,10.5974026 6.4,10.5974026 L6.4,10.2649351 C6.4,10.0987013 6.35897436,9.93246753 6.23589744,9.80779221 C6.11282051,9.68311688 5.94871795,9.6 5.74358974,9.6 L5.41538462,9.6 C5.41538462,9.6 5.41538462,9.6 5.41538462,9.6 L0.861538462,9.6 C0.492307692,9.6 0.205128205,9.89090909 0.205128205,10.2649351 L0.205128205,10.7220779 C0.246153846,11.1376623 0.574358974,11.387013 0.943589744,11.387013 L3.36410256,11.387013 L0.246153846,14.5038961 C-0.0820512821,14.8779221 -0.0820512821,15.4181818 0.246153846,15.7506494 Z M13.9230769,0.849350649 L10.7641026,3.96623377 L10.7641026,1.47272727 C10.7641026,1.0987013 10.4769231,0.766233766 10.1487179,0.766233766 L9.6974359,0.766233766 C9.32820513,0.766233766 9,1.05714286 9,1.38961039 L9,6.0025974 C9,6.0025974 9,6.11341991 9,6.33506494 C9,6.5012987 9.04102564,6.66753247 9.16410256,6.79220779 C9.24615385,6.91688312 9.41025641,7 9.61538462,7 L9.94358974,7 C9.94358974,7 11.4615385,7 14.4974359,7 C14.8666667,7 15.1538462,6.70909091 15.1538462,6.33506494 L15.1538462,5.87792208 C15.1538462,5.46233766 14.7846154,5.25454545 14.4153846,5.25454545 L11.9948718,5.25454545 L15.1538462,2.0961039 C15.4820513,1.72207792 15.4820513,1.18181818 15.1538462,0.849350649 C14.825641,0.516883117 14.2512821,0.516883117 13.9230769,0.849350649 Z" id="Shape"></path>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        ',
            size: [16, 16]
        },
        setting: {
            path: '\n            <g fill="#FFFFFF">\n                <path d="M1008.512 414.848l-99.264-25.728c-7.616-24.704-17.408-48.576-29.312-71.168l51.904-88.256c4.8-8.128 3.456-18.432-3.136-25.088l-109.184-109.248c-6.72-6.656-17.024-7.936-25.152-3.2l-88.32 51.904c-22.528-11.84-46.336-21.632-71.104-29.312l-25.664-99.328c-2.368-9.088-10.624-15.424-20.032-15.424l-154.432 0c-9.344 0-17.6 6.336-19.968 15.424l-25.792 99.328c-24.704 7.68-48.512 17.472-70.976 29.376l-88.32-52.032c-8.192-4.736-18.56-3.52-25.088 3.2l-109.312 109.248c-6.656 6.656-8 16.96-3.136 25.024l51.968 88.384c-11.904 22.464-21.632 46.272-29.376 70.976l-99.328 25.792c-9.152 2.368-15.488 10.624-15.488 20.032l0 154.432c0 9.408 6.336 17.664 15.488 19.968l99.264 25.728c7.68 24.832 17.536 48.64 29.312 71.04l-52.032 88.32c-4.736 8.128-3.456 18.432 3.2 25.088l109.184 109.248c6.72 6.656 17.024 7.936 25.152 3.136l88.32-51.968c22.528 11.84 46.336 21.76 71.04 29.312l25.664 99.328c2.496 9.216 10.752 15.616 20.16 15.616l154.432 0c9.408 0 17.6-6.336 19.968-15.488l25.792-99.328c24.768-7.68 48.576-17.472 71.104-29.312l88.192 51.968c8.192 4.672 18.432 3.456 25.088-3.2l109.248-109.12c6.72-6.656 8-16.96 3.2-25.088l-51.968-88.32c11.968-22.528 21.76-46.336 29.376-71.04l99.264-25.728c9.216-2.432 15.552-10.688 15.552-20.096l0-154.432c0-9.344-6.336-17.664-15.488-19.968l0 0zM512.064 738.624c-124.992 0-226.624-101.632-226.624-226.624s101.632-226.624 226.624-226.624c124.928 0 226.496 101.632 226.496 226.624s-101.632 226.624-226.496 226.624l0 0z" p-id="1115">\n            </g>\n        ',
            size: [18, 18],
            viewSize: [1024, 1024]
        }
    }, Qo = {
        bigplay: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABGCAYAAAAgutHnAAAAAXNSR0IArs4c6QAABelJREFUeAHtnV1LI1cYx5sXjTXFBrvYDb6lBY2wi0rXm9agpGJFo9hSpRRUUOjdIrV4W3rR7p0g9QP4CWptWpddXYwKJW1sqrRQlQXtlvqyhF3XlRqJ0aT/J83ImNfRZjNnMmdgmMmZZzLP+f9yzjznzJwczUsSlrGxsWtardYSDoevazSaQpxixL5ewqncJKoAdDvF7hF082P/cSgUejQ6OvoknUCaVAbj4+Nv4gsbsL6ayo4fu5oCAPUcq3dkZGQr2TckBDQxMVF0enpqB5iSZCfy9MwpAEg+vV6/MDw8fBj7rXGAUGrMKH6tMDTEGvPPL1SBAG4jD1Ca9sRXuQCI4JydnTlA9EK6+AS+/+IUQI0V1ul0d8WQtMLlqFqjksPhCIpkf0vaEwNiIVz9HBDdc5DIqzVBGfm2hiiLiAcRQNFojQcE8kG5cGUKzogJJUYAIaHhggX/ILsCAhMNNUJR9X0gu0fcgTgFAGkakZ3WEneEJzChALHRgtJ1JrzhTsQpQGy0qN6ob40vDCpAbChIMDLoG3fpPwWMVMXxXmlGfw7EJhJmM+ofdwsKcECM/wwUVb3Z7fZbZrPZivAzf29vb31pacmLbpEzxjX+X+4pAhCelegGBgZum0ymG0JuS0pK3qmpqelaW1ubXlhY+FVIz7Wtrq2t7Rbrmeru7u5EybHF+glwRqQ31NbW3kRI6tvd3X0aa6P0z4q4BxGEVEIbjcY3mpqaRoeGhm5brVZzKlulHVMEoIKCgtelCIsqsNbhcHzR19c3UFpaapJyDus2igAEES/jpxb3J1tvb+9XPT097xcVFb3MOoRU/l0m46m+h7ljFOlVVFR0DA4O3uns7GzJz8/XMeekBIcUEcVJyEdSEzzjf6W6uvqjysrKlvX19WmXy/VLUmMGD+Q8IEFzg8Fwrb6+/hPAem9lZWVqeXl5QzjG8jZnq7hkohcWFlbabLbPEPENox1VmsyOlXTVARKER8R3s6Oj43NEfINlZWXFQjprW9UCioKgiO9tRHtfIur7sLi4mLlnY2oHFOGEiC+vvLy8rb+//05XV1cr7lfM3JuZcYSFqgURn7GqqqoXEd+7iPic8/PzP8vtFweUgADaTK/V1dUNAVbr6urqlMfjWUtglpUkXsWlkBkRX3ljY+OnH2NBx6ws76tzQCkACYfQWWtvb2+nER9ZXzggiZJbLJYWiaYZNeOAJMqZl5dnwpp1vbJ+QYl6MGcWCASeBIPBULYd44AkKr6zs/OjRNOMmnFAEuT0+XzumZmZ+xJMM27C20EpJD0+Pv6ber7lbAdxQAkAnZycPKWeBLwt5MGQxHACk6wlcUAiqTGA+mhra+ve3NycC0EB/fGE7AsHBAQoJUEEAS70vd3b39/3y05F5IDaAYUQAHgWFxed29vb+yJdmNlVLaCDg4M/3G73NxsbGzvM0EjgiOoA+f3+v5T0ToJqAFFPACKz7/BWz3KCHyqzSTkPCJHZP5ubm3cRmS0ifFbcSIicBYTI7ASR2fzs7Oz9w8PDY2aLSBrHlAKIGotSH5hRZOZGI/N7ADpIk3/mDysCEHqRn6GrP+2rUYjMfkdk9i0is13mlZfooCIAYTTdT3jP2pEsT4jM/vR6vVNYHyazUWq6IgA5nc4f8EqURTzCjgRHZObL9RF2igBED8omJye/bm5ufgvjfqxgo0fLnxqav/ExqgzVDRg0vAJ3aFXNwh/YMY6a/quHiW51xnWSxT28khykEnQky9X5RdMqgL+C8dN/9TD1/COt1yoyiABCFfdYRXlWVFaJjRZ9Vo8U5bWKnCU2WprgAaSeqyjfisgqMSE2kTAbH7yK8FpFTgpMIoBo9g0k+FSUf6azSiyEGVHOG6o0+wa8DjDtuTqcC0RZRHJ7DoimRkHD6AFCO1lf1FMHg8S5JO2JgXiamriHYHx6msTiZSE1/fQ0ghN8gidBiexs6Z5D1Zq45AhXjitBwgHaRifd4FOkiUXJ4D7AXG2KtFgf+CSDsYpc/jNgXGmSwX8Ba+kcLlCMXTUAAAAASUVORK5CYII=",
        loading: qn
    }, Zo = function(e) {
        var t = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1];
        if (!Xo[e])
            throw Error("no svg found!", e);
        var r = Xo[e]
          , i = r.path
          , n = Ai(r.size, 2)
          , a = n[0]
          , o = n[1]
          , s = r.viewSize
          , l = Ai(s = void 0 === s ? [a, o] : s, 2)
          , u = '\n            <svg class="sl-icon" width="' + a + 'px" height="' + o + 'px" viewBox="0 0 ' + l[0] + " " + l[1] + '" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                    ' + i + " \n                </g>  \n            </svg>\n        ";
        if (t)
            return u;
        var c = document.createElement("svg-template");
        return c.innerHTML = u,
        c.firstElementChild
    }, Jo = function(e) {
        return Qo[e]
    }, $o = [{
        value: "hls",
        label: "html5"
    }, {
        value: "flash",
        label: "flash"
    }], es = [1, 1.25, 1.5, 2], ts = function() {
        function t(e) {
            ki(this, t),
            this.container = e.container,
            this.Icons = e.Icons,
            this.translate = e.translate,
            this.type = e.type,
            this.info = e.info || {},
            this.rate = e.rate,
            this.show = e.show,
            this.loading = e.loading,
            this.isLive = e.isLive,
            this.init()
        }
        return Ii(t, [{
            key: "init",
            value: function() {
                var e, t, r, i = this, n = this.isLive && this.type ? $o.map(function(e, t) {
                    var r = e.value;
                    return '<label class="sl-radio-label  ' + (r === i.type ? "sl-radio-checked" : "") + '" key=' + t + '>\n                <span class="sl-radio-wrapper">\n                    <input type="radio" class="sl-radio-input" value="' + r + '" />\n                    <span class="sl-radio-icon"></span>\n                </span>\n                <span>' + i.translate(e.label) + "</span>\n            </label>"
                }).join("") : "", a = es.map(function(e, t) {
                    return '<li class="' + (t + 1 === i.rate ? "active" : "") + '" data-rate="' + e + '">\n                ' + i.translate("playrate") + ": " + e + "x\n            </li>"
                }).join(""), o = this.isLive ? " inactive" : "", s = n ? "" : " inactive", l = '\n            <div class="sl-loading">\n                <img src="' + Jo("loading") + '" class="sl-icon-spin" />\n                <div>' + this.translate("videoLoading") + '</div>\n            </div>\n            \n            <div class="slplayer-content">\n                <div class="slplayer-title">\n                    <span class="slplayer-title-left">' + (this.info.title || "") + '</span>\n                    <span class="slplayer-title-right">' + this.translate("teacher") + ": " + (this.info.teacher || "") + '</span>\n                </div>\n\n                <div class="slplayer-bigbtn">\n                    <img src="' + Jo("bigplay") + '" class="slplayer-bigbtn-icon" />\n                </div>\n                \n                <div class="slplayer-bar">\n                    <div class="slplayer-info"></div>\n                    <div class="slplayer-progress' + o + '">\n                        <div class="slplayer-progress-bar">\n                            <div class="slplayer-progress-bar__loaded" style="width: 0%;"></div>\n                            <div class="slplayer-progress-bar__play" style="width: 0;"></div>\n                            <div class="slplayer-progress-bar__dot" style="left: 0;"></div>\n                            <div class="slplayer-progress-bar__line" style="left: 0;"></div>\n                            <span class="sl-tooltip" style="left: 0px;">00:24</span>\n                        </div>\n                    </div>\n\n                    <div class="slplayer-btns">\n                        <div class=\'slplayer-btns-left' + o + '\'>\n                            <div class="slplayer-btn play-btn">\n                                ' + Zo("play") + '\n                                <span class="sl-tooltip">' + this.translate("play") + '</span>\n                            </div>\n                            <div class="slplayer-btn time-btn">\n                                <span class="slplayer-time-pre">00:00</span>\n                                <span class="slplayer-time-divider">/</span>\n                                <span class="slplayer-time-duration">00:00</span>\n                            </div>\n                        </div>\n\n                        <div class="slplayer-btns-right" >\n                            <div class="slplayer-btn switch-btn">\n                                <label class="switch-label">\n                                    ' + this.translate("smallWindow") + '\n                                    <input type="checkbox" class="switch-input" checked>\n                                    <span class="switch-lever"></span>\n                                </label>\n                                <span class="sl-tooltip" style="left:auto;right: 0;transform: none;">' + this.translate("close") + '</span>\n                            </div>\n\n                            <div class="slplayer-btn playrate-btn' + o + '">\n                                <a href="javascript:;" class="playrate-label">' + this.translate("playrate") + '</a>\n                                <span class="sl-tooltip">\n                                    ' + this.translate("playrate") + ': <span data-role="rate">1</span>x\n                                </span>\n                                <div class="sl-menu">\n                                    <ul class="menu-content">\n                                        ' + a + '\n                                    </ul>\n                                </div>\n                            </div>\n                        \n                            <div class="slplayer-btn setting-btn' + s + '">\n                                <a tabindex="1" href="javascript:;" class="setting-btn-wrapper">\n                                    ' + Zo("setting") + '\n                                </a>\n                                <div class="setting-btn-item">\n                                    ' + n + '\n                                </div>\n                                <span class="sl-tooltip">' + this.translate("setting") + '</span>\n                            </div>\n\n                            <div class="slplayer-btn volume-btn">\n                                ' + Zo("volume") + '\n                                <div class="volume-popup">\n                                    <div class="volume-wrapper">\n                                        <div class="volume-tips">100%</div>\n                                        <div class="volume-holder">\n                                            <div class="volume-holder__bar" style="height: 100%;"></div>\n                                            <div class="volume-holder__dot" style="bottom: 100%;"></div>\n                                            <div class="volume-holder__bg"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="slplayer-btn fullscreen-btn">\n                                ' + Zo("fullScreen") + '\n                                <span class="sl-tooltip">' + this.translate("fullScreen") + "</span>\n                            </div>\n                        </div>                  \n                    </div>\n                </div>\n            </div>        \n        ", u = document.createElement("html-template");
                u.innerHTML = l,
                e = this.container,
                t = gi(u.childNodes),
                r = document.createDocumentFragment(),
                t.forEach(function(e) {
                    var t = e instanceof Node;
                    r.appendChild(t ? e : document.createTextNode(e + ""))
                }),
                e.appendChild(r),
                this.content = this.container.querySelector(".slplayer-content"),
                this.loadingMask = this.container.querySelector(".sl-loading"),
                this.titleBar = this.container.querySelector(".slplayer-title"),
                this.bigPlayButton = this.container.querySelector(".slplayer-bigbtn"),
                this.controlBar = this.container.querySelector(".slplayer-bar"),
                this.infoPanel = this.container.querySelector(".slplayer-bar .slplayer-info"),
                this.progressBar = this.container.querySelector(".slplayer-progress-bar"),
                this.progressTips = this.container.querySelector(".slplayer-progress-bar .sl-tooltip"),
                this.progressLoaded = this.container.querySelector(".slplayer-progress-bar .slplayer-progress-bar__loaded"),
                this.progressPlay = this.container.querySelector(".slplayer-progress-bar .slplayer-progress-bar__play"),
                this.progressDot = this.container.querySelector(".slplayer-progress-bar .slplayer-progress-bar__dot"),
                this.progressLine = this.container.querySelector(".slplayer-progress-bar .slplayer-progress-bar__line"),
                this.playBtnWrap = this.container.querySelector(".play-btn"),
                this.timeBtnPre = this.container.querySelector(".time-btn .slplayer-time-pre"),
                this.timeBtnDuration = this.container.querySelector(".time-btn .slplayer-time-duration"),
                this.switchBtnWrap = this.container.querySelector(".switch-btn"),
                this.switchBtn = this.container.querySelector(".switch-btn .switch-input"),
                this.switchBtnToolTip = this.container.querySelector(".switch-btn .sl-tooltip"),
                this.playRateBtn = this.container.querySelector(".playrate-btn"),
                this.playRateLabel = this.container.querySelector(".playrate-btn .playrate-label"),
                this.playRateTip = this.container.querySelector('.playrate-btn [data-role="rate"]'),
                this.playRateMenu = this.container.querySelector(".playrate-btn .sl-menu"),
                this.settingBtn = this.container.querySelector(".setting-btn"),
                this.settingMenu = this.container.querySelector(".setting-btn .setting-btn-item"),
                this.volumeBtnWrap = this.container.querySelector(".volume-btn"),
                this.volumeMenu = this.container.querySelector(".volume-btn .volume-popup"),
                this.volumeTips = this.container.querySelector(".volume-btn .volume-tips"),
                this.volumeHolder = this.container.querySelector(".volume-btn .volume-holder"),
                this.volumeBar = this.container.querySelector(".volume-btn .volume-holder__bar"),
                this.volumeDot = this.container.querySelector(".volume-btn .volume-holder__dot"),
                this.fullScreenWrap = this.container.querySelector(".fullscreen-btn")
            }
        }]),
        t
    }(), rs = function e(d) {
        var f = this;
        ki(this, e),
        this.seekTime = 5,
        d.hotkey && !d.isLive && document.addEventListener("keydown", sn(function(e) {
            if (d.focus) {
                var t = document.activeElement && document.activeElement.tagName.toUpperCase()
                  , r = document.activeElement && document.activeElement.getAttribute("contenteditable");
                if ("INPUT" !== t && "TEXTAREA" !== t && "" !== r && "true" !== r) {
                    var i = e || window.event;
                    switch (i.keyCode) {
                    case 32:
                        i.preventDefault(),
                        d.player.toggle();
                        var n = d.translate(d.player.paused ? "pause" : "play");
                        d.handleInfo(n);
                        break;
                    case 37:
                        i.preventDefault();
                        var a = d.getCurrentTime() - f.seekTime;
                        d.player.trigger("progress_click", a = Math.max(a, 0));
                        var o = d.translate("prev") + " " + f.seekTime + " " + d.translate("seconds");
                        d.handleInfo(o);
                        break;
                    case 39:
                        i.preventDefault();
                        var s = d.getCurrentTime()
                          , l = d.getDuration()
                          , u = s + f.seekTime;
                        if (l < u)
                            return;
                        d.player.trigger("progress_click", u);
                        var c = d.translate("next") + " " + f.seekTime + " " + d.translate("seconds");
                        d.handleInfo(c)
                    }
                }
            }
        }, 200))
    }, is = function() {
        function t(e) {
            ki(this, t),
            this.lang = e || "zh-cn",
            this.texts = {
                "zh-cn": {
                    play: "æ­æ¾",
                    pause: "æå",
                    replay: "éæ°æ­æ¾",
                    fullScreen: "å¨å±",
                    exitFullScreen: "éåºå¨å±",
                    teacher: "æè¯¾èå¸",
                    smallWindow: "å°çªå£",
                    setting: "è®¾ç½®",
                    playrate: "åé",
                    volume: "é³é",
                    mute: "éé³",
                    videoLoading: "è§é¢å è½½ä¸­...",
                    open: "å¼å¯",
                    close: "å³é­",
                    html5: "HTML5æ­æ¾å¨",
                    flash: "FLASHæ­æ¾å¨",
                    prev: "åé",
                    next: "å¿«è¿",
                    seconds: "ç§"
                }
            }
        }
        return Ii(t, [{
            key: "translate",
            value: function(e) {
                return this.texts[this.lang] && this.texts[this.lang][e] ? this.texts[this.lang][e] : e
            }
        }]),
        t
    }(), ns = function() {
        function t(e) {
            ki(this, t),
            this.containers = e.containers,
            this.player = e.player,
            this.type = e.type,
            this.info = e.info,
            this.isLive = e.isLive,
            this.options = e.options || {},
            this.playrate = 1,
            this.autoHideTimer = 0,
            this.autoHideTime = 5e3,
            this.barInfo = {},
            this.templates = [],
            this.hotkey = !0,
            this.focus = !1,
            this.hotKey = new rs(this),
            this.Lang = new is,
            this.translate = this.Lang.translate.bind(this.Lang),
            this.init()
        }
        return Ii(t, [{
            key: "init",
            value: function() {
                this.initDOM(),
                this.initDOMEvents(),
                this.initPlayerEvents(),
                this.setAutoHide()
            }
        }, {
            key: "initDOM",
            value: function() {
                var n = this;
                this.containers.forEach(function(e) {
                    var t = e.parent
                      , r = mi(e, ["parent"])
                      , i = new ts(yi({}, r, {
                        isLive: n.isLive,
                        type: n.type,
                        info: n.info,
                        rate: n.playrate,
                        translate: n.translate
                    }));
                    n.templates.push(i),
                    t.controlbar = {
                        showControlBar: function(e) {
                            n.handleBarChange(e, i)
                        }
                    }
                })
            }
        }, {
            key: "initDOMEvents",
            value: function() {
                var a = this;
                this.templates.forEach(function(n) {
                    n.playBtnWrap.addEventListener("click", function(e) {
                        e.stopPropagation(),
                        a.player.toggle(),
                        a.focus = !0
                    }),
                    n.switchBtn.addEventListener("change", function(e) {
                        a.player.trigger("switch_button_click", e.target.checked)
                    }),
                    n.playRateBtn.addEventListener("click", function(e) {
							//alert(1);
							if(autoFlag == 2){
								autoFlag = 1;
							}else{
							 autoFlag = 2;
							}
                        var t = e.target
                          , r = n.playRateMenu;
                        if (hn(t, "li")) {
                            r.style.display = "none";
                            var i = parseFloat(t.getAttribute("data-rate"));
                            if (i === a.playrate)
                                return;
                            a.player.trigger("playback_rate_list_click", i),
                            a.player.playbackRate(i)
                        } else
                            hn(t, "a") && (r.style.display = "",
                            a.player.trigger("playback_rate_button_click"))
                    }),
                    n.settingBtn.addEventListener("click", function(e) {
                        var t = e.target
                          , r = n.settingMenu;
                        if (hn(t, "input")) {
                            var i = t.value;
                            setTimeout(function() {
                                r.style.display = "none"
                            }, 100),
                            a.player.trigger("tech_list_click", i)
                        } else
                            hn(t, "a") && (r.style.display = "")
                    }),
                    n.volumeBtnWrap.addEventListener("click", function(e) {
                        if (!fn(n.volumeMenu, e.target)) {
                            var t = a.player.muted();
                            a.player.muted(!t)
                        }
                    }),
                    n.volumeHolder.addEventListener("mousemove", function(e) {
                        e.stopPropagation(),
                        a.handleVolMouseMove(e, n)
                    }),
                    n.volumeHolder.addEventListener("mousedown", function(e) {
                        e.stopPropagation(),
                        a.volumeClicked = !0,
                        a.handleVolMouseMove(e, n)
                    }),
                    n.fullScreenWrap.addEventListener("click", function(e) {
                        e.stopPropagation(),
                        a.player.trigger("screen_status_change", a.isfullscreen),
                        a.handleScreenCallback(n.container),
                        a.focus = !0
                    }),
                    n.progressBar.addEventListener("mousemove", function(e) {
                        e.stopPropagation(),
                        a.handleMouseMove(e, n)
                    }),
                    n.progressBar.addEventListener("mousedown", function(e) {
                        e.stopPropagation(),
                        a.progressClicked = !0,
                        a.handleMouseMove(e, n)
                    }),
                    n.content.addEventListener("mousemove", function(e) {
                        n.show && a.setAutoHide()
                    }),
                    n.content.addEventListener("mouseenter", function(e) {
                        n.show && a.setAutoHide()
                    }),
                    n.content.addEventListener("mouseleave", function(e) {
                        a.hide()
                    }),
                    function(e) {
                        var t = this
                          , r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                        if (e) {
                            var i = r.click
                              , n = r.dblclick;
                            e.addEventListener("dblclick", function(e) {
                                e.stopPropagation(),
                                clearTimeout(t._dbClickTimer),
                                n && n(e)
                            }),
                            e.addEventListener("click", function(e) {
                                e.stopPropagation(),
                                clearTimeout(t._dbClickTimer),
                                t._dbClickTimer = setTimeout(function() {
                                    i && i(e)
                                }, 200)
                            })
                        }
                    }(n.content, {
                        click: function(e) {
                            return a.handleContentClick(e, n)
                        },
                        dblclick: function(e) {
                            return a.handleContentClick(e, n, !0)
                        }
                    }),
                    n.controlBar.addEventListener("click", function(e) {
                        e.stopPropagation(),
                        n.show && (a.focus = !0)
                    })
                });
                ["webkitfullscreenchange", "mozfullscreenchange", "fullscreenchange", "MSFullscreenChange"].forEach(function(e) {
                    window.addEventListener(e, function(e) {
                        !(document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) && a.isfullscreen && (a.handleScreenChange(!0),
                        a.handleScreenCallback())
                    })
                }),
                document.addEventListener("mouseup", this.handleMouseUp.bind(this), !1),
                document.addEventListener("click", function() {
                    a.focus = !1
                }, !0)
            }
        }, {
            key: "initPlayerEvents",
            value: function() {
                var t = this;
                this.player && (this.player.on("pause", function() {
                    return t.handlePlayBtnChange("play")
                }),
                this.player.on("play", function() {
                    return t.handlePlayBtnChange("pause")
                }),
                this.player.on("ended", function() {
                    return t.handleEnded()
                }),
                this.player.on("_time_update", function() {
                    return t.handleTimeUpdate()
                }),
                this.player.on("rate_change", function(e) {
                    return t.handleRateChange(e)
                }),
                this.player.on("update_controlbar", function(e) {
                    return t.handleUpdateBar(e)
                }),
                this.player.on("switch_button_click", function(e) {
                    return t.handleSwitchBtnClick(e)
                }),
                this.player.on("playback_rate_list_click", function(e) {
                    return t.handleRateClick(e)
                }),
                this.player.on("tech_list_click", function(e) {
                    return t.handleTechListClick(e)
                }),
                this.player.on("screen_status_change", function(e) {
                    return t.handleScreenChange(e)
                }),
                this.player.on("volume_change", function(e) {
                    return t.handleVolumeChange(e)
                }),
                this.player.on("duration_change", function() {
                    return t.handleDurationChange()
                }),
                this.player.on("progress", function() {
                    return t.handleLoadedProgress()
                }),
                this.player.on("playing,autoplay_success", function(e) {
                    return t.handleAutoPlaySuccess(e.status)
                }),
                this.player.on("autoplay_fail", function() {
                    return t.handleAutoPlayFailed()
                }),
                this.player.on("_seeked", function() {
                    return t.handleSeeked()
                }),
                this.player.on("waiting,seeking", function() {
                    return t.handleLoading(!0)
                }),
                this.player.on("load_start,canplay,canplay_through,playing,_seeked", function() {
                    return t.handleLoading(!1)
                }),
                this.player.on("status_change", function(e) {
                    return t.handleLoading("playing" !== e.status)
                }))
            }
        }, {
            key: "getDuration",
            value: function() {
                return this.info.totalDuration || this.player.duration
            }
        }, {
            key: "getCurrentTime",
            value: function() {
                return this.currentTime || 0
            }
        }, {
            key: "handleInfo",
            value: function(r) {
                var i = this
                  , n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 2e3
                  , a = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : .8;
                this.templates.forEach(function(e) {
                    var t = e.infoPanel;
                    e.show && (t.textContent = r,
                    t.style.opacity = a,
                    i.infoTimer && clearTimeout(i.infoTimer)),
                    0 < n && (i.infoTimer = setTimeout(function() {
                        t.style.opacity = 0
                    }, n))
                })
            }
        }, {
            key: "handlePlayBtnChange",
            value: function(n) {
                var a = this;
                this.templates.forEach(function(e) {
                    var t = e.playBtnWrap
                      , r = Zo(n, !1)
                      , i = t.firstElementChild;
                    t.lastElementChild.textContent = a.translate(n),
                    t.replaceChild(r, i)
                })
            }
        }, {
            key: "handleEnded",
            value: function() {
                var e = this
                  , t = this.player.currentTime
                  , r = this.getDuration()
                  , i = this.barInfo.trueStartTime;
                t + (void 0 === i ? 0 : i) + .9 < r || (this.templates.forEach(function(e) {
                    var t = e.timeBtnPre;
                    e.progressPlay.style.width = e.progressDot.style.left = "100%",
                    r && (t.textContent = an(r))
                }),
                window.requestAnimationFrame(function() {
                    e.handlePlayBtnChange("replay")
                }))
            }
        }, {
            key: "handleTimeUpdate",
            value: function(e) {
                var t = this.player.currentTime
                  , r = void 0 === t ? 0 : t
                  , i = this.barInfo
                  , n = i.trueStartTime
                  , a = i.currentTime;
                i.isChangeUrl || e ? r = e || (void 0 === a ? 0 : a) : r += void 0 === n ? 0 : n;
                var o = this.getDuration()
                  , s = (r = o < r ? o : r) / o;
                s < 0 && (s = 0);
                var l = (100 * s).toFixed(2) + "%";
                this.templates.forEach(function(e) {
                    var t = e.timeBtnPre;
                    e.progressPlay.style.width = e.progressDot.style.left = l,
                    t.textContent = an(r || 0)
                }),
                this.currentTime = r,
                this.hasLoadingTips && this.handleLoading(!1)
            }
        }, {
            key: "handleRateChange",
            value: function(e) {
                e !== this.playrate && this.player.playbackRate(this.playrate)
            }
        }, {
            key: "handleUpdateBar",
            value: function(e) {
                this.barInfo = yi({}, this.barInfo, e),
                this.handleLoading()
            }
        }, {
            key: "handleSwitchBtnClick",
            value: function(r) {
                var i = this;
                this.templates.forEach(function(e) {
                    var t = e.switchBtn;
                    e.switchBtnToolTip.textContent = i.translate(r ? "close" : "open"),
                    t.checked !== r && (t.checked = r)
                })
            }
        }, {
            key: "handleRateClick",
            value: function(a) {
                var o = this;
                this.playrate = a,
                this.templates.forEach(function(e) {
                    var t = e.playRateTip
                      , r = e.playRateLabel
                      , i = e.playRateMenu.querySelectorAll("li");
                    gi(i).forEach(function(e) {
                        var t = e.getAttribute("data-rate");
                        1 === e.nodeType && +t !== o.playrate ? e.classList.remove("active") : e.classList.add("active")
                    });
                    var n = 1 !== (t.textContent = a) ? a + "x" : o.translate("playrate");
                    r.textContent = n
                })
            }
        }, {
            key: "handleTechListClick",
            value: function(r) {
                this.templates.forEach(function(e) {
                    var t = e.settingMenu.querySelectorAll("label");
                    gi(t).forEach(function(e) {
                        var t = e.querySelector("input");
                        r === t.value ? e.classList.add("sl-radio-checked") : e.classList.remove("sl-radio-checked")
                    })
                }),
                this.player.trigger("tech_change", r)
            }
        }, {
            key: "handleScreenChange",
            value: function(e) {
                var a = this;
                this.isfullscreen = !e;
                var o = this.isfullscreen ? "exitFullScreen" : "fullScreen";
                this.templates.forEach(function(e) {
                    var t = e.fullScreenWrap
                      , r = e.switchBtnWrap
                      , i = Zo(o, !1)
                      , n = t.firstElementChild;
                    t.lastElementChild.textContent = a.translate(o),
                    t.replaceChild(i, n),
                    r.classList[a.isfullscreen ? "add" : "remove"]("switch-btn-active")
                })
            }
        }, {
            key: "handleVolumeChange",
            value: function(e) {
                var s = this
                  , l = this.player.muted() || 0 === e
                  , u = l ? 0 : Math.round(100 * e)
                  , c = l ? "volumeMute" : "volume";
                this.templates.forEach(function(e) {
                    var t = e.volumeBtnWrap
                      , r = e.volumeTips
                      , i = e.volumeBar
                      , n = e.volumeDot
                      , a = e.show
                      , o = Zo(c, !1);
                    t.replaceChild(o, t.firstElementChild),
                    r.textContent = l ? s.translate("mute") : u + "%",
                    i.style.height = u + "%",
                    n.style.bottom = u + "%",
                    a && s.handleInfo(l ? s.translate("mute") : s.translate("volume") + ": " + u)
                })
            }
        }, {
            key: "handleDurationChange",
            value: function() {
                var t = this.getDuration();
                t && this._duration !== t && (this._duration = t,
                this.templates.forEach(function(e) {
                    e.timeBtnDuration.textContent = an(t)
                }))
            }
        }, {
            key: "handleAutoPlaySuccess",
            value: function() {
                this.autoplaysuccess || (this.autoplaysuccess = !0,
                this.templates.forEach(function(e) {
                    e.show && e.bigPlayButton.classList.remove("active")
                }))
            }
        }, {
            key: "handleAutoPlayFailed",
            value: function() {
                this.autoplaysuccess = !1,
                this.templates.forEach(function(e) {
                    e.show && e.bigPlayButton.classList.add("active")
                })
            }
        }, {
            key: "handleSeeked",
            value: function() {
                this.handlePlayBtnChange(this.player.paused ? "play" : "pause")
            }
        }, {
            key: "handleLoadedProgress",
            value: function() {
                var t = this.player.bufferedPercent();
                this.templates.forEach(function(e) {
                    e.progressLoaded.style.width = Math.round(100 * t) + "%"
                })
            }
        }, {
            key: "handleLoading",
            value: function(e) {
                var t = this
                  , r = this.barInfo.isChangeUrl || e;
                this.templates.forEach(function(e) {
                    e.loading && e.loadingMask.classList[(t.hasLoadingTips = r) ? "add" : "remove"]("waiting")
                })
            }
        }, {
            key: "handleMouseUp",
            value: function() {
                this.progressClicked && this.player.trigger("progress_click", this.seekTime || 0),
                this.volumeClicked && this.player.volume(this.volume),
                this.progressClicked = !1,
                this.volumeClicked = !1
            }
        }, {
            key: "handleMouseMove",
            value: function(e, t) {
                var r = t.progressBar
                  , i = t.progressLine
                  , n = t.progressTips
                  , a = t.progressDot
                  , o = t.progressPlay
                  , s = this.getDuration()
                  , l = r.getBoundingClientRect()
                  , u = r.offsetWidth
                  , c = Math.max(0, Math.min(1, (e.pageX - Math.round(l.left)) / u))
                  , d = c * s;
                d === s && (d -= .1);
                var f = (100 * c).toFixed(2) + "%";
                i.style.left = f;
                var h = Math.max(0, Math.min(1, n.offsetWidth / (2 * u)))
                  , p = Math.max(0, Math.min(1, (u - n.offsetWidth / 2) / u))
                  , g = Math.max(c, h);
                n.style.left = (100 * (g = Math.min(g, p))).toFixed(2) + "%",
                n.textContent = an(d || 0),
                this.progressClicked && (o.style.width = a.style.left = f,
                this.seekTime = d)
            }
        }, {
            key: "handleVolMouseMove",
            value: function(e, t) {
                if (this.volumeClicked) {
                    this.player.muted() && this.player.muted(!1);
                    var r = t.volumeHolder
                      , i = t.volumeTips
                      , n = t.volumeBar
                      , a = t.volumeDot
                      , o = r.getBoundingClientRect()
                      , s = r.offsetHeight
                      , l = Math.max(0, Math.min(1, (Math.round(o.top) - e.pageY + s) / s));
                    i.textContent = 0 === l ? this.translate("mute") : Math.round(100 * l) + "%",
                    n.style.height = 100 * l + "%",
                    a.style.bottom = 100 * l + "%",
                    this.volume = l
                }
            }
        }, {
            key: "handleContentClick",
            value: function(e, t) {
                var r = 2 < arguments.length && void 0 !== arguments[2] && arguments[2];
                e.stopPropagation();
                var i = e.target
                  , n = t.controlBar;
                if (!(fn(t.titleBar, i) || fn(n, i)) && this.player) {
                    if (r)
                        this.player.trigger("screen_status_change", this.isfullscreen),
                        this.handleScreenCallback(t.container);
                    else {
                        if (this.isLive && ("flash" === this.player.getPlayerType() || this.autoplaysuccess))
                            return;
                        this.player.toggle()
                    }
                    this.focus = !0
                }
            }
        }, {
            key: "handleBarChange",
            value: function() {
                var e = !(0 < arguments.length && void 0 !== arguments[0]) || arguments[0];
                (arguments[1].show = e) ? this.setAutoHide() : this.hide()
            }
        }, {
            key: "handleScreenCallback",
            value: function(e) {
                if (this.isfullscreen) {
                    if (this.options.onFullScreen && this.options.onFullScreen())
                        return !0;
                    !function(e, t) {
                        if (e) {
                            var r = e.requestFullScreen || e.webkitRequestFullScreen || e.mozRequestFullScreen || e.msRequestFullscreen;
                            r ? r.call(e) : t && t()
                        }
                    }(e, function() {
                        e.classList.add("sl-fullscreen")
                    })
                } else {
                    if (this.options.onExitFullScreen && this.options.onExitFullScreen())
                        return !0;
                    e && (t = function() {
                        e.classList.remove("sl-fullscreen")
                    }
                    ,
                    (r = document.exitFullscreen || document.mozCancelFullScreen || document.webkitCancelFullScreen || document.msExitFullscreen) ? r.call(document) : t && t())
                }
                var t, r;
                return !1
            }
        }, {
            key: "setAutoHide",
            value: function() {
                var e = this;
                this.show(),
                clearTimeout(this.autoHideTimer),
                this.autoHideTimer = setTimeout(function() {
                    e.hide()
                }, this.autoHideTime)
            }
        }, {
            key: "show",
            value: function() {
                this.templates.forEach(function(e) {
                    e.show && e.content.classList.add("slplayer-content-active")
                })
            }
        }, {
            key: "hide",
            value: function() {
                this.templates.forEach(function(e) {
					//hide
					if(autoFlag != 1){
                       e.content.classList.remove("slplayer-content-active")
					}
                })
            }
        }, {
            key: "dispose",
            value: function() {
                clearTimeout(this.autoHideTimer),
                clearTimeout(this.infoTimer)
            }
        }]),
        t
    }(), as = On, os = xn, ss = Fn, ls = jn, us = Fi.RoomStatus, cs = us.READY, ds = us.LIVE, fs = us.PAUSE, hs = us.END, ps = Fi.StreamProtocol, gs = ps.HLS_PROTOCOL, vs = ps.FLV_PROTOCOL, ys = Fi.eUrlType.COMMON, ms = {
        live: "svgBoard",
        replay: "svgBoard",
        camera: "sunlPlayer",
        chat: "chats"
    }, _s = {
        live: (zo = {},
        Di(zo, cs, "è®²å¸æ­£å¨èµ¶æ¥çè·¯ä¸ï¼ç¨ç­å¦..."),
        Di(zo, fs, "ç´æ­æåï¼è¯·è¿ä¸ä¼å¿æ¥è§ç..."),
        Di(zo, hs, "ç´æ­å·²ç»æï¼æè°¢è§çï¼"),
        zo),
        vod: Di({}, cs, "è®²å¸æ­£å¨èµ¶æ¥çè·¯ä¸ï¼ç¨ç­å¦...")
    }, Ts = function() {
        function B(e) {
            if (ki(this, B),
            this.roomInfo = {},
            this.index = 0,
            this.swfFilePath = null,
            this.sketchpad = {},
            this.camera = {},
            this.chat = {},
            this.svgBoard = null,
            this.isplayReady = !1,
            this.speedInfo = {},
            this._initializedPlayer = !1,
            this._reconnectCount = 0,
            this._player = {},
            this._record = {},
            this._start = 0,
            this._sharedStart = 0,
            this._trueStartTime = 0,
            this._playbackrate = 1,
            this._isEnded = !1,
            this._isPause = !1,
            this._isSeeking = !1,
            this._duration = 0,
            this._currentTime = 0,
            this._events = {},
            this.type = "flash",
            this._bytesPerSecondMap = {},
            this._lastTestTime = null,
            xi(!(this._speedTestCount = 0), this, e),
            this.isLive = "live" === this.loginType ? 1 : 0,
            !this.liveData && !this.liveToken)
                throw Error("tokenä¿¡æ¯æªæ­£ç¡®éç½®");
            if (this.isLive && !this.camera.swfPath)
                throw Error("æ­æ¾å¨çè·¯å¾æªæ­£ç¡®éç½®");
            if (!this.camera.el || !this.sketchpad.el)
                throw Error("ç»æ¿ææ­æ¾å¨çå®¹å¨IDæDOMæªæ­£ç¡®éç½®");
            this._init()
        }
        var e, r;
        return Ii(B, [{
            key: "on",
            value: function() {
                var e = arguments[1]
                  , t = (0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "").split(":")
                  , r = Ai(t, 2)
                  , i = r[1]
                  , n = ms[r[0]];
                if (n && i) {
                    var a = i.trim();
                    this[n] ? this[n].on(a, e) : (this._events[n] = this._events[n] || {},
                    this._events[n][a] = this._events[n][a] || [],
                    this._events[n][a].push(e))
                }
            }
        }, {
            key: "off",
            value: function(e) {
                var t = this;
                if (void 0 !== e) {
                    var r = (e || "").split(":")
                      , i = Ai(r, 2)
                      , n = i[1]
                      , a = ms[i[0]];
                    if (a && n) {
                        var o = n.trim();
                        this[a] && this[a].events.removeListener(o)
                    }
                } else
                    ["svgBoard", "sunlPlayer", "chats"].forEach(function(e) {
                        t[e] && t[e].events.removeAllListeners()
                    })
            }
        }, {
            key: "_init",
            value: function() {
                this._initParams(),
                this._initBoard(),
                this._initPlayer()
            }
        }, {
            key: "_initParams",
            value: function() {
                var t = this
                  , e = localStorage.getItem("debug")
                  , r = localStorage.getItem("tech");
                this.debug = null === e ? this.debug : "true" === e,
                this.type = r || this.type,
                this.liveData && (this.liveData.terminalType = 3),
                void 0 === this.camera.seekToLastPlay && (this.camera.seekToLastPlay = !0);
                var i = nn();
                this._enableFlash = !this.isLive || "flash" !== this.type || i.hasFlash,
                this.isLive && cn(kn("STREAM_URL") + "/getPictureConfig", {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json"
                    }
                }).then(function(e) {
                    t.speedInfo = e
                }).catch(function(e) {
                    ln("error", ["è·åæµééç½®å¤±è´¥: " + e], t.debug)
                })
            }
        }, {
            key: "_initBoard",
            value: function() {
                var e = this.isLive;
                this.svgBoard = new (e ? oo : Do)({
                    el: this.sketchpad.el,
                    isLive: e,
                    liveToken: this.liveToken,
                    debug: this.debug,
                    liveData: this.liveData
                }),
                this.svgBoard.init(),
                this._bindBoardEvts()
            }
        }, {
            key: "_initPlayerDom",
            value: function() {
                var e = this.camera
                  , t = e.el
                  , r = e.options
                  , i = (r = void 0 === r ? {} : r).aspectRatio
                  , n = void 0 === i ? "4:3" : i
                  , a = un(t) ? t : document.getElementById(t)
                  , o = a.offsetWidth
                  , s = void 0 === o ? 398 : o
                  , l = a.offsetHeight;
                if (!l) {
                    var u = n.split(":")
                      , c = Ai(u, 2);
                    l = s * c[1] / c[0]
                }
                var d = document.createElement("div");
                d.style.cssText = "width: 100%;height:100%;position:relative;overflow:hidden;",
                d.innerHTML = '\n                    <div class="sl-player-poster poster-active">\n                        <div class="info-container"></div>\n                    </div>\n                ',
                this.playerEle = a && a.appendChild(d),
                xi(!0, this.camera, {
                    height: l,
                    width: s,
                    el: this.playerEle
                })
            }
        }, {
            key: "_initPlayer",
            value: function() {
                this._initPlayerDom(),
                this._Player = this._getTech(),
                this._setPlayerTips()
            }
        }, {
            key: "_initPlayerEvts",
            value: function() {
                var e = this.camera
                  , t = e.el
                  , r = e.width
                  , i = e.height
                  , n = e.swfPath
                  , a = mi(e, ["el", "width", "height", "swfPath"])
                  , o = this.isLive
                  , s = this.debug
                  , l = this.roomInfo
                  , u = (l = void 0 === l ? {} : l).sName
                  , c = void 0 === u ? "" : u
                  , d = l.sTeacher
                  , f = void 0 === d ? "" : d
                  , h = this._Player
                  , p = this._isSupportHls
                  , g = this._getStreamInfo()
                  , v = g.sharedInfoArr;
                this._duration = g.duration;
                var y = v.length ? this._duration : 0;
                this.sunlPlayer = new h({
                    width: r,
                    height: i,
                    debug: s,
                    swfPath: n,
                    isLive: o,
                    el: t,
                    totalDuration: y
                }),
                this.controlBar = new ns({
                    options: a,
                    isLive: o,
                    type: p ? this.type : "",
                    info: {
                        title: c,
                        teacher: f,
                        totalDuration: y
                    },
                    player: this.sunlPlayer,
                    containers: [{
                        container: this.svgBoard.boardContainer,
                        show: !0,
                        parent: this.svgBoard,
                        loading: !1
                    }, {
                        container: this.playerEle,
                        show: !1,
                        parent: this.sunlPlayer,
                        loading: !0
                    }]
                }),
                this._bindPlayerEvts(),
                this.sunlPlayer.start()
            }
        }, {
            key: "_initChat",
            value: function() {
                var e = this;
                if (!this._isChatReady) {
                    var t = this.roomInfo
                      , r = (t = void 0 === t ? {} : t).iImId
                      , i = this.userToken
                      , n = this.isLive
                      , a = this.liveData
                      , o = {
                        debug: this.debug,
                        url: kn((n ? "LIVE" : "VOD") + "_CHAT_ENTRY")
                    };
                    if (a)
                        o = yi({
                            liveData: a
                        }, o);
                    else {
                        if (!i && n)
                            return;
                        if (!(o = yi({}, o, {
                            liveId: r,
                            userToken: i
                        })).liveId)
                            return void console.error("æ æçliveId")
                    }
                    if (n)
                        return this.chats = new Ho(o),
                        this.bindAsyncEvts("chats"),
                        this.chats.connect(function() {
                            e.onChatReady(e.chats)
                        }),
                        void (this._isChatReady = !0);
                    var s = this._getStreamInfo()
                      , l = s.sequenceArr
                      , u = s.sharedInfoArr
                      , c = s.sequenceMap
                      , d = s.sharedInfoMap
                      , f = void 0 === d ? {} : d;
                    if (l.length || u.length) {
                        var h = B._getTimeRange(l, void 0 === c ? {} : c)
                          , p = B._getTimeRange(u, f, !1)
                          , g = Math.min.apply(Math, vi(h).concat(vi(p)))
                          , v = Math.max.apply(Math, vi(h).concat(vi(p)));
                        this.chats = new Ho(yi({}, o, {
                            startTime: Math.floor(g / 1e3) - 5,
                            endTime: 5 + Math.ceil(v / 1e3)
                        })),
                        this.bindAsyncEvts("chats"),
                        this.onChatReady(this.chats),
                        this._isChatReady = !0
                    }
                }
            }
        }, {
            key: "_setSource",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                  , t = e.url
                  , r = e.hlsUrl
                  , i = mi(e, ["url", "hlsUrl"])
                  , n = this._isPlayHlsUrl && r || t;
                if (n) {
                    this._url = t,
                    this._isChangeUrl = !0,
                    this.sunlPlayer && (this._playLoadedTime || (this._playLoadedTime = Date.now()),
                    this._playUrl = n,
                    this.sunlPlayer.setSrc(n, i));
                    var a = i.type;
                    a && this._videoType !== a && (this._videoType = a,
                    this.svgBoard.trigger("video_type_change", a)),
                    this.sunlPlayer && this.sunlPlayer.trigger("update_controlbar", {
                        isChangeUrl: this._isChangeUrl,
                        currentTime: this._currentTime
                    })
                }
            }
        }, {
            key: "_setDuration",
            value: function(e) {
                this.sunlPlayer && this.sunlPlayer.duration(e)
            }
        }, {
            key: "_startPlay",
            value: function() {
                var e = this._getCurrentSequenceInfo();
                this._setSource(e)
            }
        }, {
            key: "_reconnectPlayer",
            value: function() {
                var e = this;
                0 === this._reconnectCount && (this._playLoadedTime = Date.now()),
                clearInterval(this.connectPlayerTimer),
                this.connectPlayerTimer = setInterval(function() {
                    e._reconnectCount += 1,
                    ("object" === Rt(e.status) || "stop" === e.status) && e._reconnectCount <= 4 ? (ln("info", ["%c[æ­æ¾å¨éè¿]: ç¬¬" + e._reconnectCount + "æ¬¡", "color:green"], !0),
                    e.sunlPlayer.setSrc(e._playUrl)) : (4 < e._reconnectCount && (ln("log", ["%cæ­æ¾å¨éè¿å¤±è´¥!", "color:red"], !0),
                    e.sunlPlayer.stop(),
                    e._setPlayerTips(!0)),
                    e._reconnectCount = 0,
                    clearInterval(e.connectPlayerTimer))
                }, 3e3)
            }
        }, {
            key: "_getStreamInfo",
            value: function() {
                var e = this.roomInfo.streams
                  , t = void 0 === e ? [] : e;
                if (this.isLive) {
                    var r = this._isPlayHlsUrl ? gs : vs
                      , i = t.filter(function(e) {
                        return e.eStreamProtocol === r
                    })
                      , n = Ai(i, 1)[0];
                    return void 0 === n ? {} : n
                }
                return t[0]
            }
        }, {
            key: "_getCurrentSequenceInfo",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0
                  , t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1]
                  , r = this._getStreamInfo()
                  , i = r.sequenceArr
                  , n = r.sharedInfoArr
                  , a = r.sequenceMap
                  , o = void 0 === a ? {} : a
                  , s = r.sharedInfoMap
                  , l = void 0 === s ? {} : s
                  , u = r.url
                  , c = r.hlsUrl
                  , d = r.type
                  , f = r.bufferTime
                  , h = e
                  , p = !1
                  , g = 0
                  , v = this._record.endTime;
                if (0 !== h && (void 0 === v ? 0 : v) < h + .45 * this._playbackrate && !t && (h += .45 * this._playbackrate,
                p = !0),
                n.length) {
                    var y = t ? h : h + this._trueStartTime
                      , m = B._getArrayByValue(n, y)
                      , _ = Ai(m, 3)
                      , T = _[0]
                      , b = _[1]
                      , E = _[2];
                    if (T.length) {
                        var S = Ai(T, 1)[0]
                          , A = l[S]
                          , k = (A = void 0 === A ? {} : A).iDuration
                          , w = A.iBufferTimeMs
                          , R = void 0 === w ? f : w
                          , L = {
                            url: A.url,
                            hlsUrl: A.hlsUrl,
                            isEnd: p,
                            type: A.eUrlType,
                            startTime: A.iStartTime,
                            currentTime: y,
                            sequence: A.lSequence + Math.round(1e3 * (y - S)),
                            duration: k,
                            endTime: k,
                            totalDuration: E,
                            bufferTime: R
                        };
                        return this._sharedStart = S,
                        this._record = L,
                        this._sharedStart1 = S,
                        L
                    }
                    g = E,
                    this._sharedStart = b
                }
                if (t && (h -= g),
                p) {
                    var I = this._record
                      , D = I.startTime;
                    h = I.type !== ys ? void 0 === D ? h : D : h
                }
                var C = 0
                  , P = !1;
                if (i.length) {
                    var O = o[B._getArraryValueByValue(i, h)]
                      , M = O.lSequence
                      , x = O.iStart
                      , F = O.iDuration;
                    this._start !== +x && (P = !0,
                    this._start = +x);
                    var N = {
                        url: u,
                        hlsUrl: c,
                        isEnd: p,
                        type: 1,
                        currentTime: h,
                        sequence: C = M + Math.round(1e3 * (h - x)),
                        duration: F,
                        endTime: F + x,
                        startTime: x,
                        seeked: P,
                        totalDuration: g,
                        bufferTime: f
                    };
                    return this._record = N
                }
                return {
                    sequence: C,
                    seeked: P,
                    url: u,
                    type: d,
                    bufferTime: f,
                    hlsUrl: c
                }
            }
        }, {
            key: "_filterStreams",
            value: function() {
                var L = this;
                return (0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : []).reduce(function(e, t) {
                    var r = t.eStreamProtocol
                      , i = t.sFormat
                      , n = t.sHttpsUrl
                      , a = void 0 === n ? t.sUrl : n
                      , o = t.sHttpsHlsUrl
                      , s = void 0 === o ? t.sHlsUrl : o
                      , l = t.sFileName
                      , u = t.bIsConcat
                      , c = t.lSequence
                      , d = void 0 === c ? 0 : c
                      , f = t.eUrlType
                      , h = void 0 === f ? ys : f
                      , p = t.iBufferTimeMs
                      , g = void 0 === p ? 1800 : p
                      , v = t.sequenceInfos
                      , y = void 0 === v ? [] : v
                      , m = t.sharedPlaybackUrlInfos
                      , _ = void 0 === m ? [] : m
                      , T = t.iDuration
                      , b = void 0 === T ? 0 : T
                      , E = !!L.isLive || "MP4" === (void 0 === i ? "" : i).toUpperCase()
                      , S = E ? y.reduce(function(e, t) {
                        return di(e, Di({}, t.iStart, t)),
                        e
                    }, {}) : {}
                      , A = _.reduce(function(e, t) {
                        var r = Ai(e, 3)
                          , i = r[0]
                          , n = r[1]
                          , a = r[2]
                          , o = t.sFormat
                          , s = t.iDuration
                          , l = void 0 === s ? 0 : s
                          , u = t.iStartTime
                          , c = void 0 === u ? 0 : u
                          , d = t.sHttpsUrl
                          , f = void 0 === d ? t.sUrl : d
                          , h = t.sHttpsHlsUrl
                          , p = void 0 === h ? t.sHlsUrl : h;
                        if ("MP4" === (void 0 === o ? "" : o).toUpperCase()) {
                            var g = c + n;
                            i[g] = yi({}, t, {
                                url: f,
                                hlsUrl: p
                            }),
                            a.push([g, l + g]),
                            n += l
                        }
                        return [i, n, a]
                    }, [{}, 0, []])
                      , k = Ai(A, 3)
                      , w = k[0]
                      , R = k[2];
                    return (E || R.length) && e.push({
                        url: E ? a : "",
                        hlsUrl: E ? s : "",
                        bufferTime: g / 1e3,
                        name: l,
                        type: h,
                        isConcat: u,
                        sequence: d,
                        duration: b + k[1],
                        sequenceMap: S,
                        sequenceArr: oi(S),
                        sharedInfoMap: w,
                        sharedInfoArr: R,
                        eStreamProtocol: r
                    }),
                    e
                }, [])
            }
        }, {
            key: "_reportMessage",
            value: function(e, t) {
                var r = this.roomInfo;
                wn(e, xi(t, {
                    rid: r.iRoomId,
                    uid: r.iUserId,
                    biz: this.isLive ? 0 : 1,
                    player_type: this.isLive ? this.type : "video"
                }))
            }
        }, {
            key: "_reportVideoTime",
            value: function(e) {
                if ("playing" === e && (this._lastMetaDataUpdate = null),
                this._playLoadedTime) {
                    var t = Date.now() - this._playLoadedTime
                      , r = {
                        loadTime: t,
                        uri: this._playUrl
                    };
                    "playing" === e && (this._reportMessage(ls, r),
                    this._playLoadedTime = null),
                    this.isLive && 12e3 <= t && (this._reportMessage(os, r),
                    this._playLoadedTime = null),
                    "error" !== e || this.isLive || (this._reportMessage(os, r),
                    this._playLoadedTime = null)
                }
            }
        }, {
            key: "_reportVideoStall",
            value: (r = ni(Vt.mark(function e(t, r) {
                var i, n, a, o, s, l, u = this;
                return Vt.wrap(function(e) {
                    for (; ; )
                        switch (e.prev = e.next) {
                        case 0:
                            if (this._getBoardStatus() === ds) {
                                e.next = 3;
                                break
                            }
                            return e.abrupt("return");
                        case 3:
                            if (i = {
                                loadTime: t,
                                uri: this._playUrl
                            },
                            this.isLive)
                                return n = r - 1e4,
                                a = oi(this._bytesPerSecondMap).reduce(function(e, t) {
                                    return t < n ? delete u._bytesPerSecondMap[t] : t <= r && e.push(u._bytesPerSecondMap[t]),
                                    e
                                }, []),
                                o = 0,
                                a.length && (s = a.reduce(function(e, t) {
                                    return e + t
                                }, 0),
                                o = s / (1024 * a.length)),
                                e.next = 11,
                                this._getNetworkSpeed();
                            e.next = 13;
                            break;
                        case 11:
                            l = e.sent,
                            xi(i, {
                                net_speed: Math.round(o || 0),
                                pic_speed: l
                            });
                        case 13:
                            this._reportMessage(as, i);
                        case 14:
                        case "end":
                            return e.stop()
                        }
                }, e, this)
            })),
            function(e, t) {
                return r.apply(this, arguments)
            }
            )
        }, {
            key: "_onRoomInfoChange",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                  , t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1]
                  , r = e.streams
                  , i = void 0 === r ? [] : r
                  , n = e.iImId;
                if (this.roomInfo = yi({}, this.roomInfo, e, {
                    streams: this._filterStreams(i)
                }),
                (n || this.liveData) && this._initChat(),
                i.length) {
                    if (t && this._setPlayerTips(),
                    !this._initializedPlayer)
                        return this._initializedPlayer = !0,
                        void this._initPlayerEvts();
                    this._startPlay()
                }
            }
        }, {
            key: "_bindBoardEvts",
            value: function() {
                var t = this
                  , e = this.svgBoard;
                e.on("error", function(e) {
                    return t._onError(e)
                }),
                e.on("room_info_change", this._onRoomInfoChange.bind(this)),
                e.on("kicked", function() {
                    t.sunlPlayer && t.sunlPlayer.stop()
                }),
                e.getPlayerStatus = function() {
                    return !!t.sunlPlayer && t.sunlPlayer.paused
                }
                ,
                this.bindAsyncEvts("svgBoard"),
                this.onBoardReady(e)
            }
        }, {
            key: "bindAsyncEvts",
            value: function(r) {
                var i = this
                  , e = this._events[r]
                  , n = void 0 === e ? {} : e;
                oi(n).forEach(function(t) {
                    n[t].forEach(function(e) {
                        return i[r].on(t, e)
                    })
                })
            }
        }, {
            key: "_onPlayerReady",
            value: function() {
                this.isplayReady = !0,
                this._startPlay(),
                this.isLive && !this._isReportedPlayerType && (this._isReportedPlayerType = !0,
                this._reportMessage(ss, {
                    uri: this._playUrl
                }))
            }
        }, {
            key: "_onMetaDataUpdate",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}
                  , t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                if (this.isLive || !this.sunlPlayer.paused) {
                    var r = e.user_data
                      , i = e.currentTime
                      , n = e.playbackBytesPerSecond;
                    if (this.isLive || !this._isChangeUrl && i && !this._isSeeking || t) {
                        var a = r
                          , o = t;
                        this.isLive && a && (this._bytesPerSecondMap[a] = (void 0 === n ? 0 : n) || 0);
                        var s = [];
                        if (!r) {
                            var l = this._getCurrentSequenceInfo(i)
                              , u = l.url
                              , c = l.totalDuration
                              , d = void 0 === c ? 0 : c
                              , f = l.currentTime
                              , h = void 0 === f ? 0 : f
                              , p = l.sequence
                              , g = l.type !== ys;
                            this._currentTime = g ? h : h + d,
                            this._url !== u && (this._seekedTime = g ? i - this._sharedStart : h,
                            this._trueStartTime = g ? this._sharedStart : d,
                            this._setSource(l),
                            o = !0),
                            a = p,
                            s.push("æ»è¿åº¦ï¼" + this._currentTime, g ? "åäº«è§é¢è¿åº¦ï¼" + i : "è§é¢è¿åº¦ï¼" + h)
                        }
                        this.svgBoard.onPlayerMetadata({
                            sequence: a,
                            seeked: o
                        }),
                        this.sunlPlayer.trigger("time_update", {
                            timestamp: a,
                            duration: this._duration,
                            currentTime: this._currentTime
                        }),
                        ln("log", ["[åºå]:" + a + ", åæ¢ï¼" + o].concat(s), this.debug)
                    }
                } else
                    this.sunlPlayer.trigger("time_update", {
                        duration: this._duration,
                        currentTime: this._currentTime
                    })
            }
        }, {
            key: "_onPlayerStatus",
            value: function(e) {
                if (this._reportVideoTime(e),
                this.status !== e) {
                    ln("info", ["%c[æ­æ¾å¨ç¶æ]: " + (this.status = e), "color:blue"], this.debug);
                    var t = this._getBoardStatus();
                    if (!this.isLive)
                        return void ("error" === this.status ? (this.sunlPlayer.pause(),
                        this._setPlayerTips(!0)) : this._removePlayerTips());
                    "playing" === e || t === ds ? this._removePlayerTips() : "stop" === e && this._setPlayerTips(),
                    t === ds && "stop" === e && this._reconnectPlayer()
                }
            }
        }, {
            key: "_onPlayerSeeked",
            value: function(e) {
                if (this.svgBoard.onPlayerSeeked) {
                    var t = this._getCurrentSequenceInfo(e, !0)
                      , r = t.sequence
                      , i = t.url
                      , n = t.currentTime
                      , a = t.totalDuration
                      , o = t.type !== ys;
                    this._seekedTime = o ? n - this._sharedStart : n,
                    this._trueStartTime = o ? this._sharedStart : a,
                    this._currentTime = e,
                    this._url !== i ? this._setSource(t) : (this.sunlPlayer.seek(this._seekedTime),
                    this.sunlPlayer.trigger("update_controlbar", {
                        trueStartTime: this._trueStartTime,
                        isChangeUrl: !1
                    })),
                    this.svgBoard.onPlayerSeeked({
                        sequence: r,
                        seeked: !0
                    })
                }
            }
        }, {
            key: "_bindPlayerEvts",
            value: function() {
                var i = this
                  , n = this.sunlPlayer;
                n.on("flash_closed", function() {
                    i._setPlayerTips()
                }),
                n.on("ready", function() {
                    i._onPlayerReady(),
                    i._setPlayerTips()
                }),
                n.on("metadata_update", sn(function(e) {
                    i._onMetaDataUpdate(e)
                }, 450)),
                n.on("metadata_update", function(e) {
                    if (i._isEnded && !parseInt(e.currentTime, 10) && (i._isEnded = !1,
                    i._record = {},
                    i._start = null,
                    i._sharedStart = 0,
                    n.trigger("update_controlbar", {
                        trueStartTime: i._trueStartTime = 0,
                        isChangeUrl: !1
                    }),
                    i._onMetaDataUpdate(e, !0)),
                    i._lastMetaDataUpdate) {
                        var t = e.user_data
                          , r = Date.now() - i._lastMetaDataUpdate;
                        "flash" !== i.type && Gn <= r && i._reportVideoStall(r, t)
                    }
                    i._lastMetaDataUpdate = Date.now()
                }),
                n.on("pause", function() {
                    i.isLive || (i._lastMetaDataUpdate = null)
                }),
                n.on("seeking", function() {
                    i._isSeeking = !0,
                    i.isLive || (i._lastMetaDataUpdate = null)
                }),
                n.on("_seeked", function() {
                    i._isSeeking = !1,
                    i.isLive || (i._lastMetaDataUpdate = null);
                    var e = i._record
                      , t = e.currentTime;
                    n.trigger("seeked", {
                        timestamp: e.sequence,
                        currentTime: e.type !== ys ? t : t + e.totalDuration
                    })
                }),
                n.on("error", function() {
                    i.isLive || i._onPlayerStatus("error")
                }),
                n.on("emptied", function() {
                    i.status = null,
                    i.isLive && "flash" === i.type && (i._lastMetaDataUpdate = null)
                }),
                n.on("lags", function(e) {
                    i._reportVideoStall(e.loadTime, e.sequence)
                }),
                n.on("status_change", function(e) {
                    i._onPlayerStatus(e.status)
                }),
                n.on("progress_click", function(e) {
                    i._isEnded = !1,
                    i._isPause = n.paused,
                    i._onPlayerSeeked(e)
                }),
                n.on("canplay", function(e) {
                    i._removePlayerTips()
                }),
                n.on("rate_change", function(e) {
                    i._isChangeUrl || (i._playbackrate = e)
                }),
                n.on("full", function(e) {
                    n.trigger("update_controlbar", {
                        isChangeUrl: i._isChangeUrl = !1
                    })
                }),
                n.on(yn ? "canplay_through" : "loaded_metadata", function(e) {
                    if (i._isChangeUrl) {
                        if (i._isChangeUrl = !1,
                        i.camera.seekToLastPlay) {
                            var t = localStorage.getItem("video_" + i.roomInfo.iRoomId);
                            if (!i._isFirstEnter && +t)
                                return i._isFirstEnter = !0,
                                void i.sunlPlayer.trigger("progress_click", +t)
                        }
                        i._seekedTime && (i.sunlPlayer.seek(i._seekedTime),
                        i._seekedTime = 0),
                        i.sunlPlayer.playbackRate(i._playbackrate),
                        i._isPause && (i.sunlPlayer.pause(),
                        i._isPause = !1),
                        n.trigger("update_controlbar", {
                            trueStartTime: i._trueStartTime,
                            isChangeUrl: !1
                        })
                    }
                }),
                n.on("ended", function(e) {
                    var t = i._getStreamInfo()
                      , r = i._record;
                    t.duration < r.endTime + r.totalDuration + 5 ? i._isEnded = !0 : i.sunlPlayer.play()
                }),
                n.on("tech_change", function(e) {
                    localStorage.setItem("tech", e),
                    window.location.reload()
                }),
                window.addEventListener("beforeunload", function(e) {
                    if (!i.isLive && i.camera.seekToLastPlay) {
                        var t = "video_" + i.roomInfo.iRoomId
                          , r = i._currentTime || localStorage.getItem(t);
                        localStorage.setItem(t, i._isEnded ? 0 : r)
                    }
                });
                var e = this.playerEle.querySelector(".sl-player-poster");
                e && e.addEventListener("click", function(e) {
                    var t = e.target;
                    hn(t, ".btn-retry") && (t.previousElementSibling.classList.add("sl-icon-spin"),
                    i.spinTimer && clearTimeout(i.spinTimer),
                    i.spinTimer = setTimeout(function() {
                        if (i.status = null,
                        i._playLoadedTime = Date.now(),
                        n.setSrc(i._playUrl),
                        !i.isLive) {
                            var e = i._record.currentTime;
                            n.trigger("progress_click", void 0 === e ? 0 : e)
                        }
                    }, 500))
                }),
                this.bindAsyncEvts("sunlPlayer"),
                this.onPlayerReady(n)
            }
        }, {
            key: "_setPlayerTips",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] && arguments[0]
                  , t = this.playerEle.querySelector(".sl-player-poster")
                  , r = t.querySelector(".info-container")
                  , i = this._getBoardStatus()
                  , n = _s[this.isLive ? "live" : "vod"]
                  , a = (n = void 0 === n ? {} : n)[i]
                  , o = void 0 === a ? "" : a;
                if (t.classList.add("poster-active"),
                e) {
                    r.innerHTML = '\n                <img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAkCAYAAADl9UilAAAAAXNSR0IArs4c6QAAB29JREFUWAm9l3twVNUdx8/j3t1NlpAAEkHTDlTQjoqUiQQfU611xAlDNqRM+gcqKhEoioCvMnUa3Errq8hIfFDQxBGjfzRqyIaRYmdqZUYroFV8tb4GRhGQZ8lrc/fec47fc3bv5m5IMNDFO9nce16/8znf3+/87rmUnMJ1xcL2iZLTayjlFYzZP2PcHk0sayTllkeZvRflfdSy9nAW+kekILqp9Z4xB052GjrUAQsWvGPvdD69mXE+jzJrGmEW/myCZ0K5TRjHnaGMO8BMHWUczyFJLXsb6p+Ojh+zoeXXVAxlziGBTZ2z/jrG+EpFrfF9kwbADFywHATsAyWcf8Kt8L3td45o+z64E4JVzH1ilOiRjVCk2ihklNDK+JP5avnK5dan1czUZZTViqI+wUpKrk/U0c7BAAcFm1K96nzCyBa4pyxngjSchHKvI742cx7eHuLsS/cM+wghpRZ3us5ixB4rKb2MMSvGrFAF/Mn6FpNWk1v2JyHLrm65LfLFQHADgk2O3T+FKvs1BMoZOo4CajmA+UtBZNiqfz4ze89ABvvXVcY/LxNE1QMQscmt9CJ1TALQso5yu/CK1kX0o/7jjgO7qDJeRhR5l3CrNCegLetj2w7P+lfzLQOusL/h/uUZD3x5rlKh5yjnlxj1MhsHC99tF4YrWubRg8ExLFiorGwISylewa+UKEmUUvhJQonaFI5GLj1VKD3Hq/ee89mwiWVXwmYTjBIptX38pBznJr2Nt7+qwkGWHLA98uByNE4lkCw9CDtbyceqJi2tfrOpbtBADRo80TNSRWrz786uA9wavXANCDACysu+/orcGRybdWV5VfzHKcf7ryKkQHcwOciyNr7f/vtfUUpRnb+r9q+KJ3cfSiDQZmTzHrM77EI+wXdpVjHHkYsVpQZKI0Cx/ZHi4hvzDaVt6yRbUMznYA7ElVYN24OI4cIlK3S7vrJgEEX7D1JlG5Zve2FJR7qU//8tC0cegx/+YFwJLONWT9bdsEFF9WxZMBWOrAbTVnTuhh/XfLBl5Yb84+RavHjqqHXYWLuNIGaziYJkD7lW98rGWO6Q01ea/bjzU1e6MwilryeWRN+buerQwzgM/BbpSb9X8bOaW2/lN/ygYDVrO0uFQ76A44oApv3XSARtUTK1xd8ESLwHWm+zzsyCxZ7qPY97XqR1ybCdp0uv6id6pklPvB20Tyk5rIQYjjrbP6WUREMFBizW0NkGF8fMAErfCBFr/stLI58HDeTjGfmLxhq6mxFTc46zh42HDGBef+GCyE9ozVrnQs9JfZjTkVIHQflIeOywB7G1kzlteShUPdY9E55sAOj4/uYoZYRHQj9nlLBiXci5lApjAfXOvu6PtZGctjwU2pdFN4XHRi+APn+ETE7QpH7j4E3wP2wCa6/O8sanOo8FrvSKZHtsTVezdkOg6f9+1J5ILCuqR9hMAtwbvkFolGhdFP6I3vSsihztSiWV9IgSHtqVixNABxhH+Z31nVn8krbFhduCdfl8rmnomiwsqzdxa+RTbdeoUPOU963wUqUEYBqQ0NC1hKtaPNQhUHVIdvIwmdC6qOikPypOFT4TXPQ1Rjk4dBFhL3uvbl9aNB+7pBy/u2weqvghobKKzV6rZgvhviTxFjWKCbGrvHzEufGrqPbtab0mTV+xGuFzM/TYEQrxOe+2xw/pCY1ihVHyN3wFJc0mgGoI8/Hv7Di88LQSwfhFlfVzcWS8A6eHEmy7a5yUuMOf04A9P5fqF3ejdqN2pwYE3H21644U+x3zfZ92XcNwqejDWbs6wRJi+eVMjBGC4L4fQB3pnIbsxtjo5DHvRX2o8zvn665TT++xY8/htDPG2MT2AlQSrnzSnyMLZk6OlD9kFPM3AaUzkru/fdTvnI97PK7YlOpHVivFZlGWmV7nT04fQnx95c+RBdMVPxpHVlPO3tID/HiTiiytfPCbRigX8ged6v3yeY1FiQ/XtMEdy/R7UXvHeIjSHWVkdJ9bMQEUzL1qm9Rot8vZLqU7zuzSTG5D8n2bUvdG/bWTO2JopUuvf2aC6zgbpfQu0HYJjtMZ+wfAWP7B5njOd+pxYHqamrXqQuH2bAXMCAUjUsPpVCL0g9dEpVq5OT4xx9BgeL+45eWyZG/X3Vjob2AjrNOR9DJpSYpDirrTdyZWvNd//IBgulPtk70THNdtg5HzjTEDlgYEoRQitQ3g7Uy5bxFP7i2JFu07SA54do87MtUpzxEiWYFOlVKmrkI/5sOYBWq1pLuHETH9363L/9MfSpcHBdONsUZVRDo6mqWXihnVpFatb8UaOK0k6nxwv48uZ9r7FEf/dF0bL2R12zcsPqznGeg6IZg/oGrV0VlSpf5k1DNuwOcWJjYwAbg+ZX33Z8B1n3S/XUqJ+h0vLnjBtz3YfUhgerD5SN21fy5cOJ8IOQ13pgAJlxAi/EBOw4I4Bxp94HbZNDl83rPr11+MAd9/DRksaKrmz/tLe5PdM/ER8UvhuWVw71hMfhYUtJQnjhDhHkT5faiznQn1963rqk76mP4diKml8K3O0v8AAAAASUVORK5CYII= alt="" class="info__retry">\n                <a class="sl-btn btn-retry" >éè¯</a> \n            '
                } else if (o || !this._enableFlash) {
                    (r.querySelector(".info__meta") || (r.innerHTML = '\n                <div class="info__meta"></div>\n                <img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJoAAAB0CAYAAAB9sSvlAAAAAXNSR0IArs4c6QAAFMFJREFUeAHtnXuQHNV1xvv2zO5KIMRDxBTKShBwQoCkHCWOHISLBEdI2BhweKhsGQcnMTZSgSmsmJik4myKkLJxpZQyheXkD8eyY2G0PAokgyXAcpAELkAQB1sxleB4hST8YCVeK5nVTne+75x77vSsVmJXM7szO3uvtH2fp6fnu78+9/btnhmXtGm48/4dswcH3fvyPD81ccnetJRs+NPL5v6gTd9uy78t1/JHOMYD/Le1O38nSSq3Jom7MEny1Mxd4irOuVuuvnLO31tZjCdOgbYB7d8f7J85NPDGP+W5+/MiYMOlTNPko1dfccrq4eUxP74KtAVoq9e+OD9z2Z1Jnpz2VnLBq+08Kp9z6pIlrvJWbWN94xQIQ0vjdjmxe1rd2/eJLMm2jAYyHhnmbN37kh0YXmOYSAUmLWgAxq1e23dblidfhmAdYxEtLbs3x9I+tq1fgXL9u2jOHgDZ13Lnrhrrq+Oi4LF49TlW1epvP+k8Gj3ZTZ+96x+PDLLkCVdOL6tftriHsSowqUC78KJllyy+ePl/Dg7+8uaxvFF4sV246vnEKb8y97yrL+vuH4ttbNsYBSbF0Ln4omULc5ffWsnz+Zj0J6++8vIo3r37BRZqHyy55M45s+Y8ev75bmgURrHJOCnQ0qAtvmT52/MsX5nl+fsJmIVdO/+n8tOXfvLjk2f/2ts5lDqXvIL6HyLenrn0qSQpbf6zK2b/yNrHuPkKtOQ62qKP/OXR+SsDf+2yZEWe5F0FmYhbb6nkPvvtB1Y9v2bd7hOTrFRaeulJPyu0ickWVKDlQFt00bUfhE5fAFHdRb3gtja6pHzThvW3f79YHtOTQ4GWAe29l13fXXnzwFcA2AW10rkfp2n6qQ3r7ri/tjzmJpMCLXHVufjiZUuHBoeeK0KGK8WBNHF/Uz6tfFaEbDIhNfKxNtWjLb7yxhOyfftX4dCWFA8Pk/r7OpPp169fv3JXsTymJ68CTQPtvRcv+4OhPLkHNx9nm3zwYntdmly3Yd2qNVYW4/ZQoClD54UXL//QUJZvKkKG58e+5bq6zo6QtQdYw9/FhHu0Re9f3pPn2d/ZgWCYHIQnu2HD+lW8OR5DmypQmqj31dPTk3bOOPOrWGC9IbymS37mSun7Nq5bdV8oi4m2VGDCQOuY8ZtfxOr9NUFF557qSqa/56F1t28PZTHRtgpMyBztgouu/VtAdp2piMXX7xw3fdofxqtKU6T943Gfo11wybKrkkr+dZMSkG3ucidduG5dzz4ri3H7KzCuoC36k2vfhqn+j3C/8nhKiYn/k9PSmQsfeOC219tf2vgOiwqM79B5wK0MkCXutXJnaUmErCj/1EmPG2hYK3s3rjCXFqT85IP33tFXyMfkFFJg3EDLsvwjpiPG58c2fmvVasvHeOop0JA52tq1eWm/2/GxPHF/BC82DxP+o/fve+PkLM9k+aSr86j+crn0c9Q/i3naI1dfMeeraIN76DFMFQXqBu0b9/SdNpi5Nbid9K7RioY7AY+VS+mHr7q8e+dobWK7ya1AXUPnpk15+UCW3D0WyCgXLhDOG6pUvgnvV9frT27pp9bR19XRfS+/eEOeJ/OORDKMm+eu7t3xsSOxjTaTT4G6QMPbXVTPW8bHShbXYx9tJ48C9YGWJ79bz1t1uHCoxz7aTh4F6gMtyWfW81ZxFXpsPfbRdvIocNBVZ09PnvYPrDw3rxy4AN9jNzfJs2PwQdwEX6aSCJV4BBbLFpI+blb3B3BjCcWY3qM+7AxrGFpgsc9SF9ThIkDawmTw1b2712Pv1f1LG+4y87tmPPLry0uL1tE+9E+T9ENfvo6u3eFy9/CsYz+9tacHH5YshMAGy66/8QsL8WnwlXgw8beYxzIEERIoCAjhwQ6lHJmQ1jao93sjSNF+KuuX/CBJ0xtXrfz0IwICNuF5tOU33HYjPNXXAdlJChhqCQ6YEWyUMHFU1XKDTduQL/VWBDTaV3VSHZmXczDo2q76JW/DO71q/oJFrz/1vYe/Zygk137ycx8EGXfq22axBq+H6WXFIcbqvgeLRer9QqWUKIC2n2Id09G+/fVDJ3/oy1/8zDfdx//qc8e6gfwFQDYruDBA40dK4KCuzPIKjfgrz00RI0tHe9NrqusHIvrzo93p5XwguwYszar1ZsgJSwoZxdJ5lx8SPXxKmk3si/BF+6gf6SBVblYykF9TBkGX8opFQ0hYAeJiGdP0WgzV8pFS2qa2ndpEe9VmJNWqZe2kH3r80nIlS84Ifgrvky6/OIQaHMIm52FYdii24ZmrebQMae6EolXjaE/PPzX1y5P0DHi05EQiYYGwKEwKiVxFCnxER1tKG6R9sQAW7VWBqN9I/OQnlrMs48VfgMW8FR5crLkgoIAMoa3Bh/JQ5uvpyaJ91K/KBb4ekV7KPBRZIiBc+WfANy2G2BZh9YxFOf6zbbSP+o2Gn7KCw3mXzh/EPQlAYEy8FoUEVaxHuRAmbZnWrA21jKM9RIv60Q/V8APQUMT/jH2dpqxcirHRUo20TuAU42gf9VM+6Js0pYx4rBLM0TiXsGp6rUwahhIm6NrEmzHp0+LhfNto7+WN+h2KH/VolAnoGVPipCTDcqlUNyioKqnCrSSlMNpH/Q7LD5c3dNgUR6WwKVwAzAc6LJl+Ic86y7OaPMqwEe3l4kn1oChUR4PpZXWWZ+1U0a8senjY+KY5Qob1DigiEOWITTmUyXArKrEcIdqLTlG/Q/MjczQ9/SATlULA2pomPEWMeBbKNI13BvBPWsgyCI2kRbSP+gk3I/ET5miERYZMRUy2/IyvlmlsSCWhnM2ERomjvcgWNlG/Kj8F0AJGQagqOFoXkLKEzjB8+2hfPelUkqifoYSfIhmqDL0kAmEeptyAIo6TFqgW84TLigU0lrMRN0hHey8FdTGhKI3PI5qq+nGqVd7xk+c3Y8K/hOKYPHIBAF0UMFVIWGOSUBl4Ia1l0Z76kC0RKupn0Lj0X9K0lN6MTxMNilOCQCISG+BPwGEalSKdFvhy0bTmjKVttPcnYtTPc5Lu6jhu+k2l3Tv+e+/suWceB2wWiKciWP6ElJZF188Kqyd0TPOPoZiP9lVNprp+SfLhpzetfU4+qjk9nXYr/NceUYeQFPgxkISnIlQGE42Gp6O9yRZOxKmoH9Zjv/HME/fhc7v+M8FbtqzZC1ZuYYEohIywUwCIJ2YITHtHJmVU0ep9WrJWhkbRPqinWrW7fs79ojR9RvhNCfFolOD07tKXwMgLooKJYDEbhDQSIc0KBhAlp6ylpbC2XbCJ9lNCP+eue/LRr4Xfrw+g9fb28qdyPqOIBCoOIiZcUXm1qk7LFudoEu29cFNSP+fS+5/Zes/aogYBNBY+/fi9d8MzPa7XmITF38uUcVHhUcfFNBGzJRFtq48bsUbrov0U1I+/b1/KlwGOmlADmtS4jhXV59OsrYKl3stusCt4NR7N4BMaqzXq4RQ/hc9AVFz1VViv5fH17USefPqXktKntm2+FzcBaoPSUluW/N45l9+FTq/5sdYwDxN+sAFMHEZlBwRLyrkjhWXYLrU8tIv27agfuvfhbY/fO+KXMx7s0YBEWkpuBkmDAosw5OFBZF6HPOnAqcCROKvT2KNWKKeNtYn2baZf6t7o6Oz8uO/1g6LwbULFGlnEPfWs4wHDOURMJAEwhEngEniQZpkU61zE6ixmXbT3CrW5foBhxVObezfy3Y4URvRobDg96foHDIx7RB9u6I2UGokFMpaxMerZhBu2kTIfszy0lQptE8q8XbSfvPq51G3dtuXuO9iVhwqHBI2LuNjBLQaPkoTdgBCBomaP6tEIGQEyaAQmZARQM4r2baUfLtx+6ZL0LxB7N1IDRsgcEjS2OH22+xKiF3gVKBAhYzfNzXORH7koMJAgI19R6pEQu2ivOrSlfq7n6a29z+OtHTYEPA7V6p0LrrwC3xDbW4WJ0GFQhSUe/UiOmj5daeJ5yv+ES5NhCEUJdg9PiHIB1af5mqyRXoj2LavfwP598ng/+48Haf2PHn3mmM7fftd3v9szxJrDBTE9XAPWzVtw+VY0XCBXjCBDPBwQSfGix8yYQURCEHBQxwFWoMLRsb6m3Le28mgf5KvVSYeDpurHnnztjddDn/MA2f8IB8pp+fef3HLX96tHf+hU+dBV1RrnyiuSfOgJgcdLwbR+WEUXLGxJQ7ECWH7IVg+GfXmqpBwHy/aET/epeb5itNfTrlX0y7IKu0WC9pW6DKQ/P1rIaDzi8obutrp96cUf7jx57llnAZqzdb7GoRMvBU06OjoCRAZTsJQzEjkeWzGtWmr58LS+D91F0aaYHm7D1kqtxmpd+5rRvrafipoV08P0r+CTbvjdLnULqNP+T7af3p0u3b59e5VC0/wQ8ahAo233KfOewVxtGfq4JIRJx7mks4TrCRsefWeSAzlef9CWt1igY50UaCNNIo1EtR1fuZqvlqNdtJ8Q/Sr46GUFoMlII/3sMkzNL3nk23fv0N4Z3XbUoO3e8dzeXz3lTFnEZSeLR8NrlEtlHAR7XYOlbMLIfBg+fZq2DKwTeAioD5aK9nrB1Wz9KtlQMsQ5kncs6Lt/xpMZX7H+Gm08qjma7YyLuPuTwY9i/nBCFQh+VVVaC5M34PerKVIoQLpqY/MzhY3Na2CM9qJAS+jn0jucy77jSiV8LjjP3AnHhx+p8N00qihwMKrWaDTv3MvfCTc616WpvPBRneUV2Ml5igxS3KMRxZ3W5Fmhczt1Yppns2jvtajRC7LU5Cdev1Lq3vMfj67ZJF1Ux2ZMHo2v8+zWe55GxD8J7z5/Ke7WZwDNeyV6MRsaSRMW1ZgVsBBzmOU3LlhZcUFZvFq0byn9Svm0Mc3FlIqDt2MGbfgusMixpyLrHAoP6/U71xQugqRf5cFhVJdEDDIdLrnepnv1fEZ76GkaNVm/vKtr5s7hfX4k+bpBAyx4LlxJMWB4IJa2WMuq7QgZPZ/Cpode23aksmivOlLf8dcPA9BPH3ro9je1J+rb1g0avvOxn1RVp/fVA9LpBeFgiqGYVrFYenA7lo5UHu2rWk6Ifg0ZNtmXdYOG32fs56IeA908vZIMgYi1VMtZr3W1bYgO/xiifa02TdcPv7+pPVP/tn7Q0qE9RpTNxXgBQA8XLgqgGGEigOFCQMqqbfhWoj1VgFItol/q0j4eUSNC3aBV8IPFOe+H2eiIoyJkDMX5l+alWDybpKipCItctFdxsG0d/VrIo5WGOvorCZ4SATRkRRELmmlZGE8LbdiwaBDta+QwBUWiZunXwKEztTd0pPHChb/xKjwXrgn4iyugxf54XiItf9y5L+evsqinI2naXn4IA/XRvrX0yyqu70i5GG7HE6buMP+cD7yM21L4YVkEaoVInRXmYExpRst9Wtpqc6nWTbRvJf3KMztnPbGhV7/8xzrsCOO652h8XXiofvwBNCAmK41IESit04RkNEkQhTrGaEdnp/lo30L6DTQKMnZzQ0BLXAbQuDsEGSI1GbgzkAgVr9kRk0MxIVuWplm098KoKHLeNkW/xg2b7NaGgIY7Jn7RVqHhjkmRgST5YhmXNgqwsZ3BxlhCtG+qfuiHhq2hsT8bBFq+x9ET4eh42zNAg4Q5KJYxCFS+AdNszDYSkI72raJf3nqgYUUfa2mgRSjy4BAgDpMMBhNitimCJYu9Vh/ta7Rqpn74TG/rgQZYMEcDVZhQyMftCAwDYplj+HmZuCtQ568X4L60mbbVxtG+cCI2UT/cWuwr9E7dyYYMnVgt02/2g6uSoW+45+JhGnxI1AyPxbpo3zL6YYRqPY+W5ZU9HA7JF7e6IOvZ8oAx0nppJNwF9lBUrY/2LaFfOWs90PBBYnmCQ8HB1ns0ImUwhct0lBXTbGtztmjvFWu6fi4rH5i7i0fTqNCgobMi62gBIE9XyBOmwnzMwGJ9eJqDfBp00V76N+gxwfphnrx727P/eqBRkHE/DQGtgx4NM3sDyA5QH/upDpkyvHqYwtO1gMrmddHelNO4WfqhSxo6bPLdNAS0N49P9uQ/VzdUCxNfws+5WG1npsDGG+7qxdjKILMyi6P9xOuXpkkf+6SRoSGg/dfGjQNnv+OP8Wx53sWDE0h8jFw4XlwyI4d8tUjSxWy0b75++Onf1vRoAgeWOIDR7OCZPF5hnoE8ISvm1U4cnbBXrDP4asuifVGP8dIPd3laFzSXy4312XLFKZDpZIzAVIdBP/lnPaoNsTBHs4VdVsk4K/4v2kNEAsYgF09MjKN++FBkH1+ikaEhQycPKMv5o2Ugxa4u7YMq/mjF05E6CCTeSqBCysrkuSJkor0q1kT9XF5uXY+G9Qs+k+bPNEQAR2ZkBAmBJ6Aw5YGyIVbKpQ020kCaR/sm6tfZ2aJXnUQD9zrlNpQBRGqMG8aWxiKIen1iWG0c6qtF0d40m2D9Xtu27ZFX9XRv3LZhQydQ6rd7mJxQGEQUya4AiqMjvR2DjKBMwLVFe/X8zdQvdY29mc6uZWgYaLnDHA3uSAEDROTILpGqbiq4NsHMtzEoKXO0pyj489pQU/ljbzFIuUbWppH64XtTGj4/42E3DDS4I31UyIshcy/voorzMxkQKRb+lEMdSuUWFZ8RivaqDSVqhn5p2uKgJZijiefioKjAcEt2bHiUj9OBOvlkFNrILRZSiEBTTUb7ZuqXZo2/K8D+bZhHyx0+sZ4PCWTiwQrztOKcgwyqkNJKzl4Mu0RNRwnE0R5qNEk/fGNta3s03LbYQ4BkUaMwr5ALAA4BDJ4tTQtxkgxzENRHez9PldGBwEGiCdSvVGr80gY7uWEebZob7N8HQfj9+MITh0IkRC9Ja0aGSJ6tXrzwFIcISmGjfTP1q5TGZ+hM1aXUv+3qegfuDAA0ACRzMRsKBSgOi/jy+EKabfmHL8KVF1fwon0z9cP5PzTvjLkH/Xpw/XTY/LsRe8I+Tvv1+fgejmxm7RhpO5fz1DKIh+dZZWUWF5qHOis7XJvD1UV7VWAkjdK+//vfJ081hRoZN2zo5EHleeUuDI0nqrfSw0zxcJN6LXowC3SkdlNzpLJq22g/gfq5ylv+Sp311ljj/wfDf9u+IFILqwAAAABJRU5ErkJggg== alt="" class="info__bg">   \n            ',
                    r.querySelector(".info__meta"))).innerHTML = this._enableFlash || i !== ds ? o : '\n                        <div class="flash-container">\n                            <p class="info__text">è¯·ä¸è½½ææ°çflashæä»¶</p>\n                            <a\n                                href="http://get.adobe.com/cn/flashplayer/"\n                                target="_blank"\n                                rel="noopener noreferrer"\n                                class="sl-btn"\n                            >ä¸è½½\n                            </a>\n                        </div>\n                    '
                } else
                    t.classList.remove("poster-active")
            }
        }, {
            key: "_removePlayerTips",
            value: function() {
                var e = this.playerEle.querySelector(".sl-player-poster");
                e && e.classList.remove("poster-active")
            }
        }, {
            key: "_getBoardStatus",
            value: function() {
                return this.svgBoard && this.svgBoard._getBoardStatus ? this.svgBoard._getBoardStatus() : cs
            }
        }, {
            key: "_getTech",
            value: function() {
                var e = "hls" === this.type
                  , t = (this.isLive ? Wo : Vo).supportHls();
                return this._isSupportHls = this.isLive && t,
                this._isPlayHlsUrl = this._isSupportHls && e,
                this.isLive ? this._isPlayHlsUrl ? Wo : Dn : Vo
            }
        }, {
            key: "_getNetworkSpeed",
            value: (e = ni(Vt.mark(function e() {
                var t, r, i, n, a, o, s, l = this;
                return Vt.wrap(function(e) {
                    for (; ; )
                        switch (e.prev = e.next) {
                        case 0:
                            if (i = (t = this.speedInfo).url,
                            n = t.pullInterval,
                            a = t.pullCount,
                            o = t.fileSize,
                            void 0 !== (r = t.isOpen) && r) {
                                e.next = 3;
                                break
                            }
                            return e.abrupt("return", -3);
                        case 3:
                            if ("number" == typeof this._lastTestTime) {
                                e.next = 7;
                                break
                            }
                            this._lastTestTime = 0,
                            e.next = 14;
                            break;
                        case 7:
                            if (this._speedTestCount < a && Date.now() - this._lastTestTime > 1e3 * n)
                                return this._speedTestCount += 1,
                                this._lastTestTime = Date.now(),
                                s = 0,
                                e.next = 13,
                                pn(i, o, this._lastTestTime).then(function(e) {
                                    ln("info", ["[æµéæå(" + l._speedTestCount + "æ¬¡)]: ç½é " + (s = e) + "kb/s, æ¶é´ " + l._lastTestTime], l.debug)
                                }).catch(function(e) {
                                    s = -1,
                                    ln("error", ["[æµéå¤±è´¥(" + l._speedTestCount + "æ¬¡)]: æ¶é´ " + l._lastTestTime], l.debug)
                                });
                            e.next = 14;
                            break;
                        case 13:
                            return e.abrupt("return", s);
                        case 14:
                            return e.abrupt("return", -2);
                        case 15:
                        case "end":
                            return e.stop()
                        }
                }, e, this)
            })),
            function() {
                return e.apply(this, arguments)
            }
            )
        }, {
            key: "_onError",
            value: function() {
                var e = (0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}).operation;
                e && this.sunlPlayer && this.isLive && (this.sunlPlayer.stop(),
                3 === e && this._setPlayerTips())
            }
        }, {
            key: "dispose",
            value: function() {
                clearInterval(this.connectPlayerTimer),
                clearTimeout(this._uploadTimer),
                this.svgBoard && this.svgBoard.dispose(),
                this.sunlPlayer && this.sunlPlayer.dispose(),
                this.controlBar && this.controlBar.dispose()
            }
        }, {
            key: "getPlayer",
            value: function() {
                return this.sunlPlayer
            }
        }, {
            key: "getBoard",
            value: function() {
                return this.svgBoard
            }
        }, {
            key: "onBoardReady",
            value: function(e) {
                this.sketchpad.ready && this.sketchpad.ready(e)
            }
        }, {
            key: "onPlayerReady",
            value: function(e) {
                this.camera.ready && this.camera.ready(e)
            }
        }, {
            key: "onChatReady",
            value: function(e) {
                this.chat.ready && this.chat.ready(e)
            }
        }], [{
            key: "_getArraryValueByValue",
            value: function(e, t, r) {
                var i = e.concat(t).sort(function(e, t) {
                    return +e - +t
                })
                  , n = i.indexOf(t);
                return r && i[i.length - 1] === t ? null : i[n - 1 <= 0 ? 0 : n - 1]
            }
        }, {
            key: "_getArrayByValue",
            value: function(e, u) {
                return e.reduce(function(e, t) {
                    var r = Ai(e, 3)
                      , i = r[0]
                      , n = r[1]
                      , a = r[2]
                      , o = Ai(t, 2)
                      , s = o[0]
                      , l = o[1];
                    return s <= u && u < l && (i = t),
                    l < u && (a += l - s,
                    n = s),
                    [i, n, a]
                }, [[], 0, 0])
            }
        }, {
            key: "_getTimeRange",
            value: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : []
                  , t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}
                  , r = !(2 < arguments.length && void 0 !== arguments[2]) || arguments[2]
                  , i = e.length;
                if (0 === i)
                    return [];
                var n = e[0]
                  , a = e[i - 1 <= 0 ? 0 : i - 1]
                  , o = t[r ? n : n[0]]
                  , s = (o = void 0 === o ? {} : o).lSequence
                  , l = t[r ? a : a[0]]
                  , u = (l = void 0 === l ? {} : l).lSequence
                  , c = l.iDuration;
                return [void 0 === s ? 0 : s, (void 0 === u ? 0 : u) + 1e3 * (void 0 === c ? 0 : c)]
            }
        }]),
        B
    }(), bs = function(r) {
        return function(e) {
            function t(e) {
                return ki(this, t),
                Lt(this, (t.__proto__ || B(t)).call(this, yi({}, e, {
                    loginType: r
                })))
            }
            return Ft(t, Ts),
            t
        }()
    };
    return {
        Live: bs("live"),
        Replay: bs("video")
    }
});
